{
  "id": "a05tu7l0ag0pd0",
  "created": "2024-05-15T08:18:36.378Z",
  "closed": "2024-05-21T08:31:08.571Z",
  "duration_minutes": 8652,
  "first_response_minutes": 78,
  "name": "Past ve formě kolapsu editoru komentáře s velkým textem",
  "description": "Ahojte, omylem jsem z clipboardu do textového pole pro psaní komentáře vložil hodně velký text (asi 5500 řádků) a jsem v pasti.... Nemůžu dát Ctrl+Z, můžu dát Ctrl+A, ale delete, nebo backspace způsobí totální zaseknutí stránky (cosi to šrotuje ve scriptu a vytěžuje morbidně procesor). Pokud dám znovu načíst stránku tak se mi zpět načte s tím obr textem v komentáři. Takže nemám možnost co dělat, snad bych musel jít smazat data stránky....",
  "owner": "Lukáš Trunečka",
  "priority": "Normální",
  "surveyquality": "Unknown",
  "surveyterm": "Unknown",
  "type": "Chyba",
  "area": "Bez",
  "comment_stats": {
    "total": 32,
    "from_owner": 13,
    "from_others": 19,
    "unique_authors": 2
  },
  "comments": [
    {
      "creator": "Daniel Dzuro",
      "comment": "Ahoj, chapem, takze je problem s velkym textom.. je tak? Resp vlozenie je ok, ale akonahle ho chces cely oznacit a potom dat delete tak sa to kusne?"
    },
    {
      "creator": "Lukáš Trunečka",
      "comment": "No tak nějak.... Možná v tom hrálo roli i to, že jsem intuiivně zmáčkl Ctrl+Z... to nezafungovalo, tak pak Ctrl+A a Backspace.... protože když jsem si to zkusil znova, tak mi to bez toho Ctrl+Z fungovalo...."
    },
    {
      "creator": "Daniel Dzuro",
      "comment": "ok, predal som na vyvoj.. dik za report.. chces nechat otvorene?"
    },
    {
      "creator": "Lukáš Trunečka",
      "comment": "Ano..."
    },
    {
      "creator": "Daniel Dzuro",
      "comment": "Prosim Ta, vies mi napisat pocet znakov o kolko islo v tom komentari? Lebo moze ist o riadok plny textu alebo aj par znakov.."
    },
    {
      "creator": "Daniel Dzuro",
      "comment": "- skusal som to nejak odhadom tak z obrazka mi vyslo ze mas priemerne 30 znakov na riadok x 5500 riadkov, tak to mame 165000 znakovň - tento objem dat som sa snazil dat do konkurencnych nastrojov a bol to problem aj tam, jeden nastroj chcel reload a ani neulozil, druhy neumoznil vlozit taky objem - metodou polenia intervalov som sa dostal na nejaku hranicu 45 000, kto oba nastroje zvladli aj ctrl+z a aj postnut - skusal som do dat aj k nam do komentara, ctrl+z nefunguje (to vieme a nefunguje to aj pri 10 znakoch) ale ctrl+a a del fungoval bezu problemov - moj a asi aj Allanov navrh je obmedzit pocet znakov co myslis?"
    },
    {
      "creator": "Daniel Dzuro",
      "comment": "este inak, asi ide o speci text, lebo som nakoniec skusil aj k nam vlozil 186000 znakov a ctrl+a a potom DEL mi zafungoval mam teda podozrenie ze je tam nejaka cast kodu, ktora spobuje problem.."
    },
    {
      "creator": "Lukáš Trunečka",
      "comment": "Počítač: S-KSOCLOUD-56 VKA/console/VKA\\VACLAVK Uživatel: KSWPVKA-Václav Kadlec Vzorová skupina: Verze KARAT: 23.002 Operační systém: VKA|Microsoft Windows NT 10.0.19045|64bit OS|64bit Process|12 core|FW4.8/533325| Operační systém: S-KSOCLOUD-56|Microsoft Windows NT 10.0.-20348|64bit OS|64bit Process|4 core|FW4.8/528449| Příkazový řádek:  TERMOPAN#U=;#P=;#IUL=VKA\\VACLAVK;#STDT=10:48:11;#IUSID=Fn20GEVIP10gZDYpr8P7ms9QVIRbXFgw5djD2c8xbKk=;#PCNAME=VKA/console/VKA\\VACLAVK;#DOCUMENTSDIR=C:\\Users\\VACLAVK\\Documents;#TMPDIR=C:\\Users\\VACLAVK\\AppData\\Local\\KARAT Software\\Karat Client\\Temp\\;#ERRDIR=C:\\Users\\VACLAVK\\AppData\\Local\\KARAT Software\\Karat Client\\Errors\\;#APPDATADIR=C:\\Users\\VACLAVK\\AppData\\Local\\KARAT Software\\Karat Client;#OSINFO=VKA|Microsoft Windows NT 10.0.19045|64bit OS|64bit Process|12 core|FW4.8/533325|;#APPGUID=ab12ec20-ebc2-44d2-981e-55211d4adf66;#THREADCULTURE=CZ;#CN=cs-CZ; Příkazový řádek2: \"C:\\ProgramData\\KARAT Software\\Karat Server\\TERMOPAN\\\"  TERMOPAN#U=;#P=;#IUL=VKA\\VACLAVK;#STDT=10:48:11;#IUSID=Fn20GEVIP10gZDYpr8P7ms9QVIRbXFgw5djD2c8xbKk=;#PCNAME=VKA/console/VKA\\VACLAVK;#DOCUMENTSDIR=C:\\Users\\VACLAVK\\Documents;#TMPDIR=C:\\Users\\VACLAVK\\AppData\\Local\\KARAT Software\\Karat Client\\Temp\\;#ERRDIR=C:\\Users\\VACLAVK\\AppData\\Local\\KARAT Software\\Karat Client\\Errors\\;#APPDATADIR=C:\\Users\\VACLAVK\\AppData\\Local\\KARAT Software\\Karat Client;#OSINFO=VKA|Microsoft Windows NT 10.0.19045|64bit OS|64bit Process|12 core|FW4.8/533325|;#APPGUID=ab12ec20-ebc2-44d2-981e-55211d4adf66;#THREADCULTURE=CZ;#CN=cs-CZ; Typ serveru: MS Verze serveru: 1500424902642220221211332019642022100064020348 Plná verze serveru: Microsoft SQL Server 2019 (RTM-CU17) (KB5016394) - 15.0.4249.2 (X64) Jul 22 2022 12:11:33 Copyright (C) 2019 Microsoft Corporation Express Edition (64-bit) on Windows Server 2022 Standard 10.0 <X64> (Build 20348: ) (Hypervisor) Datum aktuálního klienta: 2024-05-06 13:29:18.862 Datum přihlašovacího dialogu: 2024-05-06 bude změněno při změně dne Datum připojení server: 2024-05-06 10:46:19.374 Datum připojení klienta: 2024-05-06 10:49:33.874 Datum otevření hlavního okna: 2024-05-06 10:49:33.921 Připojené moduly: ADMIN,AGENT,ASNET,ATTCH,BANKA,DOCS,DPHCZ,DPHEV,EETCZ,EXIMP,FAKP,FSAL,FV,GANTT,GDPR,INVEN,KARAT,KAZAS,MAJ,MAN,MZDY,ODBYT,ORG,ORGS,O_CEN,O_OBJ,O_SKL,PARAM,PERS,POKL,PUIN,SEKR,TERM,TMPRS,UCE,UCEOO,UCEPS,UCEVN,UK,VYKAZ,V_TER,V_TPV,V_ZAK,V_ZMT,ZDRKO,ZDROJ Moduly hlavní nabídky: ADMIN,AGENT,ATTCH,BANKA,DPHCZ,DPHEV,EETCZ,EXIMP,FAKP,FSAL,FV,GDPR,INVEN,KARAT,KAZAS,MAJ,MAN,MZDY,ODBYT,ORG,ORGS,O_CEN,O_OBJ,O_SKL,PARAM,PERS,POKL,PUIN,SEKR,TERM,TMPRS,UCE,UCEOO,UCEPS,UCEVN,UK,VYKAZ,V_TER,V_TPV,V_ZAK,V_ZMT,ZDRKO,ZDROJ, Moduly z licence: ADMIN,AGENT,ATTCH,BANKA,DPHCZ,DPHEV,EETCZ,EXIMP,FAKP,FSAL,FV,GDPR,INVEN,KARAT,KAZAS,MAJ,MAN,MZDY,ODBYT,ORG,ORGS,O_CEN,O_OBJ,O_SKL,PARAM,PERS,POKL,PUIN,SEKR,TERM,TMPRS,UCE,UCEOO,UCEPS,UCEVN,UK,VYKAZ,V_TER,V_TPV,V_ZAK,V_ZMT,ZDRKO,ZDROJ, Všechny moduly z licence: ADMIN,AGENT,ASNET,ATTCH,BANKA,DOCS,DPHCZ,DPHEV,EETCZ,EXIMP,FAKP,FSAL,FV,GANTT,GDPR,INVEN,KARAT,KAZAS,MAJ,MAN,MZDY,ODBYT,ORG,ORGS,O_CEN,O_OBJ,O_SKL,PARAM,PERS,POKL,PUIN,SEKR,TERM,TMPRS,UCE,UCEOO,UCEPS,UCEVN,UK,VYKAZ,V_TER,V_TPV,V_ZAK,V_ZMT,ZDRKO,ZDROJ, Připojené knihovny: Připojené knihovny ses.: Načtené knihovny: Období ORG: 202401 24 Období UCE: 202401 24 Období zvolené: Hlavní kurzovní lístek: HLA Místní měna: CZK Kč ID instalace: 01 Státní úroveň: cz Partnerská úroveň: Firma název: Termopan s.r.o. Firma v místě: Polná Firma DIČ: CZ60707631 Firma jméno: Firma příjmení: Firma dodatek: s.r.o. Firma ulice: Zahradní 843 Firma PSČ a obec: 588 13 Polná Firma okres: 3707 Firma stát: CZ Firma finanční úřad: Firma ID měny: CZK IČO: 60707631 Firma jazyk: CZ Jazyk programu: CZ Jazyk pro data: CZ Jazyky z licence: CZ Tiskárna výchozí Windows: Brother DCP-7055W Printer Tiskárna výchozí Aplikace: Brother DCP-7055W Printer Tiskárna výchozí graf.: Brother DCP-7055W Printer Tiskárna výchozí text.: Brother DCP-7055W Printer Tisk výchozí: Státní adresář: cz Partnerský adresář: Firma licence: termopan Firma licence název: Termopan s.r.o. Firma licence pořadí: 1 Firma 1 ID: TERMOPAN Adresář KARAT APP server: c:\\ProgramData\\KARAT Software\\Karat Server\\Vzor\\ Adresář KARAT APP client: C:\\ProgramData\\KARAT Software\\Karat Server\\TERMOPAN\\ Adresář KARAT Dokumentace: c:\\ProgramData\\KARAT Software\\Karat Server\\Vzor\\ Adresář Windows: C:\\Windows\\ Adresář Temp: C:\\ProgramData\\KARAT Software\\Karat Server\\TERMOPAN\\Temp\\ab12ec20-ebc2-44d2-981e-55211d4adf66\\ Adresář pro zápis: C:\\ProgramData\\KARAT Software\\Karat Server\\TERMOPAN\\ Adresář Aktuální: C:\\ProgramData\\KARAT Software\\Karat Server\\TERMOPAN Adresář dokumentů klienta: C:\\Users\\VACLAVK\\Documents\\ Adresář aplikačních dat klienta: C:\\Users\\VACLAVK\\AppData\\Local\\KARAT Software\\Karat Client\\ Adresář dočasných souborů klienta: C:\\Users\\VACLAVK\\AppData\\Local\\KARAT Software\\Karat Client\\Temp\\ab12ec20-ebc2-44d2-981e-55211d4adf66\\ DBMS     : MSS Microsoft SQL Server Server   : 192.168.10.247,1433 Database : KARAT_TERMOPAN User     : KARAT_TERMOPAN_KSWPVKA/KSWPVKA LastErr  : SQL[0] Technická podpora do : 14.03.2025 Tolerance TP do      : 13.04.2025 Info      : MODIFYWIN=ON MODIFYREP=ON Info      : MODIFYDIR=ON MODIFYMENU=ON Info      : MODIFYTABS=ON MODIFYDLL=ON TEXTPRINT=ON Info      : SPRAVCEDB=ON DEVELOPER=DeveloperImplement Info      : SEZNAMROWS=350 Server Extern CS: 0 Server Extern DLL: 0 Server Extern Type: 0 Client Extern CS: 0 Client Extern XAML: 0 Client Extern DLL: 0 Client Extern Type: 0 ModulADMIN     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulAGENT     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulASNET     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulATTCH     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulBANKA     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ano, měsíc předběžné uzávěrky=Ano ModulDOCS      , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulDPHCZ     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulDPHEV     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ano, měsíc předběžné uzávěrky=Ano ModulEETCZ     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulEXIMP     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulFAKP      , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ano, měsíc předběžné uzávěrky=Ano ModulFSAL      , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ano, měsíc předběžné uzávěrky=Ano ModulFV        , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ano, měsíc předběžné uzávěrky=Ano ModulGANTT     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulGDPR      , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulINVEN     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulKARAT     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulKAZAS     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulMAJ       , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ano, měsíc předběžné uzávěrky=Ano ModulMAN       , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulMZDY      , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ano, měsíc předběžné uzávěrky=Ano ModulODBYT     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ano, měsíc předběžné uzávěrky=Ano ModulORG       , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulORGS      , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulO_CEN     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulO_OBJ     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulO_SKL     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ano, měsíc předběžné uzávěrky=Ano ModulPARAM     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulPERS      , fr=24, fr=2024-01-01 - 2024-12-31, období=202403, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulPOKL      , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ano, měsíc předběžné uzávěrky=Ano ModulPUIN      , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulSEKR      , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulTERM      , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulTMPRS     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulUCE       , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulUCEOO     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ano, měsíc předběžné uzávěrky=Ano ModulUCEPS     , fr=24, fr=2024-01-01 - 2024-12-31, období=202400, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulUCEVN     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ano, měsíc předběžné uzávěrky=Ano ModulUK        , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulVYKAZ     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulV_TER     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulV_TPV     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulV_ZAK     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ano, měsíc předběžné uzávěrky=Ano ModulV_ZMT     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ne, měsíc předběžné uzávěrky=Ano ModulZDRKO     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ano, měsíc předběžné uzávěrky=Ano ModulZDROJ     , fr=24, fr=2024-01-01 - 2024-12-31, období=202401, měsíc uzávěrky=Ano, měsíc předběžné uzávěrky=Ano -------------------------------------------- Otevřená okna: Workspace: Objednávky přijaté (O_OBJ/200705051639068503094766) Window: Seznam Objednávky přijaté (O_OBJ disabled visible c__w_iftseznam tab=op_zahlavi) Window: VolbaSestavy Sestava - Štítky (O_OBJ disabled visible c__w_iftrepmaker) Window: Tisk Tisk: Štítky ( enabled visible c__w_ifttisk) Workspace: Rozpad dílců (V_TPV/202311150958528994779223) Window: Seznam Rozpad dílců (V_TPV disabled visible c__w_iftseznam tab=user_rozpad_dilcu) Window: DetailEditace Rozpad dílců (V_TPV disabled visible c__w_iftdetail tab=user_rozpad_dilcu) Window: Neuvedeno Editor funkčnosti detailů - user_rozpad_dilcu/000 (V_TPV enabled visible c__as_detail_dirs_editor) Workspace: Dávky exportu (V_TPV/202311192045055431094551) Window: Seznam Dávky exportu (V_TPV disabled visible c__w_iftseznam tab=user_davky) Window: Seznam Přílohy k tabulce: Dávky exportu, záznam: 20240423-00033 (ATTCH enabled visible c__w_iftseznam_prilohy tab=attach_store) Workspace: Rozpad dílců (V_TPV/202311150958528994779223) Window: Seznam Rozpad dílců (V_TPV disabled visible c__w_iftseznam tab=user_rozpad_dilcu) Window: Neuvedeno Odkazy na definici menu a tabulek (V_TPV disabled visible c__w_menu_odkaz) Window: Seznam Definice menu (filtrováno dle okna) (ADMIN disabled visible c__w_iftseznam tab=menu_system) Window: Seznam Systém - menu (ADMIN disabled visible c__w_iftseznam tab=menu_system) Window: DetailEditace Systém - menu (ADMIN enabled visible c__w_iftdetail tab=menu_system) Workspace: Editor triggerů (ADMIN/200705041441282166451696) Window: Seznam Systém - triggery (ADMIN disabled visible c__w_iftseznam tab=sd_triggers) Window: DetailEditace Systém - triggery - user_rozpad_dilcu_U_3 (ADMIN enabled visible c__w_iftdetail tab=sd_triggers) Workspace: Objednávky přijaté (O_OBJ/200705051639068503094766) Window: Seznam Objednávky přijaté (O_OBJ enabled visible c__w_iftseznam tab=op_zahlavi) Workspace: Rozpad dílců (V_TPV/202311150958528994779223) Window: Seznam Rozpad dílců (V_TPV enabled visible c__w_iftseznam tab=user_rozpad_dilcu) Workspace: Objednávky přijaté (O_OBJ/200705051639068503094766) Window: Seznam Objednávky přijaté (O_OBJ disabled visible c__w_iftseznam tab=op_zahlavi) Window: VolbaSestavy Sestava - Štítky (O_OBJ disabled visible c__w_iftrepmaker) Window: Tisk Tisk: Štítky ( enabled visible c__w_ifttisk) -------------------------------------------- Workspace: Objednávky přijaté (O_OBJ/200705051639068503094766) Window: Seznam Objednávky přijaté (O_OBJ disabled visible c__w_iftseznam tab=op_zahlavi) w_ift\tclassname\tw_iftseznam w_ift\tclasses\t.object.karatbaseobject.karatobject.karatcontrol.karatwindow.c__w_ift.c__w_filter_parent.c__w_iftseznam w_ift\tlink\tkarat://termopan:@0/mnid/o_obj/200705051639068503094766?menu=0&nss=0 w_ift\tparametr ID_MENU=MNID/O_OBJ/200705051639068503094766 TYP=SEZNAM CLASS=w_iftseznam AKCE=op_zahlavi ID_SAVE=op_zahlavi SEZ_TABULKA=op_zahlavi SEZ_SQL=    #NOTAB=op_zahlavi;     select *+,             op_rady.op_denik_pop AS op_rady_8848_op_denik_pop /* \\:NV */,             op_rady.op_rada_pop AS op_rady_8848_op_rada_pop /* \\:NV */,             op_rady.op_denik_nab AS op_rady_8848_op_denik_nab /* \\:NV */,             op_rady.op_rada_nab AS op_rady_8848_op_rada_nab /* \\:NV */,             op_rady.op_denik_op AS op_rady_8848_op_denik_op /* \\:NV */,             op_rady.op_rada_op AS op_rady_8848_op_rada_op /* \\:NV */,             op_rady.op_denik_ov AS op_rady_8848_op_denik_ov /* \\:NV */,             op_rady.op_rada_ov AS op_rady_8848_op_rada_ov /* \\:NV */,             op_rady.op_denik_vl AS op_rady_8848_op_denik_vl /* \\:NV */,             op_rady.op_rada_vl AS op_rady_8848_op_rada_vl /* \\:NV */,             op_rady.op_denik_prev AS op_rady_8848_op_denik_prev /* \\:NV */,             op_rady.op_rada_prev AS op_rady_8848_op_rada_prev /* \\:NV */,             op_rady.denik_posty AS op_rady_8848_denik_posty /* \\:NV */,             op_rady.rada_posty AS op_rady_8848_rada_posty /* \\:NV */,             op_rady.vydej_neods AS op_rady_8848_vydej_neods /* \\:NV */,             op_rady.fv_denik_zal AS op_rady_8848_fv_denik_zal /* \\:NV */,             op_rady.fv_rada_zal AS op_rady_8848_fv_rada_zal /* \\:NV */,             op_rady.zal_fa_nast AS op_rady_8848_zal_fa_nast /* \\:NV */,             op_rady.zal_fa_pocet AS op_rady_8848_zal_fa_pocet /* \\:NV */,             op_rady.tpv_denik_kalk AS op_rady_8848_tpv_denik_kalk /* \\:NV */,             op_rady.tpv_rada_kalk AS op_rady_8848_tpv_rada_kalk /* \\:NV */,             op_rady.v_zak_denik AS op_rady_8848_v_zak_denik /* \\:NV */,             op_rady.v_zak_rada AS op_rady_8848_v_zak_rada /* \\:NV */,             op_rady.op_denik_parag AS op_rady_8848_op_denik_parag /* \\:NV */,             op_rady.op_rada_parag AS op_rady_8848_op_rada_parag /* \\:NV */,             op_rady.parag_zpusob AS op_rady_8848_parag_zpusob /* \\:NV */,             op_rady.imp_ordrsp_dkl_10 AS opr_imp_ordrsp_dkl_10 /* \\:NV */,             op_rady.imp_ordrsp_dkl_20 AS opr_imp_ordrsp_dkl_20 /* \\:NV */,             op_zahlavi.cena_bez_dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS cena_bez_dph_mu /* \\:Sop_zahlavi.cena_bez_dph:HCena bez DPH [MÚ] */,             op_zahlavi.dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS dph_mu /* \\:Sop_zahlavi.dph:HDPH [MÚ] */,             op_zahlavi.cena_celkem * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS cena_celkem_mu /* \\:Sop_zahlavi.cena_celkem:HCena celkem [MÚ] */,             op_zahlavi.castka_zal * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS castka_zal_mu /* \\:Sop_zahlavi.castka_zal:HČástka zálohy [MÚ] */,             #TO_DUAL_ROUND(op_zahlavi.cena_bez_dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS cena_bez_dph_dual /* \\:Sop_zahlavi.cena_bez_dph:HCena bez DPH [MD] */,             #TO_DUAL_ROUND(op_zahlavi.dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS dph_dual /* \\:Sop_zahlavi.dph:HDPH [MD] */,             #TO_DUAL_ROUND(op_zahlavi.cena_celkem * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS cena_celkem_dual /* \\:Sop_zahlavi.cena_celkem:HCena celkem [MD] */,             #TO_DUAL_ROUND(op_zahlavi.castka_zal * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS castka_zal_dual /* \\:Sop_zahlavi.castka_zal:HČástka zálohy [MD] */,             mistni.id_mistni AS id_mistni /* \\:Smenycis_mistni.id_mistni */,             mistni.id_dualni AS id_dualni /* \\:Smenycis_mistni.id_dualni */,             dba.op_zahlavi_vykr_skl_fce(op_zahlavi.doklad) AS vykr_skl /* \\:Sop_zahlavi.vykryto:HSkladem */,             coalesce((select count(1) from dba.op_zahlavi_ver ver with(index(pk_op_zahlavi_ver)) where ver.doklad = op_zahlavi.doklad), 0) + 1 AS pocet_ver /* \\:Sop_zahlavi_ver.ver_poradi:HVerze */,             case when exists(select 1 from dba.parcisudaje pu with(index(parcisudaje_typ)) where pu.typ = 'ORDRSP' and pu.id_partnera = op_zahlavi.id_partnera) then 1 else 0 end AS par_export /* \\:Sop_zahlavi.export:NV */         from dba.op_zahlavi op_zahlavi,             dba.op_rady op_rady with(index(pk_op_rady)),             dba.menycis_mistni mistni with(index(pk_menycis_mistni))         where op_rady.fiskalni_rok = op_zahlavi.fiskalni_rok             and op_rady.denik = op_zahlavi.denik             and op_rady.rada = op_zahlavi.rada             and mistni.fiskalni_rok = op_zahlavi.fiskalni_rok SEZ_CLASS=w_iftseznam_doklad SEZ_TITLE=Objednávky přijaté SEZ_MODIFY= datawindow.detail.color=\"255 \t if(vyrobeno=pol_k_vyr and pol_k_vyr > 0 and op_zahlavi.doklad_vl = '',16748574,if(storno = 1,8421504,if(vyrizeno = 1,32896,if(vykr_skl = 1,65280,if(vykryto = 1,32768,if(odsouhlaseno = 1,57343,if(potvrzeno = 1,8454143,if(potvrzeno = 0,16777215,1090519039))))))))\" SEZ_PODMINKA=op_zahlavi.druh = 30 USER_BEGIN ;#SETMENUID=A/O_OBJ/op_zahlavi/200705051639068503094766/10/40/0;    #XSUB=\\AKCE^OBJ; #MNUMAKCE=200705051639068503094766;;#SETMENUID_END;; #WORKSPACE_TITLE_BEGIN;Objednávky přijaté#WORKSPACE_TITLE_END;; #WORKSPACE_MODULE=O_OBJ;; #WORKSPACE_MNID=200705051639068503094766;;;#SETMENUID=O/O_OBJ/10/op_zahlavi//200705141135552301933414/15/40/0;    #ENAB_ADD_IN_VIEW; #HIDEBLANKREC; #STANDARDSORT; #TL_FUNKCE_SEZNAM; #COMBO_ID1=stav; #COLUMN1=-; #POLOZKY1=Nepřístupné\\1\\op_zahlavi.opr_prov = 0^Přístupné\\2\\op_zahlavi.opr_prov = 1^Vyřízeno\\3\\(op_zahlavi.vyrizeno = 1 or op_zahlavi.vyrizeno_kl = 1)^Odsouhlaseno\\4\\op_zahlavi.odsouhlaseno = 1^Nevyřízeno\\5\\(op_zahlavi.vyrizeno = 0 and op_zahlavi.vyrizeno_kl = 0)^Neodsouhlaseno\\6\\op_zahlavi.odsouhlaseno = 0; #POPISBEZ1=Stav; #COMBO_ID2=vykryto; #COLUMN2=; #POLOZKY2=Vůbec\\0\\op_zahlavi.vykryto = 0 and op_zahlavi.vyrizeno <> 1^Nevykryto\\4\\op_zahlavi.vykryto <> 1 and op_zahlavi.vyrizeno <> 1^Vykryto částečně\\2\\op_zahlavi.vykryto = 2 and op_zahlavi.vyrizeno <> 1^Vykryto\\1\\op_zahlavi.vykryto = 1 or op_zahlavi.vyrizeno = 1; #POPISBEZ2=Vykryto; #COMBO_ID3=dodano; #COLUMN3=-; #POLOZKY3=Vůbec\\0\\op_zahlavi.dodano = 0 and op_zahlavi.vyrizeno_kl <> 1^Částečně\\1\\op_zahlavi.dodano = 2 and op_zahlavi.vyrizeno_kl <> 1^Nedodané\\2\\op_zahlavi.dodano in (0, 2) and op_zahlavi.vyrizeno_kl <> 1^Zcela dodané\\3\\op_zahlavi.dodano = 1^Vyřízené ručně\\4\\op_zahlavi.vyrizeno_kl = 1; #POPISBEZ3=Dodáno; #COMBO_ID4=dodano_predb; #COLUMN4=coalesce(op_zahlavi.dodano_predb, 0); #POLOZKY4=Předběžně dodáno NE\\0^Předběžně dodáno ANO\\1^Předběžně dodáno ČÁSTEČNĚ\\2; #POPISBEZ4=Předběžně dodáno; #COMBO_ID5=storno; #COLUMN5=-; #POLOZKY5=Nestornované\\1\\op_zahlavi.storno <> 1^Stornované\\2\\op_zahlavi.storno = 1; #POPISBEZ5=Storno; #DEFAULT5=1; #COMBO_ID6=dopravce; #COLUMN6=-; #POLOZKY6=Bez dopravce\\1\\op_zahlavi.id_partnera_dop = ''^S dopravcem\\2\\op_zahlavi.id_partnera_dop <> ''; #POPISBEZ6=Dopravce; #COMBO_ID7=spz; #COLUMN7=-; #POLOZKY7=Bez SPZ\\1\\op_zahlavi.spz = ''^S SPZ\\2\\op_zahlavi.spz <> ''; #POPISBEZ7=SPZ; #COMBO_ID8=doklad_fv_zal; #COLUMN8=-; #POLOZKY8=Bez zálohové FV\\1\\op_zahlavi.doklad_fv_zal = ''^Se zálohovou FV\\2\\op_zahlavi.doklad_fv_zal <> ''; #POPISBEZ8=Zálohová FV; #COMBO_ID9=ramcovy; #COLUMN9=coalesce(op_zahlavi.ramcovy, 0); #POLOZKY9=Rámcový doklad\\1^Běžný doklad\\0; #POPISBEZ9=Rámcový doklad; #COMBO_ID10=expedovat; #COLUMN10=op_zahlavi.expedovat_z; #POLOZKY10=Expedovat\\1^Neexpedovat\\0; #POPISBEZ10=Expedovat; #COMBO_ID11=id_meny; #COLUMN11=op_zahlavi.id_meny; #POLOZKY11=select mena.id_meny, '', 'op_zahlavi.id_meny = ' + char(39) + mena.id_meny + char(39) from dba.menycis mena with(index(pk_menycis)) where mena.id_meny <> '' order by mena.id_meny; #POPISBEZ11=Měna; #COMBO_BEGIN; #COMBO_ID=export; #COLUMN=coalesce(op_zahlavi.export, 0); #POLOZKY=Ne\\0^Exportovat\\1^Exportováno\\2; #POPISBEZ=Exportovat potvrzení; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=neex_vpr; #COLUMN=-; #POLOZKY=Neexistuje výrobní pŕíkaz\\0\\op_rady.v_zak_denik <> '' and op_rady.v_zak_rada <> '' and op_zahlavi.storno = 0 and op_zahlavi.druh = 30 and ((op_zahlavi.potvrzeno = 1 and coalesce(op_rady.vydej_neods, 0) = 2) or (op_zahlavi.odsouhlaseno = 1 and coalesce(op_rady.vydej_neods, 0) = 0) or coalesce(op_rady.vydej_neods, 0) = 1) and exists(select 1 from dba.op_polozky opp with(index(pk_op_polozky)) where opp.doklad = op_zahlavi.doklad and opp.typ_polozky in (3, 7, 15) and opp.storno = 0 and opp.vyrizeno = 0 and opp.vykryto in (0, 2) and not exists(select 1 from dba.v_opv opv with(index(v_opv_objed)), dba.v_opvz opvz with(index(pk_v_opvz)) where opv.objednavka = opp.doklad and opv.polobj = opp.polozka and opvz.doklad = opv.doklad and opvz.storno = 0))^; #POPISBEZ=Existence výrobního příkazu; #COMBO_VISIBLE=islicmodul('V_ZAK'); #COMBO_END; #COMBO_BEGIN; #COMBO_ID=nedodano_dnes; #COLUMN=-; #POLOZKY=Vůbec, po termínu dodání\\0\\op_zahlavi.dodano = 0 and op_zahlavi.vyrizeno_kl <> 1 and op_zahlavi.dat_dodani < getdate()^Částečně, po termínu dodání\\1\\op_zahlavi.dodano = 2 and op_zahlavi.vyrizeno_kl <> 1 and op_zahlavi.dat_dodani < getdate()^Nedodané, po termínu dodání\\2\\op_zahlavi.dodano in (0, 2) and op_zahlavi.vyrizeno_kl <> 1 and op_zahlavi.dat_dodani < getdate(); #POPISBEZ=Nedodané po termínu dodání; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=nedodano_ods; #COLUMN=-; #POLOZKY=Vůbec, po původním termínu dodání\\0\\op_zahlavi.dodano = 0 and op_zahlavi.vyrizeno_kl <> 1 and coalesce(nullif(op_zahlavi.dat_dodani_ods, convert(#BY(datumy.datum), '1901-01-01')), op_zahlavi.dat_dodani) < getdate()^Částečně, po původním termínu dodání\\1\\op_zahlavi.dodano = 2 and op_zahlavi.vyrizeno_kl <> 1 and coalesce(nullif(op_zahlavi.dat_dodani_ods, convert(#BY(datumy.datum), '1901-01-01')), op_zahlavi.dat_dodani) < getdate()^Nedodané, po původním termínu dodání\\2\\op_zahlavi.dodano in (0, 2) and op_zahlavi.vyrizeno_kl <> 1 and coalesce(nullif(op_zahlavi.dat_dodani_ods, convert(#BY(datumy.datum), '1901-01-01')), op_zahlavi.dat_dodani) < getdate(); #POPISBEZ=Nedodané po původním termínu dodání; #COMBO_END; #NO_DOKLAD_LEGEND; #LEGEND=#DOKL_STORNO:Stornovaný doklad:Fstorno = 1; #LEGEND=#DOKL_UZAV:Vyřízený doklad:Fvyrizeno = 1; #LEGEND=#O_OBJ_VYKR_SKL:Doklad vykrytý skladem:Fvykr_skl = 1; #LEGEND=#DOKL_SCHVAL:Vykrytý doklad:Fvykryto = 1; #LEGEND=#O_OBJ_ODS:Odsouhlasený doklad:Fodsouhlaseno = 1; #LEGEND=#O_OBJ_POT:Potvrzený doklad:Fpotvrzeno = 1; #LEGEND=#O_OBJ_NEPOT:Nepotvrzený doklad:Fpotvrzeno = 0;;#SETMENUID_END;;;#SETMENUID=O/O_OBJ/10/op_zahlavi//202307031504083938379356/15/30/0;#DO_SEZ_SQL; #SEZ_SQL_ADD3000=(select count(op_polozky.user_vyrobeno) from dba.op_polozky op_polozky with(index(pk_op_polozky)) where op_polozky.doklad = op_zahlavi.doklad and op_polozky.user_vyrobeno=1 and left(op_polozky.karta,1)<>'S') AS vyrobeno /*\\:Sop_zahlavi.dodanych:HVyrobeno:NV*/; #SEZ_SQL_ADD3001=(select count(op_polozky.karta) from dba.op_polozky op_polozky with(index(pk_op_polozky)) where op_polozky.doklad = op_zahlavi.doklad and left(op_polozky.karta,1)<>'S') AS pol_k_vyr /*\\:Sop_zahlavi.dodanych:HPoložek k vyrobě:NV*/; #SEZ_SQL_ADD3002=(select parcis.nazev from dba.parcis parcis with(index(pk_parcis)) where parcis.id_partnera=op_zahlavi.id_investora) AS investor_nazev /*\\:Sparcis.nazev:HNázev partnera F*/; #SEZ_SQL_ADD3003=(select count(attach_store.poradi) from dba.attach_store attach_store with(index(pk_attach_store)) where attach_store.pk=op_zahlavi.doklad and attach_store.att_class='TPV') AS attpocetpdf/*\\:Sattach_access.id:HA-pdf:NV*/; #COMPUTEADD3000=opattpdf=bitmap(case(attpocetpdf when 0 then '' else 'path(PathAttachLevelStatus8),color(20),tooltip(PDF příloha OP)')):HA-OP pdf:F:NS; #LEGEND=rgb(30,144,255):Všechny položky vyrobeny:F1:vyrobeno=pol_k_vyr and pol_k_vyr > 0 and op_zahlavi.doklad_vl = '';;#SETMENUID_END;;#ALL_ADD_TYPES=SEZNAM_op_zahlavi,;;#SEZNAM_DOKLAD; #STANDARDSORT;#HIDEBLANKREC;#ENAB_ADD_IN_VIEW;#ENAB_DELETE_IN_VIEW;#ENAB_FAST_PREV_IN_VIEW;#SEZ_SQL_SLOUPCEADD;#SEZ_SQL_COMPUTEADD; USER_END w_ift\tparametr/25 01ID_MENU=MNID/O_OBJ/200705141135550577021154 01BUTTON_TITLE=Zdrojový doklad 01TYP=SEZNAM_DOKLAD 01USER_BEGIN ;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135550577021154/25/40/0;  #NOEDIT_EVAL_LEFT=doklad_gen = ''; #ID_MODULU=id_modulu_gen; #AGENDA=agenda_gen; #DOKLAD=doklad_gen; #NOFR; #NOSAVESORT; #DRUH_KONTACE=DK;;#SETMENUID_END; 01USER_END 02ID_MENU=MNID/O_OBJ/200705141135559069887642 02USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135559069887642/25/40/0;;#SETMENUID_END; 03ID_MENU=MNID/O_OBJ/200705141135559784608173 03BUTTON_TITLE=Stav rámcové objednávky 03TYP=SEZNAM 03AKCE=op_polozky_stav_ramc 03SEZ_TABULKA=op_polozky 03SEZ_VAZBA=TRUE 03SEZ_VAZBA_COLUMN1=doklad 03USER_BEGIN ;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135559784608173/25/40/0;    #NOEDIT_EVAL_LEFT=ramcovy = 0 or isnull(ramcovy); #NOADDTABMENU;;#SETMENUID_END; 03USER_END 04ID_MENU=MNID/O_OBJ/200705141135557425792829 04USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135557425792829/25/40/0;;#SETMENUID_END; 05ID_MENU=MNID/O_OBJ/200705141135552608077648 05BUTTON_TITLE=DPH dokladu 05TYP=SEZNAM 05SEZ_TABULKA=op_dph 05SEZ_VAZBA=TRUE 05SEZ_VAZBA_COLUMN1=doklad 05USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135552608077648/25/40/0;;#SETMENUID_END; 06ID_MENU=MNID/O_OBJ/200705141135556169550149 06BUTTON_TITLE=Přegeneruj DPH dokladu 06TYP=SQLCOMMAND 06USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135556169550149/25/40/0;    #PERCENT_OFF; #MULTI_BUTTON; #PROCESBAR; #PROCESTEXT=Přegenerování DPH dokladu...; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set xcmd = char(9) + 'SAVED', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 06USER_END 07ID_MENU=MNID/O_OBJ/200705141135557563410519 07USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135557563410519/25/40/0;;#SETMENUID_END; 08ID_MENU=MNID/O_OBJ/200705141135555001581489 08BUTTON_TITLE=Poplatky dokladu 08TYP=SEZNAM 08SEZ_TABULKA=op_popl 08SEZ_VAZBA=TRUE 08SEZ_VAZBA_COLUMN1=doklad 08NOEDIT=TRUE 08USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135555001581489/25/40/0;    #NOEDIT_EVAL_LEFT=elektroodpad <> 1;;#SETMENUID_END; 09ID_MENU=MNID/O_OBJ/200705141135554865375564 09BUTTON_TITLE=Přegeneruj Poplatky dokladu 09TYP=SQLCOMMAND 09USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135554865375564/25/40/0;    #NOEDIT_EVAL_LEFT=elektroodpad <> 1; #PERCENT_OFF; #MULTI_BUTTON; #PROCESBAR; #PROCESTEXT=Přegenerování Poplatků dokladu...; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set xcmd = '#ELOD;', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 09USER_END 10ID_MENU=MNID/O_OBJ/200811040743282641997736 10USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200811040743282641997736/25/40/0;;#SETMENUID_END; 11ID_MENU=MNID/O_OBJ/201506121445520219100280 11BUTTON_TITLE=Nastav Fixaci cen 11TYP=SQLCOMMAND 11USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=op_polozky;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201506121445520219100280/25/40/0;  #NOEDIT_EVAL_LEFT=opr_prov = 0 or storno = 1 or vyrizeno = 1; #PERCENT_OFF; #MULTI_BUTTON; #PROCESBAR; #PROCESTEXT=Nastavení Fixace cen...; #SQLCOMMAND1_BEGIN; update\tdba.op_polozky set\tcena_rucne = 1, autor = user, ts = getdate() from\tdba.op_polozky opp with(index(pk_op_polozky)) where\topp.doklad = %doklad% and\tcoalesce(opp.cena_rucne, 0) <> 1 #SQLCOMMAND1_END;;#SETMENUID_END; 11USER_END 12ID_MENU=MNID/O_OBJ/201506121449349322316690 12USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201506121449349322316690/25/40/0;;#SETMENUID_END; 13ID_MENU=MNID/O_OBJ/200811040743492516121147 13BUTTON_TITLE=Změna &měny operace dokladu 13TYP=MULTIDETAIL 13DET_TITLE=Změna měny operace dokladu 13USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200811040743492516121147/25/40/0;  #NOEDIT_EVAL_LEFT=doklad_fv <> ''; #NOMULTIWARN; #EDIT_COL_DISABLE=fiscis_0_obdobi,menycis_0_id_meny,op_polozky_0_cenik,kurzy2lis_0_kurz,kurzy2lis_0_mnozstvi,kurzy3lis_0_kurz,kurzy3lis_0_mnozstvi,menycis_0_koef_nav; #EDIT_GROUP1=Původní a nová měna; #EDIT_COL1=fiscis.obdobi; #EDIT_COL_DEFAULT1=fiscis_0_obdobi=fiskalni_rok; #EDIT_COL_DEFAULT_MULTI1=fiscis_0_obdobi=fiskalni_rok:U; #EDIT_COL2=menycis.id_meny; #EDIT_COL_DEFAULT2=menycis_0_id_meny=id_meny; #EDIT_COL_DEFAULT_MULTI2=menycis_0_id_meny=id_meny:U; #EDIT_COL2_TEXT=Původní měna; #EDIT_COL2_TAG_BEGIN; #F3TAB=menycis; #F3SAY=nazev; #EDIT_COL2_TAG_END; #EDIT_COL3=op_polozky.cenik; #EDIT_COL_DEFAULT3=op_polozky_0_cenik=cenik; #EDIT_COL_DEFAULT_MULTI3=op_polozky_0_cenik=cenik:U; #EDIT_COL3_TEXT=Původní ceník; #EDIT_COL3_TAG_BEGIN; #F3TAB=cn_cenik; #F3WHERE1=cn_cenik.poradi = (select max(cn.poradi) from dba.cn_cenik cn with(index(cn_cenik_cn_cenik_poradi)) where cn.cenik = cn_cenik.cenik and convert(#BY(datumy.datum), %menycis_0_platnost_do%) between cn.platnost_od and cn.platnost_do and cn.platnost = 1) and cn_cenik.typ_rady < 100; #F3SAY=nazev + ' (' + id_meny + ')'; #EDIT_COL3_TAG_END; #EDIT_COL4=menycis.id_meny_nav; #EDIT_COL_DEFAULT4=menycis_0_id_meny_nav=''; #EDIT_COL_DEFAULT_MULTI4=menycis_0_id_meny_nav='':U; #EDIT_COL4_TEXT=Nová měna; #EDIT_COL4_TAG_BEGIN; #F3TAB=menycis; #F3SAY=nazev; #; #SELECT1=menycis_0_koef_nav=select coalesce((select mena.koef_nav from dba.menycis mena with(index(pk_menycis)) where mena.id_meny = %menycis_0_id_meny% and mena.id_meny_nav = %menycis_0_id_meny_nav%), 0); #SELECT2=kurzycis_0_kod='':Wmenycis_0_koef_nav <> 0; #; #SELECT3=kurzy2lis_0_kurz=execute dba.prepocet_men_kurz '#RS,#KURZ', %fiscis_0_obdobi%, %menycis_0_id_meny%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny <> ''; #SELECT4=kurzy2lis_0_mnozstvi=execute dba.prepocet_men_kurz '#RS,#MNOZ', %fiscis_0_obdobi%, %menycis_0_id_meny%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny <> ''; #SELECT5=kurzy3lis_0_kurz=execute dba.prepocet_men_kurz '#RS,#KURZ', %fiscis_0_obdobi%, %menycis_0_id_meny_nav%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny_nav <> ''; #SELECT6=kurzy3lis_0_mnozstvi=execute dba.prepocet_men_kurz '#RS,#MNOZ', %fiscis_0_obdobi%, %menycis_0_id_meny_nav%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny_nav <> ''; #SELECT7=menycis_koef_0_koef=select case when mm.xkurz = 1 then round(round(%kurzy3lis_0_kurz% / %kurzy3lis_0_mnozstvi%, 8) / round(%kurzy2lis_0_kurz% / %kurzy2lis_0_mnozstvi%, 8), 8) else round(round(%kurzy2lis_0_kurz% / %kurzy2lis_0_mnozstvi%, 8) / round(%kurzy3lis_0_kurz% / %kurzy3lis_0_mnozstvi%, 8), 8) end from dba.menycis_mistni mm with(index(pk_menycis_mistni)) where mm.fiskalni_rok = %fiscis_0_obdobi%:Wkurzycis_0_kod <> '' and kurzy3lis_0_kurz <> 0 and kurzy3lis_0_mnozstvi <> 0 and kurzy2lis_0_kurz <> 0 and kurzy2lis_0_mnozstvi <> 0; #SELECT8=menycis_0_koef_nav=0:Wkurzycis_0_kod <> ''; #SELECT9=kurzy2lis_0_kurz=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod); #SELECT10=kurzy2lis_0_mnozstvi=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod); #SELECT11=kurzy3lis_0_kurz=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod) or menycis_0_id_meny_nav = '' or isnull(menycis_0_id_meny_nav); #SELECT12=kurzy3lis_0_mnozstvi=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod) or menycis_0_id_meny_nav = '' or isnull(menycis_0_id_meny_nav); #SELECT13=menycis_koef_0_koef=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod); #EDIT_COL4_TAG_END; #EDIT_COL5=op_zahlavi.cenik; #EDIT_COL_DEFAULT5=op_zahlavi_0_cenik=cenik; #EDIT_COL_DEFAULT_MULTI5=op_zahlavi_0_cenik=cenik:U; #EDIT_COL5_TEXT=Nový ceník; #EDIT_COL5_TAG_BEGIN; #F3TAB=cn_cenik; #F3WHERE1=cn_cenik.poradi = (select max(cn.poradi) from dba.cn_cenik cn with(index(cn_cenik_cn_cenik_poradi)) where cn.cenik = cn_cenik.cenik and convert(#BY(datumy.datum), %menycis_0_platnost_do%) between cn.platnost_od and cn.platnost_do and cn.platnost = 1) and cn_cenik.typ_rady < 100; #F3SAY=nazev + ' (' + id_meny + ')'; #EDIT_COL5_TAG_END; #EDIT_GROUP6=Konverzní kurz ukončení platnosti měny; #EDIT_COL6=menycis.koef_nav; #EDIT_COL_DEFAULT6=menycis_0_koef_nav=0; #EDIT_COL_DEFAULT_MULTI6=menycis_0_koef_nav=0:U; #EDIT_COL6_TEXT=Konverzní kurz přepočtu; #EDIT_GROUP7=Konverzního kurz podle kurzovního lístku; #EDIT_COL7=menycis.platnost_do; #EDIT_COL_DEFAULT7=menycis_0_platnost_do=select case when convert(#BY(datumy.datum), \\DATUM) > convert(#BY(datumy.datum), convert(varchar(10)/*BY*/, fis.ukonceno, 111)) then convert(#BY(datumy.datum), convert(varchar(10)/*BY*/, fis.ukonceno, 111)) else convert(#BY(datumy.datum), \\DATUM) end from dba.fiscis fis with(index(pk_fiscis)) where fis.obdobi = %fiskalni_rok%; #EDIT_COL_DEFAULT_MULTI7=menycis_0_platnost_do=\\DATUM; #EDIT_COL7_TEXT=Datum zjištění kurzů; #EDIT_COL7_TAG_BEGIN; #SELECT1=kurzy2lis_0_kurz=execute dba.prepocet_men_kurz '#RS,#KURZ', %fiscis_0_obdobi%, %menycis_0_id_meny%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny <> ''; #SELECT2=kurzy2lis_0_mnozstvi=execute dba.prepocet_men_kurz '#RS,#MNOZ', %fiscis_0_obdobi%, %menycis_0_id_meny%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny <> ''; #SELECT3=kurzy3lis_0_kurz=execute dba.prepocet_men_kurz '#RS,#KURZ', %fiscis_0_obdobi%, %menycis_0_id_meny_nav%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny_nav <> ''; #SELECT4=kurzy3lis_0_mnozstvi=execute dba.prepocet_men_kurz '#RS,#MNOZ', %fiscis_0_obdobi%, %menycis_0_id_meny_nav%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny_nav <> ''; #SELECT5=menycis_koef_0_koef=select case when mm.xkurz = 1 then round(round(%kurzy3lis_0_kurz% / %kurzy3lis_0_mnozstvi%, 8) / round(%kurzy2lis_0_kurz% / %kurzy2lis_0_mnozstvi%, 8), 8) else round(round(%kurzy2lis_0_kurz% / %kurzy2lis_0_mnozstvi%, 8) / round(%kurzy3lis_0_kurz% / %kurzy3lis_0_mnozstvi%, 8), 8) end from dba.menycis_mistni mm with(index(pk_menycis_mistni)) where mm.fiskalni_rok = %fiscis_0_obdobi%:Wkurzycis_0_kod <> '' and kurzy3lis_0_kurz <> 0 and kurzy3lis_0_mnozstvi <> 0 and kurzy2lis_0_kurz <> 0 and kurzy2lis_0_mnozstvi <> 0; #SELECT6=menycis_0_koef_nav=0:Wkurzycis_0_kod <> ''; #EDIT_COL7_TAG_END; #EDIT_COL8=kurzycis.kod; #EDIT_COL8_TEXT=Kód kurzovního lístku; #EDIT_COL_DEFAULT8=kurzycis_0_kod=kurzovni_listek; #EDIT_COL_DEFAULT_MULTI8=kurzycis_0_kod=kurzovni_listek:U; #EDIT_COL8_TAG_BEGIN; #F3TAB=kurzycis; #F3SAY=nazev; #; #SELECT1=kurzy2lis_0_kurz=execute dba.prepocet_men_kurz '#RS,#KURZ', %fiscis_0_obdobi%, %menycis_0_id_meny%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny <> ''; #SELECT2=kurzy2lis_0_mnozstvi=execute dba.prepocet_men_kurz '#RS,#MNOZ', %fiscis_0_obdobi%, %menycis_0_id_meny%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny <> ''; #SELECT3=kurzy3lis_0_kurz=execute dba.prepocet_men_kurz '#RS,#KURZ', %fiscis_0_obdobi%, %menycis_0_id_meny_nav%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny_nav <> ''; #SELECT4=kurzy3lis_0_mnozstvi=execute dba.prepocet_men_kurz '#RS,#MNOZ', %fiscis_0_obdobi%, %menycis_0_id_meny_nav%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny_nav <> ''; #SELECT5=menycis_koef_0_koef=select case when mm.xkurz = 1 then round(round(%kurzy3lis_0_kurz% / %kurzy3lis_0_mnozstvi%, 8) / round(%kurzy2lis_0_kurz% / %kurzy2lis_0_mnozstvi%, 8), 8) else round(round(%kurzy2lis_0_kurz% / %kurzy2lis_0_mnozstvi%, 8) / round(%kurzy3lis_0_kurz% / %kurzy3lis_0_mnozstvi%, 8), 8) end from dba.menycis_mistni mm with(index(pk_menycis_mistni)) where mm.fiskalni_rok = %fiscis_0_obdobi%:Wkurzycis_0_kod <> '' and kurzy3lis_0_kurz <> 0 and kurzy3lis_0_mnozstvi <> 0 and kurzy2lis_0_kurz <> 0 and kurzy2lis_0_mnozstvi <> 0; #SELECT6=menycis_0_koef_nav=0:Wkurzycis_0_kod <> ''; #SELECT7=kurzy2lis_0_kurz=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod); #SELECT8=kurzy2lis_0_mnozstvi=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod); #SELECT9=kurzy3lis_0_kurz=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod) or menycis_0_id_meny_nav = '' or isnull(menycis_0_id_meny_nav); #SELECT10=kurzy3lis_0_mnozstvi=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod) or menycis_0_id_meny_nav = '' or isnull(menycis_0_id_meny_nav); #SELECT11=menycis_koef_0_koef=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod); #EDIT_COL8_TAG_END; #EDIT_COL9=kurzy2lis.kurz; #EDIT_COL9_TEXT=Kurz původní měny/Množství; #EDIT_COL10=kurzy2lis.mnozstvi; #EDIT_COL10_TO_PREV; #EDIT_COL11=kurzy3lis.kurz; #EDIT_COL11_TEXT=Kurz nové měny/Množství; #EDIT_COL12=kurzy3lis.mnozstvi; #EDIT_COL12_TO_PREV; #EDIT_COL13=menycis_koef.koef; #EDIT_COL13_TEXT=Konverzní kurz přepočtu; #EDIT_COL13_TAG_BEGIN; #SELECT1=menycis_0_koef_nav=0:Wmenycis_koef_0_koef <> 0; #EDIT_COL13_TAG_END; #EDIT_COL_SQLAFTER1_BEGIN; if !fiscis_0_obdobi! = ''\tbegin raiserror 99999 'Není možné aktualizovat měnu operace pro doklady z různých fiskálních roků.' return end if !menycis_0_id_meny! = ''\tbegin raiserror 99999 'Není možné aktualizovat měnu operace pro doklady z různých měn.' return end if !menycis_0_koef_nav! = 0 and !menycis_koef_0_koef! = 0\tbegin raiserror 99999 'Není zadán žádný koeficient přepočtu.' return end update\tdba.op_zahlavi set\tid_meny = !menycis_0_id_meny_nav!, cenik = !op_zahlavi_0_cenik!, xcmd = '#MENA_CHANGED=' + ! string2(if(menycis_0_koef_nav <> 0, menycis_0_koef_nav, menycis_koef_0_koef)) ! + ';' + char(9) + 'SAVED', autor = user, ts = getdate() from\tdba.op_zahlavi opz with(index(pk_op_zahlavi)) where\topz.doklad = %doklad% #EDIT_COL_SQLAFTER1_END; #EDIT_COL_INFO=Byla provedena změna měny operace dokladů; #REFRESH;;#SETMENUID_END; 13USER_END 14ID_MENU=MNID/O_OBJ/201502251531240799441652 14USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201502251531240799441652/25/40/0;;#SETMENUID_END; 15ID_MENU=MNID/O_OBJ/201502251531367989939673 15BUTTON_TITLE=Zařazení do požadavků odeslané pošty 15TYP=SQLCOMMAND 15USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=odpost_kniha;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201502251531367989939673/25/40/0;    #NOEDIT_EVAL_LEFT=isnull(id_posty_poz, 0) > 0 or isnull(posta_doklad, '') <> '' or op_rady_8848_rada_posty = ''; #PERCENT_OFF; #MULTI_BUTTON; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set xcmd = char(9) + 'ODPM' from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 15USER_END 16ID_MENU=MNID/O_OBJ/201502251531596115213840 16BUTTON_TITLE=Požadavek odeslané pošty 16TYP=SEZNAM 16SEZ_TABULKA=odpost_doklady 16SEZ_VAZBA=TRUE 16SEZ_VAZBA_COLUMN1=id_posty_poz 16USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201502251531596115213840/25/40/0;  #NOEDIT_EVAL_LEFT=isnull(id_posty_poz) or id_posty_poz = 0;;#SETMENUID_END; 17ID_MENU=MNID/O_OBJ/201502251532113016580653 17BUTTON_TITLE=Doklad odesláné pošty 17TYP=SEZNAM 17SEZ_TABULKA=odpost_kniha 17SEZ_VAZBA=TRUE 17SEZ_VAZBA_COLUMN1=id_posty 17USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201502251532113016580653/25/40/0;  #NOEDIT_EVAL_LEFT=isnull(id_posty) or id_posty = '';;#SETMENUID_END; w_ift\tparametr/0 18ID_MENU=MNID/O_OBJ/200705141135559525303211 18BUTTON_TITLE=Po&ložky 18TYP=SEZNAM 18SEZ_TABULKA=op_polozky 18SEZ_TITLE=Seznam položek {case(druh when 30 then 'objednávky přijaté'/*TRAN*/ when 20 then 'nabídky vydané'/*TRAN*/ when 10 then 'poptávky přijaté'/*TRAN*/ else 'objednávky přijaté'/*TRAN*/)} č. {doklad} 18SEZ_VAZBA=TRUE 18SEZ_VAZBA_COLUMN1=doklad 18NOEDIT=TRUE 18USER=;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135559525303211/20/40/0;    #REFRESHSOURCE;;#SETMENUID_END; 18GEN_SORTS1=Doklad,Sestava,Díl,Položka^doklad,id_pol_vys,id_polozky,polozka 19ID_MENU=MNID/O_OBJ/202401231028295288644989 19BUTTON_TITLE=Po&ložky rozpadu 19TYP=SEZNAM 19SEZ_TABULKA=user_rozpad_dilcu 19SEZ_TITLE=Seznam položek rozpadu {doklad} 19SEZ_VAZBA=TRUE 19SEZ_VAZBA_COLUMN1=doklad 19USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//202401231028295288644989/20/30/0;    #REFRESHSOURCE; #DO_SEZ_SQL; #SEZ_SQL_ADD3000=(select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS dat_expedice /*\\:Sop_zahlavi.dat_expedice:HDatum expedice*/; #SEZ_SQL_ADD3001=(select op_zahlavi.zkraceny_nazev from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS zakaznik /*\\:Sop_zahlavi.zkraceny_nazev:HZákazník*/; #SEZ_SQL_ADD3002=(select op_zahlavi.misto_dp from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS misto_dod /*\\:Sop_zahlavi.misto_dp:HMísto dodání*/; #LEGEND=#DOKL_STORNO:Stornovaná položka:Fstorno = 1; #LEGEND=#O_OBJ_ODS:Vygenerována dávka:Fdavka<>'' and exportovano = 0; #LEGEND=#DOKL_SCHVAL:Exportováno:Fexportovano = 1;;#SETMENUID_END; 19USER_END 19GEN_SORTS1=Doklad^doklad 20ID_MENU=MNID/O_OBJ/200705141135551379178316 20BUTTON_TITLE=Obj.&Jádro 20TYP=SEZNAM 20SEZ_TABULKA=obj_prv_dkl 20SEZ_VAZBA=TRUE 20SEZ_VAZBA_COLUMN1=\\'O_OBJ' 20SEZ_VAZBA_COLUMN2=\\'OP' 20SEZ_VAZBA_COLUMN3=doklad 20USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135551379178316/20/40/0;  #NOEDIT_EVAL_LEFT=druh <> 30; #BUTTON_GROUP=Obj.&Jádro; #NOSAVESORT; #REFRESHSOURCE;;#SETMENUID_END; 20USER_END 21ID_MENU=MNID/O_OBJ/201408142123579137960343 21BUTTON_TITLE=Obj.Jádro - V&ykrytí 21TYP=SEZNAM 21SEZ_TABULKA=obj_prv_vykryti 21SEZ_VAZBA=TRUE 21SEZ_VAZBA_COLUMN1=\\'O_OBJ' 21SEZ_VAZBA_COLUMN2=\\'OP' 21SEZ_VAZBA_COLUMN3=doklad 21USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//201408142123579137960343/20/40/0;  #NOEDIT_EVAL_LEFT=druh <> 30 or pozadavky not in (30, 35, 36); #BUTTON_GROUP=Obj.&Jádro; #NOSAVESORT; #REFRESHSOURCE;;#SETMENUID_END; 21USER_END 22ID_MENU=MNID/O_OBJ/200705141135558993548665 22BUTTON_TITLE=Potvrzení 22TYP=SQLCOMMAND 22USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135558993548665/20/40/0;    #BUTTON_COLOR=rgb(0, 255, 0); #BUTTON_GROUP=Potvrzení; #NOEDIT_EVAL_LEFT=potvrzeno = 1 or storno = 1 or vyrizeno = 1; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako potvrzený?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako potvrzené?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set potvrzeno = 1, xcmd = '#POTVRD;', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% and opz.storno = 0 #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 22USER_END 23ID_MENU=MNID/O_OBJ/202302011420000250574661 23BUTTON_TITLE=Zpět Potvrzení 23TYP=SQLCOMMAND 23USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202302011420000250574661/20/40/0;    #BUTTON_COLOR=rgb(0, 255, 0); #BUTTON_GROUP=Potvrzení; #BUTTON_GROUP_RIGHT; /*#LEFT_MNID=200705141135558993548665;*/ #NOEDIT_EVAL_LEFT=potvrzeno = 0 or odsouhlaseno = 1 or storno = 1 or vyrizeno = 1; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako nepotvrzený?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako nepotvrzené?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set potvrzeno = 0, odsouhlaseno = 0, xcmd = '#ODPOTVRD;', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% and opz.storno = 0 #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 23USER_END 24ID_MENU=MNID/O_OBJ/200705141135553379131401 24BUTTON_TITLE=Odsouhlasení 24TYP=SQLCOMMAND 24USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135553379131401/20/40/0;    #BUTTON_COLOR=rgb(0, 255, 0); #BUTTON_GROUP=Odsouhlasení; #NOEDIT_EVAL_LEFT=odsouhlaseno = 1 or storno = 1 or vyrizeno = 1 or (op_rady_8848_zal_fa_nast = 10 and doklad_fv_zal <> '' and op_rady_8848_zal_fa_pocet <> 11); #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako odsouhlasený?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako odsouhlasené?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set potvrzeno = 1, odsouhlaseno = 1, xcmd = '#POTVRD;', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% and opz.storno = 0 #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 24USER_END 25ID_MENU=MNID/O_OBJ/202302011420016266813150 25BUTTON_TITLE=Zpět Odsouhlasení 25TYP=SQLCOMMAND 25USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202302011420016266813150/20/40/0;    #BUTTON_COLOR=rgb(0, 255, 0); #BUTTON_GROUP=Odsouhlasení; #BUTTON_GROUP_RIGHT; /*#LEFT_MNID=200705141135553379131401;*/ #NOEDIT_EVAL_LEFT=odsouhlaseno = 0 or storno = 1 or vyrizeno = 1 or (op_rady_8848_zal_fa_nast = 10 and doklad_fv_zal <> '' and op_rady_8848_zal_fa_pocet <> 11); #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako neodsouhlasený?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako neneodsouhlasené?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set odsouhlaseno = 0, xcmd = '#ODPOTVRD;', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% and opz.storno = 0 #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 25USER_END 26ID_MENU=MNID/O_OBJ/200705141135551392534218 26BUTTON_TITLE=Vyřízení 26TYP=SQLCOMMAND 26USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135551392534218/20/40/0;    #BUTTON_COLOR=rgb(0,255,0); #BUTTON_GROUP=Vyřízení; #NOEDIT_EVAL_LEFT=vyrizeno_kl = 1 or opr_prov = 0 or storno = 1; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako vyřízený?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako vyřízené?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set vyrizeno_kl = 1, xcmd = char(9) + 'VYRIZENO', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% and opz.vyrizeno_kl = 0 #SQLCOMMAND1_END; #SQLCOMMAND2_BEGIN; update dba.op_zahlavi set xcmd = char(9) + 'SAVED' from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND2_END; #W_SOURCE_REFRESH_ROW;;#SETMENUID_END; 26USER_END 27ID_MENU=MNID/O_OBJ/202302011420027040107874 27BUTTON_TITLE=Zpět Vyřízení 27TYP=SQLCOMMAND 27USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202302011420027040107874/20/40/0;    #BUTTON_COLOR=rgb(0,255,0); #BUTTON_GROUP=Vyřízení; #BUTTON_GROUP_RIGHT; /*#LEFT_MNID=200705141135551392534218;*/ #NOEDIT_EVAL_LEFT=vyrizeno_kl = 0 or opr_prov = 0 or storno = 1; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako nevyřízený?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako nevyřízené?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set vyrizeno_kl = 0, xcmd = char(9) + 'ODVYRIZENO', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% and opz.vyrizeno_kl <> 0 #SQLCOMMAND1_END; #SQLCOMMAND2_BEGIN; update dba.op_zahlavi set xcmd = char(9) + 'SAVED' from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND2_END; #W_SOURCE_REFRESH_ROW;;#SETMENUID_END; 27USER_END 28ID_MENU=MNID/O_OBJ/201601261324489781847785 28BUTTON_TITLE=Odesláno 28TYP=SQLCOMMAND 28USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201601261324489781847785/20/40/0;    #BUTTON_COLOR=rgb(0,255,0); #BUTTON_GROUP=Odesláno; #NOEDIT_EVAL_LEFT=druh <> 20 or isnull(odeslano, 0) = 1 or storno = 1; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako odeslaný?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako odeslané?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set odeslano = 1, autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 28USER_END 29ID_MENU=MNID/O_OBJ/202302011420034899451963 29BUTTON_TITLE=Zpět Odesláno 29TYP=SQLCOMMAND 29USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202302011420034899451963/20/40/0;    #BUTTON_COLOR=rgb(0,255,0); #BUTTON_GROUP=Odesláno; #BUTTON_GROUP_RIGHT; /*#LEFT_MNID=201601261324489781847785;*/ #NOEDIT_EVAL_LEFT=druh <> 20 or isnull(odeslano, 0) = 0 or storno = 1; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako neodeslaný?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako neodeslané?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set odeslano = 0, autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 29USER_END 30ID_MENU=MNID/O_OBJ/200705141135559788159105 30BUTTON_TITLE=Znepřístupni 30TYP=SQLCOMMAND 30USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135559788159105/20/40/0;    #BUTTON_COLOR=rgb(0,0,255); #BUTTON_GROUP=Znepřístupni; #NOEDIT_EVAL_LEFT=storno = 1 or opr_prov = 0; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako znepřístupněný?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako znepřístupněné?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set opr_prov = 0, xcmd = char(9) + 'OPR_PROV', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #W_SOURCE_REFRESH_ROW;;#SETMENUID_END; 30USER_END 31ID_MENU=MNID/O_OBJ/202302011420043873555096 31BUTTON_TITLE=Zpět Znepřístupni 31TYP=SQLCOMMAND 31USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202302011420043873555096/20/40/0;    #BUTTON_COLOR=rgb(0,0,255); #BUTTON_GROUP=Znepřístupni; #BUTTON_GROUP_RIGHT; /*#LEFT_MNID=200705141135559788159105;*/ #NOEDIT_EVAL_LEFT=storno = 1 or opr_prov = 1; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako neznepřístupněný?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako neznepřístupněné?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set opr_prov = 1, xcmd = char(9) + 'OPR_PROV', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #W_SOURCE_REFRESH_ROW;;#SETMENUID_END; 31USER_END 32ID_MENU=MNID/O_OBJ/201807090815549821080989 32BUTTON_TITLE=&Uprav položky 32TYP=SEZNAM 32ID_SAVE=op_uprav_pol 32SEZ_TABULKA=op_polozky 32SEZ_SQL_BEGIN select op_polozky.doklad AS doklad /* \\:NV */, op_polozky.polozka AS polozka, op_polozky.sklad AS sklad, op_polozky.id_karty AS id_karty /* \\:NV */, op_polozky.karta AS karta, op_polozky.nazev AS nazev, op_polozky.mnozstvi_obj AS mnozstvi_obj, op_polozky.id_mj_vyd AS id_mj_vyd /* \\:Sop_polozky.id_mj_vyd:HMJ vyd */, op_polozky.koef_mj_vyd AS koef_mj_vyd /* \\:NV */, op_polozky.cena_mj_cen AS cena_mj_cen, coalesce(op_polozky.cena_rucne, 0) AS cena_rucne /* \\:Sop_polozky.cena_rucne */, op_polozky.slevnit AS slevnit, op_polozky.sleva AS sleva, op_polozky.cena_mj_radek AS cena_mj_radek, op_polozky.storno AS storno, op_polozky.atribut_1 AS atribut_1, op_polozky.atribut_2 AS atribut_2, op_polozky.atribut_3 AS atribut_3, 0 AS zrus /* \\:Sop_polozky.storno:HZrušit položku */, op_polozky.vyrizeno AS vyrizeno /* \\:NV */, op_polozky.id_mj_evid AS id_mj_evid /* \\:NV */, op_polozky.id_pol_vys AS id_pol_vys /* \\:NV */, op_polozky.id_polozky AS id_polozky /* \\:NV */, op_polozky.id_mj_cen AS id_mj_cen /* \\:NV */, op_polozky.koef_mj_cen AS koef_mj_cen /* \\:NV */, op_polozky.mnozstvi_obj AS o_mnozstvi_obj /* \\:NV */, op_polozky.koef_mj_vyd AS o_koef_mj_vyd /* \\:NV */, op_polozky.storno AS o_storno /* \\:NV */, op_polozky.id_mj_vyd AS o_id_mj_vyd /* \\:NV */, op_polozky.cena_mj_cen AS o_cena_mj_cen /* \\:NV */, opz.cena_polozky AS cena_polozky /* \\:Sop_zahlavi.cena_polozky:NV */ from dba.op_polozky op_polozky with(index(pk_op_polozky)), dba.op_zahlavi opz with(index(pk_op_zahlavi)) where op_polozky.doklad = %doklad% and op_polozky.polozka < 29000 and #GETWRITEWHERE(op_polozky op_polozky) and opz.doklad = op_polozky.doklad 32SEZ_SQL_END 32SEZ_MODIFY_BEGIN mnozstvi_obj.protect='1~tif(storno = 1 or zrus = 1 or vyrizeno = 1, 1, 0)' cena_mj_cen.protect='1~tif(storno = 1 or zrus = 1 or vyrizeno = 1 or cena_polozky = 0, 1, 0)' cena_rucne.protect='1~tif(storno = 1 or zrus = 1 or vyrizeno = 1 or cena_polozky = 0, 1, 0)' id_mj_vyd.protect='1~tif(storno = 1 or zrus = 1 or vyrizeno = 1, 1, 0)' storno.protect='1~tif(zrus = 1 and storno = 0 or vyrizeno = 1, 1, 0)' zrus.protect='1~tif(storno = 1 and zrus = 0 or vyrizeno = 1, 1, 0)' 32SEZ_MODIFY_END 32SEZ_F3_TAG=    #F3DISADD; 32SEZ_POCET=-1 32USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_polozky;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201807090815549821080989/20/40/0;    #BUTTON_COLOR=rgb(0,0,255); #NOEDIT_EVAL_LEFT=storno = 1 or vyrizeno = 1 or opr_prov = 0; #SEZNAM_EDIT; #NOADDTABMENU; #NO_TABLE_HELPLINKS; #ADDTYP=SEZNAM,op_polozky_zrus; #EDITCOLS=mnozstvi_obj,id_mj_vyd,storno,zrus,cena_mj_cen,cena_rucne; #TAGCOLS=mnozstvi_obj,id_mj_vyd,storno,zrus,cena_mj_cen; #HIDESAVE; #SHOWFILTER=on; #CLOSEQUESTION=NOTSAVED; #MNOZSTVI_OBJ_TAG_BEGIN; #SELECT1=mnozstvi_obj_t.tag=string(id_pol_vys) + '^' + string(if(o_mnozstvi_obj = 0, 0, o_mnozstvi_obj) / if(mnozstvi_obj = 0, 1, mnozstvi_obj)) + '^' + id_karty + '^' + sklad; #SELECT2=GOTO99:Wid_polozky <> 0; #SELECT3=mnozstvi_obj=execute dba.odb_zaokr_dily_ @string2(round(if(dec2(item(describe('mnozstvi_obj_t.tag'), 2)) = 0, 0, o_mnozstvi_obj) / if(dec2(item(describe('mnozstvi_obj_t.tag'), 2)) = 0, 1, dec2(item(describe('mnozstvi_obj_t.tag'), 2))), 4)):NA@, @item(describe('mnozstvi_obj_t.tag'), 3)@, @item(describe('mnozstvi_obj_t.tag'), 4)@, @id_polozky@, @id_karty@:Wid_pol_vys = dec2(item(describe('mnozstvi_obj_t.tag'), 1)) and id_polozky <> 0:a; #MNOZSTVI_OBJ_TAG_END; #ID_MJ_VYD_TAG_BEGIN; #F3TAB=sklad_mj; #F3COL=id_karty,id_mj_evid,id_mj_vyd; #F3WHERE=sklad_mj.id_nomen = %id_karty% and sklad_mj.id_mj_evid = %id_mj_evid% and sklad_mj.vydej = 1; #F3NOFILTER=id_nomen,id_mj_evid; #SELECT1=koef_mj_vyd=select smj.koeficient from dba.sklad_mj smj with(index(pk_sklad_mj)) where smj.id_nomen = %id_karty% and smj.id_mj_evid = %id_mj_evid% and smj.id_mj = %id_mj_vyd%; #ID_MJ_VYD_TAG_END; #STORNO_TAG_BEGIN; #SELECT1=mnozstvi_obj=o_mnozstvi_obj:V; #SELECT2=id_mj_vyd=o_id_mj_vyd:V; #SELECT3=cena_mj_cen=o_cena_mj_cen; #SELECT4=koef_mj_vyd=o_koef_mj_vyd; #STORNO_TAG_END; #CENA_MJ_CEN_TAG_BEGIN; #SELECT1=cena_mj_radek=cena_mj_cen * if(slevnit = 0, 1, (1 - sleva / 100)) * if(id_mj_vyd = id_mj_cen or koef_mj_cen = 0, 1, round(koef_mj_vyd / koef_mj_cen, 6)); #SELECT2=cena_rucne=1; #CENA_MJ_CEN_TAG_END; #SQLTYPEEVAL=if(zrus = 1, 'del', 'upd'); #CHECKBEFOREEVAL1=select coalesce((select 'true' from dba.sklad_mj smj with(index(pk_sklad_mj)) where smj.id_nomen = @id_karty@ and smj.id_mj_evid = @id_mj_evid@ and smj.id_mj = @id_mj_vyd@), 'false'):MNa položce č. @polozka@ je nesprávně zadaná MJ výdeje.; #UPDATE1_BEGIN; update dba.op_polozky set mnozstvi_obj = case when @storno@ = 1 then @o_mnozstvi_obj@ else @mnozstvi_obj@ end, id_mj_vyd = case when @storno@ = 1 then @o_id_mj_vyd@ else @id_mj_vyd@ end, cena_mj_cen = case when @storno@ = 1 then @o_cena_mj_cen@ else @cena_mj_cen@ end, cena_rucne = @cena_rucne@, storno = @storno@, koef_mj_vyd = case when @storno@ = 1 then @o_koef_mj_vyd@ else @koef_mj_vyd@ end, xcmd = case when @storno@ = 1 then char(9) + 'STORNO' when @cena_rucne@ = 0 then char(9) + 'OPRAVA_CEN' end + '#SET_VALUES;', autor = user, ts = getdate() from dba.op_polozky opp with(index(pk_op_polozky)) where opp.doklad = @doklad@ and opp.polozka = @polozka@ #UPDATE1_END; #DELETE1_BEGIN; delete dba.op_polozky from dba.op_polozky opp with(index(pk_op_polozky)) where opp.doklad = @doklad@ and opp.polozka = @polozka@ #DELETE1_END; #SQLAFTEREVAL_BEGIN; update dba.op_zahlavi set xcmd = char(9) + 'SAVED' from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = !doklad! #SQLAFTEREVAL_END; #RESELECTROW; #LEGEND=#ODB_SES_NE:Běžná položka:Fid_pol_vys = 0 and id_polozky = 0 and storno <> 1; #LEGEND=#ODB_SESTAVA:Sestava:Fid_pol_vys <> 0 and id_polozky = 0 and storno <> 1; #LEGEND=#ODB_DILY:Díly sestavy:Fid_pol_vys <> 0 and id_polozky <> 0 and storno <> 1; #LEGEND=#DOKL_STORNO:Stornovaná položka:Fstorno = 1;;#SETMENUID_END; 32USER_END 33ID_MENU=MNID/O_OBJ/201907150925057809771941 33BUTTON_TITLE=Nastav stav Akceptováno 33TYP=SQLCOMMAND 33USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201907150925057809771941/20/40/0;    #BUTTON_GROUP=Akceptace importu; #NOEDIT_EVAL_LEFT=isnull(import, 0) = 0 or par_export = 0 or opr_imp_ordrsp_dkl_10 <> 0; #MULTI_BUTTON; #PERCENT_OFF; #PROCESBAR; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set exp_ordrsp_stav_akc = 10, autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 33USER_END 34ID_MENU=MNID/O_OBJ/201907151115364122328928 34BUTTON_TITLE=Nastav stav Neakceptováno 34TYP=SQLCOMMAND 34USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201907151115364122328928/20/40/0;    #BUTTON_GROUP=Akceptace importu; #NOEDIT_EVAL_LEFT=isnull(import, 0) = 0 or par_export = 0 or opr_imp_ordrsp_dkl_20 <> 0; #MULTI_BUTTON; #PERCENT_OFF; #PROCESBAR; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set exp_ordrsp_stav_akc = 20, autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 34USER_END 35ID_MENU=MNID/O_OBJ/201907151116166376593885 35BUTTON_TITLE=Nastav stav Změna 35TYP=SQLCOMMAND 35USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201907151116166376593885/20/40/0;    #BUTTON_GROUP=Akceptace importu; #NOEDIT_EVAL_LEFT=isnull(import, 0) = 0 or par_export = 0; #MULTI_BUTTON; #PERCENT_OFF; #PROCESBAR; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set exp_ordrsp_stav_akc = 30, autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 35USER_END 36ID_MENU=MNID/O_OBJ/201907121149310765884685 36BUTTON_TITLE=Zařadit k exportu potvrzení 36TYP=SQLCOMMAND 36USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201907121149310765884685/20/40/0;    #BUTTON_GROUP=Zařadit k exportu potvrzení; #NOEDIT_EVAL_LEFT=druh <> 30 or par_export <> 1 or isnull(export, 0) <> 0 or isnull(exp_ordrsp_stav_akc, 0) = 0; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set export = 1, xcmd = '#AKT_STAVY;', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROWS;;#SETMENUID_END; 36USER_END 37ID_MENU=MNID/O_OBJ/202302011420067203411831 37BUTTON_TITLE=Zpět Zařadit k exportu potvrzení 37TYP=SQLCOMMAND 37USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202302011420067203411831/20/40/0;    #BUTTON_GROUP=Zařadit k exportu potvrzení; #BUTTON_GROUP_RIGHT; /*#LEFT_MNID=201907121149310765884685;*/ #NOEDIT_EVAL_LEFT=druh <> 30 or par_export <> 1 or isnull(export, 0) <> 1 or isnull(exp_ordrsp_stav_akc, 0) = 0; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set export = 0, xcmd = '#AKT_STAVY;', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROWS;;#SETMENUID_END; 37USER_END 38ID_MENU=MNID/O_OBJ/200705141135558650635181 38BUTTON_TITLE=Generuj poptávku přijatou 38TYP=GROUP 38AKCE=op_gen_op 38USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135558650635181/20/40/0;    #BUTTON_GROUP=O&bjednávky; #SPACEBEFORE; #NOEDIT_EVAL_LEFT=storno = 1 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or op_rady_8848_op_rada_pop = ''; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 38USER_END 3801ID_MENU=MNID/O_OBJ/200705141135557213945120 3801BUTTON_TITLE=Generuj poptávku (substituce) 3801TYP=NOTHING 3801USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135557213945120/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_op_denik_pop; #GROUP_SUB2=#RD=op_rady_8848_op_rada_pop; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#AKCE='POP':NA;;#SETMENUID_END; 3801USER_END 39ID_MENU=MNID/O_OBJ/200705141135557853006739 39BUTTON_TITLE=Generuj nabídku vydanou 39TYP=GROUP 39AKCE=op_gen_op 39USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135557853006739/20/40/0;    #BUTTON_GROUP=O&bjednávky; #NOEDIT_EVAL_LEFT=storno = 1 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or op_rady_8848_op_rada_nab = ''; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 39USER_END 3901ID_MENU=MNID/O_OBJ/200705141135551547222645 3901BUTTON_TITLE=Generuj nabídku (substituce) 3901TYP=NOTHING 3901USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135551547222645/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_op_denik_nab; #GROUP_SUB2=#RD=op_rady_8848_op_rada_nab; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#AKCE='NAB':NA;;#SETMENUID_END; 3901USER_END 40ID_MENU=MNID/O_OBJ/200705141135550858076406 40BUTTON_TITLE=Generuj objednávku přijatou 40TYP=GROUP 40AKCE=op_gen_op 40USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135550858076406/20/40/0;    #BUTTON_GROUP=O&bjednávky; #NOEDIT_EVAL_LEFT=storno = 1 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or op_rady_8848_op_rada_op = ''; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 40USER_END 4001ID_MENU=MNID/O_OBJ/200705141135556000171528 4001BUTTON_TITLE=Generuj objednávku přijatou (substituce) 4001TYP=NOTHING 4001USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135556000171528/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_op_denik_op; #GROUP_SUB2=#RD=op_rady_8848_op_rada_op; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#AKCE='OBJ':NA;;#SETMENUID_END; 4001USER_END 41ID_MENU=MNID/O_OBJ/200705141135552823294874 41BUTTON_TITLE=Generuj objednávku vydanou 41TYP=GROUP 41AKCE=op_gen_ov 41USER_BEGIN ;#BUTTON_WRITE_RIGHT=ov_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135552823294874/20/40/0;    #BUTTON_GROUP=O&bjednávky; #NOEDIT_EVAL_LEFT=storno = 1 or druh <> 30 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or op_rady_8848_op_rada_ov = '' or doklad_ov <> '' or vyrizeno = 1 or dodano_predb = 1; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 41USER_END 4101ID_MENU=MNID/O_OBJ/200705141135553155354869 4101BUTTON_TITLE=Generuj objednávku vydanou (substituce) 4101TYP=NOTHING 4101USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135553155354869/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_op_denik_ov; #GROUP_SUB2=#RD=op_rady_8848_op_rada_ov; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#AKCE='OBJ':NA;;#SETMENUID_END; 4101USER_END 42ID_MENU=MNID/O_OBJ/201301251531191366684642 42BUTTON_TITLE=Generování OV na &dodavatele 42TYP=FILTERWHERE 42USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//201301251531191366684642/20/40/0;  #BUTTON_GROUP=O&bjednávky; #NOEDIT_EVAL_LEFT=druh <> 30 or storno = 1 or vyrizeno = 1 or dodano_predb = 1; #NOMULTIWARN; #ADDTYP=FILTER,gen_ov_dle_op; #ADDTYP=FILTER,gen_ov_dle_op_obj; #GEN_FILTER_OV_RADA_ADD_BEGIN; #EDIT_COL2_DEFAULT=op_rady_8848_op_denik_ov; #EDIT_COL3_DEFAULT=op_rady_8848_op_rada_ov; #GEN_FILTER_OV_RADA_ADD_END; #GEN_FILTER_OBJ_ADD_BEGIN; #PERCENT_OFF; #INIT_WHERE1_BEGIN; (#FOREACH_ID1=if(isselected() and druh = 30 and storno = 0 and vyrizeno = 0, doklad, ''):WE;(op_zahlavi.doklad = '@VALUE_ID1') or #NEXT_ID1; 1=0) #INIT_WHERE1_END; #GEN_FILTER_OBJ_ADD_END;;#SETMENUID_END; 42USER_END 43ID_MENU=MNID/O_OBJ/200705141135553417851268 43BUTTON_TITLE=Návazné generované PP / NV / OP 43TYP=SEZNAM 43SEZ_TABULKA=op_zahlavi 43SEZ_TITLE=Návazné doklady poptávek přijatých, nabídek vydaných a objednávek přijatých vygenerované z {doklad} 43SEZ_PODMINKA=op_zahlavi.doklad = tmp.doklad #OPT(#tmp_dkl tmp /ADD, dba.op_zahlavi op_zahlavi) #FORCEPLAN; 43SEZ_F3_TAG=    #F3DISADD; 43USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135553417851268/20/40/0;    #BUTTON_GROUP=O&bjednávky; #SPACEBEFORE; #NOEDIT_EVAL_LEFT='\\OV_ZAHLAVI_NAV_NOEDIT'='1'; #NOSAVESORT; #USERSUB1=\\OV_ZAHLAVI_NAV_NOEDIT=1:C:NA; #DO_PARENT_USERSUB; #COMBO_BEGIN; #COMBO_ID=primo_gen; #POLOZKY= Přímo generované doklady\\1\\tmp.uroven = 1^; #POPISBEZ=.Všechny generované doklady; #DEFAULT=1; #COMBO_END; #DBEXECUTE_BODY_BEGIN; CREATE_BEGIN begin CREATE TABLE #tmp_dkl(doklad #BY(op_zahlavi.doklad), uroven smallint/*BY*/) end CREATE_END EXECUTE_BEGIN begin declare @uroven smallint/*BY*/ select @uroven = 1 insert into #tmp_dkl(doklad, uroven) select opz.doklad, @uroven from dba.op_zahlavi opz with(index(op_zahlavi_doklad_gen), readuncommitted) where opz.id_modulu_gen = 'O_OBJ' and opz.agenda_gen = 'OP' and opz.doklad_gen = %doklad% while 1 = 1 begin select @uroven = @uroven + 1 insert into #tmp_dkl(doklad, uroven) select opz.doklad, @uroven from #tmp_dkl tmp, dba.op_zahlavi opz with(index(op_zahlavi_doklad_gen), readuncommitted) where tmp.uroven = @uroven - 1 and opz.id_modulu_gen = 'O_OBJ' and opz.agenda_gen = 'OP' and opz.doklad_gen = tmp.doklad if @@rowcount = 0 break end end EXECUTE_END DROP_BEGIN drop table #tmp_dkl DROP_END #DBEXECUTE_BODY_END;;#SETMENUID_END; 43USER_END 44ID_MENU=MNID/O_OBJ/200705141135556298935930 44BUTTON_TITLE=Návazné generované OV 44TYP=SEZNAM 44CLASS=w_iftseznam_doklad 44SEZ_TABULKA=ov_zahlavi 44SEZ_TITLE=Návazné doklady objednávek vygenerované z objednávky přijaté {doklad} 44SEZ_F3_TAG=  #F3DISADD; 44SEZ_VAZBA=TRUE 44SEZ_VAZBA_INDEX=ov_zahlavi_doklad_op 44SEZ_VAZBA_COLUMN1=\\'O_OBJ' 44SEZ_VAZBA_COLUMN2=\\'OP' 44SEZ_VAZBA_COLUMN3=doklad 44USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135556298935930/20/40/0;  #BUTTON_GROUP=O&bjednávky; #NOSAVESORT;;#SETMENUID_END; 44USER_END 45ID_MENU=MNID/O_OBJ/200903021018557149550277 45BUTTON_TITLE=Generuj kalkulaci TPV 45TYP=SQLCOMMAND 45USER_BEGIN ;#BUTTON_WRITE_RIGHT=v_kalk_dkl;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903021018557149550277/20/40/0;    #NOEDIT_EVAL_LEFT=op_rady_8848_tpv_denik_kalk = '' or op_rady_8848_tpv_rada_kalk = '' or storno = 1 or vyrizeno = 1 or dodano_predb = 1; #BUTTON_GROUP=Výroba; #BUTTON_QUESTION=Opravdu si přejete Generovat / Aktualizovat doklad kalkulace TPV?; #PERCENT_OFF; #MULTI_BUTTON; #PROCESBAR; #PROCESTEXT=Generování kalkulace TPV z dokladů OP; #PROCESMESS=Generuji kalkulaci TPV dokladu OP %doklad%...; #SQLCOMMAND1=execute dba.o_obj_gen_kalk_tpv %doklad%; #REFRESHROW;;#SETMENUID_END; 45USER_END 46ID_MENU=MNID/O_OBJ/200903021025040264075675 46BUTTON_TITLE=Položky kalkulace 46TYP=SEZNAM 46ID_SAVE=v_kalk_pol_z_op 46SEZ_TABULKA=v_kalk_pol 46SEZ_TITLE=Výrobní kalkulace - položky objednávky {doklad} 46SEZ_MODIFY_BEGIN cena.font.weight=700 cena_prod.font.weight=700 46SEZ_MODIFY_END 46SEZ_PODMINKA=op_polozky.doklad = v_kalk_dkl.objednavka and op_polozky.polozka = v_kalk_pol.polozka #OPT(dba.v_kalk_dkl v_kalk_dkl, dba.op_polozky op_polozky with(index(pk_op_polozky)) /ADD) 46SEZ_F3_TAG_BEGIN #F3DISADD; #F3DISDELETE; 46SEZ_F3_TAG_END 46SEZ_VAZBA=TRUE 46SEZ_VAZBA_COLUMN1=doklad_kalk 46USER_BEGIN ;#BUTTON_WRITE_RIGHT=v_kalk_pol;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903021025040264075675/20/40/0;    #BUTTON_GROUP=Výroba; #SEZNAM_EDIT; #SAVEFILE=o_obj; #SEZ_SQL_ADD1_BEGIN; op_polozky.id_karty, op_polozky.karta, op_polozky.sklad, op_polozky.nazev, op_polozky.atribut_1, op_polozky.atribut_2, op_polozky.atribut_3, op_polozky.baleni, op_polozky.mnozstvi_obj, op_polozky.id_mj_vyd, v_vyrobek.kj, v_kalk_dkl.datum #SEZ_SQL_ADD1_END; #NOADDCOMBO; #NOEDIT_EVAL_LEFT=doklad_kalk = ''; #SHOWFILTER=ON; #ENABLE_AUTO_SAVE_ROW; #DEFAULT_AUTO_SAVE=ROW; #FINDROWEVAL=doklad = %doklad% and polozka = %polozka%; #EDITCOLS=postup0; #TAGCOLS=postup0; #POSTUP0_TAG_BEGIN; #F3TAB=v_vyrobek; #F3COL=postup0,poradi0,polozka0; #F3WHERE=v_vyrobek.id_nomen = %op_polozky_id_karty% and v_vyrobek.platnost = 1 and v_vyrobek.baleni = %op_polozky_baleni% and v_vyrobek.atribut_1 = (case when %op_polozky_atribut_1% = '' then v_vyrobek.atribut_1 else %op_polozky_atribut_1% end) and v_vyrobek.atribut_2 = (case when %op_polozky_atribut_2% = '' then v_vyrobek.atribut_2 else %op_polozky_atribut_2% end) and v_vyrobek.atribut_3 = (case when %op_polozky_atribut_3% = '' then v_vyrobek.atribut_3 else %op_polozky_atribut_3% end) and v_zahlavi.postup <> '' and v_zahlavi.postup = v_vyrobek.postup and v_zahlavi.poradi = v_vyrobek.poradi and v_zahlavi.platnost = 1 and convert(#BY(datumy.datum), %v_kalk_dkl_datum%) between v_zahlavi.platnost_od and v_zahlavi.platnost_do #OPT(dba.v_vyrobek, dba.v_zahlavi v_zahlavi with(index(pk_v_zahlavi)) /ADD); #SELECT1=index_vyr0=select vyr.index_vyr from dba.v_vyrobek vyr with(index(pk_v_vyrobek)) where vyr.postup = %postup0% and vyr.poradi = %poradi0% and vyr.polozka = %polozka0%; #SELECT2=hospdavka0=select zah.hospdavka from dba.v_zahlavi zah with(index(pk_v_zahlavi)) where zah.postup = %postup0% and zah.poradi = %poradi0%; #POSTUP0_TAG_END; #SQLTYPEEVAL='upd'; #UPDATE1_BEGIN; update dba.v_kalk_pol set postup0 = @postup0@, poradi0 = @poradi0@, polozka0 = @polozka0@, xcmd = '#EASYINSERT;', autor = user, ts = getdate() from dba.v_kalk_pol pol with(index(pk_v_kalk_pol)) where doklad = @doklad@ and polozka = @polozka@ #UPDATE1_END; #REFRESHROW_COLUMNS=v_vyrobek_kj,cena0,cena,norminuty0,norminuty,rezminuty0,rezminuty,jedn_mzdy0,jedn_mzdy,rez_mzdy0,rez_mzdy,material0,material,kooper0,kooper,strnakl0,strnakl,rn10,rn1,rn20,rn2,rn30,rn3,rn40,rn4,rn50,rn5,rn60,rn6,rn70,rn7,rn80,rn8,rn90,rn9,rn00,rn0,datum,cena_prod,mj_prod,mena_prod,stat_dph,dph_anone; #REFRESHROW_SELECT_BEGIN; select v_vyrobek.kj, v_kalk_pol.cena0, v_kalk_pol.cena, v_kalk_pol.norminuty0, v_kalk_pol.norminuty, v_kalk_pol.rezminuty0, v_kalk_pol.rezminuty, v_kalk_pol.jedn_mzdy0, v_kalk_pol.jedn_mzdy, v_kalk_pol.rez_mzdy0, v_kalk_pol.rez_mzdy, v_kalk_pol.material0, v_kalk_pol.material, v_kalk_pol.kooper0, v_kalk_pol.kooper, v_kalk_pol.strnakl0, v_kalk_pol.strnakl, v_kalk_pol.rn10, v_kalk_pol.rn1, v_kalk_pol.rn20, v_kalk_pol.rn2, v_kalk_pol.rn30, v_kalk_pol.rn3, v_kalk_pol.rn40, v_kalk_pol.rn4, v_kalk_pol.rn50, v_kalk_pol.rn5, v_kalk_pol.rn60, v_kalk_pol.rn6, v_kalk_pol.rn70, v_kalk_pol.rn7, v_kalk_pol.rn80, v_kalk_pol.rn8, v_kalk_pol.rn90, v_kalk_pol.rn9, v_kalk_pol.rn00, v_kalk_pol.rn0, v_kalk_pol.datum, v_kalk_pol.cena_prod, v_kalk_pol.mj_prod, v_kalk_pol.mena_prod, v_kalk_pol.stat_dph, v_kalk_pol.dph_anone from dba.v_vyrobek v_vyrobek with(index(pk_v_vyrobek)), dba.v_kalk_pol v_kalk_pol with(index(pk_v_kalk_pol)) where v_vyrobek.postup = $postup0$ and v_vyrobek.poradi = $poradi0$ and v_vyrobek.polozka = $polozka0$ and v_kalk_pol.doklad = $doklad$ and v_kalk_pol.polozka = $polozka$ #REFRESHROW_SELECT_END; #REFRESHROW_WHERE=op_polozky.doklad = v_kalk_dkl.objednavka and op_polozky.polozka = v_kalk_pol.polozka #OPT(dba.v_kalk_dkl v_kalk_dkl, dba.op_polozky op_polozky with(index(pk_op_polozky)) /ADD); #REFRESHSOURCE;;#SETMENUID_END; 46USER_END 47ID_MENU=MNID/O_OBJ/200903021025536428721446 47BUTTON_TITLE=Doklad kalkulace 47TYP=SEZNAM 47SEZ_TABULKA=v_kalk_dkl 47SEZ_VAZBA=TRUE 47SEZ_VAZBA_COLUMN1=doklad_kalk 47USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903021025536428721446/20/40/0;    #BUTTON_GROUP=Výroba; #NOEDIT_EVAL_LEFT=doklad_kalk = '';;#SETMENUID_END; 47USER_END 48ID_MENU=MNID/O_OBJ/200903021027123736309291 48BUTTON_TITLE=Zjištění termínu dodání plánováním (Gantt diagram) 48USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903021027123736309291/20/40/0;    #BUTTON_GROUP=Výroba; #NOEDIT_EVAL_LEFT=doklad_kalk='' or ((not islicmodul('GANTT')) and (not islicmodul2('GANTT'))) or (not islicmodul('V_ZAK')); #SPACEBEFORE; #ADDTYP=GANTT,gantt_v_kalk; #XMESSAGE1=POZOR: Objednávka obsahuje výrobky z různých druhů plánování, Gantt diagram je třeba volat samostatně z položek kalkulace!:e:Wselect coalesce((select case when max(pol.xplan) <> min(pol.xplan) then 'true' else 'false' end from dba.v_kalk_pol pol with(index(pk_v_kalk_pol)) where pol.doklad = %doklad_kalk% and %doklad_kalk% <> ''), 'true'); #XMESSAGE2=POZOR: Z objednávky je již vygenerován výrobní příkaz, Gantt diagram je nutno volat ze Zakázkového postupu nebo z modulu Zdroje!:e:Wselect isnull((select Max('true') from dba.v_opv opv with(index(v_opv_objed)) where opv.objednavka = %doklad%), 'false'); #WSUBUSER; #PERCENT_OFF; #USERSUB1=#DEF_PLAN_XPLAN=select max(xplan) from dba.v_kalk_pol pol with(index(pk_v_kalk_pol)) where pol.doklad = %doklad_kalk%:NA; #USERSUB2=#DEF_DOKLAD=doklad_kalk:NA; #USERSUB3=#DEF_POLOZKA=0:C:NA; #USERSUB4=#GANTT_TITLE=select 'Objednávka ' + %doklad%:NA; #USERSUB5=#REZIM=2:C:NA; #USERSUB6=#AKTIVNI=1:C:NA; #USERSUB7=#TERMIN=1:NA; #USERSUB8=#UKLADANI=DIREKTIVY:C:NA;;#SETMENUID_END; 48USER_END 49ID_MENU=MNID/O_OBJ/200903021021508683342546 49BUTTON_TITLE=Generuj výrobní příkaz 49TYP=GROUP 49AKCE=op_gen_vp 49USER_BEGIN ;#BUTTON_WRITE_RIGHT=v_opvz;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903021021508683342546/20/40/0;    #BUTTON_GROUP=Výroba; #SPACEBEFORE; #NOEDIT_EVAL_LEFT=op_rady_8848_v_zak_denik = '' or op_rady_8848_v_zak_rada = '' or storno = 1 or druh <> 30 or vyrizeno = 1 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or dodano_predb = 1; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 49USER_END 4901ID_MENU=MNID/O_OBJ/200903021627418332263065 4901BUTTON_TITLE=Generuj VP (substituce) 4901TYP=NOTHING 4901USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903021627418332263065/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_v_zak_denik; #GROUP_SUB2=#RD=op_rady_8848_v_zak_rada;;#SETMENUID_END; 4901USER_END 50ID_MENU=MNID/O_OBJ/200903020947071123995764 50BUTTON_TITLE=Návazné výrobní příkazy 50TYP=SEZNAM 50SEZ_TABULKA=v_opvz 50SEZ_PODMINKA=exists(select 1 from dba.v_opv v_opv with(index(v_opv_objed)) where v_opv.objednavka = %doklad% and v_opv.doklad = v_opvz.doklad) 50SEZ_F3_TAG_BEGIN #F3DISADD; #F3DISDELETE; 50SEZ_F3_TAG_END 50USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903020947071123995764/20/40/0;    #BUTTON_GROUP=Výroba; #USE_INDEX=pk_v_opvz;;#SETMENUID_END; 50USER_END 51ID_MENU=MNID/O_OBJ/200903020952159849600579 51BUTTON_TITLE=Návazné položky výrobních příkazů 51TYP=SEZNAM 51SEZ_TABULKA=v_opv 51SEZ_VAZBA=TRUE 51SEZ_VAZBA_INDEX=v_opv_objed 51SEZ_VAZBA_COLUMN1=doklad 51NOEDIT=TRUE 51USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903020952159849600579/20/40/0;    #BUTTON_GROUP=Výroba; #NOSAVESORT;;#SETMENUID_END; 51USER_END 52ID_MENU=MNID/O_OBJ/200903021029254626498003 52BUTTON_TITLE=Návazné zakázkové postupy 52TYP=SEZNAM 52SEZ_TABULKA=v_opvvyrza 52SEZ_PODMINKA=exists(select 1 from dba.v_opv opv with(index(v_opv_objed)) where opv.objednavka = %doklad% and v_opvvyrza.opvfinal = opv.opv) 52USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903021029254626498003/20/40/0;    #BUTTON_GROUP=Výroba; #NOSAVESORT;;#SETMENUID_END; 52USER_END 53ID_MENU=MNID/O_OBJ/200705141135552428051672 53BUTTON_TITLE=Generuj zálohovou fakturu 53TYP=GROUP 53AKCE=op_gen_fv 53USER_BEGIN ;#BUTTON_WRITE_RIGHT=fv_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135552428051672/20/40/0;    #BUTTON_GROUP=Odb&yt; #NOEDIT_EVAL_LEFT=storno = 1 or druh <> 30 or (op_rady_8848_zal_fa_nast = 10 and odsouhlaseno = 1 and (doklad_fv_zal = '' or (op_rady_8848_zal_fa_pocet = 11 and doklad_fv_zal <> ''))) or (op_rady_8848_zal_fa_nast = 20 and expedovat_z = 1 and (doklad_fv_zal = '' or (op_rady_8848_zal_fa_pocet = 11 and doklad_fv_zal <> ''))) or vyrizeno = 1 or dodano_predb = 1 or (op_rady_8848_zal_fa_pocet = 1 and doklad_fv_zal <> '') or op_rady_8848_fv_rada_zal = '' or cena_bez_dph = 0 or cena_polozky = 0; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 53USER_END 5301ID_MENU=MNID/O_OBJ/200705141135552239350277 5301BUTTON_TITLE=Generuj zálohovou fakturu (substituce) 5301TYP=NOTHING 5301USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135552239350277/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_fv_denik_zal; #GROUP_SUB2=#RD=op_rady_8848_fv_rada_zal; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#TYP_DOKLADU=20:NA;;#SETMENUID_END; 5301USER_END 54ID_MENU=MNID/O_OBJ/200705141135553044795831 54BUTTON_TITLE=Generuj výdajový list 54TYP=GROUP 54AKCE=op_gen_vl 54USER_BEGIN ;#BUTTON_WRITE_RIGHT=vl_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135553044795831/20/40/0;    #BUTTON_GROUP=Odb&yt; #NOEDIT_EVAL_LEFT=storno = 1 or druh <> 30 or expedovat_z <> 1 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or vyrizeno = 1 or dodano_predb = 1 or op_rady_8848_op_denik_vl = ''; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 54USER_END 5401ID_MENU=MNID/O_OBJ/200705141135559844780483 5401BUTTON_TITLE=Generuj výdajový list (substituce) 5401TYP=NOTHING 5401USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135559844780483/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_op_denik_vl; #GROUP_SUB2=#RD=op_rady_8848_op_rada_vl; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#OBNOV=if(druh = 30, 1, 0):NA;;#SETMENUID_END; 5401USER_END 55ID_MENU=MNID/O_OBJ/200905190727002107850958 55BUTTON_TITLE=Generuj převáděcí list 55TYP=GROUP 55AKCE=op_gen_prev 55USER_BEGIN ;#BUTTON_WRITE_RIGHT=prev_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200905190727002107850958/20/40/0;    #BUTTON_GROUP=Odb&yt; #NOEDIT_EVAL_LEFT=storno = 1 or druh <> 30 or expedovat_z <> 1 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or vyrizeno = 1 or dodano_predb = 1 or op_rady_8848_op_rada_prev = ''; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 55USER_END 5501ID_MENU=MNID/O_OBJ/200905190728449186800574 5501BUTTON_TITLE=Generuj převádécí list (substituce) 5501TYP=NOTHING 5501USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200905190728449186800574/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_op_denik_prev; #GROUP_SUB2=#RD=op_rady_8848_op_rada_prev; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#OBNOV=if(druh = 30, 1, 0):NA;;#SETMENUID_END; 5501USER_END 56ID_MENU=MNID/O_OBJ/200705141135553055071090 56BUTTON_TITLE=Generuj fakturu na služby 56TYP=GROUP 56AKCE=op_gen_fv 56USER_BEGIN ;#BUTTON_WRITE_RIGHT=fv_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135553055071090/20/40/0;    #BUTTON_GROUP=Odb&yt; #NOEDIT_EVAL_LEFT=storno = 1 or druh <> 30 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or vyrizeno = 1 or dodano_predb = 1 or fv_rada = '' or cena_bez_dph = 0 or cena_polozky = 0; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 56USER_END 5601ID_MENU=MNID/O_OBJ/200705141135556654924894 5601BUTTON_TITLE=Generuj fakturu na služby (substituce) 5601TYP=NOTHING 5601USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135556654924894/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=fv_denik; #GROUP_SUB2=#RD=fv_rada; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#TYP_DOKLADU=10:NA;;#SETMENUID_END; 5601USER_END 57ID_MENU=MNID/O_OBJ/200705141135552393458900 57BUTTON_TITLE=Návazné generované zálohové faktury 57TYP=SEZNAM 57SEZ_TABULKA=fv_zahlavi 57SEZ_TITLE=Návazné zálohové FV vygenerované z objednávky {doklad} 57SEZ_PODMINKA=fv_zahlavi.objednavka = %doklad% and fv_zahlavi.typ_dokladu = 20 57SEZ_F3_TAG=    #F3DISADD; 57USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135552393458900/20/40/0;    #BUTTON_GROUP=Odb&yt; #SEZNAM_DOKLAD; #NOEDIT_EVAL_LEFT=druh <> 30; #SPACEBEFORE; #NOSAVESORT;;#SETMENUID_END; 57USER_END 58ID_MENU=MNID/O_OBJ/200705141135553907858789 58BUTTON_TITLE=Návazné generované výdajové listy 58TYP=SEZNAM 58SEZ_TABULKA=vl_zahlavi 58SEZ_TITLE=Návazné VL vygenerované z objednávky {doklad} 58SEZ_F3_TAG=    #F3DISADD; 58SEZ_VAZBA=TRUE 58SEZ_VAZBA_INDEX=vl_zahlavi_vl_z_objednavka 58SEZ_VAZBA_COLUMN1=doklad 58USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135553907858789/20/40/0;    #BUTTON_GROUP=Odb&yt; #SEZNAM_DOKLAD; #NOEDIT_EVAL_LEFT=druh <> 30; #NOSAVESORT; #REFRESHSOURCE;;#SETMENUID_END; 58USER_END 59ID_MENU=MNID/O_OBJ/200705301057309095861433 59BUTTON_TITLE=Návazné generované položky VL 59TYP=SEZNAM 59SEZ_TABULKA=vl_polozky 59SEZ_TITLE=Návazné položky VL vygenerované z objednávky {doklad} 59SEZ_PODMINKA=opp.doklad = %doklad% and vl_polozky.obj_doklad = opp.doklad and vl_polozky.obj_polozka = opp.polozka #OPT(dba.op_polozky opp with(index(pk_op_polozky)) /ADD, dba.vl_polozky vl_polozky with(index(vl_polozky_vl_p_objednavka))) 59USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705301057309095861433/20/40/0;    #BUTTON_GROUP=Odb&yt; #NOEDIT_EVAL_LEFT=druh <> 30; #NOSAVESORT;;#SETMENUID_END; 59USER_END 60ID_MENU=MNID/O_OBJ/200905190733510852502820 60BUTTON_TITLE=Návazné generované převáděcí listy 60TYP=SEZNAM 60SEZ_TABULKA=prev_zahlavi 60SEZ_TITLE=Návazné převáděcí listy vygenerované z objednávky {doklad} 60SEZ_F3_TAG=    #F3DISADD; 60SEZ_VAZBA=TRUE 60SEZ_VAZBA_INDEX=prev_zahlavi_objednavka 60SEZ_VAZBA_COLUMN1=doklad 60USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200905190733510852502820/20/40/0;    #BUTTON_GROUP=Odb&yt; #NOEDIT_EVAL_LEFT=druh <> 30; #SEZNAM_DOKLAD; #NOSAVESORT; #REFRESHSOURCE;;#SETMENUID_END; 60USER_END 61ID_MENU=MNID/O_OBJ/200705141135556860869751 61BUTTON_TITLE=Návazné generované faktury vydané na služby 61TYP=SEZNAM 61CLASS=w_iftseznam_doklad 61SEZ_TABULKA=fv_zahlavi 61SEZ_TITLE=Návazné FV na služby vygenerované z objednávky {doklad} 61SEZ_PODMINKA=fv_zahlavi.objednavka = %doklad% and fv_zahlavi.typ_dokladu = 10 and exists(select 1 from dba.fv_polozky fvp with(index(pk_fv_polozky)) where fvp.doklad = fv_zahlavi.doklad and fvp.vl_modul = 'O_OBJ' and fvp.vl_agenda = 'OP') 61SEZ_F3_TAG=    #F3DISADD; 61USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135556860869751/20/40/0;    #BUTTON_GROUP=Odb&yt; #NOEDIT_EVAL_LEFT=druh <> 30; #NOSAVESORT;;#SETMENUID_END; 61USER_END 62ID_MENU=MNID/O_OBJ/200802211606575700974131 62BUTTON_TITLE=Platby &záloh k partnerovi a zakázce 62TYP=SEZNAM 62SEZ_TABULKA=ev_zal 62SEZ_PODMINKA=ev_zal.id_partnera = %id_investora% and ev_zal.stav_devizy in (0, 1) and u_saldo_prv_dkl.zakazka_typ = %typ_zakazky% and u_saldo_prv_dkl.zakazka = %zakazka% and %typ_zakazky% <> '' and %zakazka% <> '' and u_saldo_prv_dkl.druh_dokladu = 1 and u_saldo_prv_dkl.povaha in (1, 2) and u_saldo_prv_dkl.saldokonto = 2 62USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200802211606575700974131/20/40/0;  #BUTTON_GROUP=Odb&yt; #USE_INDEX=ev_zal_id_partnera; #SPACEBEFORE;;#SETMENUID_END; 62USER_END 63ID_MENU=MNID/O_OBJ/200705141135556881067815 63BUTTON_TITLE=Storno 63USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135556881067815/20/40/0;    #NOEDIT_EVAL_LEFT=storno = 1 or dodano <> 0 or doklad_fv_zal <> ''; #NOEDIT_EVAL_RIGHT=storno <> 1 or doklad_fv_zal <> ''; #BUTTON_CLASS=uo_button_doklad; #STAV=STORNO; #BUTTON_COLOR=rgb(255,0,0); #RESELECTROW;;#SETMENUID_END; 63USER_END 64ID_MENU=MNID/O_OBJ/200705141135554335269357 64BUTTON_TITLE=Word/Excel 64USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135554335269357/20/40/0;  #BUTTON_CLASS=uo_button_attachment; #ATT_CLASS=ST_NABID; #ATT_TAB=op_zahlavi; #POZNAMKA=Formulář nabídky;;#SETMENUID_END; 64USER_END 65ID_MENU=MNID/O_OBJ/200807180937378114971602 65BUTTON_TITLE=Odešli odpovědné osobě &partnera 65TYP=DOKLTISK 65USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200807180937378114971602/20/40/0;    #BUTTON_GROUP=O&dešli PDF; #NOEDIT_EVAL_LEFT=id_par_oso = 0; #TISKTABULKA=op_zahlavi; #PERCENT_OFF_BUTTON; #TISKSUBST=\\OP_EXPORT_EMAIL|PAR; #DOKLTISK_NOMULTI; #DOKLTISK_USER_BEGIN; #DKLT_PRINT_DEV=3; #DKLT_PRINT_E_MAIL; #DKLT_PRINT_DOC_INFO1_BEGIN; select coalesce(oso.e_mail, ''), '', dba.substitute_fce(mtl.subject, '#vs#' + char(4) + %objednavka% + char(4) + %getrowvaluessubst(-1, 1=0, \"#\", \"#\" + char(4), char(4))%, char(4)), case when left(convert(varchar/*BY*/, mtl.body), 1) = '<' then '<html>' else '' end + dba.substitute_fce(mtl.body, '#vs#' + char(4) + %objednavka% + char(4) + %getrowvaluessubst(-1, 1=0, \"#\", \"#\" + char(4), char(4))%, char(4)) + case when left(convert(varchar/*BY*/, mtl.body), 1) = '<' then '</html>' else '' end from dba.op_zahlavi op_zahlavi_0 with(index(pk_op_zahlavi)), dba.op_rady opr with(index(pk_op_rady)), dba.paroso oso with(index(pk_paroso)), dba.kom_mail_templ_lang mtl with(index(pk_kom_mail_templ_lang)) where op_zahlavi_0.doklad > '' and opr.fiskalni_rok = op_zahlavi_0.fiskalni_rok and opr.denik = op_zahlavi_0.denik and opr.rada = op_zahlavi_0.rada and oso.id_partnera = op_zahlavi_0.id_partnera and oso.poradi = op_zahlavi_0.id_par_oso and mtl.kod = opr.kom_mail_templ and mtl.jazyk = dba.kom_mail_templ_lang_fce(mtl.kod, op_zahlavi_0.id_partnera, op_zahlavi_0.id_par_oso) #DKLT_PRINT_DOC_INFO1_END; #DKLT_PRINT_MAIL_NO_EXT_INFO; #DKLT_START_TISK; #DKLT_CLOSE_AFTER_TISK; #DOKLTISK_USER_END;;#SETMENUID_END; 65USER_END 66ID_MENU=MNID/O_OBJ/200807180952380791441576 66BUTTON_TITLE=Odešli odpovědné osobě &fakturačního partnera 66TYP=DOKLTISK 66USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200807180952380791441576/20/40/0;    #BUTTON_GROUP=O&dešli PDF; #NOEDIT_EVAL_LEFT=id_inv_oso = 0; #TISKTABULKA=op_zahlavi; #PERCENT_OFF_BUTTON; #TISKSUBST=\\OP_EXPORT_EMAIL|INV; #DOKLTISK_NOMULTI; #DOKLTISK_USER_BEGIN; #DKLT_PRINT_DEV=3; #DKLT_PRINT_E_MAIL; #DKLT_PRINT_DOC_INFO1_BEGIN; select coalesce(oso.e_mail, ''), '', dba.substitute_fce(mtl.subject, '#vs#' + char(4) + %objednavka% + char(4) + %getrowvaluessubst(-1, 1=0, \"#\", \"#\" + char(4), char(4))%, char(4)), case when left(convert(varchar/*BY*/, mtl.body), 1) = '<' then '<html>' else '' end + dba.substitute_fce(mtl.body, '#vs#' + char(4) + %objednavka% + char(4) + %getrowvaluessubst(-1, 1=0, \"#\", \"#\" + char(4), char(4))%, char(4)) + case when left(convert(varchar/*BY*/, mtl.body), 1) = '<' then '</html>' else '' end from dba.op_zahlavi op_zahlavi_0 with(index(pk_op_zahlavi)), dba.op_rady opr with(index(pk_op_rady)), dba.paroso oso with(index(pk_paroso)), dba.kom_mail_templ_lang mtl with(index(pk_kom_mail_templ_lang)) where op_zahlavi_0.doklad > '' and opr.fiskalni_rok = op_zahlavi_0.fiskalni_rok and opr.denik = op_zahlavi_0.denik and opr.rada = op_zahlavi_0.rada and oso.id_partnera = op_zahlavi_0.id_investora and oso.poradi = op_zahlavi_0.id_inv_oso and mtl.kod = opr.kom_mail_templ and mtl.jazyk = dba.kom_mail_templ_lang_fce(mtl.kod, op_zahlavi_0.id_investora, op_zahlavi_0.id_inv_oso) #DKLT_PRINT_DOC_INFO1_END; #DKLT_PRINT_MAIL_NO_EXT_INFO; #DKLT_START_TISK; #DKLT_CLOSE_AFTER_TISK; #DOKLTISK_USER_END;;#SETMENUID_END; 66USER_END 67ID_MENU=MNID/O_OBJ/201011301056154703421871 67BUTTON_TITLE=&Vytvoř verzi 67TYP=SQLCOMMAND 67USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201011301056154703421871/20/40/0;  #BUTTON_GROUP=Ver&ze; #BUTTON_QUESTION=Chcete opravdu vytvořit novou verzi dokladu?; #PERCENT_OFF; #SQLCOMMAND1=execute dba.o_obj_op_verze %doklad%; #REFRESHROW;;#SETMENUID_END; 67USER_END 68ID_MENU=MNID/O_OBJ/201011301056395689086387 68BUTTON_TITLE=Ver&ze 68TYP=SEZNAM 68SEZ_TABULKA=op_zahlavi_ver 68SEZ_TITLE=Verze {case(druh when 30 then 'objednávky přijaté'/*TRAN*/ when 20 then 'nabídky vydané'/*TRAN*/ when 10 then 'poptávky přijaté'/*TRAN*/ else 'objednávky přijaté'/*TRAN*/)} č. {doklad} 68SEZ_VAZBA=TRUE 68SEZ_VAZBA_COLUMN1=doklad 68USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//201011301056395689086387/20/40/0;    #SPACEBEFORE; #BUTTON_GROUP=Ver&ze; #REFRESHROW_ON_CLOSE;;#SETMENUID_END; 68USER_END 69ID_MENU=MNID/O_OBJ/202005061150465411080112 69BUTTON_TITLE=Kopie dokladu 69TYP=GROUP 69USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//202005061150465411080112/20/40/0;    #BUTTON_COLOR=rgb(255,255,255); #NOEDIT_EVAL_LEFT=storno = 1; #SETWSOURCE;;#SETMENUID_END; 69USER_END 6901ID_MENU=MNID/O_OBJ/202005061151455635001913 6901BUTTON_TITLE=Parametry 6901TYP=MULTIDETAIL 6901AKCE=kopie_op 6901DET_TITLE=Kopie dokladu 6901USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202005061151455635001913/45/40/0;    #GROUP_WAIT; #EDIT_COL_NOTAB; #ALL_EDIT_COL_ENABLE; #EDIT_COL_ALL_MODIFIED; #EDIT_COL1=op_zahlavi.fiskalni_rok; #EDIT_COL_DEFAULT1=fiskalni_rok='\\FR_O_OBJ'; #EDIT_COL1_TAG_BEGIN; #F3TAB=fiscis; #F3COL=fiskalni_rok; #F3SAY=nazev; #EDIT_COL1_TAG_END; #EDIT_COL1_TESTSQL1=Nový fiskální rok musí nemůže být nižší než fiskální rok kopírovaného dokladu.|select case when (select fis.poradi from dba.fiscis fis with(index(pk_fiscis)) where fis.obdobi = %fiskalni_rok%) <= (select fis.poradi from dba.fiscis fis with(index(pk_fiscis)) where fis.obdobi = !fiskalni_rok!) then 1 else 0 end; #EDIT_COL1_SUB=#KOPIE_OP_FR; #EDIT_COL2=op_zahlavi.dat_vyst; #EDIT_COL_DEFAULT2=dat_vyst=\\DATUM; #EDIT_COL2_SUB=#KOPIE_OP_DAT_VYST; #EDIT_COL3=op_zahlavi.dat_pri; #EDIT_COL_DEFAULT3=dat_pri=\\DATUM; #EDIT_COL3_SUB=#KOPIE_OP_DAT_PRI; #EDIT_COL4=op_zahlavi.dat_dodani; #EDIT_COL_DEFAULT4=dat_dodani=relativedate(date(\\DATUM), daysafter(dat_expedice, dat_dodani)); #EDIT_COL4_SUB=#KOPIE_OP_DAT_DODANI; #EDIT_COL5=op_zahlavi.dat_expedice; #EDIT_COL_DEFAULT5=dat_expedice=\\DATUM; #EDIT_COL5_TAG_BEGIN; #SELECT1=dat_dodani=relativedate(dat_expedice, delka_dodani); #EDIT_COL5_TAG_END; #EDIT_COL5_SUB=#KOPIE_OP_DAT_EXPEDICE; #EDIT_COL6=karty.delka_dodani; #EDIT_COL_DEFAULT6=delka_dodani=daysafter(dat_expedice, dat_dodani); #EDIT_COL6_VIS=1=0; #EDIT_COL_NOQUESTION; #EDIT_COL_NOINFO;;#SETMENUID_END; 6901USER_END 6902ID_MENU=MNID/O_OBJ/202005061152126344387860 6902BUTTON_TITLE=Kopie dokladu (náhled) 6902TYP=DETAIL 6902ID_SAVE=op_zahlavi 6902DET_TABULKA=op_zahlavi 6902USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202005061152126344387860/45/40/0;    #GROUP_WHEN='#MULTIDETAIL_KOPIE_OP' = 'ALLOK'; #GROUP_WAIT; #PERCENT_OFF; #SQLBRD_SUB1=#X1=update dba.op_rady set xcmd = null from dba.op_rady opr with(index(pk_op_rady)) where opr.fiskalni_rok = %fiskalni_rok% and opr.denik = %denik% and opr.rada = %rada%:HIST:EXEC; #SQLBRD_SUB2=#DOKLAD=execute dba.o_obj_get_op_doklad #KOPIE_OP_FR, %denik%, %rada%, '\\IDI', \\DATUM, %fiskalni_rok%; #SQLBRD_COMMAND1=execute dba.o_obj_op_kopie %doklad%, #DOKLAD, #KOPIE_OP_DAT_VYST, #KOPIE_OP_DAT_PRI, #KOPIE_OP_DAT_DODANI, #KOPIE_OP_DAT_EXPEDICE; #CLOSE_AFTER_SAVE;;#SETMENUID_END; 6902USER_END 70ID_MENU=MNID/O_OBJ/202209261423471893894612 70BUTTON_TITLE=Import OP KARAT 70TYP=EXIMP 70USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//202209261423471893894612/20/30/0; #BUTTON_COLOR=rgb(241,132,61); #NOMULTIWARN; #PERCENT_OFF; #AKCE=FULLIMPORT; #ID_EI=IMPORT_VBH; #RIGHTBUTTON; #BUTTON_CLASS_RIGHT=m_eximp_import; #SEZNOROW; #REFRESHROWS;;#SETMENUID_END; 70USER_END 71ID_MENU=MNID/O_OBJ/202306201248564755483132 71BUTTON_TITLE=Štítky 71TYP=SESTAVA 71SEZ_SQL_BEGIN SELECT S.poradi AS poradi\\:Sop_polozky.polozka, S.karta AS karta\\:Sop_polozky.karta, S.nazev AS nazev\\:Snomenklatura.nazev, S.user_mnozstvi_vyr AS user_mnozstvi_vyr\\:Sop_polozky.user_mnozstvi_vyr, S.doklad AS doklad\\:Sop_polozky.doklad, S.zkraceny_nazev AS firma\\:Sop_zahlavi.zkraceny_nazev, isnull(S.user_zakvy,'') AS user_zakvy\\:Sop_polozky.user_zakvy, S.user_dat_dodani_zd AS user_dat_dodani_zd\\:Sop_polozky.user_dat_dodani_zd, S.user_obj_nakup AS user_obj_nakup\\:Sop_zahlavi.user_obj_nakup, isnull(S.user_pol_poz,'') AS user_pol_poz\\:Sop_polozky.user_pol_poz, isnull(S.user_vrtani_met,'') AS user_vrtani_met\\:Sop_polozky.user_vrtani_met, S.user_polozka_zd AS user_polozka_zd\\:Sop_polozky.user_polozka_zd, S.user_typ_profil AS user_typ_profil\\:Sop_polozky.user_typ_profil, S.user_profil_zak AS user_profil_zak\\:Sop_polozky.user_profil_zak, S.user_carkod AS user_carkod\\:Sop_polozky.user_carkod, S.user_ean AS user_ean\\:Sop_polozky.user_ean, S.user_delka AS user_delka\\:Sop_polozky.user_delka, S.user_vyska AS user_vyska\\:Sop_polozky.user_vyska, S.user_hloubka AS user_hloubka\\:Sop_polozky.user_hloubka, S.user_kodkz AS user_kodkz\\:Sop_zahlavi.user_kodkz, S.storno AS storno\\:Sop_polozky.storno, S.polozka AS polozka\\:Sop_polozky.polozka, S.user_skup_n_op AS user_skup_n_op\\:Sop_polozky.user_skup_n_op, S.citac_stitku AS citac_stitku, S.ean16 AS ean16 FROM #op_stitky1 S WHERE 1=1 71SEZ_SQL_END 71USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//202306201248564755483132/20/30/0; #PERCENT_OFF; #NOADDADDMENU; #BUTTON_COLOR=rgb(255,128,128); #SPACEBEFORE; #SPACEAFTER; #DBEXEC_SUBST=#BE_DOKLAD|%doklad:NA%; #DBEXECUTE=op_exe_stitky1; #DEFAULT_PROFILE=STITKY;;#SETMENUID_END; 71USER_END 71GEN_REPORT=stitky_25_100_wh 71GEN_TAB=cisla 71GEN_TABFULL=cisla 71GEN_GROUP1= poradi;poradi;S.poradi 71GEN_PBL0=O_OBJ 71GEN_TITLE=Štítky 71GEN_WHERE=storno=0 72ID_MENU=MNID/O_OBJ/202308231103543718225879 72BUTTON_TITLE=Odešli odpovědné osobě &partnera - s csv 72TYP=GROUP 72USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//202308231103543718225879/20/30/0; #BUTTON_GROUP=O&dešli PDF; #NOEDIT_EVAL_LEFT=id_par_oso = 0; #SETWSOURCE; #PERCENT_OFF; #USERSUB1=#DOKLAD=%doklad%:NA; #USERSUB2=#GENERUJ_CSV=select parcis.user_csv_potvrz from dba.parcis parcis with(index(pk_parcis)) where parcis.id_partnera = %id_partnera%:NA; ;#SETMENUID_END; 72USER_END 7201ID_MENU=MNID/O_OBJ/202309071522329412031159 7201TYP=NOTHING 7201USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202309071522329412031159/45/30/0; #DO_PARENT_USERSUB; #GROUP_WHEN=#GENERUJ_CSV=1; #PERCENT_OFF; #NOMULTIWARN; #USERSUB1=#CSV_FILENAME=select top 1 'c:\\export\\' + user_csv.user_obj_nakup + '_POTV.csv' from dba.user_csv user_csv with(index(user_csv_doklad)), dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where user_csv.doklad = op_zahlavi.doklad and user_csv.doklad = '#DOKLAD':NA; #USERSUB2_BEGIN;#CSV_TEXT=#DO_LIST_BEGIN;| select 'KODKZ'+';'+'CIPOKZ'+';'+'KODZD'+';'+'CIPOZD'+';'+'KODVY'+';'+'CIPOVY'+';'+'M'+';'+'MNSUM'+';'+'MJ'+';'+'POCKS'+';'+'HL'+';'+'DELKA'+';'+'VYSKA'+';'+'R4'+';'+'PROF'+';'+'PROVED'+';'+'VERZE'+';'+'NAZUPR'+';'+'TYP'+';'+'CARKOD0'+';'+'COBJKZ'+';'+'COBJKZJM'+';'+'KADDO'+';'+'DATOBKZ'+';'+'TDKZ'+';'+'POZ'+';'+'COBJZDP'+';'+'COBJZDN'+';'+'KOOBJ'+';'+'KADOB'+';'+'DATZOZD'+';'+'TDZD'+';'+'CARKOD'+';'+'C'+';'+'ZAKVY'+';'+'C-ZD'+';'+'C-VY'+';'+'HMOTN'+';'+'PTDZD'+';'+'PRIP'+';'+'SERIE'+';'+'ZAKADE'+';'+'POZDE'+';'+'GUID'+';'+'VER_SOFT'+ char(13)+char(10) union all select convert(varchar,op_zahlavi.user_kodkz)/*KODKZ*/+';'+ convert(varchar,op_polozky.user_interni_c_p)/*CIPOKZ*/+';'+ convert(varchar,op_zahlavi.ico)/*KODZD*/+';'+ convert(varchar,op_polozky.user_polozka_zd)/*CIPOZD*/+';'+ convert(varchar,op_zahlavi.user_kod_vyr)/*KODVY*/+';'+ convert(varchar,op_polozky.karta)/*CIPOVY*/+';'+ ''/*M*/+';'+ convert(varchar,replace(op_polozky.mnozstvi_obj,'.',','))/*MNSUM*/+';'+ convert(varchar,op_polozky.id_mj_vyd)/*MJ*/+';'+ convert(varchar,replace(op_polozky.user_mnozstvi_vyr,'.',','))/*POCKS*/+';'+ convert(varchar,op_polozky.user_hloubka)/*HL*/+';'+ convert(varchar,op_polozky.user_delka)/*DELKA*/+';'+ convert(varchar,op_polozky.user_vyska)/*VYSKA*/+';'+ convert(varchar,op_polozky.user_sirka1)+'/'+convert(varchar,op_polozky.user_sirka2)+'/'+convert(varchar,op_polozky.user_sirka3)+'/'+convert(varchar,op_polozky.user_sirka4)+'/'+convert(varchar,op_polozky.user_sirka5)/*R4*/+';'+ convert(varchar,op_polozky.user_profil_zak)/*PROF*/+';'+ convert(varchar,op_polozky.user_vrtani_met)/*PROVED*/+';'+ convert(varchar,op_polozky.user_verze)/*VERZE*/+';'+ convert(varchar,op_polozky.user_nazupr)/*NAZUPR*/+';'+ convert(varchar,op_polozky.user_typ_produktu)/*TYP*/+';'+ convert(varchar,op_polozky.user_ean)/*CARKOD0*/+';'+ convert(varchar,op_polozky.user_zakvy)/*COBJKZ*/+';'+ convert(varchar,op_zahlavi.user_kod_vysobj)/*COBJKZJM*/+';'+ convert(varchar,op_zahlavi.user_kod_dodadr)/*KADDO*/+';'+ convert(varchar,op_zahlavi.dat_vyst,104)/*DATOBKZ*/+';'+ convert(varchar,op_polozky.dat_dodani,104)/*TDKZ*/+';'+ convert(varchar,op_polozky.user_pol_poz)/*POZ*/+';'+ convert(varchar,op_zahlavi.user_obj_nakup)/*COBJZDP*/+';'+ convert(varchar,op_zahlavi.objednavka)/*COBJZDN*/+';'+ convert(varchar,op_zahlavi.user_obj_vyst)/*KOOBJ*/+';'+ convert(varchar,op_zahlavi.user_dod_adr)/*KADOB*/+';'+ convert(varchar,op_zahlavi.user_dat_vyst_zd,104)/*DATZOZD*/+';'+ convert(varchar,op_polozky.user_dat_dodani_zd,104)/*TDZD*/+';'+ convert(varchar,op_polozky.user_carkod)/*CARKOD*/+';'+ convert(varchar,op_polozky.user_sirka1)+'/'+convert(varchar,op_polozky.user_sirka2)+'/'+convert(varchar,op_polozky.user_sirka3)+'/'+convert(varchar,op_polozky.user_sirka4)+'/'+convert(varchar,op_polozky.user_sirka5)/*C*/+';'+ convert(varchar,op_polozky.doklad)/*ZAKVY*/+';'+ convert(varchar,replace(op_polozky.user_czd,'.',','))/*C-ZD*/+';'+ convert(varchar,replace(op_polozky.cena_mj_cen,'.',','))/*C-VY*/+';'+ convert(varchar,replace(op_polozky.hmotnost,'.',','))/*HMOTN*/+';'+ convert(varchar,op_polozky.dat_dodani_ods,104)/*PTDZD*/+';'+ convert(varchar,op_polozky.user_prip)/*PRIP*/+';'+ convert(varchar,op_polozky.user_serie)/*SERIE*/+';'+ convert(varchar,op_polozky.user_zakade)/*ZAKADE*/+';'+ convert(varchar,op_polozky.user_pozde)/*POZDE*/+';'+ convert(varchar,op_polozky.user_guid)/*GUID*/+';'+ ''/*VER_SOFT*/+';'+ char(13)+char(10) from  dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)), dba.op_polozky op_polozky with(index(pk_op_polozky)) where op_polozky.doklad = op_zahlavi.doklad and op_polozky.doklad = '#DOKLAD' --select convert(varchar,user_csv.user_kodkz)/*KODKZ*/+';'+ --       convert(varchar,user_csv.user_interni_c_p)/*CIPOKZ*/+';'+ --       convert(varchar,user_csv.ico)/*KODZD*/+';'+ --       convert(varchar,user_csv.user_polozka_zd)/*CIPOZD*/+';'+ --       convert(varchar,user_csv.user_kod_vyr)/*KODVY*/+';'+ --       convert(varchar,op_polozky.karta)/*CIPOVY*/+';'+ --       ''/*M*/+';'+ --       convert(varchar,user_csv.mnozstvi_obj)/*MNSUM*/+';'+ --       convert(varchar,user_csv.id_mj_vyd)/*MJ*/+';'+ --       convert(varchar,user_csv.user_mnozstvi_vyr)/*POCKS*/+';'+ --       convert(varchar,user_csv.user_hloubka)/*HL*/+';'+ --       convert(varchar,user_csv.user_delka)/*DELKA*/+';'+ --       convert(varchar,user_csv.user_vyska)/*VYSKA*/+';'+ --       convert(varchar,user_csv.user_sirka1)+'/'+convert(varchar,user_csv.user_sirka2)+'/'+convert(varchar,user_csv.user_sirka3)+'/'+convert(varchar,user_csv.user_sirka4)+'/'+convert(varchar,user_csv.user_sirka5)/*R4*/+';'+ --       convert(varchar,user_csv.user_typ_profil)/*PROF*/+';'+ --       convert(varchar,user_csv.user_prof_popis)/*PROVED*/+';'+ --       convert(varchar,user_csv.user_verze)/*VERZE*/+';'+ --       convert(varchar,user_csv.user_nazupr)/*NAZUPR*/+';'+ --       convert(varchar,user_csv.user_typ_produktu)/*TYP*/+';'+ --       convert(varchar,user_csv.user_ean)/*CARKOD0*/+';'+ --       convert(varchar,user_csv.user_zakvy)/*COBJKZ*/+';'+ --       convert(varchar,user_csv.user_kod_vysobj)/*COBJKZJM*/+';'+ --       convert(varchar,user_csv.user_kod_dodadr)/*KADDO*/+';'+ --       convert(varchar,user_csv.dat_vyst,104)/*DATOBKZ*/+';'+ --       convert(varchar,user_csv.dat_dodani,104)/*TDKZ*/+';'+ --       convert(varchar,user_csv.user_pol_poz)/*POZ*/+';'+ --       convert(varchar,user_csv.user_obj_nakup)/*COBJZDP*/+';'+ --       convert(varchar,user_csv.objednavka)/*COBJZDN*/+';'+ --       convert(varchar,user_csv.user_obj_vyst)/*KOOBJ*/+';'+ --       convert(varchar,user_csv.user_dod_adr)/*KADOB*/+';'+ --       convert(varchar,user_csv.user_dat_vyst_zd,104)/*DATZOZD*/+';'+ --       convert(varchar,user_csv.user_dat_dodani_zd,104)/*TDZD*/+';'+ --       convert(varchar,user_csv.user_carkod)/*CARKOD*/+';'+ --       ''/*C*/+';'+ --       convert(varchar,op_polozky.doklad)/*ZAKVY*/+';'+ --       convert(varchar,user_csv.user_czd)/*C-ZD*/+';'+ --       convert(varchar,op_polozky.cena_cel_kon)/*C-VY*/+';'+ --       convert(varchar,op_polozky.hmotnost)/*HMOTN*/+';'+ --       convert(varchar,op_polozky.dat_dodani_ods,104)/*PTDZD*/+';'+ --       convert(varchar,user_csv.user_prip)/*PRIP*/+';'+ --       convert(varchar,user_csv.user_serie)/*SERIE*/+';'+ --       convert(varchar,user_csv.user_zakade)/*ZAKADE*/+';'+ --       convert(varchar,user_csv.user_pozde)/*POZDE*/+';'+ --       convert(varchar,user_csv.user_guid)/*GUID*/+';'+ --       ''/*VER_SOFT*/+';'+ char(13)+char(10) -- --from dba.user_csv user_csv with(index(user_csv_doklad)), dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)), dba.op_polozky op_polozky with(index(pk_op_polozky)) --where user_csv.doklad = op_zahlavi.doklad and user_csv.doklad = '#DOKLAD' and user_csv.polozka = op_polozky.polozka and op_zahlavi.doklad = op_polozky.doklad #DO_LIST_END;:NA#USERSUB2_END; #FILEWRITE_AFTER1=#CSV_FILENAME; #FILEWRITE_BODY1_BEGIN;#CSV_TEXT#FILEWRITE_BODY1_END; #GROUP_WAIT; ;#SETMENUID_END; 7201USER_END 7202ID_MENU=MNID/O_OBJ/202309071619146016179564 7202TYP=ATTADD 7202USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202309071619146016179564/45/30/0;    #DO_PARENT_USERSUB; #GROUP_WHEN=#GENERUJ_CSV=1; #FILE_FROM_CLIENT; #USERSUB1=#CSV_FILENAME=select top 1 'c:\\export\\' + user_csv.user_obj_nakup + '_POTV.csv' from dba.user_csv user_csv with(index(user_csv_doklad)), dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where user_csv.doklad = op_zahlavi.doklad and user_csv.doklad = '#DOKLAD':NA; #ATT_TABULKA=op_zahlavi; #ATT_PK=#DOKLAD; #ATT_CLASS=CSV_FILE; #ATT_TAB=op_zahlavi; #ATT_POZN=NEODESLANO; #FILE=#CSV_FILENAME; ;#SETMENUID_END; 7202USER_END 7203ID_MENU=MNID/O_OBJ/202309080945023119316514 7203TYP=DOKLTISK 7203USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202309080945023119316514/45/30/0;    #TISKSUBST=\\OP_EXPORT_EMAIL|PAR; #TISKTABULKA=op_zahlavi; #PERCENT_OFF; #DOKLTISK_NOMULTI; #DO_PARENT_USERSUB; #DOKLTISK_USER_BEGIN; #DKLT_PRINT_DEV=3; #DKLT_PRINT_E_MAIL; #--PRINT_E_MAIL_PARMS_BEGIN; #--MAIL_BODY_HTML_BEGIN; <html> <body> <font face=\"calibri\" size=\"3\">Dobrý den,<br> <br> zasíláme vám potvrzení objednávky. Prosíme o kontrolu správnosti u položek objednávky<br> <br> S pozdravem<br> Termopan<br> <br> </font> </html> #--MAIL_BODY_HTML_END; #MAIL_HTML; #--PRINT_E_MAIL_PARMS_END; #DKLT_PRINT_DOC_INFO1_BEGIN; select coalesce(oso.e_mail, ''), '', (mtl.subject + ' ' + %objednavka%), case when left(convert(varchar/*BY*/, mtl.body), 1) = '<' then '<html>' else '' end + dba.substitute_fce(mtl.body, '#vs#' + char(4) + %objednavka% + char(4) + %getrowvaluessubst(-1, 1=0, \"#\", \"#\" + char(4), char(4))%, char(4)) + case when left(convert(varchar/*BY*/, mtl.body), 1) = '<' then '</html>' else '' end from dba.op_zahlavi op_zahlavi_0 with(index(pk_op_zahlavi)), dba.op_rady opr with(index(pk_op_rady)), dba.paroso oso with(index(pk_paroso)), dba.kom_mail_templ_lang mtl with(index(pk_kom_mail_templ_lang)) where op_zahlavi_0.doklad > '' and opr.fiskalni_rok = op_zahlavi_0.fiskalni_rok and opr.denik = op_zahlavi_0.denik and opr.rada = op_zahlavi_0.rada and oso.id_partnera = op_zahlavi_0.id_partnera and oso.poradi = op_zahlavi_0.id_par_oso and mtl.kod = opr.kom_mail_templ and mtl.jazyk = dba.kom_mail_templ_lang_fce(mtl.kod, op_zahlavi_0.id_partnera, op_zahlavi_0.id_par_oso) #DKLT_PRINT_DOC_INFO1_END; #PRINT_DOC_ATT1_BEGIN;select tabulka, pk,poradi,pozn,file_name from dba.attach_store, dba.op_zahlavi op_zahlavi_0 with(index(pk_op_zahlavi)) where op_zahlavi_0.doklad = attach_store.pk and attach_store.pk=%doklad% and attach_store.att_class in ('CSV_FILE') and attach_store.tabulka = 'op_zahlavi' and attach_store.pozn = 'NEODESLANO'#PRINT_DOC_ATT1_END; #DKLT_PRINT_MAIL_NO_EXT_INFO; #DKLT_START_TISK; #DKLT_CLOSE_AFTER_TISK; #DOKLTISK_USER_END;;#SETMENUID_END; 7203USER_END 7204ID_MENU=MNID/O_OBJ/202309081105145299701219 7204TYP=SQLCOMMAND 7204USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202309081105145299701219/45/30/0;    #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update  dba.attach_store set pozn = '' from dba.attach_store attach_store with(index(attach_store_pk)),  dba.op_zahlavi op_zahlavi_0 with(index(pk_op_zahlavi)) where op_zahlavi_0.doklad = attach_store.pk and attach_store.tabulka = 'op_zahlavi' and attach_store.pk=%doklad% and attach_store.att_class in ('CSV_FILE') and attach_store.pozn = 'NEODESLANO' #SQLCOMMAND1_END;;#SETMENUID_END; 7204USER_END 73ID_MENU=MNID/O_OBJ/202310241617144140226159 73BUTTON_TITLE=Otevři PDF Výkresy 73TYP=ATTOPEN 73USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//202310241617144140226159/20/30/0;#NOEDIT_EVAL_LEFT=attpocetpdf=0; #BUTTON_COLOR=rgb(141,141,141); #USERSUB1=#XPK=select max(attach_store.link_pk) from dba.attach_store attach_store with(index(pk_attach_store)) where attach_store.pk=%doklad%:NA; #USERSUB2=#XPORPDF=select max(attach_store.poradi) from dba.attach_store attach_store with(index(pk_attach_store)) where attach_store.pk=%doklad% and attach_store.att_class='TPV':NA; #ATT_TABULKA=op_zahlavi; #ATT_PK=#XPK; #ATT_PORADI=#XPORPDF;;#SETMENUID_END; 73USER_END w_ift\tconn\tms_19216810247_karat_termopan 73 w_ift\tf11\tUzivatel/kswpvka AllDevices w_ift\tRefreshObjects\tLIST 200705141135559525303211 w_ift\tPercentOffDWs\tLIST\tdba.op_zahlavi\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.5253.5256.5279 200705141135559525303211\tdba.op_polozky\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.5253.5256.preview.200705141135559525303211.dw w_ift\tpreview1\tPoložky ---Id: 200705141135559525303211 ---UserParam: #TYPE=Button;#ID=200705141135559525303211;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=0;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1; ---Directives: #TYPE=Button;#ID=200705141135559525303211;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=0;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1;#PREVIEW_SEZNAM;#PREVIEW_TABLE=op_polozky;#PREVIEW_SQL_BEGIN;    #NOTAB=op_polozky; select *+^(nazev), op_polozky.nazev AS nazev /* \\:Sop_polozky.nazev:HNázev (položky) */, coalesce(nomenklatura_57444.konfig_typ, '') AS nom_konfig_typ /* \\:Snomenklatura.konfig_typ:NV */, op_zahlavi_45638.id_meny AS op_zahlavi_45638_id_meny /* \\:Sop_zahlavi.id_meny */, op_zahlavi_45638.storno AS op_zahlavi_45638_storno /* \\:Sop_zahlavi.storno:NV */, op_zahlavi_45638.odsouhlaseno AS op_zahlavi_45638_odsouhlaseno /* \\:Sop_zahlavi.odsouhlaseno:NV */, op_zahlavi_45638.id_partnera AS op_zahlavi_45638_id_partnera /* \\:Sop_zahlavi.id_partnera */, op_zahlavi_45638.zkraceny_nazev AS opz_zkracen_nazev /* \\:Sop_zahlavi.zkraceny_nazev */, obj.doklad AS obj_doklad /* \\:Sobj_prv_dkl.doklad:NV */, obj.potvrzeno AS obj_potvrzeno /* \\:Sobj_prv_dkl.potvrzeno:NV */, obj.rezervovat AS obj_rezervovat /* \\:Sobj_prv_dkl.rezervovat:NV */, round(obj.vykr_skl / op_polozky.koef_mj_vyd, 4) AS obj_vykr_skl /* \\:Sobj_prv_dkl.vykr_skl:HVykryto skladem [MJ oper] */, round(obj.vykr_vpr / op_polozky.koef_mj_vyd, 4) AS obj_vykr_vpr /* \\:Sobj_prv_dkl.vykr_vpr:NV */, round(obj.vykr_ov / op_polozky.koef_mj_vyd, 4) AS obj_vykr_ov /* \\:Sobj_prv_dkl.vykr_ov:NV */, round(obj.vykr_nev / op_polozky.koef_mj_vyd, 4) AS obj_vykr_nev /* \\:Sobj_prv_dkl.vykr_nev:NV */, opr.v_zak_denik AS op_rady_8848_v_zak_denik /* \\:Sop_rady.v_zak_denik:NV */, opr.v_zak_rada AS op_rady_8848_v_zak_rada /* \\:Sop_rady.v_zak_rada:NV */, opr.o_kal_denik AS op_rady_8848_o_kal_denik /* \\:Sop_rady.o_kal_denik:NV */, opr.o_kal_rada AS op_rady_8848_o_kal_rada /* \\:Sop_rady.o_kal_rada:NV */, opr.vydej_neods AS op_rady_8848_vydej_neods /* \\:Sop_rady.vydej_neods:NV */, coalesce(op_zahlavi_45638.import, 0) AS opz_import /* \\:Sop_zahlavi.import:NV */, opr.imp_ordrsp_pol_20 AS opr_imp_ordrsp_pol_20 /* \\:Sop_rady.imp_ordrsp_pol_20:NV */, case when exists(select 1 from dba.parcisudaje pu with(index(parcisudaje_typ)) where pu.typ = 'ORDRSP' and pu.id_partnera = op_zahlavi_45638.id_partnera) then 1 else 0 end AS par_export /* \\:Sop_zahlavi.export:NV */ ,op_zahlavi_45638.druh AS op_zahlavi_45638_druh\\:Sop_zahlavi.druh,nomenklatura_57444.nazev AS nomenklatura_57444_nazev\\:Snomenklatura.nazev:HNázev (nomenklatury) from dba.op_polozky op_polozky, dba.op_zahlavi op_zahlavi_45638 with(index(pk_op_zahlavi)), dba.op_rady opr with(index(pk_op_rady)), dba.nomenklatura nomenklatura_57444 with(index(pk_nomenklatura)), dba.obj_prv_dkl obj with(index(pk_obj_prv_dkl)) where op_zahlavi_45638.doklad = op_polozky.doklad and opr.fiskalni_rok = op_zahlavi_45638.fiskalni_rok and opr.denik = op_zahlavi_45638.denik and opr.rada = op_zahlavi_45638.rada and nomenklatura_57444.id_nomen = op_polozky.id_karty and obj.id_modulu = (case when op_polozky.polozka < 29000 and opr.obj_prv_dkl = 1 then 'O_OBJ' else '' end) and obj.agenda = (case when op_polozky.polozka < 29000 and opr.obj_prv_dkl = 1 then 'OP' else '' end) and obj.doklad = (case when op_polozky.polozka < 29000 and opr.obj_prv_dkl = 1 then op_polozky.doklad else '' end) and obj.polozka = (case when op_polozky.polozka < 29000 and opr.obj_prv_dkl = 1 then op_polozky.polozka else 1 end) ORDER BY op_polozky.doklad, op_polozky.id_pol_vys, op_polozky.id_polozky, op_polozky.polozka#PREVIEW_SQL_END;#PREVIEW_WHERE=op_polozky.doklad=%doklad% and ((op_polozky.storno=0 /* storno - nestornované položky */ )) and ((op_zahlavi_45638.storno=0 /* storno_dkl - nestornovaný doklad */ ));#PREVIEW_USER_BEGIN;#PREVIEW_LEGEND=#DOKL_STORNO:Stornovaná položka nebo záhlaví:Fstorno = 1 or op_zahlavi_45638_storno = 1; #PREVIEW_LEGEND=#ODB_SES_NE:Běžné položky:Fid_polozky = 0 and id_pol_vys = 0; #PREVIEW_LEGEND=#ODB_SESTAVA:Sestava:Fid_polozky = 0 and id_pol_vys > 0; #PREVIEW_LEGEND=#ODB_DILY:Díl sestavy:Fid_polozky > 0 and id_pol_vys > 0; #PREVIEW_USER_SEZ_SQL_ADD3000=(select parcis.nazev from dba.parcis parcis with(index(pk_parcis)) where parcis.id_partnera=id_investora) AS investor_nazev /*\\:Sparcis.nazev:HNázev partnera F*/; #PREVIEW_USER_END;#PREVIEW_ID_SAVE=op_polozky;#PREVIEW_SAVE_FILE=O_OBJ;#PREVIEW_NODOLAR;#PREVIEW_TREE=200705141135559525303211;#PREVIEW_ACTION_BEGIN;#PREVIEW_ACTION_NOROW;#PREVIEW_ACTION_TYPE=BUTTON;#PREVIEW_ACTION_BUTTON_MNID=200705141135559525303211;#PREVIEW_ACTION_END;#PREVIEW_NOREFRESH_EVAL=; w_ift\tCurrentPreviewUserParam\t#USR_PREVIEW;#PREVIEW_GRID_ROWS=1;#PREVIEW_GRID_COLS=1;#PREVIEW_VIEW_TAB=0;#PREVIEW_CAN_ADD=1; #USR_PREVIEW1_BEGIN;#TYPE=Button;#ID=200705141135559525303211;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=0;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1;#USR_PREVIEW1_END; w_iftseznam\tsez_tabulka\top_zahlavi w_iftseznam\tlink\tkarat://termopan:@0/mnid/o_obj/200705051639068503094766?where=%28%20op%5fzahlavi%2edoklad%20%3d%20%2724op010100000095%27%20%29&menu=0 w_iftseznam\tsez_sql\t    #NOTAB=op_zahlavi;     select *+,             op_rady.op_denik_pop AS op_rady_8848_op_denik_pop /* \\:NV */,             op_rady.op_rada_pop AS op_rady_8848_op_rada_pop /* \\:NV */,             op_rady.op_denik_nab AS op_rady_8848_op_denik_nab /* \\:NV */,             op_rady.op_rada_nab AS op_rady_8848_op_rada_nab /* \\:NV */,             op_rady.op_denik_op AS op_rady_8848_op_denik_op /* \\:NV */,             op_rady.op_rada_op AS op_rady_8848_op_rada_op /* \\:NV */,             op_rady.op_denik_ov AS op_rady_8848_op_denik_ov /* \\:NV */,             op_rady.op_rada_ov AS op_rady_8848_op_rada_ov /* \\:NV */,             op_rady.op_denik_vl AS op_rady_8848_op_denik_vl /* \\:NV */,             op_rady.op_rada_vl AS op_rady_8848_op_rada_vl /* \\:NV */,             op_rady.op_denik_prev AS op_rady_8848_op_denik_prev /* \\:NV */,             op_rady.op_rada_prev AS op_rady_8848_op_rada_prev /* \\:NV */,             op_rady.denik_posty AS op_rady_8848_denik_posty /* \\:NV */,             op_rady.rada_posty AS op_rady_8848_rada_posty /* \\:NV */,             op_rady.vydej_neods AS op_rady_8848_vydej_neods /* \\:NV */,             op_rady.fv_denik_zal AS op_rady_8848_fv_denik_zal /* \\:NV */,             op_rady.fv_rada_zal AS op_rady_8848_fv_rada_zal /* \\:NV */,             op_rady.zal_fa_nast AS op_rady_8848_zal_fa_nast /* \\:NV */,             op_rady.zal_fa_pocet AS op_rady_8848_zal_fa_pocet /* \\:NV */,             op_rady.tpv_denik_kalk AS op_rady_8848_tpv_denik_kalk /* \\:NV */,             op_rady.tpv_rada_kalk AS op_rady_8848_tpv_rada_kalk /* \\:NV */,             op_rady.v_zak_denik AS op_rady_8848_v_zak_denik /* \\:NV */,             op_rady.v_zak_rada AS op_rady_8848_v_zak_rada /* \\:NV */,             op_rady.op_denik_parag AS op_rady_8848_op_denik_parag /* \\:NV */,             op_rady.op_rada_parag AS op_rady_8848_op_rada_parag /* \\:NV */,             op_rady.parag_zpusob AS op_rady_8848_parag_zpusob /* \\:NV */,             op_rady.imp_ordrsp_dkl_10 AS opr_imp_ordrsp_dkl_10 /* \\:NV */,             op_rady.imp_ordrsp_dkl_20 AS opr_imp_ordrsp_dkl_20 /* \\:NV */,             op_zahlavi.cena_bez_dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS cena_bez_dph_mu /* \\:Sop_zahlavi.cena_bez_dph:HCena bez DPH [MÚ] */,             op_zahlavi.dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS dph_mu /* \\:Sop_zahlavi.dph:HDPH [MÚ] */,             op_zahlavi.cena_celkem * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS cena_celkem_mu /* \\:Sop_zahlavi.cena_celkem:HCena celkem [MÚ] */,             op_zahlavi.castka_zal * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS castka_zal_mu /* \\:Sop_zahlavi.castka_zal:HČástka zálohy [MÚ] */,             #TO_DUAL_ROUND(op_zahlavi.cena_bez_dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS cena_bez_dph_dual /* \\:Sop_zahlavi.cena_bez_dph:HCena bez DPH [MD] */,             #TO_DUAL_ROUND(op_zahlavi.dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS dph_dual /* \\:Sop_zahlavi.dph:HDPH [MD] */,             #TO_DUAL_ROUND(op_zahlavi.cena_celkem * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS cena_celkem_dual /* \\:Sop_zahlavi.cena_celkem:HCena celkem [MD] */,             #TO_DUAL_ROUND(op_zahlavi.castka_zal * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS castka_zal_dual /* \\:Sop_zahlavi.castka_zal:HČástka zálohy [MD] */,             mistni.id_mistni AS id_mistni /* \\:Smenycis_mistni.id_mistni */,             mistni.id_dualni AS id_dualni /* \\:Smenycis_mistni.id_dualni */,             dba.op_zahlavi_vykr_skl_fce(op_zahlavi.doklad) AS vykr_skl /* \\:Sop_zahlavi.vykryto:HSkladem */,             coalesce((select count(1) from dba.op_zahlavi_ver ver with(index(pk_op_zahlavi_ver)) where ver.doklad = op_zahlavi.doklad), 0) + 1 AS pocet_ver /* \\:Sop_zahlavi_ver.ver_poradi:HVerze */,             case when exists(select 1 from dba.parcisudaje pu with(index(parcisudaje_typ)) where pu.typ = 'ORDRSP' and pu.id_partnera = op_zahlavi.id_partnera) then 1 else 0 end AS par_export /* \\:Sop_zahlavi.export:NV */         from dba.op_zahlavi op_zahlavi,             dba.op_rady op_rady with(index(pk_op_rady)),             dba.menycis_mistni mistni with(index(pk_menycis_mistni))         where op_rady.fiskalni_rok = op_zahlavi.fiskalni_rok             and op_rady.denik = op_zahlavi.denik             and op_rady.rada = op_zahlavi.rada             and mistni.fiskalni_rok = op_zahlavi.fiskalni_rok w_iftseznam\tdetail.color\t255 w_iftseznam\tdwselect\tSELECT TOP 351  op_zahlavi.doklad,op_zahlavi.fiskalni_rok,op_zahlavi.denik,op_zahlavi.rada,op_zahlavi.aktualizace,op_zahlavi.druh,op_zahlavi.typ_obj,op_zahlavi.nulove_mnozstvi,op_zahlavi.pravo,op_zahlavi.citac,op_zahlavi.objednavka,op_zahlavi.var_symbol,op_zahlavi.kod_procesu,op_zahlavi.dat_por,op_zahlavi.dat_vyst,op_zahlavi.dat_pri,op_zahlavi.dat_dodani,op_zahlavi.dat_dodani_ods,op_zahlavi.dat_expedice,op_zahlavi.dat_odberu_od,op_zahlavi.dat_odberu_do,op_zahlavi.datum_obj,op_zahlavi.smena,op_zahlavi.dat_vyrizeni,op_zahlavi.fv_denik,op_zahlavi.fv_rada,op_zahlavi.posta_doklad,op_zahlavi.id_partnera,op_zahlavi.kod_partnera,op_zahlavi.ico,op_zahlavi.zkraceny_nazev,op_zahlavi.id_par_oso,op_zahlavi.id_firmy_crm,op_zahlavi.pril_crm,op_zahlavi.stat_urceni,op_zahlavi.id_adresy,op_zahlavi.id_investora,op_zahlavi.id_inv_oso,op_zahlavi.stredisko,op_zahlavi.typ_zakazky,op_zahlavi.zakazka,op_zahlavi.cinnost,op_zahlavi.dealer,op_zahlavi.smlouva,op_zahlavi.polozky_vl,op_zahlavi.pozadavky,op_zahlavi.rez_nahr,op_zahlavi.cena_polozky,op_zahlavi.celni_rezim,op_zahlavi.dph_povaha,op_zahlavi.dan_rezim,op_zahlavi.stat_dph,op_zahlavi.dph_polozky,op_zahlavi.dph_pov_limity,op_zahlavi.kurzovni_listek,op_zahlavi.id_meny,op_zahlavi.mnozstvi,op_zahlavi.kurz,op_zahlavi.typ_uhrady,op_zahlavi.splatnost,op_zahlavi.ds,op_zahlavi.penale_kod,op_zahlavi.penale_proc,op_zahlavi.penale,op_zahlavi.skonto,op_zahlavi.kod_skonta,op_zahlavi.zpusob_dopravy,op_zahlavi.kod_dd,op_zahlavi.kod_dp,op_zahlavi.kod_pt,op_zahlavi.misto_dp,op_zahlavi.cenik,op_zahlavi.rozpad_ob,op_zahlavi.cena_bez_dph,op_zahlavi.dph,op_zahlavi.cena_celkem,op_zahlavi.expedovat_z,op_zahlavi.storno,op_zahlavi.vykryto,op_zahlavi.dodano,op_zahlavi.dodano_predb,op_zahlavi.vyrizeno,op_zahlavi.vyrizeno_kl,op_zahlavi.odeslano,op_zahlavi.moje_id,op_zahlavi.dodanych,op_zahlavi.vyrizenych,op_zahlavi.dod_or_vyr,op_zahlavi.vsech,op_zahlavi.poznamka,op_zahlavi.kod_t_uvod,op_zahlavi.t_uvod,op_zahlavi.kod_t_zaver,op_zahlavi.t_zaver,op_zahlavi.kod_t_uvod_op,op_zahlavi.t_uvod_op,op_zahlavi.kod_t_zaver_op,op_zahlavi.t_zaver_op,op_zahlavi.id_partnera_dop,op_zahlavi.zkraceny_nazev_dop,op_zahlavi.kod_partnera_dop,op_zahlavi.ico_dop,op_zahlavi.id_adresy_dop,op_zahlavi.spz,op_zahlavi.expedice_misto,op_zahlavi.osoba,op_zahlavi.opr_prov,op_zahlavi.id_posty_poz,op_zahlavi.id_posty,op_zahlavi.id_posty_dor,op_zahlavi.id_modulu_gen,op_zahlavi.agenda_gen,op_zahlavi.doklad_gen,op_zahlavi.doklad_obj,op_zahlavi.doklad_fv_zal,op_zahlavi.doklad_vl,op_zahlavi.doklad_prev,op_zahlavi.doklad_fv,op_zahlavi.doklad_zak,op_zahlavi.doklad_kalk,op_zahlavi.doklad_ramc,op_zahlavi.id_partnera_ov,op_zahlavi.doklad_ov,op_zahlavi.cen_spln,op_zahlavi.mat_pozadavky,op_zahlavi.odsouhlaseno,op_zahlavi.plat_podminky,op_zahlavi.tech_provedeni,op_zahlavi.term_spln,op_zahlavi.vyr_kapacita,op_zahlavi.potvrzeno,op_zahlavi.rozvezeno,op_zahlavi.stav,op_zahlavi.storno_autor,op_zahlavi.storno_datum,op_zahlavi.procento_zal,op_zahlavi.castka_zal,op_zahlavi.zal_s_dph,op_zahlavi.elektroodpad,op_zahlavi.ramcovy,op_zahlavi.i_web_id_osoby,op_zahlavi.stav0_autor,op_zahlavi.stav1_autor,op_zahlavi.stav11_autor,op_zahlavi.stav0_datum,op_zahlavi.stav1_datum,op_zahlavi.stav11_datum,op_zahlavi.import,op_zahlavi.export,op_zahlavi.exp_ordrsp_stav_akc,op_zahlavi.zshop_e_mail,op_zahlavi.zshop_dod_adresa,op_zahlavi.zshop_fak_adresa,op_zahlavi.zshop_komplet,op_zahlavi.zshop_objednal,op_zahlavi.zshop_zpusob_odberu,op_zahlavi.zshop_zpusob_platby,op_zahlavi.zshop_e_mail_nad,op_zahlavi.zshop_id_shop,op_zahlavi.zshop_jazyk,op_zahlavi.zshop_http_referer,op_zahlavi.zshop_elp_id,op_zahlavi.zshop_elp_status,op_zahlavi.zshop_vs,op_zahlavi.zshop_uz_id,op_zahlavi.zshop_uz_name,op_zahlavi.zshop_uz_country,op_zahlavi.autor,op_zahlavi.ts,op_zahlavi.user_kod_vyr,op_zahlavi.user_kod_vysobj,op_zahlavi.user_kod_dodadr,op_zahlavi.user_obj_nakup,op_zahlavi.user_obj_vyst,op_zahlavi.user_dod_adr,op_zahlavi.user_dat_vyst_zd,op_zahlavi.user_kodkz,op_zahlavi.user_vyr_poznamka,op_zahlavi.user_sleva_odb,op_zahlavi.user_hmotnost_dkl,op_zahlavi.user_objem_dkl,op_zahlavi.user_cena_mat,isnull(op_zahlavi.xattach,0) xattach,             op_rady.op_denik_pop op_rady_8848_op_denik_pop ,             op_rady.op_rada_pop op_rady_8848_op_rada_pop ,             op_rady.op_denik_nab op_rady_8848_op_denik_nab ,             op_rady.op_rada_nab op_rady_8848_op_rada_nab ,             op_rady.op_denik_op op_rady_8848_op_denik_op ,             op_rady.op_rada_op op_rady_8848_op_rada_op ,             op_rady.op_denik_ov op_rady_8848_op_denik_ov ,             op_rady.op_rada_ov op_rady_8848_op_rada_ov ,             op_rady.op_denik_vl op_rady_8848_op_denik_vl ,             op_rady.op_rada_vl op_rady_8848_op_rada_vl ,             op_rady.op_denik_prev op_rady_8848_op_denik_prev ,             op_rady.op_rada_prev op_rady_8848_op_rada_prev ,             op_rady.denik_posty op_rady_8848_denik_posty ,             op_rady.rada_posty op_rady_8848_rada_posty ,             op_rady.vydej_neods op_rady_8848_vydej_neods ,             op_rady.fv_denik_zal op_rady_8848_fv_denik_zal ,             op_rady.fv_rada_zal op_rady_8848_fv_rada_zal ,             op_rady.zal_fa_nast op_rady_8848_zal_fa_nast ,             op_rady.zal_fa_pocet op_rady_8848_zal_fa_pocet ,             op_rady.tpv_denik_kalk op_rady_8848_tpv_denik_kalk ,             op_rady.tpv_rada_kalk op_rady_8848_tpv_rada_kalk ,             op_rady.v_zak_denik op_rady_8848_v_zak_denik ,             op_rady.v_zak_rada op_rady_8848_v_zak_rada ,             op_rady.op_denik_parag op_rady_8848_op_denik_parag ,             op_rady.op_rada_parag op_rady_8848_op_rada_parag ,             op_rady.parag_zpusob op_rady_8848_parag_zpusob ,             op_rady.imp_ordrsp_dkl_10 opr_imp_ordrsp_dkl_10 ,             op_rady.imp_ordrsp_dkl_20 opr_imp_ordrsp_dkl_20 ,             op_zahlavi.cena_bez_dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) cena_bez_dph_mu ,             op_zahlavi.dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) dph_mu ,             op_zahlavi.cena_celkem * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) cena_celkem_mu ,             op_zahlavi.castka_zal * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) castka_zal_mu ,             convert(decimal(18, 2)/*BY*/, round( case when  mistni.koef_na_dual > 0 then (op_zahlavi.cena_bez_dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) *  mistni.koef_na_dual when  mistni.koef_na_mistni > 0 then (op_zahlavi.cena_bez_dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) / (case when  mistni.koef_na_mistni <> 0 then  mistni.koef_na_mistni else 1 end) else 0 end,  2)) cena_bez_dph_dual ,             convert(decimal(18, 2)/*BY*/, round( case when  mistni.koef_na_dual > 0 then (op_zahlavi.dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) *  mistni.koef_na_dual when  mistni.koef_na_mistni > 0 then (op_zahlavi.dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) / (case when  mistni.koef_na_mistni <> 0 then  mistni.koef_na_mistni else 1 end) else 0 end,  2)) dph_dual ,             convert(decimal(18, 2)/*BY*/, round( case when  mistni.koef_na_dual > 0 then (op_zahlavi.cena_celkem * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) *  mistni.koef_na_dual when  mistni.koef_na_mistni > 0 then (op_zahlavi.cena_celkem * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) / (case when  mistni.koef_na_mistni <> 0 then  mistni.koef_na_mistni else 1 end) else 0 end,  2)) cena_celkem_dual ,             convert(decimal(18, 2)/*BY*/, round( case when  mistni.koef_na_dual > 0 then (op_zahlavi.castka_zal * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) *  mistni.koef_na_dual when  mistni.koef_na_mistni > 0 then (op_zahlavi.castka_zal * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) / (case when  mistni.koef_na_mistni <> 0 then  mistni.koef_na_mistni else 1 end) else 0 end,  2)) castka_zal_dual ,             mistni.id_mistni id_mistni ,             mistni.id_dualni id_dualni ,             dba.op_zahlavi_vykr_skl_fce(op_zahlavi.doklad) vykr_skl ,             isnull((select count(1) from dba.op_zahlavi_ver ver with(index(pk_op_zahlavi_ver)) where ver.doklad = op_zahlavi.doklad), 0) + 1 pocet_ver ,             case when 1 in(select 1 from dba.parcisudaje pu with(index(parcisudaje_typ)) where pu.typ = 'ORDRSP' and pu.id_partnera = op_zahlavi.id_partnera) then 1 else 0 end par_export          ,(select count(op_polozky.user_vyrobeno) from dba.op_polozky op_polozky with(index(pk_op_polozky)) where op_polozky.doklad = op_zahlavi.doklad and op_polozky.user_vyrobeno=1 and left(op_polozky.karta,1)<>'S') vyrobeno  ,(select count(op_polozky.karta) from dba.op_polozky op_polozky with(index(pk_op_polozky)) where op_polozky.doklad = op_zahlavi.doklad and left(op_polozky.karta,1)<>'S') pol_k_vyr  ,(select parcis.nazev from dba.parcis parcis with(index(pk_parcis)) where parcis.id_partnera=op_zahlavi.id_investora) investor_nazev  ,(select count(attach_store.poradi) from dba.attach_store attach_store with(index(pk_attach_store)) where attach_store.pk=op_zahlavi.doklad and attach_store.att_class='TPV') attpocetpdf from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) , dba.op_rady op_rady with(index(pk_op_rady)) , dba.menycis_mistni mistni with(index(pk_menycis_mistni)) where op_rady.fiskalni_rok = op_zahlavi.fiskalni_rok             and op_rady.denik = op_zahlavi.denik             and op_rady.rada = op_zahlavi.rada             and mistni.fiskalni_rok = op_zahlavi.fiskalni_rok  AND (op_zahlavi.druh = 30 /* sez_podm */) AND ( op_zahlavi.doklad=/*apb545*/'24OP010100000095'/*ape545*/ AND (op_zahlavi.doklad + '') <> '' /* blankrec */) AND (((op_zahlavi.storno <> 1 /* storno - nestornované */ )) /* combo5 */ )    ORDER BY op_zahlavi.doklad DESC OPTION(fast 350) /* seznam op_zahlavi A/O_OBJ/op_zahlavi/200705051639068503094766/10/40/0 */ w_iftseznam\tdwcolumns\tdoklad,fiskalni_rok,denik,rada,aktualizace,druh,typ_obj,nulove_mnozstvi,pravo,citac,objednavka,var_symbol,kod_procesu,dat_por,dat_vyst,dat_pri,dat_dodani,dat_dodani_ods,dat_expedice,dat_odberu_od,dat_odberu_do,datum_obj,smena,dat_vyrizeni,fv_denik,fv_rada,posta_doklad,id_partnera,kod_partnera,ico,zkraceny_nazev,id_par_oso,id_firmy_crm,pril_crm,stat_urceni,id_adresy,id_investora,id_inv_oso,stredisko,typ_zakazky,zakazka,cinnost,dealer,smlouva,polozky_vl,pozadavky,rez_nahr,cena_polozky,celni_rezim,dph_povaha,dan_rezim,stat_dph,dph_polozky,dph_pov_limity,kurzovni_listek,id_meny,mnozstvi,kurz,typ_uhrady,splatnost,ds,penale_kod,penale_proc,penale,skonto,kod_skonta,zpusob_dopravy,kod_dd,kod_dp,kod_pt,misto_dp,cenik,rozpad_ob,cena_bez_dph,dph,cena_celkem,expedovat_z,storno,vykryto,dodano,dodano_predb,vyrizeno,vyrizeno_kl,odeslano,moje_id,dodanych,vyrizenych,dod_or_vyr,vsech,poznamka,kod_t_uvod,t_uvod,kod_t_zaver,t_zaver,kod_t_uvod_op,t_uvod_op,kod_t_zaver_op,t_zaver_op,id_partnera_dop,zkraceny_nazev_dop,kod_partnera_dop,ico_dop,id_adresy_dop,spz,expedice_misto,osoba,opr_prov,id_posty_poz,id_posty,id_posty_dor,id_modulu_gen,agenda_gen,doklad_gen,doklad_obj,doklad_fv_zal,doklad_vl,doklad_prev,doklad_fv,doklad_zak,doklad_kalk,doklad_ramc,id_partnera_ov,doklad_ov,cen_spln,mat_pozadavky,odsouhlaseno,plat_podminky,tech_provedeni,term_spln,vyr_kapacita,potvrzeno,rozvezeno,stav,storno_autor,storno_datum,procento_zal,castka_zal,zal_s_dph,elektroodpad,ramcovy,i_web_id_osoby,stav0_autor,stav1_autor,stav11_autor,stav0_datum,stav1_datum,stav11_datum,import,export,exp_ordrsp_stav_akc,zshop_e_mail,zshop_dod_adresa,zshop_fak_adresa,zshop_komplet,zshop_objednal,zshop_zpusob_odberu,zshop_zpusob_platby,zshop_e_mail_nad,zshop_id_shop,zshop_jazyk,zshop_http_referer,zshop_elp_id,zshop_elp_status,zshop_vs,zshop_uz_id,zshop_uz_name,zshop_uz_country,autor,ts,user_kod_vyr,user_kod_vysobj,user_kod_dodadr,user_obj_nakup,user_obj_vyst,user_dod_adr,user_dat_vyst_zd,user_kodkz,user_vyr_poznamka,user_sleva_odb,user_hmotnost_dkl,user_objem_dkl,user_cena_mat,xattach,op_rady_8848_op_denik_pop,op_rady_8848_op_rada_pop,op_rady_8848_op_denik_nab,op_rady_8848_op_rada_nab,op_rady_8848_op_denik_op,op_rady_8848_op_rada_op,op_rady_8848_op_denik_ov,op_rady_8848_op_rada_ov,op_rady_8848_op_denik_vl,op_rady_8848_op_rada_vl,op_rady_8848_op_denik_prev,op_rady_8848_op_rada_prev,op_rady_8848_denik_posty,op_rady_8848_rada_posty,op_rady_8848_vydej_neods,op_rady_8848_fv_denik_zal,op_rady_8848_fv_rada_zal,op_rady_8848_zal_fa_nast,op_rady_8848_zal_fa_pocet,op_rady_8848_tpv_denik_kalk,op_rady_8848_tpv_rada_kalk,op_rady_8848_v_zak_denik,op_rady_8848_v_zak_rada,op_rady_8848_op_denik_parag,op_rady_8848_op_rada_parag,op_rady_8848_parag_zpusob,opr_imp_ordrsp_dkl_10,opr_imp_ordrsp_dkl_20,cena_bez_dph_mu,dph_mu,cena_celkem_mu,castka_zal_mu,cena_bez_dph_dual,dph_dual,cena_celkem_dual,castka_zal_dual,id_mistni,id_dualni,vykr_skl,pocet_ver,par_export,vyrobeno,pol_k_vyr,investor_nazev,attpocetpdf,xremind w_iftseznam\tdwcolumns_visible\tstav0_autor,xattach_bmp,doklad,potvrzeno,objednavka,user_obj_nakup,odsouhlaseno,vykryto,vykr_skl,dodano,dodano_predb,vyrizeno,vyrizeno_kl,storno,dat_pri,dat_dodani,dat_expedice,zkraceny_nazev,user_kodkz,cena_bez_dph,dph,cena_celkem,castka_zal,id_meny,kod_procesu,dat_vyrizeni,druh,pocet_ver,ramcovy,dat_odberu_od,dat_odberu_do,cenik,posta_doklad,id_partnera,kod_partnera,ico,id_adresy,id_par_oso,id_investora,id_inv_oso,id_firmy_crm,pril_crm,smlouva,zpusob_dopravy,id_partnera_dop,stat_urceni,zkraceny_nazev_dop,ico_dop,kod_partnera_dop,id_adresy_dop,spz,kod_dp,misto_dp,dan_rezim,stredisko,typ_zakazky,zakazka,cinnost,dealer,celni_rezim,kurzovni_listek,mnozstvi,dph_povaha,stat_dph,kurz,typ_uhrady,splatnost,ds,penale,penale_kod,penale_proc,dodanych,vyrizenych,dod_or_vyr,kod_dd,poznamka,kod_pt,osoba,id_modulu_gen,agenda_gen,doklad_gen,doklad_prev,doklad_obj,doklad_zak,doklad_kalk,kod_t_uvod,t_uvod,kod_t_zaver,t_zaver,cen_spln,mat_pozadavky,plat_podminky,tech_provedeni,term_spln,vyr_kapacita,smena,typ_obj,dph_polozky,pozadavky,rez_nahr,cena_polozky,polozky_vl,aktualizace,nulove_mnozstvi,rozpad_ob,elektroodpad,expedice_misto,expedovat_z,id_partnera_ov,opr_prov,dat_por,storno_autor,storno_datum,id_mistni,cena_bez_dph_mu,dph_mu,cena_celkem_mu,castka_zal_mu,id_dualni,cena_bez_dph_dual,dph_dual,cena_celkem_dual,castka_zal_dual,autor,ts,var_symbol,dat_vyst,dat_dodani_ods,datum_obj,dph_pov_limity,skonto,kod_skonta,odeslano,kod_t_uvod_op,t_uvod_op,kod_t_zaver_op,t_zaver_op,id_posty_poz,id_posty,id_posty_dor,doklad_ramc,i_web_id_osoby,stav1_autor,stav11_autor,stav0_datum,stav1_datum,stav11_datum,import,export,exp_ordrsp_stav_akc,zshop_e_mail,zshop_dod_adresa,zshop_fak_adresa,zshop_komplet,zshop_objednal,zshop_zpusob_odberu,zshop_zpusob_platby,zshop_e_mail_nad,zshop_id_shop,zshop_jazyk,zshop_http_referer,zshop_elp_id,zshop_elp_status,zshop_vs,zshop_uz_id,zshop_uz_name,zshop_uz_country,user_kod_vyr,user_kod_vysobj,user_kod_dodadr,user_obj_vyst,user_dod_adr,user_dat_vyst_zd,xremind_bmp,user_vyr_poznamka,user_sleva_odb,investor_nazev,user_hmotnost_dkl,user_objem_dkl,opattpdf,user_cena_mat 0\tstav0_autor\t56 1\txattach_bmp\t18 2\tdoklad\t110 3\tpotvrzeno\t28 4\tobjednavka\t110 5\tuser_obj_nakup\t166 6\todsouhlaseno\t28 7\tvykryto\t28 8\tvykr_skl\t28 9\tdodano\t28 10\tdodano_predb\t31 11\tvyrizeno\t28 12\tvyrizeno_kl\t28 13\tstorno\t28 14\tdat_pri\t69 15\tdat_dodani\t69 16\tdat_expedice\t69 17\tzkraceny_nazev\t161 18\tuser_kodkz\t153 19\tcena_bez_dph\t116 20\tdph\t92 21\tcena_celkem\t99 22\tcastka_zal\t100 23\tid_meny\t46 24\tkod_procesu\t69 25\tdat_vyrizeni\t83 26\tdruh\t69 27\tpocet_ver\t71 28\tramcovy\t57 29\tdat_odberu_od\t69 30\tdat_odberu_do\t69 31\tcenik\t110 32\tposta_doklad\t110 33\tid_partnera\t70 34\tkod_partnera\t77 35\tico\t69 36\tid_adresy\t56 37\tid_par_oso\t156 38\tid_investora\t100 39\tid_inv_oso\t175 40\tid_firmy_crm\t105 41\tpril_crm\t80 42\tsmlouva\t133 43\tzpusob_dopravy\t115 44\tid_partnera_dop\t94 45\tstat_urceni\t132 46\tzkraceny_nazev_dop\t171 47\tico_dop\t100 48\tkod_partnera_dop\t99 49\tid_adresy_dop\t139 50\tspz\t133 51\tkod_dp\t81 52\tmisto_dp\t167 53\tdan_rezim\t170 54\tstredisko\t65 55\ttyp_zakazky\t71 56\tzakazka\t185 57\tcinnost\t85 58\tdealer\t85 59\tcelni_rezim\t222 60\tkurzovni_listek\t87 61\tmnozstvi\t158 62\tdph_povaha\t152 63\tstat_dph\t132 64\tkurz\t101 65\ttyp_uhrady\t49 66\tsplatnost\t81 67\tds\t207 68\tpenale\t69 69\tpenale_kod\t66 70\tpenale_proc\t100 71\tdodanych\t125 72\tvyrizenych\t150 73\tdod_or_vyr\t192 74\tkod_dd\t132 75\tpoznamka\t253 76\tkod_pt\t152 77\tosoba\t69 78\tid_modulu_gen\t82 79\tagenda_gen\t90 80\tdoklad_gen\t146 81\tdoklad_prev\t117 82\tdoklad_obj\t155 83\tdoklad_zak\t105 84\tdoklad_kalk\t156 85\tkod_t_uvod\t140 86\tt_uvod\t257 87\tkod_t_zaver\t158 88\tt_zaver\t257 89\tcen_spln\t121 90\tmat_pozadavky\t131 91\tplat_podminky\t109 92\ttech_provedeni\t124 93\tterm_spln\t140 94\tvyr_kapacita\t101 95\tsmena\t91 96\ttyp_obj\t90 97\tdph_polozky\t120 98\tpozadavky\t66 99\trez_nahr\t99 100\tcena_polozky\t61 101\tpolozky_vl\t72 102\taktualizace\t104 103\tnulove_mnozstvi\t108 104\trozpad_ob\t100 105\telektroodpad\t107 106\texpedice_misto\t114 107\texpedovat_z\t42 108\tid_partnera_ov\t113 109\topr_prov\t92 110\tdat_por\t90 111\tstorno_autor\t70 112\tstorno_datum\t133 113\tid_mistni\t82 114\tcena_bez_dph_mu\t109 115\tdph_mu\t87 116\tcena_celkem_mu\t99 117\tcastka_zal_mu\t104 118\tid_dualni\t82 119\tcena_bez_dph_dual\t109 120\tdph_dual\t87 121\tcena_celkem_dual\t99 122\tcastka_zal_dual\t104 123\tautor\t55 124\tts\t126 125\tvar_symbol\t84 126\tdat_vyst\t97 127\tdat_dodani_ods\t161 128\tdatum_obj\t160 129\tdph_pov_limity\t240 130\tskonto\t46 131\tkod_skonta\t153 132\todeslano\t60 133\tkod_t_uvod_op\t152 134\tt_uvod_op\t454 135\tkod_t_zaver_op\t169 136\tt_zaver_op\t454 137\tid_posty_poz\t150 138\tid_posty\t131 139\tid_posty_dor\t141 140\tdoklad_ramc\t123 141\ti_web_id_osoby\t98 142\tstav1_autor\t56 143\tstav11_autor\t71 144\tstav0_datum\t147 145\tstav1_datum\t147 146\tstav11_datum\t147 147\timport\t92 148\texport\t97 149\texp_ordrsp_stav_akc\t92 150\tzshop_e_mail\t454 151\tzshop_dod_adresa\t85 152\tzshop_fak_adresa\t103 153\tzshop_komplet\t61 154\tzshop_objednal\t454 155\tzshop_zpusob_odberu\t90 156\tzshop_zpusob_platby\t84 157\tzshop_e_mail_nad\t454 158\tzshop_id_shop\t79 159\tzshop_jazyk\t37 160\tzshop_http_referer\t454 161\tzshop_elp_id\t454 162\tzshop_elp_status\t100 163\tzshop_vs\t100 164\tzshop_uz_id\t304 165\tzshop_uz_name\t454 166\tzshop_uz_country\t454 167\tuser_kod_vyr\t123 168\tuser_kod_vysobj\t153 169\tuser_kod_dodadr\t169 170\tuser_obj_vyst\t153 171\tuser_dod_adr\t379 172\tuser_dat_vyst_zd\t161 173\txremind_bmp\t18 174\tuser_vyr_poznamka\t454 175\tuser_sleva_odb\t90 176\tinvestor_nazev\t454 177\tuser_hmotnost_dkl\t161 178\tuser_objem_dkl\t143 179\topattpdf\t53 180\tuser_cena_mat\t127 w_iftseznam\tdwcolumns_invisible\tfiskalni_rok,denik,rada,pravo,citac,fv_denik,fv_rada,id_par_oso_sum,pril_crm_sum,id_adresy_sum,id_inv_oso_sum,mnozstvi_sum,kurz_sum,splatnost_sum,penale_proc_sum,cena_bez_dph_sum,dph_sum,cena_celkem_sum,moje_id,moje_id_sum,dodanych_sum,vyrizenych_sum,dod_or_vyr_sum,vsech,vsech_sum,id_adresy_dop_sum,id_posty_poz_sum,doklad_fv_zal,doklad_vl,doklad_fv,doklad_ov,rozvezeno,stav,procento_zal,procento_zal_sum,castka_zal_sum,zal_s_dph,user_hmotnost_dkl_sum,user_objem_dkl_sum,user_cena_mat_sum,xattach,op_rady_8848_op_denik_pop,op_rady_8848_op_rada_pop,op_rady_8848_op_denik_nab,op_rady_8848_op_rada_nab,op_rady_8848_op_denik_op,op_rady_8848_op_rada_op,op_rady_8848_op_denik_ov,op_rady_8848_op_rada_ov,op_rady_8848_op_denik_vl,op_rady_8848_op_rada_vl,op_rady_8848_op_denik_prev,op_rady_8848_op_rada_prev,op_rady_8848_denik_posty,op_rady_8848_rada_posty,op_rady_8848_vydej_neods,op_rady_8848_fv_denik_zal,op_rady_8848_fv_rada_zal,op_rady_8848_zal_fa_nast,op_rady_8848_zal_fa_pocet,op_rady_8848_tpv_denik_kalk,op_rady_8848_tpv_rada_kalk,op_rady_8848_v_zak_denik,op_rady_8848_v_zak_rada,op_rady_8848_op_denik_parag,op_rady_8848_op_rada_parag,op_rady_8848_parag_zpusob,opr_imp_ordrsp_dkl_10,opr_imp_ordrsp_dkl_20,cena_bez_dph_mu_sum,dph_mu_sum,cena_celkem_mu_sum,castka_zal_mu_sum,cena_bez_dph_dual_sum,dph_dual_sum,cena_celkem_dual_sum,castka_zal_dual_sum,par_export,vyrobeno,vyrobeno_sum,pol_k_vyr,pol_k_vyr_sum,attpocetpdf,attpocetpdf_sum,xremind w_iftseznam\tid_save\to_obj/op_zahlavi w_iftseznam\tfirstuser\t;#SETMENUID=A/O_OBJ/op_zahlavi/200705051639068503094766/10/40/0;    #XSUB=\\AKCE^OBJ; #MNUMAKCE=200705051639068503094766;;#SETMENUID_END;; #WORKSPACE_TITLE_BEGIN;Objednávky přijaté#WORKSPACE_TITLE_END;; #WORKSPACE_MODULE=O_OBJ;; #WORKSPACE_MNID=200705051639068503094766;;;#SETMENUID=O/O_OBJ/10/op_zahlavi//200705141135552301933414/15/40/0;    #ENAB_ADD_IN_VIEW; #HIDEBLANKREC; #STANDARDSORT; #TL_FUNKCE_SEZNAM; #COMBO_ID1=stav; #COLUMN1=-; #POLOZKY1=Nepřístupné\\1\\op_zahlavi.opr_prov = 0^Přístupné\\2\\op_zahlavi.opr_prov = 1^Vyřízeno\\3\\(op_zahlavi.vyrizeno = 1 or op_zahlavi.vyrizeno_kl = 1)^Odsouhlaseno\\4\\op_zahlavi.odsouhlaseno = 1^Nevyřízeno\\5\\(op_zahlavi.vyrizeno = 0 and op_zahlavi.vyrizeno_kl = 0)^Neodsouhlaseno\\6\\op_zahlavi.odsouhlaseno = 0; #POPISBEZ1=Stav; #COMBO_ID2=vykryto; #COLUMN2=; #POLOZKY2=Vůbec\\0\\op_zahlavi.vykryto = 0 and op_zahlavi.vyrizeno <> 1^Nevykryto\\4\\op_zahlavi.vykryto <> 1 and op_zahlavi.vyrizeno <> 1^Vykryto částečně\\2\\op_zahlavi.vykryto = 2 and op_zahlavi.vyrizeno <> 1^Vykryto\\1\\op_zahlavi.vykryto = 1 or op_zahlavi.vyrizeno = 1; #POPISBEZ2=Vykryto; #COMBO_ID3=dodano; #COLUMN3=-; #POLOZKY3=Vůbec\\0\\op_zahlavi.dodano = 0 and op_zahlavi.vyrizeno_kl <> 1^Částečně\\1\\op_zahlavi.dodano = 2 and op_zahlavi.vyrizeno_kl <> 1^Nedodané\\2\\op_zahlavi.dodano in (0, 2) and op_zahlavi.vyrizeno_kl <> 1^Zcela dodané\\3\\op_zahlavi.dodano = 1^Vyřízené ručně\\4\\op_zahlavi.vyrizeno_kl = 1; #POPISBEZ3=Dodáno; #COMBO_ID4=dodano_predb; #COLUMN4=coalesce(op_zahlavi.dodano_predb, 0); #POLOZKY4=Předběžně dodáno NE\\0^Předběžně dodáno ANO\\1^Předběžně dodáno ČÁSTEČNĚ\\2; #POPISBEZ4=Předběžně dodáno; #COMBO_ID5=storno; #COLUMN5=-; #POLOZKY5=Nestornované\\1\\op_zahlavi.storno <> 1^Stornované\\2\\op_zahlavi.storno = 1; #POPISBEZ5=Storno; #DEFAULT5=1; #COMBO_ID6=dopravce; #COLUMN6=-; #POLOZKY6=Bez dopravce\\1\\op_zahlavi.id_partnera_dop = ''^S dopravcem\\2\\op_zahlavi.id_partnera_dop <> ''; #POPISBEZ6=Dopravce; #COMBO_ID7=spz; #COLUMN7=-; #POLOZKY7=Bez SPZ\\1\\op_zahlavi.spz = ''^S SPZ\\2\\op_zahlavi.spz <> ''; #POPISBEZ7=SPZ; #COMBO_ID8=doklad_fv_zal; #COLUMN8=-; #POLOZKY8=Bez zálohové FV\\1\\op_zahlavi.doklad_fv_zal = ''^Se zálohovou FV\\2\\op_zahlavi.doklad_fv_zal <> ''; #POPISBEZ8=Zálohová FV; #COMBO_ID9=ramcovy; #COLUMN9=coalesce(op_zahlavi.ramcovy, 0); #POLOZKY9=Rámcový doklad\\1^Běžný doklad\\0; #POPISBEZ9=Rámcový doklad; #COMBO_ID10=expedovat; #COLUMN10=op_zahlavi.expedovat_z; #POLOZKY10=Expedovat\\1^Neexpedovat\\0; #POPISBEZ10=Expedovat; #COMBO_ID11=id_meny; #COLUMN11=op_zahlavi.id_meny; #POLOZKY11=select mena.id_meny, '', 'op_zahlavi.id_meny = ' + char(39) + mena.id_meny + char(39) from dba.menycis mena with(index(pk_menycis)) where mena.id_meny <> '' order by mena.id_meny; #POPISBEZ11=Měna; #COMBO_BEGIN; #COMBO_ID=export; #COLUMN=coalesce(op_zahlavi.export, 0); #POLOZKY=Ne\\0^Exportovat\\1^Exportováno\\2; #POPISBEZ=Exportovat potvrzení; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=neex_vpr; #COLUMN=-; #POLOZKY=Neexistuje výrobní pŕíkaz\\0\\op_rady.v_zak_denik <> '' and op_rady.v_zak_rada <> '' and op_zahlavi.storno = 0 and op_zahlavi.druh = 30 and ((op_zahlavi.potvrzeno = 1 and coalesce(op_rady.vydej_neods, 0) = 2) or (op_zahlavi.odsouhlaseno = 1 and coalesce(op_rady.vydej_neods, 0) = 0) or coalesce(op_rady.vydej_neods, 0) = 1) and exists(select 1 from dba.op_polozky opp with(index(pk_op_polozky)) where opp.doklad = op_zahlavi.doklad and opp.typ_polozky in (3, 7, 15) and opp.storno = 0 and opp.vyrizeno = 0 and opp.vykryto in (0, 2) and not exists(select 1 from dba.v_opv opv with(index(v_opv_objed)), dba.v_opvz opvz with(index(pk_v_opvz)) where opv.objednavka = opp.doklad and opv.polobj = opp.polozka and opvz.doklad = opv.doklad and opvz.storno = 0))^; #POPISBEZ=Existence výrobního příkazu; #COMBO_VISIBLE=islicmodul('V_ZAK'); #COMBO_END; #COMBO_BEGIN; #COMBO_ID=nedodano_dnes; #COLUMN=-; #POLOZKY=Vůbec, po termínu dodání\\0\\op_zahlavi.dodano = 0 and op_zahlavi.vyrizeno_kl <> 1 and op_zahlavi.dat_dodani < getdate()^Částečně, po termínu dodání\\1\\op_zahlavi.dodano = 2 and op_zahlavi.vyrizeno_kl <> 1 and op_zahlavi.dat_dodani < getdate()^Nedodané, po termínu dodání\\2\\op_zahlavi.dodano in (0, 2) and op_zahlavi.vyrizeno_kl <> 1 and op_zahlavi.dat_dodani < getdate(); #POPISBEZ=Nedodané po termínu dodání; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=nedodano_ods; #COLUMN=-; #POLOZKY=Vůbec, po původním termínu dodání\\0\\op_zahlavi.dodano = 0 and op_zahlavi.vyrizeno_kl <> 1 and coalesce(nullif(op_zahlavi.dat_dodani_ods, convert(#BY(datumy.datum), '1901-01-01')), op_zahlavi.dat_dodani) < getdate()^Částečně, po původním termínu dodání\\1\\op_zahlavi.dodano = 2 and op_zahlavi.vyrizeno_kl <> 1 and coalesce(nullif(op_zahlavi.dat_dodani_ods, convert(#BY(datumy.datum), '1901-01-01')), op_zahlavi.dat_dodani) < getdate()^Nedodané, po původním termínu dodání\\2\\op_zahlavi.dodano in (0, 2) and op_zahlavi.vyrizeno_kl <> 1 and coalesce(nullif(op_zahlavi.dat_dodani_ods, convert(#BY(datumy.datum), '1901-01-01')), op_zahlavi.dat_dodani) < getdate(); #POPISBEZ=Nedodané po původním termínu dodání; #COMBO_END; #NO_DOKLAD_LEGEND; #LEGEND=#DOKL_STORNO:Stornovaný doklad:Fstorno = 1; #LEGEND=#DOKL_UZAV:Vyřízený doklad:Fvyrizeno = 1; #LEGEND=#O_OBJ_VYKR_SKL:Doklad vykrytý skladem:Fvykr_skl = 1; #LEGEND=#DOKL_SCHVAL:Vykrytý doklad:Fvykryto = 1; #LEGEND=#O_OBJ_ODS:Odsouhlasený doklad:Fodsouhlaseno = 1; #LEGEND=#O_OBJ_POT:Potvrzený doklad:Fpotvrzeno = 1; #LEGEND=#O_OBJ_NEPOT:Nepotvrzený doklad:Fpotvrzeno = 0;;#SETMENUID_END;;;#SETMENUID=O/O_OBJ/10/op_zahlavi//202307031504083938379356/15/30/0;#DO_SEZ_SQL; #SEZ_SQL_ADD3000=(select count(op_polozky.user_vyrobeno) from dba.op_polozky op_polozky with(index(pk_op_polozky)) where op_polozky.doklad = op_zahlavi.doklad and op_polozky.user_vyrobeno=1 and left(op_polozky.karta,1)<>'S') AS vyrobeno /*\\:Sop_zahlavi.dodanych:HVyrobeno:NV*/; #SEZ_SQL_ADD3001=(select count(op_polozky.karta) from dba.op_polozky op_polozky with(index(pk_op_polozky)) where op_polozky.doklad = op_zahlavi.doklad and left(op_polozky.karta,1)<>'S') AS pol_k_vyr /*\\:Sop_zahlavi.dodanych:HPoložek k vyrobě:NV*/; #SEZ_SQL_ADD3002=(select parcis.nazev from dba.parcis parcis with(index(pk_parcis)) where parcis.id_partnera=op_zahlavi.id_investora) AS investor_nazev /*\\:Sparcis.nazev:HNázev partnera F*/; #SEZ_SQL_ADD3003=(select count(attach_store.poradi) from dba.attach_store attach_store with(index(pk_attach_store)) where attach_store.pk=op_zahlavi.doklad and attach_store.att_class='TPV') AS attpocetpdf/*\\:Sattach_access.id:HA-pdf:NV*/; #COMPUTEADD3000=opattpdf=bitmap(case(attpocetpdf when 0 then '' else 'path(PathAttachLevelStatus8),color(20),tooltip(PDF příloha OP)')):HA-OP pdf:F:NS; #LEGEND=rgb(30,144,255):Všechny položky vyrobeny:F1:vyrobeno=pol_k_vyr and pol_k_vyr > 0 and op_zahlavi.doklad_vl = '';;#SETMENUID_END;;#ALL_ADD_TYPES=SEZNAM_op_zahlavi,;;#SEZNAM_DOKLAD; #STANDARDSORT;#HIDEBLANKREC;#ENAB_ADD_IN_VIEW;#ENAB_DELETE_IN_VIEW;#ENAB_FAST_PREV_IN_VIEW;#SEZ_SQL_SLOUPCEADD;#SEZ_SQL_COMPUTEADD; w_iftseznam\tmaxrows\t350 w_iftseznam\tstorage\t1 053 w_iftseznam\tsorting w_iftseznam\tadd_sorting\tdoklad A, ------------------------------- Window: VolbaSestavy Sestava - Štítky (O_OBJ disabled visible c__w_iftrepmaker) w_ift\tclassname\tw_iftrepmaker w_ift\tclasses\t.object.karatbaseobject.karatobject.karatcontrol.karatwindow.c__w_ift.c__w_filter_parent.c__w_fil_def_parent.c__w_iftrepmaker w_ift\tparametr ID_MENU=MNID/O_OBJ/202306201248564755483132 BUTTON_TITLE=Štítky TYP=SESTAVA CLASS=w_iftrepmaker W_SOURCE=object(c__w_iftseznam AppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.5253.5256) SEZ_SQL_BEGIN SELECT S.poradi AS poradi\\:Sop_polozky.polozka, S.karta AS karta\\:Sop_polozky.karta, S.nazev AS nazev\\:Snomenklatura.nazev, S.user_mnozstvi_vyr AS user_mnozstvi_vyr\\:Sop_polozky.user_mnozstvi_vyr, S.doklad AS doklad\\:Sop_polozky.doklad, S.zkraceny_nazev AS firma\\:Sop_zahlavi.zkraceny_nazev, isnull(S.user_zakvy,'') AS user_zakvy\\:Sop_polozky.user_zakvy, S.user_dat_dodani_zd AS user_dat_dodani_zd\\:Sop_polozky.user_dat_dodani_zd, S.user_obj_nakup AS user_obj_nakup\\:Sop_zahlavi.user_obj_nakup, isnull(S.user_pol_poz,'') AS user_pol_poz\\:Sop_polozky.user_pol_poz, isnull(S.user_vrtani_met,'') AS user_vrtani_met\\:Sop_polozky.user_vrtani_met, S.user_polozka_zd AS user_polozka_zd\\:Sop_polozky.user_polozka_zd, S.user_typ_profil AS user_typ_profil\\:Sop_polozky.user_typ_profil, S.user_profil_zak AS user_profil_zak\\:Sop_polozky.user_profil_zak, S.user_carkod AS user_carkod\\:Sop_polozky.user_carkod, S.user_ean AS user_ean\\:Sop_polozky.user_ean, S.user_delka AS user_delka\\:Sop_polozky.user_delka, S.user_vyska AS user_vyska\\:Sop_polozky.user_vyska, S.user_hloubka AS user_hloubka\\:Sop_polozky.user_hloubka, S.user_kodkz AS user_kodkz\\:Sop_zahlavi.user_kodkz, S.storno AS storno\\:Sop_polozky.storno, S.polozka AS polozka\\:Sop_polozky.polozka, S.user_skup_n_op AS user_skup_n_op\\:Sop_polozky.user_skup_n_op, S.citac_stitku AS citac_stitku, S.ean16 AS ean16 FROM #op_stitky1 S WHERE 1=1 SEZ_SQL_END USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//202306201248564755483132/20/30/0; #PERCENT_OFF; #NOADDADDMENU; #BUTTON_COLOR=rgb(255,128,128); #SPACEBEFORE; #SPACEAFTER; #DBEXEC_SUBST=#BE_DOKLAD|24OP010100000095; #DBEXECUTE=op_exe_stitky1; #DEFAULT_PROFILE=STITKY;;#SETMENUID_END;;#ISFIRSTROW;;#ISLASTROW;;#ISFROMBUTTON;;#ALL_ADD_TYPES=SESTAVA_,; USER_END GEN_REPORT=stitky_25_100_wh GEN_TAB=cisla GEN_TABFULL=cisla GEN_GROUP1= poradi;poradi;S.poradi GEN_PBL0=O_OBJ GEN_TITLE=Štítky GEN_WHERE=storno=0 GEN_DWDEF1=WHERE_FILTER GEN_DWDEF2=WINDOWID GEN_DWVAL1=1=1 GEN_DWVAL2=3900879 DBCREATE_BEGIN BEGIN CREATE TABLE #op_stitky1_579879 (poradi smallint/*BY*/, karta #BY(op_polozky.karta), nazev #BY(nomenklatura.nazev), user_mnozstvi_vyr #BY(op_polozky.user_mnozstvi_vyr), doklad #BY(op_polozky.doklad), zkraceny_nazev #BY(op_zahlavi.zkraceny_nazev), user_zakvy #BY(op_polozky.user_zakvy), user_dat_dodani_zd #BY(op_polozky.user_dat_dodani_zd), user_obj_nakup #BY(op_zahlavi.zkraceny_nazev), user_pol_poz #BY(op_polozky.user_pol_poz), user_vrtani_met #BY(op_polozky.user_vrtani_met), user_polozka_zd #BY(op_polozky.user_polozka_zd), user_typ_profil #BY(op_polozky.user_typ_profil), user_profil_zak #BY(op_polozky.user_profil_zak), user_carkod #BY(op_polozky.user_carkod), user_ean #BY(op_polozky.user_ean), user_delka #BY(op_polozky.user_delka), user_vyska #BY(op_polozky.user_vyska), user_hloubka #BY(op_polozky.user_hloubka), user_kodkz #BY(op_zahlavi.user_kodkz), storno #BY(op_polozky.storno), polozka #BY(op_polozky.polozka), user_skup_n_op #BY(op_polozky.user_skup_n_op), dat_dodani #BY(op_zahlavi.dat_dodani), citac_stitku char(3)/*BY*/, ean16 varchar(25)/*BY*/ primary key(poradi)) END DBCREATE_END DBEXECUTE_BEGIN BEGIN DECLARE @citac smallint/*BY*/ DECLARE @karta #BY(op_polozky.karta), @nazev #BY(nomenklatura.nazev), @user_mnozstvi_vyr #BY(op_polozky.user_mnozstvi_vyr), @doklad #BY(op_polozky.doklad), @zkraceny_nazev #BY(op_zahlavi.zkraceny_nazev), @user_zakvy #BY(op_polozky.user_zakvy), @user_dat_dodani_zd #BY(op_polozky.user_dat_dodani_zd), @user_obj_nakup #BY(op_zahlavi.user_obj_nakup), @user_pol_poz #BY(op_polozky.user_pol_poz), @user_vrtani_met #BY(op_polozky.user_vrtani_met), @user_polozka_zd #BY(op_polozky.user_polozka_zd), @user_typ_profil #BY(op_polozky.user_typ_profil), @user_profil_zak #BY(op_polozky.user_profil_zak), @user_carkod #BY(op_polozky.user_carkod), @user_ean #BY(op_polozky.user_ean), @user_delka #BY(op_polozky.user_delka), @user_vyska #BY(op_polozky.user_vyska), @user_hloubka #BY(op_polozky.user_hloubka), @user_kodkz #BY(op_zahlavi.user_kodkz), @storno #BY(op_polozky.storno), @polozka #BY(op_polozky.polozka), @user_skup_n_op #BY(op_polozky.user_skup_n_op), @dat_dodani #BY(op_zahlavi.dat_dodani), @citac_stitku varchar(3)/*BY*/, @pocet_mezer int /*BY*/, @mezery varchar(16)/*BY*/, @ean16 varchar(25)/*BY*/ --declarace kurzoru po položkách Příjemky DECLARE op_pol CURSOR FOR SELECT P.karta, N.nazev,P.user_mnozstvi_vyr,P.doklad,Z.zkraceny_nazev,isnull(P.user_zakvy,''),(case when P.user_dat_dodani_zd<>convert(datetime/*BY*/, '1901-01-01') then P.user_dat_dodani_zd else Z.dat_dodani end),isnull(Z.user_obj_nakup,''),isnull(P.user_pol_poz,''),isnull(P.user_vrtani_met,''), isnull(P.user_polozka_zd,''),isnull(P.user_typ_profil,''),isnull(P.user_profil_zak,''),isnull(P.user_carkod,''),isnull(P.user_ean,''),P.user_delka,P.user_vyska,(P.user_sirka1+P.user_sirka2+P.user_sirka3+P.user_sirka4+P.user_sirka5),isnull(Z.user_kodkz,''),P.storno,P.polozka,P.user_skup_n_op,Z.dat_dodani FROM dba.op_polozky P with(index(pk_op_polozky)), dba.nomenklatura N with(index(nomenklatura_cislo_nomen)), dba.op_zahlavi Z with(index(pk_op_zahlavi)) WHERE P.doklad = '24OP010100000095' AND N.cislo_nomenklatury = P.karta AND Z.doklad = P.doklad --otevření kurzoru po položkách Příjemky OPEN op_pol WHILE 1 = 1 BEGIN FETCH op_pol INTO @karta, @nazev, @user_mnozstvi_vyr,@doklad, @zkraceny_nazev,@user_zakvy,@user_dat_dodani_zd,@user_obj_nakup,@user_pol_poz,@user_vrtani_met, @user_polozka_zd,@user_typ_profil,@user_profil_zak,@user_carkod,@user_ean,@user_delka,@user_vyska,@user_hloubka,@user_kodkz,@storno,@polozka,@user_skup_n_op,@dat_dodani if @@sqlstatus <> 0 BEGIN\tbreak END SELECT @citac = 1 WHILE @citac <= @user_mnozstvi_vyr BEGIN select @citac_stitku =  right('000'+Convert(varchar/*BY*/, @citac),3) select @pocet_mezer = 16- len(@user_ean) select @mezery = REPLICATE(' ', @pocet_mezer) select @ean16 = CONCAT(@user_ean,@mezery,@citac_stitku,'0',@user_carkod) INSERT INTO #op_stitky1_579879 (poradi, karta, nazev, user_mnozstvi_vyr, doklad, zkraceny_nazev,user_zakvy,user_dat_dodani_zd,user_obj_nakup,user_pol_poz,user_vrtani_met,user_polozka_zd,user_typ_profil,user_profil_zak,user_carkod, user_ean,user_delka,user_vyska,user_hloubka,user_kodkz,storno,polozka,user_skup_n_op,dat_dodani, citac_stitku, ean16) SELECT (SELECT COALESCE(MAX(poradi), 0) + 1 FROM #op_stitky1_579879 WHERE 1=1), @karta, @nazev, @user_mnozstvi_vyr, @doklad, @zkraceny_nazev,@user_zakvy,@user_dat_dodani_zd,@user_obj_nakup,@user_pol_poz,@user_vrtani_met,@user_polozka_zd,@user_typ_profil,@user_profil_zak,@user_carkod, @user_ean,@user_delka,@user_vyska,@user_hloubka,@user_kodkz,@storno,@polozka,@user_skup_n_op,@dat_dodani, @citac_stitku, @ean16 SELECT @citac = @citac + 1 END END CLOSE op_pol END DBEXECUTE_END DBDROP=DROP TABLE #op_stitky1_579879 w_ift\tconn\tms_19216810247_karat_termopan 73 w_ift\tf11 w_ift\tRefreshObjects\tPARENT_LIST PARENT_200705141135559525303211 w_ift\tPercentOffDWs\tPARENT_LIST\tdba.op_zahlavi\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.5253.5256.5279 PARENT_200705141135559525303211\tdba.op_polozky\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.5253.5256.preview.200705141135559525303211.dw w_iftrepmaker\tfiltrwhere w_iftrepmaker\tsubstituce\t#WHERE_FILTER|1=1|#WINDOWID|3900879| w_iftrepmaker\trep_substituce\t#NAZEV||#NEW_ROK_SYSTEM|2025|#NEW_PERS_ROK_SYSTEM|2025|#FILTER||#FULLDAY|13:29:18.846 06.05.2024|#FULLDAYCODE|2024-05-06 13:29:18.846|#FULLDAYREPORT|06.05.2024 13:29:18|#PODMINKA| |#PERS_ROK_SYSTEM|2024|#PERS_ROK_SYSTEM_M|2024|#PERS_MES_SYSTEM|3|#PERS_MES_SYSTEM_M|3|#TEXTSORT|Bez řazení|#TEXTLANG|Čeština *|#TODAY|06.05.2024|#REPCODE|o_obj_ru_stitky_25_100_wh_100|#REPNAME|25x100|#REPIDAKCE||#REPAKCE||#ROK_SYSTEM|2024|#DATALANG|CZ|#DOMAIN_.CASTKA17_TYPE|decimal(17,2)|#DOMAIN_.CASTKA17_COLTYPE|decimal(2)|#DOMAIN_.CASTKA17_LENGTH|22|#DOMAIN_.CASTKA17_DWLEN|-1|#DOMAIN_.CASTKA17_FORMAT|###,###,###,###,###.00|#DOMAIN_.CASTKA17_STRFORMAT|###,###,###,###,###.00|#DOMAIN_.CASTKA17_EDIT|EM|#DOMAIN_.CASTKA18_TYPE|decimal(18,2)|#DOMAIN_.CASTKA18_COLTYPE|decimal(2)|#DOMAIN_.CASTKA18_LENGTH|22|#DOMAIN_.CASTKA18_DWLEN|-1|#DOMAIN_.CASTKA18_FORMAT|###,###,###,###,###.00|#DOMAIN_.CASTKA18_STRFORMAT|###,###,###,###,###.00|#DOMAIN_.CASTKA18_EDIT|EM|#DOMAIN_.DEVIZY18_TYPE|decimal(18,2)|#DOMAIN_.DEVIZY18_COLTYPE|decimal(2)|#DOMAIN_.DEVIZY18_LENGTH|22|#DOMAIN_.DEVIZY18_DWLEN|-1|#DOMAIN_.DEVIZY18_FORMAT|###,###,###,###,###.00|#DOMAIN_.DEVIZY18_STRFORMAT|###,###,###,###,###.00|#DOMAIN_.DEVIZY18_EDIT|EM|#DOMAIN_.TEXT_255_TYPE|varchar(255)|#DOMAIN_.TEXT_255_COLTYPE|char(255)|#DOMAIN_.TEXT_255_LENGTH|255|#DOMAIN_.TEXT_255_DWLEN|-1|#DOMAIN_.TEXT_255_FORMAT||#DOMAIN_.TEXT_255_STRFORMAT||#DOMAIN_.TEXT_255_EDIT|PO|#DOMAIN_.TEXT_40_TYPE|varchar(40)|#DOMAIN_.TEXT_40_COLTYPE|char(40)|#DOMAIN_.TEXT_40_LENGTH|40|#DOMAIN_.TEXT_40_DWLEN|-1|#DOMAIN_.TEXT_40_FORMAT||#DOMAIN_.TEXT_40_STRFORMAT||#DOMAIN_.TEXT_40_EDIT|ED|#DOMAIN_.TEXT_80_TYPE|varchar(80)|#DOMAIN_.TEXT_80_COLTYPE|char(80)|#DOMAIN_.TEXT_80_LENGTH|80|#DOMAIN_.TEXT_80_DWLEN|-1|#DOMAIN_.TEXT_80_FORMAT||#DOMAIN_.TEXT_80_STRFORMAT||#DOMAIN_.TEXT_80_EDIT|ED|#DOMAIN_ADMIN_HODNOTA_TYPE|varchar(255)|#DOMAIN_ADMIN_HODNOTA_COLTYPE|char(255)|#DOMAIN_ADMIN_HODNOTA_LENGTH|255|#DOMAIN_ADMIN_HODNOTA_DWLEN|-1|#DOMAIN_ADMIN_HODNOTA_FORMAT||#DOMAIN_ADMIN_HODNOTA_STRFORMAT||#DOMAIN_ADMIN_HODNOTA_EDIT|PO|#DOMAIN_ADMIN_LANG_PHRASE_TYPE|varchar(255)|#DOMAIN_ADMIN_LANG_PHRASE_COLTYPE|char(255)|#DOMAIN_ADMIN_LANG_PHRASE_LENGTH|255|#DOMAIN_ADMIN_LANG_PHRASE_DWLEN|-1|#DOMAIN_ADMIN_LANG_PHRASE_FORMAT||#DOMAIN_ADMIN_LANG_PHRASE_STRFORMAT||#DOMAIN_ADMIN_LANG_PHRASE_EDIT|PO|#DOMAIN_ADMIN_MENU_POPIS_TYPE|varchar(100)|#DOMAIN_ADMIN_MENU_POPIS_COLTYPE|char(100)|#DOMAIN_ADMIN_MENU_POPIS_LENGTH|100|#DOMAIN_ADMIN_MENU_POPIS_DWLEN|-1|#DOMAIN_ADMIN_MENU_POPIS_FORMAT||#DOMAIN_ADMIN_MENU_POPIS_STRFORMAT||#DOMAIN_ADMIN_MENU_POPIS_EDIT|ED|#DOMAIN_ADMIN_SD_LABEL_TYPE|varchar(80)|#DOMAIN_ADMIN_SD_LABEL_COLTYPE|char(80)|#DOMAIN_ADMIN_SD_LABEL_LENGTH|80|#DOMAIN_ADMIN_SD_LABEL_DWLEN|-1|#DOMAIN_ADMIN_SD_LABEL_FORMAT||#DOMAIN_ADMIN_SD_LABEL_STRFORMAT||#DOMAIN_ADMIN_SD_LABEL_EDIT|ED|#DOMAIN_ADR_OBEC_TYPE|varchar(80)|#DOMAIN_ADR_OBEC_COLTYPE|char(80)|#DOMAIN_ADR_OBEC_LENGTH|80|#DOMAIN_ADR_OBEC_DWLEN|-1|#DOMAIN_ADR_OBEC_FORMAT||#DOMAIN_ADR_OBEC_STRFORMAT||#DOMAIN_ADR_OBEC_EDIT|ED|#DOMAIN_ADR_ULICE_TYPE|varchar(80)|#DOMAIN_ADR_ULICE_COLTYPE|char(80)|#DOMAIN_ADR_ULICE_LENGTH|80|#DOMAIN_ADR_ULICE_DWLEN|-1|#DOMAIN_ADR_ULICE_FORMAT||#DOMAIN_ADR_ULICE_STRFORMAT||#DOMAIN_ADR_ULICE_EDIT|ED|#DOMAIN_BANKA_TYPE|varchar(7)|#DOMAIN_BANKA_COLTYPE|char(7)|#DOMAIN_BANKA_LENGTH|7|#DOMAIN_BANKA_DWLEN|-1|#DOMAIN_BANKA_FORMAT||#DOMAIN_BANKA_STRFORMAT||#DOMAIN_BANKA_EDIT|ED|#DOMAIN_CEN_SKUPINA_NOM_TYPE|varchar(12)|#DOMAIN_CEN_SKUPINA_NOM_COLTYPE|char(12)|#DOMAIN_CEN_SKUPINA_NOM_LENGTH|12|#DOMAIN_CEN_SKUPINA_NOM_DWLEN|-1|#DOMAIN_CEN_SKUPINA_NOM_FORMAT||#DOMAIN_CEN_SKUPINA_NOM_STRFORMAT||#DOMAIN_CEN_SKUPINA_NOM_EDIT|ED|#DOMAIN_DKL_POLOZKA_SMALL_TYPE|integer|#DOMAIN_DKL_POLOZKA_SMALL_COLTYPE|long|#DOMAIN_DKL_POLOZKA_SMALL_LENGTH|11|#DOMAIN_DKL_POLOZKA_SMALL_DWLEN|-1|#DOMAIN_DKL_POLOZKA_SMALL_FORMAT|###,###,##0|#DOMAIN_DKL_POLOZKA_SMALL_STRFORMAT|###,###,##0|#DOMAIN_DKL_POLOZKA_SMALL_EDIT|EM|#DOMAIN_DKL_POLOZKA_SMALL0_TYPE|smallint|#DOMAIN_DKL_POLOZKA_SMALL0_COLTYPE|long|#DOMAIN_DKL_POLOZKA_SMALL0_LENGTH|5|#DOMAIN_DKL_POLOZKA_SMALL0_DWLEN|-1|#DOMAIN_DKL_POLOZKA_SMALL0_FORMAT|#,##0|#DOMAIN_DKL_POLOZKA_SMALL0_STRFORMAT|#,##0|#DOMAIN_DKL_POLOZKA_SMALL0_EDIT|EM|#DOMAIN_DKL_TEXT_40_TYPE|varchar(40)|#DOMAIN_DKL_TEXT_40_COLTYPE|char(40)|#DOMAIN_DKL_TEXT_40_LENGTH|40|#DOMAIN_DKL_TEXT_40_DWLEN|-1|#DOMAIN_DKL_TEXT_40_FORMAT||#DOMAIN_DKL_TEXT_40_STRFORMAT||#DOMAIN_DKL_TEXT_40_EDIT|ED|#DOMAIN_DPH_KOD_TYPE|varchar(10)|#DOMAIN_DPH_KOD_COLTYPE|char(10)|#DOMAIN_DPH_KOD_LENGTH|10|#DOMAIN_DPH_KOD_DWLEN|-1|#DOMAIN_DPH_KOD_FORMAT||#DOMAIN_DPH_KOD_STRFORMAT||#DOMAIN_DPH_KOD_EDIT|ED|#DOMAIN_EXIMP_ID_TYPE|varchar(40)|#DOMAIN_EXIMP_ID_COLTYPE|char(40)|#DOMAIN_EXIMP_ID_LENGTH|40|#DOMAIN_EXIMP_ID_DWLEN|-1|#DOMAIN_EXIMP_ID_DAVKY_TYPE|integer|#DOMAIN_EXIMP_ID_DAVKY_COLTYPE|long|#DOMAIN_EXIMP_ID_DAVKY_LENGTH|7|#DOMAIN_EXIMP_ID_DAVKY_DWLEN|-1|#DOMAIN_EXIMP_ID_DAVKY_FORMAT|#######|#DOMAIN_EXIMP_ID_DAVKY_STRFORMAT|#######|#DOMAIN_EXIMP_ID_DAVKY_EDIT|EM|#DOMAIN_EXIMP_ID_FORMAT||#DOMAIN_EXIMP_ID_STRFORMAT||#DOMAIN_EXIMP_ID_EDIT|ED|#DOMAIN_O_OBJ_KOD_TEXTU_TYPE|char(3)|#DOMAIN_O_OBJ_KOD_TEXTU_COLTYPE|char(3)|#DOMAIN_O_OBJ_KOD_TEXTU_LENGTH|3|#DOMAIN_O_OBJ_KOD_TEXTU_DWLEN|-1|#DOMAIN_O_OBJ_KOD_TEXTU_FORMAT||#DOMAIN_O_OBJ_KOD_TEXTU_STRFORMAT||#DOMAIN_O_OBJ_KOD_TEXTU_EDIT|ED|#DOMAIN_O_SKL_IDENTIFIKATOR_TYPE|varchar(20)|#DOMAIN_O_SKL_IDENTIFIKATOR_COLTYPE|char(20)|#DOMAIN_O_SKL_IDENTIFIKATOR_LENGTH|20|#DOMAIN_O_SKL_IDENTIFIKATOR_DWLEN|-1|#DOMAIN_O_SKL_IDENTIFIKATOR_FORMAT||#DOMAIN_O_SKL_IDENTIFIKATOR_STRFORMAT||#DOMAIN_O_SKL_IDENTIFIKATOR_EDIT|ED|#DOMAIN_ODBYT_ATR_HODNOTA_TYPE|varchar(30)|#DOMAIN_ODBYT_ATR_HODNOTA_COLTYPE|char(30)|#DOMAIN_ODBYT_ATR_HODNOTA_LENGTH|30|#DOMAIN_ODBYT_ATR_HODNOTA_DWLEN|-1|#DOMAIN_ODBYT_ATR_HODNOTA_FORMAT||#DOMAIN_ODBYT_ATR_HODNOTA_STRFORMAT||#DOMAIN_ODBYT_ATR_HODNOTA_EDIT|ED|#DOMAIN_ODBYT_ATR_VAR_TYPE|varchar(30)|#DOMAIN_ODBYT_ATR_VAR_COLTYPE|char(30)|#DOMAIN_ODBYT_ATR_VAR_LENGTH|30|#DOMAIN_ODBYT_ATR_VAR_DWLEN|-1|#DOMAIN_ODBYT_ATR_VAR_FORMAT||#DOMAIN_ODBYT_ATR_VAR_STRFORMAT||#DOMAIN_ODBYT_ATR_VAR_EDIT|ED|#DOMAIN_ODBYT_CENA_TYPE|decimal(15,4)|#DOMAIN_ODBYT_CENA_COLTYPE|decimal(4)|#DOMAIN_ODBYT_CENA_LENGTH|19|#DOMAIN_ODBYT_CENA_DWLEN|-1|#DOMAIN_ODBYT_CENA_FORMAT|##,###,###,###.0000|#DOMAIN_ODBYT_CENA_STRFORMAT|##,###,###,###.0000|#DOMAIN_ODBYT_CENA_EDIT|EM|#DOMAIN_ODBYT_DL_TYPE|char(16)|#DOMAIN_ODBYT_DL_COLTYPE|char(16)|#DOMAIN_ODBYT_DL_LENGTH|16|#DOMAIN_ODBYT_DL_DWLEN|-1|#DOMAIN_ODBYT_DL_FORMAT||#DOMAIN_ODBYT_DL_STRFORMAT||#DOMAIN_ODBYT_DL_EDIT|ED|#DOMAIN_ODBYT_EAN_TYPE|varchar(20)|#DOMAIN_ODBYT_EAN_COLTYPE|char(20)|#DOMAIN_ODBYT_EAN_LENGTH|20|#DOMAIN_ODBYT_EAN_DWLEN|-1|#DOMAIN_ODBYT_EAN_FORMAT||#DOMAIN_ODBYT_EAN_STRFORMAT||#DOMAIN_ODBYT_EAN_EDIT|ED|#DOMAIN_ODBYT_JEHO_ID_TYPE|varchar(30)|#DOMAIN_ODBYT_JEHO_ID_COLTYPE|char(30)|#DOMAIN_ODBYT_JEHO_ID_LENGTH|30|#DOMAIN_ODBYT_JEHO_ID_DWLEN|-1|#DOMAIN_ODBYT_JEHO_ID_FORMAT||#DOMAIN_ODBYT_JEHO_ID_STRFORMAT||#DOMAIN_ODBYT_JEHO_ID_EDIT|ED|#DOMAIN_ODBYT_KARTA_TYPE|varchar(20)|#DOMAIN_ODBYT_KARTA_COLTYPE|char(20)|#DOMAIN_ODBYT_KARTA_LENGTH|20|#DOMAIN_ODBYT_KARTA_DWLEN|-1|#DOMAIN_ODBYT_KARTA_FORMAT||#DOMAIN_ODBYT_KARTA_STRFORMAT||#DOMAIN_ODBYT_KARTA_EDIT|ED|#DOMAIN_ODBYT_KOD_TEXTU_TYPE|char(3)|#DOMAIN_ODBYT_KOD_TEXTU_COLTYPE|char(3)|#DOMAIN_ODBYT_KOD_TEXTU_LENGTH|3|#DOMAIN_ODBYT_KOD_TEXTU_DWLEN|-1|#DOMAIN_ODBYT_KOD_TEXTU_FORMAT||#DOMAIN_ODBYT_KOD_TEXTU_STRFORMAT||#DOMAIN_ODBYT_KOD_TEXTU_EDIT|ED|#DOMAIN_ODBYT_MISTO_DOD_TYPE|varchar(200)|#DOMAIN_ODBYT_MISTO_DOD_COLTYPE|char(200)|#DOMAIN_ODBYT_MISTO_DOD_LENGTH|200|#DOMAIN_ODBYT_MISTO_DOD_DWLEN|-1|#DOMAIN_ODBYT_MISTO_DOD_FORMAT||#DOMAIN_ODBYT_MISTO_DOD_STRFORMAT||#DOMAIN_ODBYT_MISTO_DOD_EDIT|ED|#DOMAIN_ODBYT_MNOZSTVI15_TYPE|decimal(15,4)|#DOMAIN_ODBYT_MNOZSTVI15_COLTYPE|decimal(4)|#DOMAIN_ODBYT_MNOZSTVI15_LENGTH|16|#DOMAIN_ODBYT_MNOZSTVI15_DWLEN|-1|#DOMAIN_ODBYT_MNOZSTVI15_FORMAT|###,###,###.0000|#DOMAIN_ODBYT_MNOZSTVI15_STRFORMAT|###,###,###.0000|#DOMAIN_ODBYT_MNOZSTVI15_EDIT|EM|#DOMAIN_ODBYT_NAZEV_NOM_TYPE|varchar(50)|#DOMAIN_ODBYT_NAZEV_NOM_COLTYPE|char(50)|#DOMAIN_ODBYT_NAZEV_NOM_LENGTH|50|#DOMAIN_ODBYT_NAZEV_NOM_DWLEN|-1|#DOMAIN_ODBYT_NAZEV_NOM_FORMAT||#DOMAIN_ODBYT_NAZEV_NOM_STRFORMAT||#DOMAIN_ODBYT_NAZEV_NOM_EDIT|ED|#DOMAIN_ODBYT_OBJEDNAVKA_TYPE|char(100)|#DOMAIN_ODBYT_OBJEDNAVKA_COLTYPE|char(100)|#DOMAIN_ODBYT_OBJEDNAVKA_LENGTH|100|#DOMAIN_ODBYT_OBJEDNAVKA_DWLEN|-1|#DOMAIN_ODBYT_OBJEDNAVKA_FORMAT||#DOMAIN_ODBYT_OBJEDNAVKA_STRFORMAT||#DOMAIN_ODBYT_OBJEDNAVKA_EDIT|ED|#DOMAIN_ODBYT_POCET_PALET_TYPE|decimal(9,2)|#DOMAIN_ODBYT_POCET_PALET_COLTYPE|decimal(2)|#DOMAIN_ODBYT_POCET_PALET_LENGTH|12|#DOMAIN_ODBYT_POCET_PALET_DWLEN|-1|#DOMAIN_ODBYT_POCET_PALET_FORMAT|#,###,###.00|#DOMAIN_ODBYT_POCET_PALET_STRFORMAT|#,###,###.00|#DOMAIN_ODBYT_POCET_PALET_EDIT|EM|#DOMAIN_ODBYT_SKUPINA_NOM_TYPE|varchar(12)|#DOMAIN_ODBYT_SKUPINA_NOM_COLTYPE|char(12)|#DOMAIN_ODBYT_SKUPINA_NOM_LENGTH|12|#DOMAIN_ODBYT_SKUPINA_NOM_DWLEN|-1|#DOMAIN_ODBYT_SKUPINA_NOM_FORMAT||#DOMAIN_ODBYT_SKUPINA_NOM_STRFORMAT||#DOMAIN_ODBYT_SKUPINA_NOM_EDIT|ED|#DOMAIN_ORG_CINNOST_TYPE|varchar(10)|#DOMAIN_ORG_CINNOST_COLTYPE|char(10)|#DOMAIN_ORG_CINNOST_LENGTH|10|#DOMAIN_ORG_CINNOST_DWLEN|-1|#DOMAIN_ORG_CINNOST_FORMAT||#DOMAIN_ORG_CINNOST_STRFORMAT||#DOMAIN_ORG_CINNOST_EDIT|ED|#DOMAIN_ORG_DEALER_TYPE|varchar(10)|#DOMAIN_ORG_DEALER_COLTYPE|char(10)|#DOMAIN_ORG_DEALER_LENGTH|10|#DOMAIN_ORG_DEALER_DWLEN|-1|#DOMAIN_ORG_DEALER_FORMAT||#DOMAIN_ORG_DEALER_STRFORMAT||#DOMAIN_ORG_DEALER_EDIT|ED|#DOMAIN_ORG_EXT_SMLOUVA_TYPE|char(20)|#DOMAIN_ORG_EXT_SMLOUVA_COLTYPE|char(20)|#DOMAIN_ORG_EXT_SMLOUVA_LENGTH|20|#DOMAIN_ORG_EXT_SMLOUVA_DWLEN|-1|#DOMAIN_ORG_EXT_SMLOUVA_FORMAT||#DOMAIN_ORG_EXT_SMLOUVA_STRFORMAT||#DOMAIN_ORG_EXT_SMLOUVA_EDIT|ED|#DOMAIN_ORG_ID_UCTU_TYPE|varchar(6)|#DOMAIN_ORG_ID_UCTU_COLTYPE|char(6)|#DOMAIN_ORG_ID_UCTU_LENGTH|7|#DOMAIN_ORG_ID_UCTU_DWLEN|-1|#DOMAIN_ORG_ID_UCTU_FORMAT|###/###|#DOMAIN_ORG_ID_UCTU_STRFORMAT|@@@/@@@|#DOMAIN_ORG_ID_UCTU_EDIT|EM|#DOMAIN_ORG_NU_MNOZSTVI_TYPE|decimal(10,2)|#DOMAIN_ORG_NU_MNOZSTVI_COLTYPE|decimal(2)|#DOMAIN_ORG_NU_MNOZSTVI_LENGTH|13|#DOMAIN_ORG_NU_MNOZSTVI_DWLEN|-1|#DOMAIN_ORG_NU_MNOZSTVI_FORMAT|##,###,###.00|#DOMAIN_ORG_NU_MNOZSTVI_STRFORMAT|##,###,###.00|#DOMAIN_ORG_NU_MNOZSTVI_EDIT|EM|#DOMAIN_ORG_NU_MNOZSTVI2_TYPE|decimal(18,2)|#DOMAIN_ORG_NU_MNOZSTVI2_COLTYPE|decimal(2)|#DOMAIN_ORG_NU_MNOZSTVI2_LENGTH|22|#DOMAIN_ORG_NU_MNOZSTVI2_DWLEN|-1|#DOMAIN_ORG_NU_MNOZSTVI2_FORMAT|###,###,###,###,###.00|#DOMAIN_ORG_NU_MNOZSTVI2_STRFORMAT|###,###,###,###,###.00|#DOMAIN_ORG_NU_MNOZSTVI2_EDIT|EM|#DOMAIN_ORG_OKRES_TYPE|char(4)|#DOMAIN_ORG_OKRES_COLTYPE|char(4)|#DOMAIN_ORG_OKRES_LENGTH|4|#DOMAIN_ORG_OKRES_DWLEN|-1|#DOMAIN_ORG_OKRES_FORMAT||#DOMAIN_ORG_OKRES_STRFORMAT||#DOMAIN_ORG_OKRES_EDIT|ED|#DOMAIN_ORG_STREDISKO_TYPE|varchar(10)|#DOMAIN_ORG_STREDISKO_COLTYPE|char(10)|#DOMAIN_ORG_STREDISKO_LENGTH|10|#DOMAIN_ORG_STREDISKO_DWLEN|-1|#DOMAIN_ORG_STREDISKO_FORMAT||#DOMAIN_ORG_STREDISKO_STRFORMAT||#DOMAIN_ORG_STREDISKO_EDIT|ED|#DOMAIN_ORG_UCET_TYPE|varchar(6)|#DOMAIN_ORG_UCET_COLTYPE|char(6)|#DOMAIN_ORG_UCET_LENGTH|7|#DOMAIN_ORG_UCET_DWLEN|-1|#DOMAIN_ORG_UCET_FORMAT|###/###|#DOMAIN_ORG_UCET_STRFORMAT|@@@/@@@|#DOMAIN_ORG_UCET_EDIT|EM|#DOMAIN_ORG_UCET2_TYPE|varchar(20)|#DOMAIN_ORG_UCET2_COLTYPE|char(20)|#DOMAIN_ORG_UCET2_LENGTH|20|#DOMAIN_ORG_UCET2_DWLEN|-1|#DOMAIN_ORG_UCET2_FORMAT||#DOMAIN_ORG_UCET2_STRFORMAT||#DOMAIN_ORG_UCET2_EDIT|ED|#DOMAIN_ORG_UCET3_TYPE|varchar(20)|#DOMAIN_ORG_UCET3_COLTYPE|char(20)|#DOMAIN_ORG_UCET3_LENGTH|20|#DOMAIN_ORG_UCET3_DWLEN|-1|#DOMAIN_ORG_UCET3_FORMAT||#DOMAIN_ORG_UCET3_STRFORMAT||#DOMAIN_ORG_UCET3_EDIT|ED|#DOMAIN_ORG_ZAKAZKA_TYPE|varchar(30)|#DOMAIN_ORG_ZAKAZKA_COLTYPE|char(30)|#DOMAIN_ORG_ZAKAZKA_LENGTH|30|#DOMAIN_ORG_ZAKAZKA_DWLEN|-1|#DOMAIN_ORG_ZAKAZKA_FORMAT||#DOMAIN_ORG_ZAKAZKA_STRFORMAT||#DOMAIN_ORG_ZAKAZKA_EDIT|ED|#DOMAIN_PAR_ICO_TYPE|varchar(8)|#DOMAIN_PAR_ICO_COLTYPE|char(8)|#DOMAIN_PAR_ICO_LENGTH|8|#DOMAIN_PAR_ICO_DWLEN|-1|#DOMAIN_PAR_ICO_FORMAT||#DOMAIN_PAR_ICO_STRFORMAT||#DOMAIN_PAR_ICO_EDIT|ED|#DOMAIN_PAR_NAZEV_ZKRAC_TYPE|char(20)|#DOMAIN_PAR_NAZEV_ZKRAC_COLTYPE|char(20)|#DOMAIN_PAR_NAZEV_ZKRAC_LENGTH|20|#DOMAIN_PAR_NAZEV_ZKRAC_DWLEN|-1|#DOMAIN_PAR_NAZEV_ZKRAC_FORMAT||#DOMAIN_PAR_NAZEV_ZKRAC_STRFORMAT||#DOMAIN_PAR_NAZEV_ZKRAC_EDIT|ED|#DOMAIN_PARAM_PARAM_TYPE|varchar(20)|#DOMAIN_PARAM_PARAM_COLTYPE|char(20)|#DOMAIN_PARAM_PARAM_LENGTH|20|#DOMAIN_PARAM_PARAM_DWLEN|-1|#DOMAIN_PARAM_PARAM_FORMAT||#DOMAIN_PARAM_PARAM_STRFORMAT||#DOMAIN_PARAM_PARAM_EDIT|ED|#DOMAIN_PL_PAR_ZNAK_TYPE|varchar(22)|#DOMAIN_PL_PAR_ZNAK_COLTYPE|char(22)|#DOMAIN_PL_PAR_ZNAK_LENGTH|22|#DOMAIN_PL_PAR_ZNAK_DWLEN|-1|#DOMAIN_PL_PAR_ZNAK_FORMAT||#DOMAIN_PL_PAR_ZNAK_STRFORMAT||#DOMAIN_PL_PAR_ZNAK_EDIT|ED|#DOMAIN_UCE_DIM1_TYPE|varchar(20)|#DOMAIN_UCE_DIM1_COLTYPE|char(20)|#DOMAIN_UCE_DIM1_LENGTH|20|#DOMAIN_UCE_DIM1_DWLEN|-1|#DOMAIN_UCE_DIM1_FORMAT||#DOMAIN_UCE_DIM1_STRFORMAT||#DOMAIN_UCE_DIM1_EDIT|ED|#DOMAIN_UCE_DIM10_TYPE|varchar(20)|#DOMAIN_UCE_DIM10_COLTYPE|char(20)|#DOMAIN_UCE_DIM10_LENGTH|20|#DOMAIN_UCE_DIM10_DWLEN|-1|#DOMAIN_UCE_DIM10_FORMAT||#DOMAIN_UCE_DIM10_STRFORMAT||#DOMAIN_UCE_DIM10_EDIT|ED|#DOMAIN_UCE_DIM2_TYPE|varchar(20)|#DOMAIN_UCE_DIM2_COLTYPE|char(20)|#DOMAIN_UCE_DIM2_LENGTH|20|#DOMAIN_UCE_DIM2_DWLEN|-1|#DOMAIN_UCE_DIM2_FORMAT||#DOMAIN_UCE_DIM2_STRFORMAT||#DOMAIN_UCE_DIM2_EDIT|ED|#DOMAIN_UCE_DIM3_TYPE|varchar(20)|#DOMAIN_UCE_DIM3_COLTYPE|char(20)|#DOMAIN_UCE_DIM3_LENGTH|20|#DOMAIN_UCE_DIM3_DWLEN|-1|#DOMAIN_UCE_DIM3_FORMAT||#DOMAIN_UCE_DIM3_STRFORMAT||#DOMAIN_UCE_DIM3_EDIT|ED|#DOMAIN_UCE_DIM4_TYPE|varchar(20)|#DOMAIN_UCE_DIM4_COLTYPE|char(20)|#DOMAIN_UCE_DIM4_LENGTH|20|#DOMAIN_UCE_DIM4_DWLEN|-1|#DOMAIN_UCE_DIM4_FORMAT||#DOMAIN_UCE_DIM4_STRFORMAT||#DOMAIN_UCE_DIM4_EDIT|ED|#DOMAIN_UCE_DIM5_TYPE|varchar(20)|#DOMAIN_UCE_DIM5_COLTYPE|char(20)|#DOMAIN_UCE_DIM5_LENGTH|20|#DOMAIN_UCE_DIM5_DWLEN|-1|#DOMAIN_UCE_DIM5_FORMAT||#DOMAIN_UCE_DIM5_STRFORMAT||#DOMAIN_UCE_DIM5_EDIT|ED|#DOMAIN_UCE_DIM6_TYPE|varchar(20)|#DOMAIN_UCE_DIM6_COLTYPE|char(20)|#DOMAIN_UCE_DIM6_LENGTH|20|#DOMAIN_UCE_DIM6_DWLEN|-1|#DOMAIN_UCE_DIM6_FORMAT||#DOMAIN_UCE_DIM6_STRFORMAT||#DOMAIN_UCE_DIM6_EDIT|ED|#DOMAIN_UCE_DIM7_TYPE|varchar(20)|#DOMAIN_UCE_DIM7_COLTYPE|char(20)|#DOMAIN_UCE_DIM7_LENGTH|20|#DOMAIN_UCE_DIM7_DWLEN|-1|#DOMAIN_UCE_DIM7_FORMAT||#DOMAIN_UCE_DIM7_STRFORMAT||#DOMAIN_UCE_DIM7_EDIT|ED|#DOMAIN_UCE_DIM8_TYPE|varchar(20)|#DOMAIN_UCE_DIM8_COLTYPE|char(20)|#DOMAIN_UCE_DIM8_LENGTH|20|#DOMAIN_UCE_DIM8_DWLEN|-1|#DOMAIN_UCE_DIM8_FORMAT||#DOMAIN_UCE_DIM8_STRFORMAT||#DOMAIN_UCE_DIM8_EDIT|ED|#DOMAIN_UCE_DIM9_TYPE|varchar(20)|#DOMAIN_UCE_DIM9_COLTYPE|char(20)|#DOMAIN_UCE_DIM9_LENGTH|20|#DOMAIN_UCE_DIM9_DWLEN|-1|#DOMAIN_UCE_DIM9_FORMAT||#DOMAIN_UCE_DIM9_STRFORMAT||#DOMAIN_UCE_DIM9_EDIT|ED|#DOMAIN_V_POSTUP_TYPE|char(20)|#DOMAIN_V_POSTUP_COLTYPE|char(20)|#DOMAIN_V_POSTUP_LENGTH|20|#DOMAIN_V_POSTUP_DWLEN|-1|#DOMAIN_V_POSTUP_FORMAT||#DOMAIN_V_POSTUP_STRFORMAT||#DOMAIN_V_POSTUP_EDIT|ED|#DOMAIN_ZDR_PLAN_PARAM_TYPE|varchar(255)|#DOMAIN_ZDR_PLAN_PARAM_COLTYPE|char(255)|#DOMAIN_ZDR_PLAN_PARAM_LENGTH|255|#DOMAIN_ZDR_PLAN_PARAM_DWLEN|-1|#DOMAIN_ZDR_PLAN_PARAM_FORMAT||#DOMAIN_ZDR_PLAN_PARAM_STRFORMAT||#DOMAIN_ZDR_PLAN_PARAM_EDIT|PO|#LANG|CZ|#AKT_OBD_MAJ|2024-01-31|#AKT_OBD_MAJ_2|2024-01-31|#AKT_OBD_MAJ_3|1901-01-01|#AKT_OBD_MAJ_4|1901-01-01|#AKT_OBD_MAJ_5|1901-01-01|#AKT_OBD_MAJ_6|1901-01-01|#AKT_MES_MAJ|202401|#AKT_MES_MAJ_2|202401|#AKT_MES_MAJ_3|      |#AKT_MES_MAJ_4|      |#AKT_MES_MAJ_5|      |#AKT_MES_MAJ_6|      |#SES_MES_MAJ|202401|#SKUPINY||#MES_SYSTEM|3|#MIN_ROK_SYSTEM|2023|#MZDY_ROK_START|2023|#MZDY_MESIC_START|1|#ZACATEK_SYSTEM|01.03.2024|#KONEC_SYSTEM|31.03.2024|#WHERE_FILTER|1=1|#WINDOWID|3900879|#GROUPS||\\OBD_ADMIN|202401|\\OBD_AGENT|202401|\\OBD_ASNET|202401|\\OBD_ATTCH|202401|\\OBD_BANKA|202401|\\OBD_DOCS|202401|\\OBD_DPHCZ|202401|\\OBD_DPHEV|202401|\\OBD_EETCZ|202401|\\OBD_EXIMP|202401|\\OBD_FAKP|202401|\\OBD_FSAL|202401|\\OBD_FV|202401|\\OBD_GANTT|202401|\\OBD_GDPR|202401|\\OBD_INVEN|202401|\\OBD_KARAT|202401|\\OBD_KAZAS|202401|\\OBD_MAJ|202401|\\OBD_MAN|202401|\\OBD_MZDY|202401|\\OBD_ODBYT|202401|\\OBD_ORG|202401|\\OBD_ORGS|202401|\\OBD_O_CEN|202401|\\OBD_O_OBJ|202401|\\OBD_O_SKL|202401|\\OBD_PARAM|202401|\\OBD_PERS|202403|\\OBD_POKL|202401|\\OBD_PUIN|202401|\\OBD_SEKR|202401|\\OBD_TERM|202401|\\OBD_TMPRS|202401|\\OBD_UCE|202401|\\OBD_UCEOO|202401|\\OBD_UCEPS|202400|\\OBD_UCEVN|202401|\\OBD_UK|202401|\\OBD_VYKAZ|202401|\\OBD_V_TER|202401|\\OBD_V_TPV|202401|\\OBD_V_ZAK|202401|\\OBD_V_ZMT|202401|\\OBD_ZDRKO|202401|\\OBD_ZDROJ|202401|\\ODDELOVAC||\\FR_ADMIN|24|\\FR_AGENT|24|\\FR_ASNET|24|\\FR_ATTCH|24|\\FR_ZAH_ADMIN|01.01.2024|\\FR_ZAH_AGENT|01.01.2024|\\FR_ZAH_ASNET|01.01.2024|\\FR_ZAH_ATTCH|01.01.2024|\\FR_ZAH_BANKA|01.01.2024|\\FR_ZAH_DOCS|01.01.2024|\\FR_ZAH_DPHCZ|01.01.2024|\\FR_ZAH_DPHEV|01.01.2024|\\FR_ZAH_EETCZ|01.01.2024|\\FR_ZAH_EXIMP|01.01.2024|\\FR_ZAH_FAKP|01.01.2024|\\FR_ZAH_FSAL|01.01.2024|\\FR_ZAH_FV|01.01.2024|\\FR_ZAH_GANTT|01.01.2024|\\FR_ZAH_GDPR|01.01.2024|\\FR_ZAH_INVEN|01.01.2024|\\FR_ZAH_KARAT|01.01.2024|\\FR_ZAH_KAZAS|01.01.2024|\\FR_ZAH_MAJ|01.01.2024|\\FR_ZAH_MAN|01.01.2024|\\FR_ZAH_MZDY|01.01.2024|\\FR_ZAH_ODBYT|01.01.2024|\\FR_ZAH_ORG|01.01.2024|\\FR_ZAH_ORGS|01.01.2024|\\FR_ZAH_O_CEN|01.01.2024|\\FR_ZAH_O_OBJ|01.01.2024|\\FR_ZAH_O_SKL|01.01.2024|\\FR_ZAH_PARAM|01.01.2024|\\FR_ZAH_PERS|01.01.2024|\\FR_ZAH_POKL|01.01.2024|\\FR_ZAH_PUIN|01.01.2024|\\FR_ZAH_SEKR|01.01.2024|\\FR_ZAH_TERM|01.01.2024|\\FR_ZAH_TMPRS|01.01.2024|\\FR_ZAH_UCE|01.01.2024|\\FR_ZAH_UCEOO|01.01.2024|\\FR_ZAH_UCEPS|01.01.2024|\\FR_ZAH_UCEVN|01.01.2024|\\FR_ZAH_UK|01.01.2024|\\FR_ZAH_VYKAZ|01.01.2024|\\FR_ZAH_V_TER|01.01.2024|\\FR_ZAH_V_TPV|01.01.2024|\\FR_ZAH_V_ZAK|01.01.2024|\\FR_ZAH_V_ZMT|01.01.2024|\\FR_ZAH_ZDRKO|01.01.2024|\\FR_ZAH_ZDROJ|01.01.2024|\\FR_ZDRKO|24|\\FR_ZDROJ|24|\\FR_UK|24|\\FR_UKO_ADMIN|31.12.2024|\\FR_UKO_AGENT|31.12.2024|\\FR_UKO_ASNET|31.12.2024|\\FR_UKO_ATTCH|31.12.2024|\\FR_UKO_BANKA|31.12.2024|\\FR_UKO_DOCS|31.12.2024|\\FR_UKO_DPHCZ|31.12.2024|\\FR_UKO_DPHEV|31.12.2024|\\FR_UKO_EETCZ|31.12.2024|\\FR_UKO_EXIMP|31.12.2024|\\FR_UKO_FAKP|31.12.2024|\\FR_UKO_FSAL|31.12.2024|\\FR_UKO_FV|31.12.2024|\\FR_UKO_GANTT|31.12.2024|\\FR_UKO_GDPR|31.12.2024|\\FR_UKO_INVEN|31.12.2024|\\FR_UKO_KARAT|31.12.2024|\\FR_UKO_KAZAS|31.12.2024|\\FR_UKO_MAJ|31.12.2024|\\FR_UKO_MAN|31.12.2024|\\FR_UKO_MZDY|31.12.2024|\\FR_UKO_ODBYT|31.12.2024|\\FR_UKO_ORG|31.12.2024|\\FR_UKO_ORGS|31.12.2024|\\FR_UKO_O_CEN|31.12.2024|\\FR_UKO_O_OBJ|31.12.2024|\\FR_UKO_O_SKL|31.12.2024|\\FR_UKO_PARAM|31.12.2024|\\FR_UKO_PERS|31.12.2024|\\FR_UKO_POKL|31.12.2024|\\FR_UKO_PUIN|31.12.2024|\\FR_UKO_SEKR|31.12.2024|\\FR_UKO_TERM|31.12.2024|\\FR_UKO_TMPRS|31.12.2024|\\FR_UKO_UCE|31.12.2024|\\FR_UKO_UCEOO|31.12.2024|\\FR_UKO_UCEPS|31.12.2024|\\FR_UKO_UCEVN|31.12.2024|\\FR_UKO_UK|31.12.2024|\\FR_UKO_VYKAZ|31.12.2024|\\FR_UKO_V_TER|31.12.2024|\\FR_UKO_V_TPV|31.12.2024|\\FR_UKO_V_ZAK|31.12.2024|\\FR_UKO_V_ZMT|31.12.2024|\\FR_UKO_ZDRKO|31.12.2024|\\FR_UKO_ZDROJ|31.12.2024|\\FR_UCE|24|\\FR_UCEOO|24|\\FR_UCEPS|24|\\FR_UCEVN|24|\\FR_BANKA|24|\\FR_DOCS|24|\\FR_DPHCZ|24|\\FR_DPHEV|24|\\FR_EETCZ|24|\\FR_EXIMP|24|\\FR_FAKP|24|\\FR_FSAL|24|\\FR_FV|24|\\FR_GANTT|24|\\FR_GDPR|24|\\FR_INVEN|24|\\FR_KARAT|24|\\FR_KAZAS|24|\\FR_MAJ|24|\\FR_MAN|24|\\FR_MZDY|24|\\FR_ODBYT|24|\\FR_ORG|24|\\FR_ORGS|24|\\FR_O_CEN|24|\\FR_O_OBJ|24|\\FR_O_SKL|24|\\FR_PARAM|24|\\FR_PERS|24|\\FR_POKL|24|\\FR_PUIN|24|\\FR_SEKR|24|\\FR_TERM|24|\\FR_TMPRS|24|\\FR_VYKAZ|24|\\FR_V_TER|24|\\FR_V_TPV|24|\\FR_V_ZAK|24|\\FR_V_ZMT|24|\\FRZAH_ADMIN|2024-01-01|\\FRZAH_AGENT|2024-01-01|\\FRZAH_ASNET|2024-01-01|\\FRZAH_ATTCH|2024-01-01|\\FRZAH_BANKA|2024-01-01|\\FRZAH_DOCS|2024-01-01|\\FRZAH_DPHCZ|2024-01-01|\\FRZAH_DPHEV|2024-01-01|\\FRZAH_EETCZ|2024-01-01|\\FRZAH_EXIMP|2024-01-01|\\FRZAH_FAKP|2024-01-01|\\FRZAH_FSAL|2024-01-01|\\FRZAH_FV|2024-01-01|\\FRZAH_GANTT|2024-01-01|\\FRZAH_GDPR|2024-01-01|\\FRZAH_INVEN|2024-01-01|\\FRZAH_KARAT|2024-01-01|\\FRZAH_KAZAS|2024-01-01|\\FRZAH_MAJ|2024-01-01|\\FRZAH_MAN|2024-01-01|\\FRZAH_MZDY|2024-01-01|\\FRZAH_ODBYT|2024-01-01|\\FRZAH_ORG|2024-01-01|\\FRZAH_ORGS|2024-01-01|\\FRZAH_O_CEN|2024-01-01|\\FRZAH_O_OBJ|2024-01-01|\\FRZAH_O_SKL|2024-01-01|\\FRZAH_PARAM|2024-01-01|\\FRZAH_PERS|2024-01-01|\\FRZAH_POKL|2024-01-01|\\FRZAH_PUIN|2024-01-01|\\FRZAH_SEKR|2024-01-01|\\FRZAH_TERM|2024-01-01|\\FRZAH_TMPRS|2024-01-01|\\FRZAH_UCE|2024-01-01|\\FRZAH_UCEOO|2024-01-01|\\FRZAH_UCEPS|2024-01-01|\\FRZAH_UCEVN|2024-01-01|\\FRZAH_UK|2024-01-01|\\FRZAH_VYKAZ|2024-01-01|\\FRZAH_V_TER|2024-01-01|\\FRZAH_V_TPV|2024-01-01|\\FRZAH_V_ZAK|2024-01-01|\\FRZAH_V_ZMT|2024-01-01|\\FRZAH_ZDRKO|2024-01-01|\\FRZAH_ZDROJ|2024-01-01|\\FRUKO_ADMIN|2024-12-31|\\FRUKO_AGENT|2024-12-31|\\FRUKO_ASNET|2024-12-31|\\FRUKO_ATTCH|2024-12-31|\\FRUKO_BANKA|2024-12-31|\\FRUKO_DOCS|2024-12-31|\\FRUKO_DPHCZ|2024-12-31|\\FRUKO_DPHEV|2024-12-31|\\FRUKO_EETCZ|2024-12-31|\\FRUKO_EXIMP|2024-12-31|\\FRUKO_FAKP|2024-12-31|\\FRUKO_FSAL|2024-12-31|\\FRUKO_FV|2024-12-31|\\FRUKO_GANTT|2024-12-31|\\FRUKO_GDPR|2024-12-31|\\FRUKO_INVEN|2024-12-31|\\FRUKO_KARAT|2024-12-31|\\FRUKO_KAZAS|2024-12-31|\\FRUKO_MAJ|2024-12-31|\\FRUKO_MAN|2024-12-31|\\FRUKO_MZDY|2024-12-31|\\FRUKO_ODBYT|2024-12-31|\\FRUKO_ORG|2024-12-31|\\FRUKO_ORGS|2024-12-31|\\FRUKO_O_CEN|2024-12-31|\\FRUKO_O_OBJ|2024-12-31|\\FRUKO_O_SKL|2024-12-31|\\FRUKO_PARAM|2024-12-31|\\FRUKO_PERS|2024-12-31|\\FRUKO_POKL|2024-12-31|\\FRUKO_PUIN|2024-12-31|\\FRUKO_SEKR|2024-12-31|\\FRUKO_TERM|2024-12-31|\\FRUKO_TMPRS|2024-12-31|\\FRUKO_UCE|2024-12-31|\\FRUKO_UCEOO|2024-12-31|\\FRUKO_UCEPS|2024-12-31|\\FRUKO_UCEVN|2024-12-31|\\FRUKO_UK|2024-12-31|\\FRUKO_VYKAZ|2024-12-31|\\FRUKO_V_TER|2024-12-31|\\FRUKO_V_TPV|2024-12-31|\\FRUKO_V_ZAK|2024-12-31|\\FRUKO_V_ZMT|2024-12-31|\\FRUKO_ZDRKO|2024-12-31|\\FRUKO_ZDROJ|2024-12-31|\\FSAL_PAR_IDENT_AVIZA|0|\\FSAL_PAR_IDENT_KOMP|0|\\FSAL_PAR_IDENT_UPOM|0|\\FSAL_PAR_IDENT_UZNA|0|\\FSAL_PAR_IDENT_PEN|0|\\FIRMA|Termopan s.r.o.|\\FIRMA_UDAJE1||\\FIRMA_UDAJE10||\\FIRMA_UDAJE2||\\FIRMA_UDAJE3||\\FIRMA_UDAJE4||\\FIRMA_UDAJE5||\\FIRMA_UDAJE6||\\FIRMA_UDAJE7||\\FIRMA_UDAJE8||\\FIRMA_UDAJE9||\\FIRMA_ULICE|Zahradní 843|\\FIRMA_DIC|CZ60707631|\\FIRMA_DODATEK|s.r.o.|\\FIRMA_JMENO||\\FIRMA_PRIJMENI||\\FIRMA_PSC|588 13|\\FIRMA_OBEC|Polná|\\FIRMA_OKRES|3707|\\FIRMA_STAT|CZ|\\FIRMA_ISO_STAT|CZ|\\FIRMA_IDM|CZK|\\FIRMA_V|Polná|\\FIRMA_FU||\\FIRMA_LANG|CZ|\\FIRMA_CINNOST1|Výroba pryžových a plastových výrobků|\\FIRMA_CINNOST2||\\INV_C_MASKA||\\INV_C_P_MASKA||\\ID_KARTY_NESPEC||\\IDI|01|\\IDU|KSWPVKA|\\IDUN|Václav Kadlec|\\IDSKUP||\\IDMM|CZK|\\IDMENUMOD||\\IDF|1|\\ICO|60707631|\\ISNET|1|\\ISHTML|0|\\UCE_UCET2_USE|'00'|\\UCE_DIM_USE|'0000000000'|\\UCE_DIMCIS_USE|'0000000000'|\\UMISTENI_MASKA||\\USRNAME|Václav Kadlec|\\USER_RIGHTS|#UserModifyRep;#UserModifyWin;#UserModifyWin=2;#PRSL=2;|\\KALKUL_VYCHOZI|'HLA'|\\KARTA_MASKA|XXXXXXXXXXXXXXXXXXXX|\\KARTA_TYP|0|\\KARTA_NULY|0|\\KARAT_VERSION|23.002|\\SKLAD_MASKA||\\SKLAD_TYP|0|\\SKLAD_NULY|0|\\SRVRTYPE|MS|\\SRVRVER|1500424902642220221211332019642022100064020348|\\SRVRNAME|192.168.10.247,1433|\\SRVRDB|KARAT_TERMOPAN|\\SERVER_COMP_NAME|S-KSOCLOUD-56|\\PREFIX_N_D|0|\\DEFA_XPLAN|''|\\DEVSTANDARD|0|\\DEVIMPL|1|\\DEVFIRM|1|\\DEVELOPERMODE|60|\\DBAIDU|DBA|\\DOCDIR|c:\\ProgramData\\KARAT Software\\Karat Server\\Vzor\\|\\DOCUMENTSDIR|C:\\Users\\VACLAVK\\Documents\\|\\DATUM|'2024-05-06'|\\DATUM_NA|2024-05-06|\\DATUM_STR|06.05.2024|\\DATUM_WIN|06.05.2024|\\WEBAPP_USR_ID|1|\\WEBAPP_USR_NAME|''|\\WEBAPP_USR_OSO|''|\\WEBAPP_DOMAIN|''|\\WEBAPP_PAGE|''|\\WINDIR|C:\\Windows\\|\\WRAPPER|Win32NT|\\LITE|0|termopan|termopan|\\LICNUM|1|\\LICREG|2022028_1|\\LIC1ID|TERMOPAN|\\LOCKDIR|C:\\ProgramData\\KARAT Software\\Karat Server\\TERMOPAN\\Temp\\ab12ec20-ebc2-44d2-981e-55211d4adf66\\|\\LOCKDIR_CLI|C:\\Users\\VACLAVK\\AppData\\Local\\KARAT Software\\Karat Client\\Temp\\ab12ec20-ebc2-44d2-981e-55211d4adf66\\|\\MYOSCISLO||\\MN|Kč|\\MODULY|ADMIN,AGENT,ATTCH,BANKA,DPHCZ,DPHEV,EETCZ,EXIMP,FAKP,FSAL,FV,GDPR,INVEN,KARAT,KAZAS,MAJ,MAN,MZDY,ODBYT,ORG,ORGS,O_CEN,O_OBJ,O_SKL,PARAM,PERS,POKL,PUIN,SEKR,TERM,TMPRS,UCE,UCEOO,UCEPS,UCEVN,UK,VYKAZ,V_TER,V_TPV,V_ZAK,V_ZMT,ZDRKO,ZDROJ,|\\MAINCONNECTION|CONN00001|\\MAIN_LANG_PRG|CZ|\\MAIN_LANG_PRG2|CZ|\\MAIN_LANG_DB|CZ|\\HKL|HLA|\\HOMEDIR|C:\\ProgramData\\KARAT Software\\Karat Server\\TERMOPAN\\|\\VZORDIR|c:\\ProgramData\\KARAT Software\\Karat Server\\Vzor\\|\\VZOR_STAT|cz|\\VZOR_PART||\\CLIENTDIR|C:\\Users\\VACLAVK\\AppData\\Local\\KARAT Software\\Karat Client\\Client\\23.2.476.0\\|\\CLIENT_COMP_ID|VKA/console/VKA\\VACLAVK|\\CLIENT_COMP_NAME|VKA|\\CLIENT_COMP_SESSION|Console|\\CA_NAME||\\TEMPDIR|C:\\ProgramData\\KARAT Software\\Karat Server\\TERMOPAN\\Temp\\ab12ec20-ebc2-44d2-981e-55211d4adf66\\|\\TERMINAL_VIEW|0|\\ASNET_VERSION|23.2.476.0|\\ANALYTIK|1|'#WHERE_FILTER'|'1=1'|GRP1|| w_iftrepmaker\tmax_tmptabnum\t0 w_iftrepmaker\tid_save\tcisla REPORT o_obj/stitky_25_100_wh ------------------------------- Window: Tisk Tisk: Štítky ( enabled visible c__w_ifttisk) w_ift\tclassname\tw_ifttisk w_ift\tclasses\t.object.karatbaseobject.karatobject.karatcontrol.karatwindow.c__w_ift.c__w_ifttisk w_ift\tparametr ID_MENU=MNID/O_OBJ/202306201248564755483132 TYP=TISK CLASS=w_ifttisk W_SOURCE=object(c__w_iftrepmaker AppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.5253.5256.5798) USER_BEGIN #EXECUTE_SUBST_BEGIN;#op_stitky1|#op_stitky1_579879|#op_stitky1_|op_stitky1_579879_|#op_stitky1_579879|#op_stitky1_579879|_#op_stitky1|_op_stitky1_579879|#EXECUTE_SUBST_END;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202306201248564755483132/20/30/0; #PERCENT_OFF; #NOADDADDMENU; #BUTTON_COLOR=rgb(255,128,128); #SPACEBEFORE; #SPACEAFTER; #DBEXEC_SUBST=#BE_DOKLAD|24OP010100000095; #DBEXECUTE=op_exe_stitky1; #DEFAULT_PROFILE=STITKY;;#SETMENUID_END;;#ISFIRSTROW;;#ISLASTROW;;#ISFROMBUTTON;;#ALL_ADD_TYPES=SESTAVA_,;#LANG_DAT=CZ;#LANG_PRG=CZ;#REPMAKER_SUBST_BEGIN;#NAZEV||#NEW_ROK_SYSTEM|2025|#NEW_PERS_ROK_SYSTEM|2025|#FILTER||#FULLDAY|10:52:09.320 06.05.2024|#FULLDAYCODE|2024-05-06 10:52:09.320|#FULLDAYREPORT|06.05.2024 10:52:09|#PODMINKA| |#PERS_ROK_SYSTEM|2024|#PERS_ROK_SYSTEM_M|2024|#PERS_MES_SYSTEM|3|#PERS_MES_SYSTEM_M|3|#TEXTSORT|Bez řazení|#TEXTLANG|Čeština *|#TODAY|06.05.2024|#REPCODE|o_obj_ru_stitky_25_100_wh_100|#REPNAME|25x100|#REPIDAKCE||#REPAKCE||#ROK_SYSTEM|2024|#DATALANG|CZ|#DOMAIN_.CASTKA17_TYPE|decimal(17,2)|#DOMAIN_.CASTKA17_COLTYPE|decimal(2)|#DOMAIN_.CASTKA17_LENGTH|22|#DOMAIN_.CASTKA17_DWLEN|-1|#DOMAIN_.CASTKA17_FORMAT|###,###,###,###,###.00|#DOMAIN_.CASTKA17_STRFORMAT|###,###,###,###,###.00|#DOMAIN_.CASTKA17_EDIT|EM|#DOMAIN_.CASTKA18_TYPE|decimal(18,2)|#DOMAIN_.CASTKA18_COLTYPE|decimal(2)|#DOMAIN_.CASTKA18_LENGTH|22|#DOMAIN_.CASTKA18_DWLEN|-1|#DOMAIN_.CASTKA18_FORMAT|###,###,###,###,###.00|#DOMAIN_.CASTKA18_STRFORMAT|###,###,###,###,###.00|#DOMAIN_.CASTKA18_EDIT|EM|#DOMAIN_.DEVIZY18_TYPE|decimal(18,2)|#DOMAIN_.DEVIZY18_COLTYPE|decimal(2)|#DOMAIN_.DEVIZY18_LENGTH|22|#DOMAIN_.DEVIZY18_DWLEN|-1|#DOMAIN_.DEVIZY18_FORMAT|###,###,###,###,###.00|#DOMAIN_.DEVIZY18_STRFORMAT|###,###,###,###,###.00|#DOMAIN_.DEVIZY18_EDIT|EM|#DOMAIN_.TEXT_255_TYPE|varchar(255)|#DOMAIN_.TEXT_255_COLTYPE|char(255)|#DOMAIN_.TEXT_255_LENGTH|255|#DOMAIN_.TEXT_255_DWLEN|-1|#DOMAIN_.TEXT_255_FORMAT||#DOMAIN_.TEXT_255_STRFORMAT||#DOMAIN_.TEXT_255_EDIT|PO|#DOMAIN_.TEXT_40_TYPE|varchar(40)|#DOMAIN_.TEXT_40_COLTYPE|char(40)|#DOMAIN_.TEXT_40_LENGTH|40|#DOMAIN_.TEXT_40_DWLEN|-1|#DOMAIN_.TEXT_40_FORMAT||#DOMAIN_.TEXT_40_STRFORMAT||#DOMAIN_.TEXT_40_EDIT|ED|#DOMAIN_.TEXT_80_TYPE|varchar(80)|#DOMAIN_.TEXT_80_COLTYPE|char(80)|#DOMAIN_.TEXT_80_LENGTH|80|#DOMAIN_.TEXT_80_DWLEN|-1|#DOMAIN_.TEXT_80_FORMAT||#DOMAIN_.TEXT_80_STRFORMAT||#DOMAIN_.TEXT_80_EDIT|ED|#DOMAIN_ADMIN_HODNOTA_TYPE|varchar(255)|#DOMAIN_ADMIN_HODNOTA_COLTYPE|char(255)|#DOMAIN_ADMIN_HODNOTA_LENGTH|255|#DOMAIN_ADMIN_HODNOTA_DWLEN|-1|#DOMAIN_ADMIN_HODNOTA_FORMAT||#DOMAIN_ADMIN_HODNOTA_STRFORMAT||#DOMAIN_ADMIN_HODNOTA_EDIT|PO|#DOMAIN_ADMIN_LANG_PHRASE_TYPE|varchar(255)|#DOMAIN_ADMIN_LANG_PHRASE_COLTYPE|char(255)|#DOMAIN_ADMIN_LANG_PHRASE_LENGTH|255|#DOMAIN_ADMIN_LANG_PHRASE_DWLEN|-1|#DOMAIN_ADMIN_LANG_PHRASE_FORMAT||#DOMAIN_ADMIN_LANG_PHRASE_STRFORMAT||#DOMAIN_ADMIN_LANG_PHRASE_EDIT|PO|#DOMAIN_ADMIN_MENU_POPIS_TYPE|varchar(100)|#DOMAIN_ADMIN_MENU_POPIS_COLTYPE|char(100)|#DOMAIN_ADMIN_MENU_POPIS_LENGTH|100|#DOMAIN_ADMIN_MENU_POPIS_DWLEN|-1|#DOMAIN_ADMIN_MENU_POPIS_FORMAT||#DOMAIN_ADMIN_MENU_POPIS_STRFORMAT||#DOMAIN_ADMIN_MENU_POPIS_EDIT|ED|#DOMAIN_ADMIN_SD_LABEL_TYPE|varchar(80)|#DOMAIN_ADMIN_SD_LABEL_COLTYPE|char(80)|#DOMAIN_ADMIN_SD_LABEL_LENGTH|80|#DOMAIN_ADMIN_SD_LABEL_DWLEN|-1|#DOMAIN_ADMIN_SD_LABEL_FORMAT||#DOMAIN_ADMIN_SD_LABEL_STRFORMAT||#DOMAIN_ADMIN_SD_LABEL_EDIT|ED|#DOMAIN_ADR_OBEC_TYPE|varchar(80)|#DOMAIN_ADR_OBEC_COLTYPE|char(80)|#DOMAIN_ADR_OBEC_LENGTH|80|#DOMAIN_ADR_OBEC_DWLEN|-1|#DOMAIN_ADR_OBEC_FORMAT||#DOMAIN_ADR_OBEC_STRFORMAT||#DOMAIN_ADR_OBEC_EDIT|ED|#DOMAIN_ADR_ULICE_TYPE|varchar(80)|#DOMAIN_ADR_ULICE_COLTYPE|char(80)|#DOMAIN_ADR_ULICE_LENGTH|80|#DOMAIN_ADR_ULICE_DWLEN|-1|#DOMAIN_ADR_ULICE_FORMAT||#DOMAIN_ADR_ULICE_STRFORMAT||#DOMAIN_ADR_ULICE_EDIT|ED|#DOMAIN_BANKA_TYPE|varchar(7)|#DOMAIN_BANKA_COLTYPE|char(7)|#DOMAIN_BANKA_LENGTH|7|#DOMAIN_BANKA_DWLEN|-1|#DOMAIN_BANKA_FORMAT||#DOMAIN_BANKA_STRFORMAT||#DOMAIN_BANKA_EDIT|ED|#DOMAIN_CEN_SKUPINA_NOM_TYPE|varchar(12)|#DOMAIN_CEN_SKUPINA_NOM_COLTYPE|char(12)|#DOMAIN_CEN_SKUPINA_NOM_LENGTH|12|#DOMAIN_CEN_SKUPINA_NOM_DWLEN|-1|#DOMAIN_CEN_SKUPINA_NOM_FORMAT||#DOMAIN_CEN_SKUPINA_NOM_STRFORMAT||#DOMAIN_CEN_SKUPINA_NOM_EDIT|ED|#DOMAIN_DKL_POLOZKA_SMALL_TYPE|integer|#DOMAIN_DKL_POLOZKA_SMALL_COLTYPE|long|#DOMAIN_DKL_POLOZKA_SMALL_LENGTH|11|#DOMAIN_DKL_POLOZKA_SMALL_DWLEN|-1|#DOMAIN_DKL_POLOZKA_SMALL_FORMAT|###,###,##0|#DOMAIN_DKL_POLOZKA_SMALL_STRFORMAT|###,###,##0|#DOMAIN_DKL_POLOZKA_SMALL_EDIT|EM|#DOMAIN_DKL_POLOZKA_SMALL0_TYPE|smallint|#DOMAIN_DKL_POLOZKA_SMALL0_COLTYPE|long|#DOMAIN_DKL_POLOZKA_SMALL0_LENGTH|5|#DOMAIN_DKL_POLOZKA_SMALL0_DWLEN|-1|#DOMAIN_DKL_POLOZKA_SMALL0_FORMAT|#,##0|#DOMAIN_DKL_POLOZKA_SMALL0_STRFORMAT|#,##0|#DOMAIN_DKL_POLOZKA_SMALL0_EDIT|EM|#DOMAIN_DKL_TEXT_40_TYPE|varchar(40)|#DOMAIN_DKL_TEXT_40_COLTYPE|char(40)|#DOMAIN_DKL_TEXT_40_LENGTH|40|#DOMAIN_DKL_TEXT_40_DWLEN|-1|#DOMAIN_DKL_TEXT_40_FORMAT||#DOMAIN_DKL_TEXT_40_STRFORMAT||#DOMAIN_DKL_TEXT_40_EDIT|ED|#DOMAIN_DPH_KOD_TYPE|varchar(10)|#DOMAIN_DPH_KOD_COLTYPE|char(10)|#DOMAIN_DPH_KOD_LENGTH|10|#DOMAIN_DPH_KOD_DWLEN|-1|#DOMAIN_DPH_KOD_FORMAT||#DOMAIN_DPH_KOD_STRFORMAT||#DOMAIN_DPH_KOD_EDIT|ED|#DOMAIN_EXIMP_ID_TYPE|varchar(40)|#DOMAIN_EXIMP_ID_COLTYPE|char(40)|#DOMAIN_EXIMP_ID_LENGTH|40|#DOMAIN_EXIMP_ID_DWLEN|-1|#DOMAIN_EXIMP_ID_DAVKY_TYPE|integer|#DOMAIN_EXIMP_ID_DAVKY_COLTYPE|long|#DOMAIN_EXIMP_ID_DAVKY_LENGTH|7|#DOMAIN_EXIMP_ID_DAVKY_DWLEN|-1|#DOMAIN_EXIMP_ID_DAVKY_FORMAT|#######|#DOMAIN_EXIMP_ID_DAVKY_STRFORMAT|#######|#DOMAIN_EXIMP_ID_DAVKY_EDIT|EM|#DOMAIN_EXIMP_ID_FORMAT||#DOMAIN_EXIMP_ID_STRFORMAT||#DOMAIN_EXIMP_ID_EDIT|ED|#DOMAIN_O_OBJ_KOD_TEXTU_TYPE|char(3)|#DOMAIN_O_OBJ_KOD_TEXTU_COLTYPE|char(3)|#DOMAIN_O_OBJ_KOD_TEXTU_LENGTH|3|#DOMAIN_O_OBJ_KOD_TEXTU_DWLEN|-1|#DOMAIN_O_OBJ_KOD_TEXTU_FORMAT||#DOMAIN_O_OBJ_KOD_TEXTU_STRFORMAT||#DOMAIN_O_OBJ_KOD_TEXTU_EDIT|ED|#DOMAIN_O_SKL_IDENTIFIKATOR_TYPE|varchar(20)|#DOMAIN_O_SKL_IDENTIFIKATOR_COLTYPE|char(20)|#DOMAIN_O_SKL_IDENTIFIKATOR_LENGTH|20|#DOMAIN_O_SKL_IDENTIFIKATOR_DWLEN|-1|#DOMAIN_O_SKL_IDENTIFIKATOR_FORMAT||#DOMAIN_O_SKL_IDENTIFIKATOR_STRFORMAT||#DOMAIN_O_SKL_IDENTIFIKATOR_EDIT|ED|#DOMAIN_ODBYT_ATR_HODNOTA_TYPE|varchar(30)|#DOMAIN_ODBYT_ATR_HODNOTA_COLTYPE|char(30)|#DOMAIN_ODBYT_ATR_HODNOTA_LENGTH|30|#DOMAIN_ODBYT_ATR_HODNOTA_DWLEN|-1|#DOMAIN_ODBYT_ATR_HODNOTA_FORMAT||#DOMAIN_ODBYT_ATR_HODNOTA_STRFORMAT||#DOMAIN_ODBYT_ATR_HODNOTA_EDIT|ED|#DOMAIN_ODBYT_ATR_VAR_TYPE|varchar(30)|#DOMAIN_ODBYT_ATR_VAR_COLTYPE|char(30)|#DOMAIN_ODBYT_ATR_VAR_LENGTH|30|#DOMAIN_ODBYT_ATR_VAR_DWLEN|-1|#DOMAIN_ODBYT_ATR_VAR_FORMAT||#DOMAIN_ODBYT_ATR_VAR_STRFORMAT||#DOMAIN_ODBYT_ATR_VAR_EDIT|ED|#DOMAIN_ODBYT_CENA_TYPE|decimal(15,4)|#DOMAIN_ODBYT_CENA_COLTYPE|decimal(4)|#DOMAIN_ODBYT_CENA_LENGTH|19|#DOMAIN_ODBYT_CENA_DWLEN|-1|#DOMAIN_ODBYT_CENA_FORMAT|##,###,###,###.0000|#DOMAIN_ODBYT_CENA_STRFORMAT|##,###,###,###.0000|#DOMAIN_ODBYT_CENA_EDIT|EM|#DOMAIN_ODBYT_DL_TYPE|char(16)|#DOMAIN_ODBYT_DL_COLTYPE|char(16)|#DOMAIN_ODBYT_DL_LENGTH|16|#DOMAIN_ODBYT_DL_DWLEN|-1|#DOMAIN_ODBYT_DL_FORMAT||#DOMAIN_ODBYT_DL_STRFORMAT||#DOMAIN_ODBYT_DL_EDIT|ED|#DOMAIN_ODBYT_EAN_TYPE|varchar(20)|#DOMAIN_ODBYT_EAN_COLTYPE|char(20)|#DOMAIN_ODBYT_EAN_LENGTH|20|#DOMAIN_ODBYT_EAN_DWLEN|-1|#DOMAIN_ODBYT_EAN_FORMAT||#DOMAIN_ODBYT_EAN_STRFORMAT||#DOMAIN_ODBYT_EAN_EDIT|ED|#DOMAIN_ODBYT_JEHO_ID_TYPE|varchar(30)|#DOMAIN_ODBYT_JEHO_ID_COLTYPE|char(30)|#DOMAIN_ODBYT_JEHO_ID_LENGTH|30|#DOMAIN_ODBYT_JEHO_ID_DWLEN|-1|#DOMAIN_ODBYT_JEHO_ID_FORMAT||#DOMAIN_ODBYT_JEHO_ID_STRFORMAT||#DOMAIN_ODBYT_JEHO_ID_EDIT|ED|#DOMAIN_ODBYT_KARTA_TYPE|varchar(20)|#DOMAIN_ODBYT_KARTA_COLTYPE|char(20)|#DOMAIN_ODBYT_KARTA_LENGTH|20|#DOMAIN_ODBYT_KARTA_DWLEN|-1|#DOMAIN_ODBYT_KARTA_FORMAT||#DOMAIN_ODBYT_KARTA_STRFORMAT||#DOMAIN_ODBYT_KARTA_EDIT|ED|#DOMAIN_ODBYT_KOD_TEXTU_TYPE|char(3)|#DOMAIN_ODBYT_KOD_TEXTU_COLTYPE|char(3)|#DOMAIN_ODBYT_KOD_TEXTU_LENGTH|3|#DOMAIN_ODBYT_KOD_TEXTU_DWLEN|-1|#DOMAIN_ODBYT_KOD_TEXTU_FORMAT||#DOMAIN_ODBYT_KOD_TEXTU_STRFORMAT||#DOMAIN_ODBYT_KOD_TEXTU_EDIT|ED|#DOMAIN_ODBYT_MISTO_DOD_TYPE|varchar(200)|#DOMAIN_ODBYT_MISTO_DOD_COLTYPE|char(200)|#DOMAIN_ODBYT_MISTO_DOD_LENGTH|200|#DOMAIN_ODBYT_MISTO_DOD_DWLEN|-1|#DOMAIN_ODBYT_MISTO_DOD_FORMAT||#DOMAIN_ODBYT_MISTO_DOD_STRFORMAT||#DOMAIN_ODBYT_MISTO_DOD_EDIT|ED|#DOMAIN_ODBYT_MNOZSTVI15_TYPE|decimal(15,4)|#DOMAIN_ODBYT_MNOZSTVI15_COLTYPE|decimal(4)|#DOMAIN_ODBYT_MNOZSTVI15_LENGTH|16|#DOMAIN_ODBYT_MNOZSTVI15_DWLEN|-1|#DOMAIN_ODBYT_MNOZSTVI15_FORMAT|###,###,###.0000|#DOMAIN_ODBYT_MNOZSTVI15_STRFORMAT|###,###,###.0000|#DOMAIN_ODBYT_MNOZSTVI15_EDIT|EM|#DOMAIN_ODBYT_NAZEV_NOM_TYPE|varchar(50)|#DOMAIN_ODBYT_NAZEV_NOM_COLTYPE|char(50)|#DOMAIN_ODBYT_NAZEV_NOM_LENGTH|50|#DOMAIN_ODBYT_NAZEV_NOM_DWLEN|-1|#DOMAIN_ODBYT_NAZEV_NOM_FORMAT||#DOMAIN_ODBYT_NAZEV_NOM_STRFORMAT||#DOMAIN_ODBYT_NAZEV_NOM_EDIT|ED|#DOMAIN_ODBYT_OBJEDNAVKA_TYPE|char(100)|#DOMAIN_ODBYT_OBJEDNAVKA_COLTYPE|char(100)|#DOMAIN_ODBYT_OBJEDNAVKA_LENGTH|100|#DOMAIN_ODBYT_OBJEDNAVKA_DWLEN|-1|#DOMAIN_ODBYT_OBJEDNAVKA_FORMAT||#DOMAIN_ODBYT_OBJEDNAVKA_STRFORMAT||#DOMAIN_ODBYT_OBJEDNAVKA_EDIT|ED|#DOMAIN_ODBYT_POCET_PALET_TYPE|decimal(9,2)|#DOMAIN_ODBYT_POCET_PALET_COLTYPE|decimal(2)|#DOMAIN_ODBYT_POCET_PALET_LENGTH|12|#DOMAIN_ODBYT_POCET_PALET_DWLEN|-1|#DOMAIN_ODBYT_POCET_PALET_FORMAT|#,###,###.00|#DOMAIN_ODBYT_POCET_PALET_STRFORMAT|#,###,###.00|#DOMAIN_ODBYT_POCET_PALET_EDIT|EM|#DOMAIN_ODBYT_SKUPINA_NOM_TYPE|varchar(12)|#DOMAIN_ODBYT_SKUPINA_NOM_COLTYPE|char(12)|#DOMAIN_ODBYT_SKUPINA_NOM_LENGTH|12|#DOMAIN_ODBYT_SKUPINA_NOM_DWLEN|-1|#DOMAIN_ODBYT_SKUPINA_NOM_FORMAT||#DOMAIN_ODBYT_SKUPINA_NOM_STRFORMAT||#DOMAIN_ODBYT_SKUPINA_NOM_EDIT|ED|#DOMAIN_ORG_CINNOST_TYPE|varchar(10)|#DOMAIN_ORG_CINNOST_COLTYPE|char(10)|#DOMAIN_ORG_CINNOST_LENGTH|10|#DOMAIN_ORG_CINNOST_DWLEN|-1|#DOMAIN_ORG_CINNOST_FORMAT||#DOMAIN_ORG_CINNOST_STRFORMAT||#DOMAIN_ORG_CINNOST_EDIT|ED|#DOMAIN_ORG_DEALER_TYPE|varchar(10)|#DOMAIN_ORG_DEALER_COLTYPE|char(10)|#DOMAIN_ORG_DEALER_LENGTH|10|#DOMAIN_ORG_DEALER_DWLEN|-1|#DOMAIN_ORG_DEALER_FORMAT||#DOMAIN_ORG_DEALER_STRFORMAT||#DOMAIN_ORG_DEALER_EDIT|ED|#DOMAIN_ORG_EXT_SMLOUVA_TYPE|char(20)|#DOMAIN_ORG_EXT_SMLOUVA_COLTYPE|char(20)|#DOMAIN_ORG_EXT_SMLOUVA_LENGTH|20|#DOMAIN_ORG_EXT_SMLOUVA_DWLEN|-1|#DOMAIN_ORG_EXT_SMLOUVA_FORMAT||#DOMAIN_ORG_EXT_SMLOUVA_STRFORMAT||#DOMAIN_ORG_EXT_SMLOUVA_EDIT|ED|#DOMAIN_ORG_ID_UCTU_TYPE|varchar(6)|#DOMAIN_ORG_ID_UCTU_COLTYPE|char(6)|#DOMAIN_ORG_ID_UCTU_LENGTH|7|#DOMAIN_ORG_ID_UCTU_DWLEN|-1|#DOMAIN_ORG_ID_UCTU_FORMAT|###/###|#DOMAIN_ORG_ID_UCTU_STRFORMAT|@@@/@@@|#DOMAIN_ORG_ID_UCTU_EDIT|EM|#DOMAIN_ORG_NU_MNOZSTVI_TYPE|decimal(10,2)|#DOMAIN_ORG_NU_MNOZSTVI_COLTYPE|decimal(2)|#DOMAIN_ORG_NU_MNOZSTVI_LENGTH|13|#DOMAIN_ORG_NU_MNOZSTVI_DWLEN|-1|#DOMAIN_ORG_NU_MNOZSTVI_FORMAT|##,###,###.00|#DOMAIN_ORG_NU_MNOZSTVI_STRFORMAT|##,###,###.00|#DOMAIN_ORG_NU_MNOZSTVI_EDIT|EM|#DOMAIN_ORG_NU_MNOZSTVI2_TYPE|decimal(18,2)|#DOMAIN_ORG_NU_MNOZSTVI2_COLTYPE|decimal(2)|#DOMAIN_ORG_NU_MNOZSTVI2_LENGTH|22|#DOMAIN_ORG_NU_MNOZSTVI2_DWLEN|-1|#DOMAIN_ORG_NU_MNOZSTVI2_FORMAT|###,###,###,###,###.00|#DOMAIN_ORG_NU_MNOZSTVI2_STRFORMAT|###,###,###,###,###.00|#DOMAIN_ORG_NU_MNOZSTVI2_EDIT|EM|#DOMAIN_ORG_OKRES_TYPE|char(4)|#DOMAIN_ORG_OKRES_COLTYPE|char(4)|#DOMAIN_ORG_OKRES_LENGTH|4|#DOMAIN_ORG_OKRES_DWLEN|-1|#DOMAIN_ORG_OKRES_FORMAT||#DOMAIN_ORG_OKRES_STRFORMAT||#DOMAIN_ORG_OKRES_EDIT|ED|#DOMAIN_ORG_STREDISKO_TYPE|varchar(10)|#DOMAIN_ORG_STREDISKO_COLTYPE|char(10)|#DOMAIN_ORG_STREDISKO_LENGTH|10|#DOMAIN_ORG_STREDISKO_DWLEN|-1|#DOMAIN_ORG_STREDISKO_FORMAT||#DOMAIN_ORG_STREDISKO_STRFORMAT||#DOMAIN_ORG_STREDISKO_EDIT|ED|#DOMAIN_ORG_UCET_TYPE|varchar(6)|#DOMAIN_ORG_UCET_COLTYPE|char(6)|#DOMAIN_ORG_UCET_LENGTH|7|#DOMAIN_ORG_UCET_DWLEN|-1|#DOMAIN_ORG_UCET_FORMAT|###/###|#DOMAIN_ORG_UCET_STRFORMAT|@@@/@@@|#DOMAIN_ORG_UCET_EDIT|EM|#DOMAIN_ORG_UCET2_TYPE|varchar(20)|#DOMAIN_ORG_UCET2_COLTYPE|char(20)|#DOMAIN_ORG_UCET2_LENGTH|20|#DOMAIN_ORG_UCET2_DWLEN|-1|#DOMAIN_ORG_UCET2_FORMAT||#DOMAIN_ORG_UCET2_STRFORMAT||#DOMAIN_ORG_UCET2_EDIT|ED|#DOMAIN_ORG_UCET3_TYPE|varchar(20)|#DOMAIN_ORG_UCET3_COLTYPE|char(20)|#DOMAIN_ORG_UCET3_LENGTH|20|#DOMAIN_ORG_UCET3_DWLEN|-1|#DOMAIN_ORG_UCET3_FORMAT||#DOMAIN_ORG_UCET3_STRFORMAT||#DOMAIN_ORG_UCET3_EDIT|ED|#DOMAIN_ORG_ZAKAZKA_TYPE|varchar(30)|#DOMAIN_ORG_ZAKAZKA_COLTYPE|char(30)|#DOMAIN_ORG_ZAKAZKA_LENGTH|30|#DOMAIN_ORG_ZAKAZKA_DWLEN|-1|#DOMAIN_ORG_ZAKAZKA_FORMAT||#DOMAIN_ORG_ZAKAZKA_STRFORMAT||#DOMAIN_ORG_ZAKAZKA_EDIT|ED|#DOMAIN_PAR_ICO_TYPE|varchar(8)|#DOMAIN_PAR_ICO_COLTYPE|char(8)|#DOMAIN_PAR_ICO_LENGTH|8|#DOMAIN_PAR_ICO_DWLEN|-1|#DOMAIN_PAR_ICO_FORMAT||#DOMAIN_PAR_ICO_STRFORMAT||#DOMAIN_PAR_ICO_EDIT|ED|#DOMAIN_PAR_NAZEV_ZKRAC_TYPE|char(20)|#DOMAIN_PAR_NAZEV_ZKRAC_COLTYPE|char(20)|#DOMAIN_PAR_NAZEV_ZKRAC_LENGTH|20|#DOMAIN_PAR_NAZEV_ZKRAC_DWLEN|-1|#DOMAIN_PAR_NAZEV_ZKRAC_FORMAT||#DOMAIN_PAR_NAZEV_ZKRAC_STRFORMAT||#DOMAIN_PAR_NAZEV_ZKRAC_EDIT|ED|#DOMAIN_PARAM_PARAM_TYPE|varchar(20)|#DOMAIN_PARAM_PARAM_COLTYPE|char(20)|#DOMAIN_PARAM_PARAM_LENGTH|20|#DOMAIN_PARAM_PARAM_DWLEN|-1|#DOMAIN_PARAM_PARAM_FORMAT||#DOMAIN_PARAM_PARAM_STRFORMAT||#DOMAIN_PARAM_PARAM_EDIT|ED|#DOMAIN_PL_PAR_ZNAK_TYPE|varchar(22)|#DOMAIN_PL_PAR_ZNAK_COLTYPE|char(22)|#DOMAIN_PL_PAR_ZNAK_LENGTH|22|#DOMAIN_PL_PAR_ZNAK_DWLEN|-1|#DOMAIN_PL_PAR_ZNAK_FORMAT||#DOMAIN_PL_PAR_ZNAK_STRFORMAT||#DOMAIN_PL_PAR_ZNAK_EDIT|ED|#DOMAIN_UCE_DIM1_TYPE|varchar(20)|#DOMAIN_UCE_DIM1_COLTYPE|char(20)|#DOMAIN_UCE_DIM1_LENGTH|20|#DOMAIN_UCE_DIM1_DWLEN|-1|#DOMAIN_UCE_DIM1_FORMAT||#DOMAIN_UCE_DIM1_STRFORMAT||#DOMAIN_UCE_DIM1_EDIT|ED|#DOMAIN_UCE_DIM10_TYPE|varchar(20)|#DOMAIN_UCE_DIM10_COLTYPE|char(20)|#DOMAIN_UCE_DIM10_LENGTH|20|#DOMAIN_UCE_DIM10_DWLEN|-1|#DOMAIN_UCE_DIM10_FORMAT||#DOMAIN_UCE_DIM10_STRFORMAT||#DOMAIN_UCE_DIM10_EDIT|ED|#DOMAIN_UCE_DIM2_TYPE|varchar(20)|#DOMAIN_UCE_DIM2_COLTYPE|char(20)|#DOMAIN_UCE_DIM2_LENGTH|20|#DOMAIN_UCE_DIM2_DWLEN|-1|#DOMAIN_UCE_DIM2_FORMAT||#DOMAIN_UCE_DIM2_STRFORMAT||#DOMAIN_UCE_DIM2_EDIT|ED|#DOMAIN_UCE_DIM3_TYPE|varchar(20)|#DOMAIN_UCE_DIM3_COLTYPE|char(20)|#DOMAIN_UCE_DIM3_LENGTH|20|#DOMAIN_UCE_DIM3_DWLEN|-1|#DOMAIN_UCE_DIM3_FORMAT||#DOMAIN_UCE_DIM3_STRFORMAT||#DOMAIN_UCE_DIM3_EDIT|ED|#DOMAIN_UCE_DIM4_TYPE|varchar(20)|#DOMAIN_UCE_DIM4_COLTYPE|char(20)|#DOMAIN_UCE_DIM4_LENGTH|20|#DOMAIN_UCE_DIM4_DWLEN|-1|#DOMAIN_UCE_DIM4_FORMAT||#DOMAIN_UCE_DIM4_STRFORMAT||#DOMAIN_UCE_DIM4_EDIT|ED|#DOMAIN_UCE_DIM5_TYPE|varchar(20)|#DOMAIN_UCE_DIM5_COLTYPE|char(20)|#DOMAIN_UCE_DIM5_LENGTH|20|#DOMAIN_UCE_DIM5_DWLEN|-1|#DOMAIN_UCE_DIM5_FORMAT||#DOMAIN_UCE_DIM5_STRFORMAT||#DOMAIN_UCE_DIM5_EDIT|ED|#DOMAIN_UCE_DIM6_TYPE|varchar(20)|#DOMAIN_UCE_DIM6_COLTYPE|char(20)|#DOMAIN_UCE_DIM6_LENGTH|20|#DOMAIN_UCE_DIM6_DWLEN|-1|#DOMAIN_UCE_DIM6_FORMAT||#DOMAIN_UCE_DIM6_STRFORMAT||#DOMAIN_UCE_DIM6_EDIT|ED|#DOMAIN_UCE_DIM7_TYPE|varchar(20)|#DOMAIN_UCE_DIM7_COLTYPE|char(20)|#DOMAIN_UCE_DIM7_LENGTH|20|#DOMAIN_UCE_DIM7_DWLEN|-1|#DOMAIN_UCE_DIM7_FORMAT||#DOMAIN_UCE_DIM7_STRFORMAT||#DOMAIN_UCE_DIM7_EDIT|ED|#DOMAIN_UCE_DIM8_TYPE|varchar(20)|#DOMAIN_UCE_DIM8_COLTYPE|char(20)|#DOMAIN_UCE_DIM8_LENGTH|20|#DOMAIN_UCE_DIM8_DWLEN|-1|#DOMAIN_UCE_DIM8_FORMAT||#DOMAIN_UCE_DIM8_STRFORMAT||#DOMAIN_UCE_DIM8_EDIT|ED|#DOMAIN_UCE_DIM9_TYPE|varchar(20)|#DOMAIN_UCE_DIM9_COLTYPE|char(20)|#DOMAIN_UCE_DIM9_LENGTH|20|#DOMAIN_UCE_DIM9_DWLEN|-1|#DOMAIN_UCE_DIM9_FORMAT||#DOMAIN_UCE_DIM9_STRFORMAT||#DOMAIN_UCE_DIM9_EDIT|ED|#DOMAIN_V_POSTUP_TYPE|char(20)|#DOMAIN_V_POSTUP_COLTYPE|char(20)|#DOMAIN_V_POSTUP_LENGTH|20|#DOMAIN_V_POSTUP_DWLEN|-1|#DOMAIN_V_POSTUP_FORMAT||#DOMAIN_V_POSTUP_STRFORMAT||#DOMAIN_V_POSTUP_EDIT|ED|#DOMAIN_ZDR_PLAN_PARAM_TYPE|varchar(255)|#DOMAIN_ZDR_PLAN_PARAM_COLTYPE|char(255)|#DOMAIN_ZDR_PLAN_PARAM_LENGTH|255|#DOMAIN_ZDR_PLAN_PARAM_DWLEN|-1|#DOMAIN_ZDR_PLAN_PARAM_FORMAT||#DOMAIN_ZDR_PLAN_PARAM_STRFORMAT||#DOMAIN_ZDR_PLAN_PARAM_EDIT|PO|#LANG|CZ|#AKT_OBD_MAJ|2024-01-31|#AKT_OBD_MAJ_2|2024-01-31|#AKT_OBD_MAJ_3|1901-01-01|#AKT_OBD_MAJ_4|1901-01-01|#AKT_OBD_MAJ_5|1901-01-01|#AKT_OBD_MAJ_6|1901-01-01|#AKT_MES_MAJ|202401|#AKT_MES_MAJ_2|202401|#AKT_MES_MAJ_3|      |#AKT_MES_MAJ_4|      |#AKT_MES_MAJ_5|      |#AKT_MES_MAJ_6|      |#SES_MES_MAJ|202401|#SKUPINY||#MES_SYSTEM|3|#MIN_ROK_SYSTEM|2023|#MZDY_ROK_START|2023|#MZDY_MESIC_START|1|#ZACATEK_SYSTEM|01.03.2024|#KONEC_SYSTEM|31.03.2024|#WHERE_FILTER|1=1|#WINDOWID|3900879|#GROUPS||\\OBD_ADMIN|202401|\\OBD_AGENT|202401|\\OBD_ASNET|202401|\\OBD_ATTCH|202401|\\OBD_BANKA|202401|\\OBD_DOCS|202401|\\OBD_DPHCZ|202401|\\OBD_DPHEV|202401|\\OBD_EETCZ|202401|\\OBD_EXIMP|202401|\\OBD_FAKP|202401|\\OBD_FSAL|202401|\\OBD_FV|202401|\\OBD_GANTT|202401|\\OBD_GDPR|202401|\\OBD_INVEN|202401|\\OBD_KARAT|202401|\\OBD_KAZAS|202401|\\OBD_MAJ|202401|\\OBD_MAN|202401|\\OBD_MZDY|202401|\\OBD_ODBYT|202401|\\OBD_ORG|202401|\\OBD_ORGS|202401|\\OBD_O_CEN|202401|\\OBD_O_OBJ|202401|\\OBD_O_SKL|202401|\\OBD_PARAM|202401|\\OBD_PERS|202403|\\OBD_POKL|202401|\\OBD_PUIN|202401|\\OBD_SEKR|202401|\\OBD_TERM|202401|\\OBD_TMPRS|202401|\\OBD_UCE|202401|\\OBD_UCEOO|202401|\\OBD_UCEPS|202400|\\OBD_UCEVN|202401|\\OBD_UK|202401|\\OBD_VYKAZ|202401|\\OBD_V_TER|202401|\\OBD_V_TPV|202401|\\OBD_V_ZAK|202401|\\OBD_V_ZMT|202401|\\OBD_ZDRKO|202401|\\OBD_ZDROJ|202401|\\ODDELOVAC||\\FR_ADMIN|24|\\FR_AGENT|24|\\FR_ASNET|24|\\FR_ATTCH|24|\\FR_ZAH_ADMIN|01.01.2024|\\FR_ZAH_AGENT|01.01.2024|\\FR_ZAH_ASNET|01.01.2024|\\FR_ZAH_ATTCH|01.01.2024|\\FR_ZAH_BANKA|01.01.2024|\\FR_ZAH_DOCS|01.01.2024|\\FR_ZAH_DPHCZ|01.01.2024|\\FR_ZAH_DPHEV|01.01.2024|\\FR_ZAH_EETCZ|01.01.2024|\\FR_ZAH_EXIMP|01.01.2024|\\FR_ZAH_FAKP|01.01.2024|\\FR_ZAH_FSAL|01.01.2024|\\FR_ZAH_FV|01.01.2024|\\FR_ZAH_GANTT|01.01.2024|\\FR_ZAH_GDPR|01.01.2024|\\FR_ZAH_INVEN|01.01.2024|\\FR_ZAH_KARAT|01.01.2024|\\FR_ZAH_KAZAS|01.01.2024|\\FR_ZAH_MAJ|01.01.2024|\\FR_ZAH_MAN|01.01.2024|\\FR_ZAH_MZDY|01.01.2024|\\FR_ZAH_ODBYT|01.01.2024|\\FR_ZAH_ORG|01.01.2024|\\FR_ZAH_ORGS|01.01.2024|\\FR_ZAH_O_CEN|01.01.2024|\\FR_ZAH_O_OBJ|01.01.2024|\\FR_ZAH_O_SKL|01.01.2024|\\FR_ZAH_PARAM|01.01.2024|\\FR_ZAH_PERS|01.01.2024|\\FR_ZAH_POKL|01.01.2024|\\FR_ZAH_PUIN|01.01.2024|\\FR_ZAH_SEKR|01.01.2024|\\FR_ZAH_TERM|01.01.2024|\\FR_ZAH_TMPRS|01.01.2024|\\FR_ZAH_UCE|01.01.2024|\\FR_ZAH_UCEOO|01.01.2024|\\FR_ZAH_UCEPS|01.01.2024|\\FR_ZAH_UCEVN|01.01.2024|\\FR_ZAH_UK|01.01.2024|\\FR_ZAH_VYKAZ|01.01.2024|\\FR_ZAH_V_TER|01.01.2024|\\FR_ZAH_V_TPV|01.01.2024|\\FR_ZAH_V_ZAK|01.01.2024|\\FR_ZAH_V_ZMT|01.01.2024|\\FR_ZAH_ZDRKO|01.01.2024|\\FR_ZAH_ZDROJ|01.01.2024|\\FR_ZDRKO|24|\\FR_ZDROJ|24|\\FR_UK|24|\\FR_UKO_ADMIN|31.12.2024|\\FR_UKO_AGENT|31.12.2024|\\FR_UKO_ASNET|31.12.2024|\\FR_UKO_ATTCH|31.12.2024|\\FR_UKO_BANKA|31.12.2024|\\FR_UKO_DOCS|31.12.2024|\\FR_UKO_DPHCZ|31.12.2024|\\FR_UKO_DPHEV|31.12.2024|\\FR_UKO_EETCZ|31.12.2024|\\FR_UKO_EXIMP|31.12.2024|\\FR_UKO_FAKP|31.12.2024|\\FR_UKO_FSAL|31.12.2024|\\FR_UKO_FV|31.12.2024|\\FR_UKO_GANTT|31.12.2024|\\FR_UKO_GDPR|31.12.2024|\\FR_UKO_INVEN|31.12.2024|\\FR_UKO_KARAT|31.12.2024|\\FR_UKO_KAZAS|31.12.2024|\\FR_UKO_MAJ|31.12.2024|\\FR_UKO_MAN|31.12.2024|\\FR_UKO_MZDY|31.12.2024|\\FR_UKO_ODBYT|31.12.2024|\\FR_UKO_ORG|31.12.2024|\\FR_UKO_ORGS|31.12.2024|\\FR_UKO_O_CEN|31.12.2024|\\FR_UKO_O_OBJ|31.12.2024|\\FR_UKO_O_SKL|31.12.2024|\\FR_UKO_PARAM|31.12.2024|\\FR_UKO_PERS|31.12.2024|\\FR_UKO_POKL|31.12.2024|\\FR_UKO_PUIN|31.12.2024|\\FR_UKO_SEKR|31.12.2024|\\FR_UKO_TERM|31.12.2024|\\FR_UKO_TMPRS|31.12.2024|\\FR_UKO_UCE|31.12.2024|\\FR_UKO_UCEOO|31.12.2024|\\FR_UKO_UCEPS|31.12.2024|\\FR_UKO_UCEVN|31.12.2024|\\FR_UKO_UK|31.12.2024|\\FR_UKO_VYKAZ|31.12.2024|\\FR_UKO_V_TER|31.12.2024|\\FR_UKO_V_TPV|31.12.2024|\\FR_UKO_V_ZAK|31.12.2024|\\FR_UKO_V_ZMT|31.12.2024|\\FR_UKO_ZDRKO|31.12.2024|\\FR_UKO_ZDROJ|31.12.2024|\\FR_UCE|24|\\FR_UCEOO|24|\\FR_UCEPS|24|\\FR_UCEVN|24|\\FR_BANKA|24|\\FR_DOCS|24|\\FR_DPHCZ|24|\\FR_DPHEV|24|\\FR_EETCZ|24|\\FR_EXIMP|24|\\FR_FAKP|24|\\FR_FSAL|24|\\FR_FV|24|\\FR_GANTT|24|\\FR_GDPR|24|\\FR_INVEN|24|\\FR_KARAT|24|\\FR_KAZAS|24|\\FR_MAJ|24|\\FR_MAN|24|\\FR_MZDY|24|\\FR_ODBYT|24|\\FR_ORG|24|\\FR_ORGS|24|\\FR_O_CEN|24|\\FR_O_OBJ|24|\\FR_O_SKL|24|\\FR_PARAM|24|\\FR_PERS|24|\\FR_POKL|24|\\FR_PUIN|24|\\FR_SEKR|24|\\FR_TERM|24|\\FR_TMPRS|24|\\FR_VYKAZ|24|\\FR_V_TER|24|\\FR_V_TPV|24|\\FR_V_ZAK|24|\\FR_V_ZMT|24|\\FRZAH_ADMIN|2024-01-01|\\FRZAH_AGENT|2024-01-01|\\FRZAH_ASNET|2024-01-01|\\FRZAH_ATTCH|2024-01-01|\\FRZAH_BANKA|2024-01-01|\\FRZAH_DOCS|2024-01-01|\\FRZAH_DPHCZ|2024-01-01|\\FRZAH_DPHEV|2024-01-01|\\FRZAH_EETCZ|2024-01-01|\\FRZAH_EXIMP|2024-01-01|\\FRZAH_FAKP|2024-01-01|\\FRZAH_FSAL|2024-01-01|\\FRZAH_FV|2024-01-01|\\FRZAH_GANTT|2024-01-01|\\FRZAH_GDPR|2024-01-01|\\FRZAH_INVEN|2024-01-01|\\FRZAH_KARAT|2024-01-01|\\FRZAH_KAZAS|2024-01-01|\\FRZAH_MAJ|2024-01-01|\\FRZAH_MAN|2024-01-01|\\FRZAH_MZDY|2024-01-01|\\FRZAH_ODBYT|2024-01-01|\\FRZAH_ORG|2024-01-01|\\FRZAH_ORGS|2024-01-01|\\FRZAH_O_CEN|2024-01-01|\\FRZAH_O_OBJ|2024-01-01|\\FRZAH_O_SKL|2024-01-01|\\FRZAH_PARAM|2024-01-01|\\FRZAH_PERS|2024-01-01|\\FRZAH_POKL|2024-01-01|\\FRZAH_PUIN|2024-01-01|\\FRZAH_SEKR|2024-01-01|\\FRZAH_TERM|2024-01-01|\\FRZAH_TMPRS|2024-01-01|\\FRZAH_UCE|2024-01-01|\\FRZAH_UCEOO|2024-01-01|\\FRZAH_UCEPS|2024-01-01|\\FRZAH_UCEVN|2024-01-01|\\FRZAH_UK|2024-01-01|\\FRZAH_VYKAZ|2024-01-01|\\FRZAH_V_TER|2024-01-01|\\FRZAH_V_TPV|2024-01-01|\\FRZAH_V_ZAK|2024-01-01|\\FRZAH_V_ZMT|2024-01-01|\\FRZAH_ZDRKO|2024-01-01|\\FRZAH_ZDROJ|2024-01-01|\\FRUKO_ADMIN|2024-12-31|\\FRUKO_AGENT|2024-12-31|\\FRUKO_ASNET|2024-12-31|\\FRUKO_ATTCH|2024-12-31|\\FRUKO_BANKA|2024-12-31|\\FRUKO_DOCS|2024-12-31|\\FRUKO_DPHCZ|2024-12-31|\\FRUKO_DPHEV|2024-12-31|\\FRUKO_EETCZ|2024-12-31|\\FRUKO_EXIMP|2024-12-31|\\FRUKO_FAKP|2024-12-31|\\FRUKO_FSAL|2024-12-31|\\FRUKO_FV|2024-12-31|\\FRUKO_GANTT|2024-12-31|\\FRUKO_GDPR|2024-12-31|\\FRUKO_INVEN|2024-12-31|\\FRUKO_KARAT|2024-12-31|\\FRUKO_KAZAS|2024-12-31|\\FRUKO_MAJ|2024-12-31|\\FRUKO_MAN|2024-12-31|\\FRUKO_MZDY|2024-12-31|\\FRUKO_ODBYT|2024-12-31|\\FRUKO_ORG|2024-12-31|\\FRUKO_ORGS|2024-12-31|\\FRUKO_O_CEN|2024-12-31|\\FRUKO_O_OBJ|2024-12-31|\\FRUKO_O_SKL|2024-12-31|\\FRUKO_PARAM|2024-12-31|\\FRUKO_PERS|2024-12-31|\\FRUKO_POKL|2024-12-31|\\FRUKO_PUIN|2024-12-31|\\FRUKO_SEKR|2024-12-31|\\FRUKO_TERM|2024-12-31|\\FRUKO_TMPRS|2024-12-31|\\FRUKO_UCE|2024-12-31|\\FRUKO_UCEOO|2024-12-31|\\FRUKO_UCEPS|2024-12-31|\\FRUKO_UCEVN|2024-12-31|\\FRUKO_UK|2024-12-31|\\FRUKO_VYKAZ|2024-12-31|\\FRUKO_V_TER|2024-12-31|\\FRUKO_V_TPV|2024-12-31|\\FRUKO_V_ZAK|2024-12-31|\\FRUKO_V_ZMT|2024-12-31|\\FRUKO_ZDRKO|2024-12-31|\\FRUKO_ZDROJ|2024-12-31|\\FSAL_PAR_IDENT_AVIZA|0|\\FSAL_PAR_IDENT_KOMP|0|\\FSAL_PAR_IDENT_UPOM|0|\\FSAL_PAR_IDENT_UZNA|0|\\FSAL_PAR_IDENT_PEN|0|\\FIRMA|Termopan s.r.o.|\\FIRMA_UDAJE1||\\FIRMA_UDAJE10||\\FIRMA_UDAJE2||\\FIRMA_UDAJE3||\\FIRMA_UDAJE4||\\FIRMA_UDAJE5||\\FIRMA_UDAJE6||\\FIRMA_UDAJE7||\\FIRMA_UDAJE8||\\FIRMA_UDAJE9||\\FIRMA_ULICE|Zahradní 843|\\FIRMA_DIC|CZ60707631|\\FIRMA_DODATEK|s.r.o.|\\FIRMA_JMENO||\\FIRMA_PRIJMENI||\\FIRMA_PSC|588 13|\\FIRMA_OBEC|Polná|\\FIRMA_OKRES|3707|\\FIRMA_STAT|CZ|\\FIRMA_ISO_STAT|CZ|\\FIRMA_IDM|CZK|\\FIRMA_V|Polná|\\FIRMA_FU||\\FIRMA_LANG|CZ|\\FIRMA_CINNOST1|Výroba pryžových a plastových výrobků|\\FIRMA_CINNOST2||\\INV_C_MASKA||\\INV_C_P_MASKA||\\ID_KARTY_NESPEC||\\IDI|01|\\IDU|KSWPVKA|\\IDUN|Václav Kadlec|\\IDSKUP||\\IDMM|CZK|\\IDMENUMOD||\\IDF|1|\\ICO|60707631|\\ISNET|1|\\ISHTML|0|\\UCE_UCET2_USE|'00'|\\UCE_DIM_USE|'0000000000'|\\UCE_DIMCIS_USE|'0000000000'|\\UMISTENI_MASKA||\\USRNAME|Václav Kadlec|\\USER_RIGHTS|#UserModifyRep;#UserModifyWin;#UserModifyWin=2;#PRSL=2;|\\KALKUL_VYCHOZI|'HLA'|\\KARTA_MASKA|XXXXXXXXXXXXXXXXXXXX|\\KARTA_TYP|0|\\KARTA_NULY|0|\\KARAT_VERSION|23.002|\\SKLAD_MASKA||\\SKLAD_TYP|0|\\SKLAD_NULY|0|\\SRVRTYPE|MS|\\SRVRVER|1500424902642220221211332019642022100064020348|\\SRVRNAME|192.168.10.247,1433|\\SRVRDB|KARAT_TERMOPAN|\\SERVER_COMP_NAME|S-KSOCLOUD-56|\\PREFIX_N_D|0|\\DEFA_XPLAN|''|\\DEVSTANDARD|0|\\DEVIMPL|1|\\DEVFIRM|1|\\DEVELOPERMODE|60|\\DBAIDU|DBA|\\DOCDIR|c:\\ProgramData\\KARAT Software\\Karat Server\\Vzor\\|\\DOCUMENTSDIR|C:\\Users\\VACLAVK\\Documents\\|\\DATUM|'2024-05-06'|\\DATUM_NA|2024-05-06|\\DATUM_STR|06.05.2024|\\DATUM_WIN|06.05.2024|\\WEBAPP_USR_ID|1|\\WEBAPP_USR_NAME|''|\\WEBAPP_USR_OSO|''|\\WEBAPP_DOMAIN|''|\\WEBAPP_PAGE|''|\\WINDIR|C:\\Windows\\|\\WRAPPER|Win32NT|\\LITE|0|termopan|termopan|\\LICNUM|1|\\LICREG|2022028_1|\\LIC1ID|TERMOPAN|\\LOCKDIR|C:\\ProgramData\\KARAT Software\\Karat Server\\TERMOPAN\\Temp\\ab12ec20-ebc2-44d2-981e-55211d4adf66\\|\\LOCKDIR_CLI|C:\\Users\\VACLAVK\\AppData\\Local\\KARAT Software\\Karat Client\\Temp\\ab12ec20-ebc2-44d2-981e-55211d4adf66\\|\\MYOSCISLO||\\MN|Kč|\\MODULY|ADMIN,AGENT,ATTCH,BANKA,DPHCZ,DPHEV,EETCZ,EXIMP,FAKP,FSAL,FV,GDPR,INVEN,KARAT,KAZAS,MAJ,MAN,MZDY,ODBYT,ORG,ORGS,O_CEN,O_OBJ,O_SKL,PARAM,PERS,POKL,PUIN,SEKR,TERM,TMPRS,UCE,UCEOO,UCEPS,UCEVN,UK,VYKAZ,V_TER,V_TPV,V_ZAK,V_ZMT,ZDRKO,ZDROJ,|\\MAINCONNECTION|CONN00001|\\MAIN_LANG_PRG|CZ|\\MAIN_LANG_PRG2|CZ|\\MAIN_LANG_DB|CZ|\\HKL|HLA|\\HOMEDIR|C:\\ProgramData\\KARAT Software\\Karat Server\\TERMOPAN\\|\\VZORDIR|c:\\ProgramData\\KARAT Software\\Karat Server\\Vzor\\|\\VZOR_STAT|cz|\\VZOR_PART||\\CLIENTDIR|C:\\Users\\VACLAVK\\AppData\\Local\\KARAT Software\\Karat Client\\Client\\23.2.476.0\\|\\CLIENT_COMP_ID|VKA/console/VKA\\VACLAVK|\\CLIENT_COMP_NAME|VKA|\\CLIENT_COMP_SESSION|Console|\\CA_NAME||\\TEMPDIR|C:\\ProgramData\\KARAT Software\\Karat Server\\TERMOPAN\\Temp\\ab12ec20-ebc2-44d2-981e-55211d4adf66\\|\\TERMINAL_VIEW|0|\\ASNET_VERSION|23.2.476.0|\\ANALYTIK|1|'#WHERE_FILTER'|'1=1'|GRP1||#REPMAKER_SUBST_END;;#ALL_ADD_TYPES=; USER_END TISK_TITLE=Štítky TISK_RETRIEVE=TRUE TISK_COMMENT1=100 25x100 DBCREATE_BEGIN BEGIN CREATE TABLE #op_stitky1_579879 (poradi smallint/*BY*/, karta #BY(op_polozky.karta), nazev #BY(nomenklatura.nazev), user_mnozstvi_vyr #BY(op_polozky.user_mnozstvi_vyr), doklad #BY(op_polozky.doklad), zkraceny_nazev #BY(op_zahlavi.zkraceny_nazev), user_zakvy #BY(op_polozky.user_zakvy), user_dat_dodani_zd #BY(op_polozky.user_dat_dodani_zd), user_obj_nakup #BY(op_zahlavi.zkraceny_nazev), user_pol_poz #BY(op_polozky.user_pol_poz), user_vrtani_met #BY(op_polozky.user_vrtani_met), user_polozka_zd #BY(op_polozky.user_polozka_zd), user_typ_profil #BY(op_polozky.user_typ_profil), user_profil_zak #BY(op_polozky.user_profil_zak), user_carkod #BY(op_polozky.user_carkod), user_ean #BY(op_polozky.user_ean), user_delka #BY(op_polozky.user_delka), user_vyska #BY(op_polozky.user_vyska), user_hloubka #BY(op_polozky.user_hloubka), user_kodkz #BY(op_zahlavi.user_kodkz), storno #BY(op_polozky.storno), polozka #BY(op_polozky.polozka), user_skup_n_op #BY(op_polozky.user_skup_n_op), dat_dodani #BY(op_zahlavi.dat_dodani), citac_stitku char(3)/*BY*/, ean16 varchar(25)/*BY*/ primary key(poradi)) END DBCREATE_END DBEXECUTE_BEGIN BEGIN DECLARE @citac smallint/*BY*/ DECLARE @karta #BY(op_polozky.karta), @nazev #BY(nomenklatura.nazev), @user_mnozstvi_vyr #BY(op_polozky.user_mnozstvi_vyr), @doklad #BY(op_polozky.doklad), @zkraceny_nazev #BY(op_zahlavi.zkraceny_nazev), @user_zakvy #BY(op_polozky.user_zakvy), @user_dat_dodani_zd #BY(op_polozky.user_dat_dodani_zd), @user_obj_nakup #BY(op_zahlavi.user_obj_nakup), @user_pol_poz #BY(op_polozky.user_pol_poz), @user_vrtani_met #BY(op_polozky.user_vrtani_met), @user_polozka_zd #BY(op_polozky.user_polozka_zd), @user_typ_profil #BY(op_polozky.user_typ_profil), @user_profil_zak #BY(op_polozky.user_profil_zak), @user_carkod #BY(op_polozky.user_carkod), @user_ean #BY(op_polozky.user_ean), @user_delka #BY(op_polozky.user_delka), @user_vyska #BY(op_polozky.user_vyska), @user_hloubka #BY(op_polozky.user_hloubka), @user_kodkz #BY(op_zahlavi.user_kodkz), @storno #BY(op_polozky.storno), @polozka #BY(op_polozky.polozka), @user_skup_n_op #BY(op_polozky.user_skup_n_op), @dat_dodani #BY(op_zahlavi.dat_dodani), @citac_stitku varchar(3)/*BY*/, @pocet_mezer int /*BY*/, @mezery varchar(16)/*BY*/, @ean16 varchar(25)/*BY*/ --declarace kurzoru po položkách Příjemky DECLARE op_pol CURSOR FOR SELECT P.karta, N.nazev,P.user_mnozstvi_vyr,P.doklad,Z.zkraceny_nazev,isnull(P.user_zakvy,''),(case when P.user_dat_dodani_zd<>convert(datetime/*BY*/, '1901-01-01') then P.user_dat_dodani_zd else Z.dat_dodani end),isnull(Z.user_obj_nakup,''),isnull(P.user_pol_poz,''),isnull(P.user_vrtani_met,''), isnull(P.user_polozka_zd,''),isnull(P.user_typ_profil,''),isnull(P.user_profil_zak,''),isnull(P.user_carkod,''),isnull(P.user_ean,''),P.user_delka,P.user_vyska,(P.user_sirka1+P.user_sirka2+P.user_sirka3+P.user_sirka4+P.user_sirka5),isnull(Z.user_kodkz,''),P.storno,P.polozka,P.user_skup_n_op,Z.dat_dodani FROM dba.op_polozky P with(index(pk_op_polozky)), dba.nomenklatura N with(index(nomenklatura_cislo_nomen)), dba.op_zahlavi Z with(index(pk_op_zahlavi)) WHERE P.doklad = '24OP010100000095' AND N.cislo_nomenklatury = P.karta AND Z.doklad = P.doklad --otevření kurzoru po položkách Příjemky OPEN op_pol WHILE 1 = 1 BEGIN FETCH op_pol INTO @karta, @nazev, @user_mnozstvi_vyr,@doklad, @zkraceny_nazev,@user_zakvy,@user_dat_dodani_zd,@user_obj_nakup,@user_pol_poz,@user_vrtani_met, @user_polozka_zd,@user_typ_profil,@user_profil_zak,@user_carkod,@user_ean,@user_delka,@user_vyska,@user_hloubka,@user_kodkz,@storno,@polozka,@user_skup_n_op,@dat_dodani if @@sqlstatus <> 0 BEGIN\tbreak END SELECT @citac = 1 WHILE @citac <= @user_mnozstvi_vyr BEGIN select @citac_stitku =  right('000'+Convert(varchar/*BY*/, @citac),3) select @pocet_mezer = 16- len(@user_ean) select @mezery = REPLICATE(' ', @pocet_mezer) select @ean16 = CONCAT(@user_ean,@mezery,@citac_stitku,'0',@user_carkod) INSERT INTO #op_stitky1_579879 (poradi, karta, nazev, user_mnozstvi_vyr, doklad, zkraceny_nazev,user_zakvy,user_dat_dodani_zd,user_obj_nakup,user_pol_poz,user_vrtani_met,user_polozka_zd,user_typ_profil,user_profil_zak,user_carkod, user_ean,user_delka,user_vyska,user_hloubka,user_kodkz,storno,polozka,user_skup_n_op,dat_dodani, citac_stitku, ean16) SELECT (SELECT COALESCE(MAX(poradi), 0) + 1 FROM #op_stitky1_579879 WHERE 1=1), @karta, @nazev, @user_mnozstvi_vyr, @doklad, @zkraceny_nazev,@user_zakvy,@user_dat_dodani_zd,@user_obj_nakup,@user_pol_poz,@user_vrtani_met,@user_polozka_zd,@user_typ_profil,@user_profil_zak,@user_carkod, @user_ean,@user_delka,@user_vyska,@user_hloubka,@user_kodkz,@storno,@polozka,@user_skup_n_op,@dat_dodani, @citac_stitku, @ean16 SELECT @citac = @citac + 1 END END CLOSE op_pol END DBEXECUTE_END DBDROP=DROP TABLE #op_stitky1_579879 DBSUBST=#WHERE_FILTER|1=1|#WINDOWID|3900879| w_ift\tconn\tms_19216810247_karat_termopan 73 w_ift\tRefreshObjects\tPARENT_PARENT_LIST PARENT_PARENT_200705141135559525303211 w_ift\tPercentOffDWs\tPARENT_PARENT_LIST\tdba.op_zahlavi\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.5253.5256.5279 PARENT_PARENT_200705141135559525303211\tdba.op_polozky\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.5253.5256.preview.200705141135559525303211.dw w_ifttisk\texecute_subst\t#op_stitky1|#op_stitky1_579879|#op_stitky1_|op_stitky1_579879_|#op_stitky1_579879|#op_stitky1_579879|_#op_stitky1|_op_stitky1_579879| w_ifttisk\tSortByServer w_ifttisk\tSortByGroup w_ifttisk\tSortByUser w_ifttisk\t/Select\tSELECT S.poradi poradi, S.karta karta, S.nazev nazev, S.user_mnozstvi_vyr user_mnozstvi_vyr, S.doklad doklad, S.zkraceny_nazev firma, isnull(S.user_zakvy,'') user_zakvy, S.user_dat_dodani_zd user_dat_dodani_zd, S.user_obj_nakup user_obj_nakup, isnull(S.user_pol_poz,'') user_pol_poz, isnull(S.user_vrtani_met,'') user_vrtani_met, S.user_polozka_zd user_polozka_zd, S.user_typ_profil user_typ_profil, S.user_profil_zak user_profil_zak, S.user_carkod user_carkod, S.user_ean user_ean, S.user_delka user_delka, S.user_vyska user_vyska, S.user_hloubka user_hloubka, S.user_kodkz user_kodkz, S.storno storno, S.polozka polozka, S.user_skup_n_op user_skup_n_op, S.citac_stitku citac_stitku, S.ean16 ean16 FROM #op_stitky1_579879 S WHERE (((S.storno)=0)) AND 1=1  ORDER BY user_skup_n_op,polozka w_ifttisk\tLastRetrieveError w_ifttisk\tRowCount\t34 w_ifttisk\tDwCommTag\t#PRSL=30; ------------------------------- Workspace: Rozpad dílců (V_TPV/202311150958528994779223) Window: Seznam Rozpad dílců (V_TPV disabled visible c__w_iftseznam tab=user_rozpad_dilcu) w_ift\tclassname\tw_iftseznam w_ift\tclasses\t.object.karatbaseobject.karatobject.karatcontrol.karatwindow.c__w_ift.c__w_filter_parent.c__w_iftseznam w_ift\tlink\tkarat://termopan:@0/mnid/v_tpv/202311150958528994779223?menu=0&nss=0 w_ift\tparametr ID_MENU=MNID/V_TPV/202311150958528994779223 TYP=SEZNAM CLASS=w_iftseznam AKCE=user_rozpad_dilcu ID_SAVE=user_rozpad_dilcu SEZ_TABULKA=user_rozpad_dilcu SEZ_SQL=#NOTAB=user_rozpad_dilcu;SELECT *- FROM dba.user_rozpad_dilcu SEZ_CLASS=w_iftseznam SEZ_MODIFY= datawindow.detail.color=\"255 \t if(storno = 1,8421504,if(davka<>'' and exportovano = 0,57343,if(exportovano = 1,32768,1090519039)))\" NOEDIT=IFT USER_BEGIN ;#SETMENUID=A/V_TPV/user_rozpad_dilcu/202311150958528994779223/10/30/0;#--CALENDAR_TO_BOX; #COMBO_ID1=exportovano; #COLUMN1=user_rozpad_dilcu.exportovano; #POLOZKY1=Exportované dílce\\1^Neexportované dílce\\0; #POPISBEZ1=Exportováno; #DEFAULT1='NUM:0'; #CALENDAR_FILTER_BEGIN; #CF_LABEL1=Datum expedice; #CF_COLUMN1=(select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad); #CALENDAR_FILTER_END; #DO_SEZ_SQL; #SEZ_SQL_ADD3000=(select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS dat_expedice /*\\:Sop_zahlavi.dat_expedice:HDatum expedice*/; #SEZ_SQL_ADD3001=(select op_zahlavi.zkraceny_nazev from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS zakaznik /*\\:Sop_zahlavi.zkraceny_nazev:HZákazník*/; #SEZ_SQL_ADD3002=(select op_zahlavi.misto_dp from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS misto_dod /*\\:Sop_zahlavi.misto_dp:HMísto dodání*/; #LEGEND=#DOKL_STORNO:Stornovaná položka:Fstorno = 1; #LEGEND=#O_OBJ_ODS:Vygenerována dávka:Fdavka<>'' and exportovano = 0; #LEGEND=#DOKL_SCHVAL:Exportováno:Fexportovano = 1; #MNUMAKCE=202311150958528994779223;;#SETMENUID_END;; #WORKSPACE_TITLE_BEGIN;Rozpad dílců#WORKSPACE_TITLE_END;; #WORKSPACE_MODULE=V_TPV;; #WORKSPACE_MNID=202311150958528994779223;;#ALL_ADD_TYPES=SEZNAM_user_rozpad_dilcu,; #STANDARDSORT;#HIDEBLANKREC;#ENAB_ADD_IN_VIEW;#ENAB_DELETE_IN_VIEW;#ENAB_FAST_PREV_IN_VIEW;#SEZ_SQL_SLOUPCEADD;#SEZ_SQL_COMPUTEADD; USER_END w_ift\tparametr/0 01ID_MENU=MNID/V_TPV/202311191846439310651865 01BUTTON_TITLE=Exportuj do pily 01TYP=GROUP 01USER_BEGIN ;#SETMENUID=O/V_TPV/0/user_rozpad_dilcu//202311191846439310651865/20/30/0;  #BUTTON_COLOR=rgb(0,255,0); #PERCENT_OFF; #--N--OEDIT_EVAL_LEFT=exportovano = 1 or davka=''; #NOEDIT_EVAL_LEFT=davka=''; #BUTTON_QUESTION1=Opravdu chcete exportovat již exportovanou dávku %davka%?:Wexportovano = 1; #SETWSOURCE; #USERSUB1=#DAVKA=%davka%:NA; #USERSUB2=#GENERUJ_EXPORT=1:NA; #REFRESHROWS;;#SETMENUID_END; 01USER_END 0101ID_MENU=MNID/V_TPV/202311162114515813595763 0101TYP=NOTHING 0101USER_BEGIN ;#TYPP=45;;#SETMENUID=O/V_TPV/0/user_rozpad_dilcu//202311162114515813595763/45/30/0; #DO_PARENT_USERSUB; #GROUP_WHEN=#GENERUJ_EXPORT=1; #PERCENT_OFF; #NOMULTIWARN; #USERSUB1=#EXPORT_FILENAME=select top 1 'c:\\export_pila\\' + user_rozpad_dilcu.davka + '.CSV' from dba.user_rozpad_dilcu where user_rozpad_dilcu.davka ='#DAVKA':NA; #USERSUB2_BEGIN;#EXPORT_TEXT=#DO_LIST_BEGIN;| SELECT 'CSVAZEK1'+';'+'DAVKA2'+';'+'DOKLAD3'+';'+'POLOZKA4'+';'+'QR5'+';'+'PORADI6'+';'+'DILEC7'+';'+'CAST8'+';'+'PCROZP9'+';'+'DELKA10'+';'+'VYSKA11'+';'+'TYP_DESKY12'+';'+'TL_DESKY13'+';'+'POCET_KS_ROZPADU14'+';'+'TISK15'+';'+'ZKRACENY_NAZEV16'+';'+'KODKZ17'+';'+'OBJEDNAVKA18'+';'+'NAZEV_DOPRAVCE19'+';'+'ZPUSOB_DOPRAVY20'+';'+'DAT_EXPEDICE21'+';'+'KARTA22'+';'+'NAZEV_PRODUKTU23'+';'+'MNOZSTVI_VYR24'+';'+'OP_DELKA25'+';'+'OP_VYSKA26'+';'+'OP_HLOUBKA27'+';'+'CLENENI28'+';'+'USER_ZAKVY29'+';'+'USER_POLOZKA_ZD30'+';'+'USER_PRIP31'+';'+'KCOP32'+';'+'USER_POL_POZ33'+';'+'USER_PROFIL_ZAK34'+';'+'USER_TYP_PROFIL35'+';'+'USER_VRTANI_MET36'+';'+'USER_EAN37'+';'+'ADR_DOD38'+char(13)+char(10) union all select  '1'/*CSVAZEK1*/+';'+ convert(varchar,user_rozpad_dilcu.davka)/*DAVKA2*/+';'+ convert(varchar,user_rozpad_dilcu.doklad)/*DOKLAD3*/+';'+ right('000' + convert(varchar,user_rozpad_dilcu.polozka), 3)/*POLOZKA4*/+';'+ convert(varchar,user_rozpad_dilcu.doklad)+(right('000' + convert(varchar,user_rozpad_dilcu.polozka), 3))+convert(varchar,user_rozpad_dilcu.cast)+(right('00' + convert(varchar,user_rozpad_dilcu.dilec), 2))+(right('000' + convert(varchar,user_rozpad_dilcu.poradi), 3))+(right('00' + convert(varchar,user_rozpad_dilcu.por_pol), 2))/*QR5*/+';'+ convert(varchar,user_rozpad_dilcu.poradi)/*PORADI6*/+';'+ convert(varchar,user_rozpad_dilcu.dilec)/*DILEC7*/+';'+ convert(varchar,user_rozpad_dilcu.cast)/*CAST8*/+';'+ convert(varchar,user_rozpad_dilcu.por_pol)/*PCROZP9*/+';'+ convert(varchar,user_rozpad_dilcu.delka)/*DELKA10*/+';'+ convert(varchar,user_rozpad_dilcu.sirka)/*VYSKA11 - změněno z vyska na sirka*/+';'+ convert(varchar,user_rozpad_dilcu.material_typ)/*TYP_DESKY12*/+';'+ convert(varchar,user_rozpad_dilcu.material_tl)/*TL_DESKY13*/+';'+ convert(varchar,user_rozpad_dilcu.mnozstvi)/*POCET_KS_ROZPADU14*/+';'+ '1'/*TISK15*/+';'+ convert(varchar,op_zahlavi.zkraceny_nazev)/*ZKRACENY_NAZEV16*/+';'+ convert(varchar,op_zahlavi.user_kodkz)/*KODKZ17*/+';'+ convert(varchar,op_zahlavi.objednavka)/*OBJEDNAVKA18*/+';'+ convert(varchar,op_zahlavi.zkraceny_nazev_dop)/*NAZEV_DOPRAVCE19*/+';'+ convert(varchar,case when op_zahlavi.zpusob_dopravy = 1 then 'Vlastní' when op_zahlavi.zpusob_dopravy = 2 then 'Cizí' else 'Nezadáno' end)/*ZPUSOB_DOPRAVY20*/+';'+ convert(varchar,op_zahlavi.dat_expedice,104)/*DAT_EXPEDICE21*/+';'+ convert(varchar,op_polozky.karta)/*KARTA22*/+';'+ convert(varchar,op_polozky.nazev)/*NAZEV_PRODUKTU23*/+';'+ convert(varchar,op_polozky.user_mnozstvi_vyr)/*MNOZSTVI_VYR24*/+';'+ convert(varchar,op_polozky.user_delka)/*OP_DELKA25*/+';'+ convert(varchar,op_polozky.user_vyska)/*OP_VYSKA26*/+';'+ convert(varchar,op_polozky.user_hloubka)/*OP_HLOUBKA27*/+';'+ convert(varchar,op_polozky.user_sirka1)+'/'+convert(varchar,op_polozky.user_sirka2)+'/'+convert(varchar,op_polozky.user_sirka3)+'/'+convert(varchar,op_polozky.user_sirka4)+'/'+convert(varchar,op_polozky.user_sirka5)/*CLENENI28*/+';'+ convert(varchar,op_polozky.user_zakvy)/*USER_ZAKVY29*/+';'+ convert(varchar,op_polozky.user_polozka_zd)/*USER_POLOZKA_ZD30*/+';'+ convert(varchar,op_polozky.user_prip)/*USER_PRIP31*/+';'+ right(convert(varchar,user_rozpad_dilcu.doklad),3)/*KCOP32*/+';'+ convert(varchar,op_polozky.user_pol_poz)/*USER_POL_POZ33*/+';'+ convert(varchar,op_polozky.user_profil_zak)/*USER_PROFIL_ZAK34*/+';'+ convert(varchar,op_polozky.user_typ_profil)/*USER_TYP_PROFIL35*/+';'+ convert(varchar,op_polozky.user_vrtani_met)/*USER_VRTANI_MET36*/+';'+ dba.user_o_obj_gen_ean16_1_fce (user_rozpad_dilcu.doklad,user_rozpad_dilcu.polozka,user_rozpad_dilcu.poradi)/*USER_EAN37*/+';'+ convert(varchar,op_zahlavi.misto_dp)/*ADR_DOD38*/+char(13)+char(10) from  dba.user_rozpad_dilcu user_rozpad_dilcu with(index(user_rozpad_dilcu_davka)), dba.op_polozky op_polozky with(index(pk_op_polozky)), dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)), dba.nomenklatura nomenklatura with(index(nomenklatura_cislo_nomen)) where user_rozpad_dilcu.davka = '#DAVKA' and user_rozpad_dilcu.doklad=op_polozky.doklad and user_rozpad_dilcu.polozka=op_polozky.polozka and op_polozky.doklad=op_zahlavi.doklad and nomenklatura.cislo_nomenklatury=user_rozpad_dilcu.material and user_rozpad_dilcu.exportovat = 1 #DO_LIST_END;:NA#USERSUB2_END; #FILEWRITE_AFTER1=#EXPORT_FILENAME; #FILEWRITE_BODY1_BEGIN;#EXPORT_TEXT#FILEWRITE_BODY1_END; #GROUP_WAIT; ;#SETMENUID_END; 0101USER_END 0102ID_MENU=MNID/V_TPV/202311191856023193910946 0102TYP=SQLCOMMAND 0102USER_BEGIN ;#TYPP=45;;#SETMENUID=O/V_TPV/0/user_rozpad_dilcu//202311191856023193910946/45/30/0;    #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.user_rozpad_dilcu set exportovano = 1, autor_exp=user, dat_exp=getdate() from dba.user_rozpad_dilcu urd with(index(pk_user_rozpad_dilcu)) where urd.davka=%davka% #SQLCOMMAND1_END; #SQLCOMMAND2_BEGIN; update dba.user_davky set autor_exp=user, dat_exp=getdate() from dba.user_davky user_davky with(index(pk_user_davky)) where user_davky.davka=%davka% #SQLCOMMAND2_END;;#SETMENUID_END; 0102USER_END 0103ID_MENU=MNID/V_TPV/202311192036412925514925 0103TYP=ATTADD 0103USER_BEGIN ;#TYPP=45;;#SETMENUID=O/V_TPV/0/user_rozpad_dilcu//202311192036412925514925/45/30/0; #DO_PARENT_USERSUB; #GROUP_WHEN=#GENERUJ_EXPORT=1; #FILE_FROM_CLIENT; #USERSUB1=#EXPORT_FILENAME=select top 1 'c:\\export_pila\\' + user_rozpad_dilcu.davka + '.CSV' from dba.user_rozpad_dilcu where user_rozpad_dilcu.davka ='#DAVKA':NA; #ATT_TABULKA=user_davky; #ATT_PK=#DAVKA; #ATT_CLASS=EXPORT_FILE; #ATT_TAB=user_davky; #ATT_POZN=EXPORTOVANO; #FILE=#EXPORT_FILENAME; ;#SETMENUID_END; 0103USER_END 02ID_MENU=MNID/V_TPV/202311192042136607116962 02BUTTON_TITLE=Dávka 02TYP=SEZNAM 02SEZ_TABULKA=user_davky 02SEZ_TITLE=Dávka: {davka} 02SEZ_VAZBA=TRUE 02SEZ_VAZBA_COLUMN1=davka 02USER=;#SETMENUID=O/V_TPV/0///202311192042136607116962/20/30/0;;#SETMENUID_END; 03ID_MENU=MNID/V_TPV/202311281516584940055182 03BUTTON_TITLE=Generuj dávku pro export 03TYP=MULTIDETAIL 03USER_BEGIN ;#BUTTON_WRITE_RIGHT=user_rozpad_dilcu;;#SETMENUID=O/V_TPV/0///202311281516584940055182/20/30/0;    #NOMULTIWARN; #NOEDIT_EVAL_LEFT=davka<>''; #EDIT_COL_NOTAB; #EDIT_COL_ALL_MODIFIED; #EDIT_GROUP1=Dávka pro export; #EDIT_COL1=user_rozpad_dilcu.davka; #EDIT_COL_DEFAULT1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL_DEFAULT_MULTI1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL1_EMPTY; #EDIT_COL1_SQL1_BEGIN; update dba.user_rozpad_dilcu set davka = #VAL, autor = user, ts = getdate() from dba.user_rozpad_dilcu user_rozpad_dilcu with(index(pk_user_rozpad_dilcu)) where user_rozpad_dilcu.doklad = %doklad% and user_rozpad_dilcu.polozka=%polozka% and user_rozpad_dilcu.cast=%cast% and user_rozpad_dilcu.dilec=%dilec% #EDIT_COL1_SQL1_END; #REFRESHROWSAFTER; ;#SETMENUID_END; 03USER_END 04ID_MENU=MNID/V_TPV/202312201241247088534145 04BUTTON_TITLE=Generuj dávku pro export pro celou OBJ 04TYP=MULTIDETAIL 04USER_BEGIN ;#BUTTON_WRITE_RIGHT=user_rozpad_dilcu;;#SETMENUID=O/V_TPV/0///202312201241247088534145/20/30/0;    #NOMULTIWARN; #NOEDIT_EVAL_LEFT=davka<>''; #EDIT_COL_NOTAB; #EDIT_COL_ALL_MODIFIED; #EDIT_GROUP1=Dávka pro export; #EDIT_COL1=user_rozpad_dilcu.davka; #EDIT_COL_DEFAULT1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL_DEFAULT_MULTI1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL1_EMPTY; #EDIT_COL1_SQL1_BEGIN; update dba.user_rozpad_dilcu set davka = #VAL, autor = user, ts = getdate() from dba.user_rozpad_dilcu user_rozpad_dilcu with(index(pk_user_rozpad_dilcu)) where user_rozpad_dilcu.doklad = %doklad% #EDIT_COL1_SQL1_END; #REFRESHROWSAFTER; ;#SETMENUID_END; 04USER_END 05ID_MENU=MNID/V_TPV/202401011237088621624371 05BUTTON_TITLE=Generuj dávku pro export za položku OBJ 05TYP=MULTIDETAIL 05USER_BEGIN ;#BUTTON_WRITE_RIGHT=user_rozpad_dilcu;;#SETMENUID=O/V_TPV/0///202401011237088621624371/20/30/0;    #NOMULTIWARN; #NOEDIT_EVAL_LEFT=davka<>''; #EDIT_COL_NOTAB; #EDIT_COL_ALL_MODIFIED; #EDIT_GROUP1=Dávka pro export; #EDIT_COL1=user_rozpad_dilcu.davka; #EDIT_COL_DEFAULT1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL_DEFAULT_MULTI1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL1_EMPTY; #EDIT_COL1_SQL1_BEGIN; update dba.user_rozpad_dilcu set davka = #VAL, autor = user, ts = getdate() from dba.user_rozpad_dilcu user_rozpad_dilcu with(index(pk_user_rozpad_dilcu)) where user_rozpad_dilcu.doklad = %doklad% and user_rozpad_dilcu.polozka=%polozka% #EDIT_COL1_SQL1_END; #REFRESHROWSAFTER; ;#SETMENUID_END; 05USER_END 06ID_MENU=MNID/V_TPV/202401101317041814512620 06BUTTON_TITLE=Položka objednávky 06TYP=SEZNAM 06SEZ_TABULKA=op_polozky 06SEZ_TITLE=Položka objednávky: {doklad}{polozka} 06SEZ_VAZBA=TRUE 06SEZ_VAZBA_COLUMN1=doklad 06SEZ_VAZBA_COLUMN2=polozka 06USER=;#SETMENUID=O/V_TPV/0///202401101317041814512620/20/30/0;;#SETMENUID_END; w_ift\tconn\tms_19216810247_karat_termopan 73 w_ift\tf11\tStandard AllDevices w_ift\tRefreshObjects\tLIST FAST w_ift\tPercentOffDWs\tLIST\tdba.user_rozpad_dilcu\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.6304.6307.6330 FAST\tdba.user_rozpad_dilcu\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.6304.6307.preview.fast.dw_fast_preview w_ift\tpreview1\tRychlý náhled ---Id: FAST ---UserParam: #TYPE=Fast;#ID=FAST;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=1;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1; ---Directives: #TYPE=Fast;#ID=FAST;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=1;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1;#PREVIEW_FAST;#FAST_PREV_TAB=user_rozpad_dilcu;#FAST_PREV_DW=;#ENAB_FAST_PREV_IN_VIEW=;#FAST_PREVIEW_SUBS=; w_ift\tCurrentPreviewUserParam\t#USR_PREVIEW;#PREVIEW_GRID_ROWS=1;#PREVIEW_GRID_COLS=1;#PREVIEW_VIEW_TAB=0;#PREVIEW_CAN_ADD=0;#GENERATED_PREVIEW; #USR_PREVIEW1_BEGIN;#TYPE=Fast;#ID=FAST;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=1;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1;#USR_PREVIEW1_END; w_iftseznam\tsez_tabulka\tuser_rozpad_dilcu w_iftseznam\tlink\tkarat://termopan:@0/mnid/v_tpv/202311150958528994779223?where=%28%20user%5frozpad%5fdilcu%2edoklad%20%3d%20%2724op010100000302%27%20and%20user%5frozpad%5fdilcu%2epolozka%20%3d%203%20and%20user%5frozpad%5fdilcu%2eporadi%20%3d%201%20and%20user%5frozpad%5fdilcu%2ecast%20%3d%201%20and%20user%5frozpad%5fdilcu%2edilec%20%3d%201%20and%20user%5frozpad%5fdilcu%2epor%5fpol%20%3d%201%20%29&menu=0 w_iftseznam\tsez_sql\t#NOTAB=user_rozpad_dilcu;SELECT *- FROM dba.user_rozpad_dilcu w_iftseznam\tdetail.color\t255 w_iftseznam\tdwselect\tSELECT TOP 100001  user_rozpad_dilcu.doklad,user_rozpad_dilcu.polozka,user_rozpad_dilcu.poradi,user_rozpad_dilcu.delka,user_rozpad_dilcu.vyska,user_rozpad_dilcu.sirka,user_rozpad_dilcu.cast,user_rozpad_dilcu.dilec,user_rozpad_dilcu.mnozstvi,user_rozpad_dilcu.material,user_rozpad_dilcu.exportovano,user_rozpad_dilcu.davka,user_rozpad_dilcu.por_pol,user_rozpad_dilcu.nomenklatura,user_rozpad_dilcu.material_typ,user_rozpad_dilcu.material_tl,user_rozpad_dilcu.spotreba_mat,user_rozpad_dilcu.cena_mat,user_rozpad_dilcu.storno,user_rozpad_dilcu.produkt,user_rozpad_dilcu.exportovat,user_rozpad_dilcu.autor,user_rozpad_dilcu.ts,isnull(user_rozpad_dilcu.xattach,0) xattach ,(select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) dat_expedice  ,(select op_zahlavi.zkraceny_nazev from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) zakaznik  ,(select op_zahlavi.misto_dp from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) misto_dod  FROM dba.user_rozpad_dilcu user_rozpad_dilcu with(index(pk_user_rozpad_dilcu)) WHERE 1=1  AND ( ((1=1) AND ((select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad)>=convert(datetime,'2024-01-01') and (select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad)<convert(datetime,'2025-01-01'))) AND (user_rozpad_dilcu.doklad + '') <> '' /* blankrec */) AND (((user_rozpad_dilcu.exportovano=0 /* exportovano - neexportované dílce */ )) /* combo1 */ )    ORDER BY user_rozpad_dilcu.doklad,user_rozpad_dilcu.polozka,user_rozpad_dilcu.poradi,user_rozpad_dilcu.cast,user_rozpad_dilcu.dilec,user_rozpad_dilcu.por_pol OPTION(fast 100000) /* seznam user_rozpad_dilcu A/V_TPV/user_rozpad_dilcu/202311150958528994779223/10/30/0 */ w_iftseznam\tdwcolumns\tdoklad,polozka,poradi,delka,vyska,sirka,cast,dilec,mnozstvi,material,exportovano,davka,por_pol,nomenklatura,material_typ,material_tl,spotreba_mat,cena_mat,storno,produkt,exportovat,autor,ts,xattach,dat_expedice,zakaznik,misto_dod,xremind w_iftseznam\tdwcolumns_visible\tdat_expedice,zakaznik,misto_dod,davka,xattach_bmp,xremind_bmp,doklad,polozka,cast,dilec,poradi,por_pol,delka,vyska,sirka,mnozstvi,material,exportovano,nomenklatura,autor,ts,material_typ,material_tl,spotreba_mat,cena_mat,storno,produkt,exportovat 0\tdat_expedice\t96 1\tzakaznik\t99 2\tmisto_dod\t213 3\tdavka\t158 4\txattach_bmp\t18 5\txremind_bmp\t18 6\tdoklad\t127 7\tpolozka\t79 8\tcast\t64 9\tdilec\t66 10\tporadi\t234 11\tpor_pol\t200 12\tdelka\t40 13\tvyska\t40 14\tsirka\t40 15\tmnozstvi\t58 16\tmaterial\t158 17\texportovano\t77 18\tnomenklatura\t158 19\tautor\t57 20\tts\t146 21\tmaterial_typ\t158 22\tmaterial_tl\t103 23\tspotreba_mat\t111 24\tcena_mat\t127 25\tstorno\t45 26\tprodukt\t80 27\texportovat\t95 w_iftseznam\tdwcolumns_invisible\tporadi_sum,delka_sum,vyska_sum,sirka_sum,mnozstvi_sum,por_pol_sum,material_tl_sum,spotreba_mat_sum,cena_mat_sum,xattach,xremind w_iftseznam\tid_save\tv_tpv/user_rozpad_dilcu w_iftseznam\tfirstuser\t;#SETMENUID=A/V_TPV/user_rozpad_dilcu/202311150958528994779223/10/30/0;#--CALENDAR_TO_BOX; #COMBO_ID1=exportovano; #COLUMN1=user_rozpad_dilcu.exportovano; #POLOZKY1=Exportované dílce\\1^Neexportované dílce\\0; #POPISBEZ1=Exportováno; #DEFAULT1='NUM:0'; #CALENDAR_FILTER_BEGIN; #CF_LABEL1=Datum expedice; #CF_COLUMN1=(select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad); #CALENDAR_FILTER_END; #DO_SEZ_SQL; #SEZ_SQL_ADD3000=(select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS dat_expedice /*\\:Sop_zahlavi.dat_expedice:HDatum expedice*/; #SEZ_SQL_ADD3001=(select op_zahlavi.zkraceny_nazev from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS zakaznik /*\\:Sop_zahlavi.zkraceny_nazev:HZákazník*/; #SEZ_SQL_ADD3002=(select op_zahlavi.misto_dp from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS misto_dod /*\\:Sop_zahlavi.misto_dp:HMísto dodání*/; #LEGEND=#DOKL_STORNO:Stornovaná položka:Fstorno = 1; #LEGEND=#O_OBJ_ODS:Vygenerována dávka:Fdavka<>'' and exportovano = 0; #LEGEND=#DOKL_SCHVAL:Exportováno:Fexportovano = 1; #MNUMAKCE=202311150958528994779223;;#SETMENUID_END;; #WORKSPACE_TITLE_BEGIN;Rozpad dílců#WORKSPACE_TITLE_END;; #WORKSPACE_MODULE=V_TPV;; #WORKSPACE_MNID=202311150958528994779223;;#ALL_ADD_TYPES=SEZNAM_user_rozpad_dilcu,; #STANDARDSORT;#HIDEBLANKREC;#ENAB_ADD_IN_VIEW;#ENAB_DELETE_IN_VIEW;#ENAB_FAST_PREV_IN_VIEW;#SEZ_SQL_SLOUPCEADD;#SEZ_SQL_COMPUTEADD; w_iftseznam\tmaxrows\t0 w_iftseznam\tstorage\t698 w_iftseznam\tsorting w_iftseznam\tadd_sorting\tdoklad A,polozka A,poradi A,cast A,dilec A,por_pol A, ------------------------------- Window: DetailEditace Rozpad dílců (V_TPV disabled visible c__w_iftdetail tab=user_rozpad_dilcu) w_ift\tclassname\tw_iftdetail w_ift\tclasses\t.object.karatbaseobject.karatobject.karatcontrol.karatwindow.c__w_ift.c__w_iftdetail w_ift\tparametr ID_MENU=MNID/V_TPV/202311150958528994779223 TYP=DETAIL CLASS=w_iftdetail AKCE=user_rozpad_dilcu ID_SAVE=user_rozpad_dilcu W_SOURCE=object(c__w_iftseznam AppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.6304.6307) DET_CLASS=w_iftdetail DET_TABULKA=user_rozpad_dilcu DET_DW=d_gd_user_rozpad_dilcu USER_BEGIN ;#SETMENUID=A/V_TPV/user_rozpad_dilcu/202311150958528994779223/10/30/0;#--CALENDAR_TO_BOX; #COMBO_ID1=exportovano; #COLUMN1=user_rozpad_dilcu.exportovano; #POLOZKY1=Exportované dílce\\1^Neexportované dílce\\0; #POPISBEZ1=Exportováno; #DEFAULT1='NUM:0'; #CALENDAR_FILTER_BEGIN; #CF_LABEL1=Datum expedice; #CF_COLUMN1=(select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad); #CALENDAR_FILTER_END; #DO_SEZ_SQL; #SEZ_SQL_ADD3000=(select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS dat_expedice /*\\:Sop_zahlavi.dat_expedice:HDatum expedice*/; #SEZ_SQL_ADD3001=(select op_zahlavi.zkraceny_nazev from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS zakaznik /*\\:Sop_zahlavi.zkraceny_nazev:HZákazník*/; #SEZ_SQL_ADD3002=(select op_zahlavi.misto_dp from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS misto_dod /*\\:Sop_zahlavi.misto_dp:HMísto dodání*/; #LEGEND=#DOKL_STORNO:Stornovaná položka:Fstorno = 1; #LEGEND=#O_OBJ_ODS:Vygenerována dávka:Fdavka<>'' and exportovano = 0; #LEGEND=#DOKL_SCHVAL:Exportováno:Fexportovano = 1; #MNUMAKCE=202311150958528994779223;;#SETMENUID_END;; #WORKSPACE_TITLE_BEGIN;Rozpad dílců#WORKSPACE_TITLE_END;; #WORKSPACE_MODULE=V_TPV;; #WORKSPACE_MNID=202311150958528994779223;;#ALL_ADD_TYPES=SEZNAM_user_rozpad_dilcu,; #STANDARDSORT;#HIDEBLANKREC;#ENAB_ADD_IN_VIEW;#ENAB_DELETE_IN_VIEW;#ENAB_FAST_PREV_IN_VIEW;#SEZ_SQL_SLOUPCEADD;#SEZ_SQL_COMPUTEADD; ;#IS_LIST_EDIT;;#ALL_ADD_TYPES=DETAIL_user_rozpad_dilcu,; USER_END w_ift\tparametr/0 01ID_MENU=MNID/V_TPV/202311191846439310651865 01BUTTON_TITLE=Exportuj do pily 01TYP=GROUP 01USER_BEGIN ;#SETMENUID=O/V_TPV/0/user_rozpad_dilcu//202311191846439310651865/20/30/0;  #BUTTON_COLOR=rgb(0,255,0); #PERCENT_OFF; #--N--OEDIT_EVAL_LEFT=exportovano = 1 or davka=''; #NOEDIT_EVAL_LEFT=davka=''; #BUTTON_QUESTION1=Opravdu chcete exportovat již exportovanou dávku %davka%?:Wexportovano = 1; #SETWSOURCE; #USERSUB1=#DAVKA=%davka%:NA; #USERSUB2=#GENERUJ_EXPORT=1:NA; #REFRESHROWS;;#SETMENUID_END; 01USER_END 0101ID_MENU=MNID/V_TPV/202311162114515813595763 0101TYP=NOTHING 0101USER_BEGIN ;#TYPP=45;;#SETMENUID=O/V_TPV/0/user_rozpad_dilcu//202311162114515813595763/45/30/0; #DO_PARENT_USERSUB; #GROUP_WHEN=#GENERUJ_EXPORT=1; #PERCENT_OFF; #NOMULTIWARN; #USERSUB1=#EXPORT_FILENAME=select top 1 'c:\\export_pila\\' + user_rozpad_dilcu.davka + '.CSV' from dba.user_rozpad_dilcu where user_rozpad_dilcu.davka ='#DAVKA':NA; #USERSUB2_BEGIN;#EXPORT_TEXT=#DO_LIST_BEGIN;| SELECT 'CSVAZEK1'+';'+'DAVKA2'+';'+'DOKLAD3'+';'+'POLOZKA4'+';'+'QR5'+';'+'PORADI6'+';'+'DILEC7'+';'+'CAST8'+';'+'PCROZP9'+';'+'DELKA10'+';'+'VYSKA11'+';'+'TYP_DESKY12'+';'+'TL_DESKY13'+';'+'POCET_KS_ROZPADU14'+';'+'TISK15'+';'+'ZKRACENY_NAZEV16'+';'+'KODKZ17'+';'+'OBJEDNAVKA18'+';'+'NAZEV_DOPRAVCE19'+';'+'ZPUSOB_DOPRAVY20'+';'+'DAT_EXPEDICE21'+';'+'KARTA22'+';'+'NAZEV_PRODUKTU23'+';'+'MNOZSTVI_VYR24'+';'+'OP_DELKA25'+';'+'OP_VYSKA26'+';'+'OP_HLOUBKA27'+';'+'CLENENI28'+';'+'USER_ZAKVY29'+';'+'USER_POLOZKA_ZD30'+';'+'USER_PRIP31'+';'+'KCOP32'+';'+'USER_POL_POZ33'+';'+'USER_PROFIL_ZAK34'+';'+'USER_TYP_PROFIL35'+';'+'USER_VRTANI_MET36'+';'+'USER_EAN37'+';'+'ADR_DOD38'+char(13)+char(10) union all select  '1'/*CSVAZEK1*/+';'+ convert(varchar,user_rozpad_dilcu.davka)/*DAVKA2*/+';'+ convert(varchar,user_rozpad_dilcu.doklad)/*DOKLAD3*/+';'+ right('000' + convert(varchar,user_rozpad_dilcu.polozka), 3)/*POLOZKA4*/+';'+ convert(varchar,user_rozpad_dilcu.doklad)+(right('000' + convert(varchar,user_rozpad_dilcu.polozka), 3))+convert(varchar,user_rozpad_dilcu.cast)+(right('00' + convert(varchar,user_rozpad_dilcu.dilec), 2))+(right('000' + convert(varchar,user_rozpad_dilcu.poradi), 3))+(right('00' + convert(varchar,user_rozpad_dilcu.por_pol), 2))/*QR5*/+';'+ convert(varchar,user_rozpad_dilcu.poradi)/*PORADI6*/+';'+ convert(varchar,user_rozpad_dilcu.dilec)/*DILEC7*/+';'+ convert(varchar,user_rozpad_dilcu.cast)/*CAST8*/+';'+ convert(varchar,user_rozpad_dilcu.por_pol)/*PCROZP9*/+';'+ convert(varchar,user_rozpad_dilcu.delka)/*DELKA10*/+';'+ convert(varchar,user_rozpad_dilcu.sirka)/*VYSKA11 - změněno z vyska na sirka*/+';'+ convert(varchar,user_rozpad_dilcu.material_typ)/*TYP_DESKY12*/+';'+ convert(varchar,user_rozpad_dilcu.material_tl)/*TL_DESKY13*/+';'+ convert(varchar,user_rozpad_dilcu.mnozstvi)/*POCET_KS_ROZPADU14*/+';'+ '1'/*TISK15*/+';'+ convert(varchar,op_zahlavi.zkraceny_nazev)/*ZKRACENY_NAZEV16*/+';'+ convert(varchar,op_zahlavi.user_kodkz)/*KODKZ17*/+';'+ convert(varchar,op_zahlavi.objednavka)/*OBJEDNAVKA18*/+';'+ convert(varchar,op_zahlavi.zkraceny_nazev_dop)/*NAZEV_DOPRAVCE19*/+';'+ convert(varchar,case when op_zahlavi.zpusob_dopravy = 1 then 'Vlastní' when op_zahlavi.zpusob_dopravy = 2 then 'Cizí' else 'Nezadáno' end)/*ZPUSOB_DOPRAVY20*/+';'+ convert(varchar,op_zahlavi.dat_expedice,104)/*DAT_EXPEDICE21*/+';'+ convert(varchar,op_polozky.karta)/*KARTA22*/+';'+ convert(varchar,op_polozky.nazev)/*NAZEV_PRODUKTU23*/+';'+ convert(varchar,op_polozky.user_mnozstvi_vyr)/*MNOZSTVI_VYR24*/+';'+ convert(varchar,op_polozky.user_delka)/*OP_DELKA25*/+';'+ convert(varchar,op_polozky.user_vyska)/*OP_VYSKA26*/+';'+ convert(varchar,op_polozky.user_hloubka)/*OP_HLOUBKA27*/+';'+ convert(varchar,op_polozky.user_sirka1)+'/'+convert(varchar,op_polozky.user_sirka2)+'/'+convert(varchar,op_polozky.user_sirka3)+'/'+convert(varchar,op_polozky.user_sirka4)+'/'+convert(varchar,op_polozky.user_sirka5)/*CLENENI28*/+';'+ convert(varchar,op_polozky.user_zakvy)/*USER_ZAKVY29*/+';'+ convert(varchar,op_polozky.user_polozka_zd)/*USER_POLOZKA_ZD30*/+';'+ convert(varchar,op_polozky.user_prip)/*USER_PRIP31*/+';'+ right(convert(varchar,user_rozpad_dilcu.doklad),3)/*KCOP32*/+';'+ convert(varchar,op_polozky.user_pol_poz)/*USER_POL_POZ33*/+';'+ convert(varchar,op_polozky.user_profil_zak)/*USER_PROFIL_ZAK34*/+';'+ convert(varchar,op_polozky.user_typ_profil)/*USER_TYP_PROFIL35*/+';'+ convert(varchar,op_polozky.user_vrtani_met)/*USER_VRTANI_MET36*/+';'+ dba.user_o_obj_gen_ean16_1_fce (user_rozpad_dilcu.doklad,user_rozpad_dilcu.polozka,user_rozpad_dilcu.poradi)/*USER_EAN37*/+';'+ convert(varchar,op_zahlavi.misto_dp)/*ADR_DOD38*/+char(13)+char(10) from  dba.user_rozpad_dilcu user_rozpad_dilcu with(index(user_rozpad_dilcu_davka)), dba.op_polozky op_polozky with(index(pk_op_polozky)), dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)), dba.nomenklatura nomenklatura with(index(nomenklatura_cislo_nomen)) where user_rozpad_dilcu.davka = '#DAVKA' and user_rozpad_dilcu.doklad=op_polozky.doklad and user_rozpad_dilcu.polozka=op_polozky.polozka and op_polozky.doklad=op_zahlavi.doklad and nomenklatura.cislo_nomenklatury=user_rozpad_dilcu.material and user_rozpad_dilcu.exportovat = 1 #DO_LIST_END;:NA#USERSUB2_END; #FILEWRITE_AFTER1=#EXPORT_FILENAME; #FILEWRITE_BODY1_BEGIN;#EXPORT_TEXT#FILEWRITE_BODY1_END; #GROUP_WAIT; ;#SETMENUID_END; 0101USER_END 0102ID_MENU=MNID/V_TPV/202311191856023193910946 0102TYP=SQLCOMMAND 0102USER_BEGIN ;#TYPP=45;;#SETMENUID=O/V_TPV/0/user_rozpad_dilcu//202311191856023193910946/45/30/0;    #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.user_rozpad_dilcu set exportovano = 1, autor_exp=user, dat_exp=getdate() from dba.user_rozpad_dilcu urd with(index(pk_user_rozpad_dilcu)) where urd.davka=%davka% #SQLCOMMAND1_END; #SQLCOMMAND2_BEGIN; update dba.user_davky set autor_exp=user, dat_exp=getdate() from dba.user_davky user_davky with(index(pk_user_davky)) where user_davky.davka=%davka% #SQLCOMMAND2_END;;#SETMENUID_END; 0102USER_END 0103ID_MENU=MNID/V_TPV/202311192036412925514925 0103TYP=ATTADD 0103USER_BEGIN ;#TYPP=45;;#SETMENUID=O/V_TPV/0/user_rozpad_dilcu//202311192036412925514925/45/30/0; #DO_PARENT_USERSUB; #GROUP_WHEN=#GENERUJ_EXPORT=1; #FILE_FROM_CLIENT; #USERSUB1=#EXPORT_FILENAME=select top 1 'c:\\export_pila\\' + user_rozpad_dilcu.davka + '.CSV' from dba.user_rozpad_dilcu where user_rozpad_dilcu.davka ='#DAVKA':NA; #ATT_TABULKA=user_davky; #ATT_PK=#DAVKA; #ATT_CLASS=EXPORT_FILE; #ATT_TAB=user_davky; #ATT_POZN=EXPORTOVANO; #FILE=#EXPORT_FILENAME; ;#SETMENUID_END; 0103USER_END 02ID_MENU=MNID/V_TPV/202311192042136607116962 02BUTTON_TITLE=Dávka 02TYP=SEZNAM 02SEZ_TABULKA=user_davky 02SEZ_TITLE=Dávka: {davka} 02SEZ_VAZBA=TRUE 02SEZ_VAZBA_COLUMN1=davka 02USER=;#SETMENUID=O/V_TPV/0///202311192042136607116962/20/30/0;;#SETMENUID_END; 03ID_MENU=MNID/V_TPV/202311281516584940055182 03BUTTON_TITLE=Generuj dávku pro export 03TYP=MULTIDETAIL 03USER_BEGIN ;#BUTTON_WRITE_RIGHT=user_rozpad_dilcu;;#SETMENUID=O/V_TPV/0///202311281516584940055182/20/30/0;    #NOMULTIWARN; #NOEDIT_EVAL_LEFT=davka<>''; #EDIT_COL_NOTAB; #EDIT_COL_ALL_MODIFIED; #EDIT_GROUP1=Dávka pro export; #EDIT_COL1=user_rozpad_dilcu.davka; #EDIT_COL_DEFAULT1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL_DEFAULT_MULTI1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL1_EMPTY; #EDIT_COL1_SQL1_BEGIN; update dba.user_rozpad_dilcu set davka = #VAL, autor = user, ts = getdate() from dba.user_rozpad_dilcu user_rozpad_dilcu with(index(pk_user_rozpad_dilcu)) where user_rozpad_dilcu.doklad = %doklad% and user_rozpad_dilcu.polozka=%polozka% and user_rozpad_dilcu.cast=%cast% and user_rozpad_dilcu.dilec=%dilec% #EDIT_COL1_SQL1_END; #REFRESHROWSAFTER; ;#SETMENUID_END; 03USER_END 04ID_MENU=MNID/V_TPV/202312201241247088534145 04BUTTON_TITLE=Generuj dávku pro export pro celou OBJ 04TYP=MULTIDETAIL 04USER_BEGIN ;#BUTTON_WRITE_RIGHT=user_rozpad_dilcu;;#SETMENUID=O/V_TPV/0///202312201241247088534145/20/30/0;    #NOMULTIWARN; #NOEDIT_EVAL_LEFT=davka<>''; #EDIT_COL_NOTAB; #EDIT_COL_ALL_MODIFIED; #EDIT_GROUP1=Dávka pro export; #EDIT_COL1=user_rozpad_dilcu.davka; #EDIT_COL_DEFAULT1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL_DEFAULT_MULTI1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL1_EMPTY; #EDIT_COL1_SQL1_BEGIN; update dba.user_rozpad_dilcu set davka = #VAL, autor = user, ts = getdate() from dba.user_rozpad_dilcu user_rozpad_dilcu with(index(pk_user_rozpad_dilcu)) where user_rozpad_dilcu.doklad = %doklad% #EDIT_COL1_SQL1_END; #REFRESHROWSAFTER; ;#SETMENUID_END; 04USER_END 05ID_MENU=MNID/V_TPV/202401011237088621624371 05BUTTON_TITLE=Generuj dávku pro export za položku OBJ 05TYP=MULTIDETAIL 05USER_BEGIN ;#BUTTON_WRITE_RIGHT=user_rozpad_dilcu;;#SETMENUID=O/V_TPV/0///202401011237088621624371/20/30/0;    #NOMULTIWARN; #NOEDIT_EVAL_LEFT=davka<>''; #EDIT_COL_NOTAB; #EDIT_COL_ALL_MODIFIED; #EDIT_GROUP1=Dávka pro export; #EDIT_COL1=user_rozpad_dilcu.davka; #EDIT_COL_DEFAULT1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL_DEFAULT_MULTI1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL1_EMPTY; #EDIT_COL1_SQL1_BEGIN; update dba.user_rozpad_dilcu set davka = #VAL, autor = user, ts = getdate() from dba.user_rozpad_dilcu user_rozpad_dilcu with(index(pk_user_rozpad_dilcu)) where user_rozpad_dilcu.doklad = %doklad% and user_rozpad_dilcu.polozka=%polozka% #EDIT_COL1_SQL1_END; #REFRESHROWSAFTER; ;#SETMENUID_END; 05USER_END 06ID_MENU=MNID/V_TPV/202401101317041814512620 06BUTTON_TITLE=Položka objednávky 06TYP=SEZNAM 06SEZ_TABULKA=op_polozky 06SEZ_TITLE=Položka objednávky: {doklad}{polozka} 06SEZ_VAZBA=TRUE 06SEZ_VAZBA_COLUMN1=doklad 06SEZ_VAZBA_COLUMN2=polozka 06USER=;#SETMENUID=O/V_TPV/0///202401101317041814512620/20/30/0;;#SETMENUID_END; w_ift\tconn\tms_19216810247_karat_termopan 73 w_ift\tf11\tStandard AllDevices w_ift\tRefreshObjects\tDETAIL PARENT_LIST PARENT_FAST w_ift\tPercentOffDWs\tDETAIL\tdba.user_rozpad_dilcu\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.6304.6307.6582.6592.6593.6594 PARENT_LIST\tdba.user_rozpad_dilcu\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.6304.6307.6330 PARENT_FAST\tdba.user_rozpad_dilcu\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.6304.6307.preview.fast.dw_fast_preview w_iftdetail\tlink\tkarat://termopan:@0/detail/user_rozpad_dilcu?where=%28%20doklad%20%3d%20%2724op010100000302%27%20and%20polozka%20%3d%203%20and%20poradi%20%3d%201%20and%20cast%20%3d%201%20and%20dilec%20%3d%201%20and%20por%5fpol%20%3d%201%20%29&menu=0 w_iftdetail\tdw.table\tuser_rozpad_dilcu w_iftdetail\tdw.oks\tOK doklad    Col OK polozka OK poradi OK delka OK vyska OK sirka OK cast OK dilec OK mnozstvi OK material    Col OK exportovano    ColBeforeSave OK davka OK por_pol OK nomenklatura    ColBeforeSave OK material_typ OK material_tl OK spotreba_mat OK cena_mat OK storno OK produkt OK exportovat OK autor OK ts OK xattach OK xattach_bmp w_iftdetail\tdw.form\tFirma w_iftdetail\tdw.dirs\tFirma w_iftdetail\tdws ------------------------------- Window: Neuvedeno Editor funkčnosti detailů - user_rozpad_dilcu/000 (V_TPV enabled visible c__as_detail_dirs_editor) w_ift\tclassname\tas_detail_dirs_editor w_ift\tclasses\t.object.karatbaseobject.karatobject.karatcontrol.karatwindow.c__w_ift.c__as_detail_dirs_editor w_ift\tparametr CLASS=as_detail_dirs_editor W_SOURCE=object(c__w_iftdetail AppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.6304.6307.6582) DET_TABULKA=user_rozpad_dilcu DET_DW=d_gd_user_rozpad_dilcu USER=#SLOUPEC=doklad;;#ALL_ADD_TYPES=;#KEY; w_ift\tconn\tms_19216810247_karat_termopan 73 w_ift\tRefreshObjects\tPARENT_DETAIL PARENT_PARENT_LIST PARENT_PARENT_FAST w_ift\tPercentOffDWs\tPARENT_DETAIL\tdba.user_rozpad_dilcu\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.6304.6307.6582.6592.6593.6594 PARENT_PARENT_LIST\tdba.user_rozpad_dilcu\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.6304.6307.6330 PARENT_PARENT_FAST\tdba.user_rozpad_dilcu\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.6304.6307.preview.fast.dw_fast_preview ------------------------------- Workspace: Dávky exportu (V_TPV/202311192045055431094551) Window: Seznam Dávky exportu (V_TPV disabled visible c__w_iftseznam tab=user_davky) w_ift\tclassname\tw_iftseznam w_ift\tclasses\t.object.karatbaseobject.karatobject.karatcontrol.karatwindow.c__w_ift.c__w_filter_parent.c__w_iftseznam w_ift\tlink\tkarat://termopan:@0/mnid/v_tpv/202311192045055431094551?menu=0&nss=0 w_ift\tparametr ID_MENU=MNID/V_TPV/202311192045055431094551 TYP=SEZNAM CLASS=w_iftseznam AKCE=user_davky ID_SAVE=user_davky SEZ_TABULKA=user_davky SEZ_CLASS=w_iftseznam NOEDIT=IFT USER_BEGIN ;#SETMENUID=A/V_TPV/user_davky/202311192045055431094551/10/30/0; #MNUMAKCE=202311192045055431094551;;#SETMENUID_END;; #WORKSPACE_TITLE_BEGIN;Dávky exportu#WORKSPACE_TITLE_END;; #WORKSPACE_MODULE=V_TPV;; #WORKSPACE_MNID=202311192045055431094551;;#ALL_ADD_TYPES=SEZNAM_user_davky,; USER_END w_ift\tparametr/0 01ID_MENU=MNID/V_TPV/202311192045554219485239 01BUTTON_TITLE=Položky dávky 01TYP=SEZNAM 01SEZ_TABULKA=user_rozpad_dilcu 01SEZ_TITLE=Položky dávky 01SEZ_PODMINKA=davka=%davka% 01SEZ_INITINDEX=user_rozpad_dilcu_davka 01USER_BEGIN ;#SETMENUID=O/V_TPV/0/user_davky//202311192045554219485239/20/30/0;       #DO_SEZ_SQL; #SEZ_SQL_ADD3000=(select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS dat_expedice /*\\:Sop_zahlavi.dat_expedice:HDatum expedice*/; #SEZ_SQL_ADD3001=(select op_zahlavi.zkraceny_nazev from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS zakaznik /*\\:Sop_zahlavi.zkraceny_nazev:HZákazník*/; #SEZ_SQL_ADD3002=(select op_zahlavi.misto_dp from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS misto_dod /*\\:Sop_zahlavi.misto_dp:HMísto dodání*/; #LEGEND=#DOKL_STORNO:Stornovaná položka:Fstorno = 1; #LEGEND=#O_OBJ_ODS:Vygenerována dávka:Fdavka<>'' and exportovano = 0; #LEGEND=#DOKL_SCHVAL:Exportováno:Fexportovano = 1;;#SETMENUID_END; 01USER_END w_ift\tconn\tms_19216810247_karat_termopan 73 w_ift\tf11\tStandard AllDevices w_ift\tRefreshObjects\tLIST FAST w_ift\tPercentOffDWs\tLIST\tdba.user_davky\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.11139.11142.11165 FAST\tdba.user_davky\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.11139.11142.preview.fast.dw_fast_preview w_ift\tpreview1\tRychlý náhled ---Id: FAST ---UserParam: #TYPE=Fast;#ID=FAST;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=1;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1; ---Directives: #TYPE=Fast;#ID=FAST;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROW=1;#HIDDEN_HEADER=1;#PREVIEW_FAST;#FAST_PREV_TAB=user_davky;#FAST_PREV_DW=;#FAST_PREVIEW_SUBS=; w_ift\tCurrentPreviewUserParam\t#USR_PREVIEW;#PREVIEW_GRID_ROWS=1;#PREVIEW_GRID_COLS=1;#PREVIEW_VIEW_TAB=0;#PREVIEW_CAN_ADD=0;#GENERATED_PREVIEW; #USR_PREVIEW1_BEGIN;#TYPE=Fast;#ID=FAST;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=1;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1;#USR_PREVIEW1_END; w_iftseznam\tsez_tabulka\tuser_davky w_iftseznam\tlink\tkarat://termopan:@0/mnid/v_tpv/202311192045055431094551?where=%28%20user%5fdavky%2edavka%20%3d%20%2720240423%2d00033%27%20%29&menu=0 w_iftseznam\tdetail.color\t1090519039 w_iftseznam\tdwselect\tSELECT TOP 351  user_davky.davka,user_davky.dat_exp,user_davky.autor_exp,user_davky.autor,user_davky.ts,isnull(user_davky.xattach,0) xattach FROM dba.user_davky user_davky with(index(pk_user_davky)) WHERE 1=1  AND ( (user_davky.davka + '') <> '' /* blankrec */)    ORDER BY user_davky.davka OPTION(fast 350) /* seznam user_davky A/V_TPV/user_davky/202311192045055431094551/10/30/0 */ w_iftseznam\tdwcolumns\tdavka,dat_exp,autor_exp,autor,ts,xattach,xremind w_iftseznam\tdwcolumns_visible\txattach_bmp,xremind_bmp,davka,dat_exp,autor_exp,autor,ts 0\txattach_bmp\t18 1\txremind_bmp\t18 2\tdavka\t158 3\tdat_exp\t146 4\tautor_exp\t66 5\tautor\t57 6\tts\t146 w_iftseznam\tdwcolumns_invisible\txattach,xremind w_iftseznam\tid_save\tv_tpv/user_davky w_iftseznam\tfirstuser\t;#SETMENUID=A/V_TPV/user_davky/202311192045055431094551/10/30/0; #MNUMAKCE=202311192045055431094551;;#SETMENUID_END;; #WORKSPACE_TITLE_BEGIN;Dávky exportu#WORKSPACE_TITLE_END;; #WORKSPACE_MODULE=V_TPV;; #WORKSPACE_MNID=202311192045055431094551;;#ALL_ADD_TYPES=SEZNAM_user_davky,; w_iftseznam\tmaxrows\t350 w_iftseznam\tstorage\t3 280 w_iftseznam\tsorting w_iftseznam\tadd_sorting\tdavka A, ------------------------------- Window: Seznam Přílohy k tabulce: Dávky exportu, záznam: 20240423-00033 (ATTCH enabled visible c__w_iftseznam_prilohy tab=attach_store) w_ift\tclassname\tw_iftseznam_prilohy w_ift\tclasses\t.object.karatbaseobject.karatobject.karatcontrol.karatwindow.c__w_ift.c__w_filter_parent.c__w_iftseznam.c__w_iftseznam_prilohy w_ift\tparametr TYP=SEZNAM CLASS=w_iftseznam_prilohy AKCE=attach_store ID_SAVE=attach_store W_SOURCE=object(c__w_iftseznam AppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.11139.11142) SEZ_TABULKA=attach_store SEZ_SQL=    #NOTAB=attach_store;     select *^(tabulka, pk, poradi, pozn, popis, file_name, noedit, nodel, p_zamek, p_verze, p_schval, verze, stav_verze, zamek, zamek_autor, zamek_ts, stav, exist_verze, workflow, kod_procesu, pred_stav, h_verze, revize, aktualni_h_verze, aktualni_revize, aktualni_verze, stav1_autor, stav9_autor, stav10_autor, stav1_datum, stav9_datum, stav10_datum, xattach, typ_doc, link_readonly, signature_status),             coalesce(attach_store.pozn_uni, attach_store.pozn) AS pozn /* \\:Sattach_store.pozn */,             coalesce(attach_store.popis_uni, attach_store.popis) AS popis /* \\:Sattach_store.popis */,             coalesce(attach_store.file_name_uni, attach_store.file_name) AS file_name /* \\:Sattach_store.file_name */,             (case when attach_store.id_posty <> '' and attach_store.stav_odeslani <> 0 then 1 else attach_store.noedit end) AS noedit /* \\:Sattach_store.noedit */,             (case when attach_store.id_posty <> '' and attach_store.stav_odeslani <> 0 then 1 else attach_store.nodel end) AS nodel /* \\:Sattach_store.nodel */,             sd_tables.modul AS modul,             #EXPAND_LANG_COL_BEGIN;|CZ||1|1|sd_tables|sd_tables|label#EXPAND_LANG_COL_END; AS tabulka_nazev /* \\:Ssd_tables.label:HNázev tabulky */,             coalesce((select max(a.pristup) from dba.attach_extension a with(index(pk_attach_extension)) where a.extension = (case when coalesce(charindex('.', attach_store.file_name), 0) > 0 then reverse(substring(upper(reverse(attach_store.file_name)), 1, charindex('.', reverse(attach_store.file_name)) - 1)) else '' end)), 20) AS ext_pristup /* \\:Sattach_extension.pristup:HPřístup dle přípony souboru */,             (case attach_class.p_nazev when 20 then (case when attach_store.att_type = 70 and isnull(charindex('\\', isnull(attach_store.file_name_uni, attach_store.file_name)), 0) > 0 then reverse(substring(reverse(isnull(attach_store.file_name_uni, attach_store.file_name)), 1, charindex('\\', reverse(isnull(attach_store.file_name_uni, attach_store.file_name))) - 1)) else isnull(attach_store.file_name_uni, attach_store.file_name) end) when 30 then isnull(attach_store.pozn_uni, attach_store.pozn) else #EXPAND_LANG_COL_BEGIN;|CZ||1|1|attach_class|attach_class|nazev#EXPAND_LANG_COL_END; end) AS nazev /* \\:Sattach_store.pozn:HNázev přílohy */,             #EXPAND_LANG_COL_BEGIN;|CZ||1|1|attach_class|attach_class|nazev#EXPAND_LANG_COL_END; AS class_nazev /* \\:Sattach_class.nazev:HDruh přílohy */,             (case when coalesce(charindex('.', attach_store.file_name), 0) > 0 then reverse(substring(upper(reverse(attach_store.file_name)), 1, charindex('.', reverse(attach_store.file_name)) - 1)) else '' end) AS file_ext /* \\:Sattach_class.nazev:HPřípona souboru */,             dba.admin_attach_get_pravo_fce(attach_store.tabulka, attach_store.pk, attach_store.poradi, attach_store.att_class, attach_store.att_tab, 'KSWPVKA', '', '') AS pravo /* \\:Sattach_usr.pravo:HPrávo */,             0 AS local /* \\:Sattach_store.noedit:NV:HLokální uložiště */,             upper(user) AS id_uzivatele /* \\:Sattach_store.autor:HAktuální uživatel */,             attach_store.verze AS verze /* \\:Sattach_store.verze:NV */,             case when attach_class.do_noedit=1 and dba.attach_can_create_noedit_fce(attach_store.file_name,'')=0               then 0               else attach_class.do_noedit             end AS do_noedit /* \\:Sattach_class.do_noedit:NV */,             case when attach_class.do_noedit > 0 and attach_store.att_id > 0                then case when exists(select 1 from dba.attach_pdf attach_pdf with(index(pk_attach_pdf)) where attach_pdf.att_id = attach_store.att_id) then 1 else 0 end                else 0              end AS exists_noedit /* \\:Sattach_class.do_noedit:NV */,             0 AS p_verze /* \\:Sattach_store.p_verze:NV */,             0 AS vyhrazeny /* \\:Sattach_store.vyhrazeny:NV */,             2 AS stav_verze /* \\:Sattach_store.stav_verze:NV */,             0 AS zamek /* \\:Sattach_store.zamek:NV */,             '' AS zamek_autor /* \\:Sattach_store.zamek_autor:NV */,             isnull(attach_store.signature_status,0) AS signature_status /*\\:Sattach_store.signature_status:NV*/,             attach_store_rel.tabulka AS tabulka /* \\:Sattach_store.tabulka */,             attach_store_rel.pk AS pk /* \\:Sattach_store.pk */,             attach_store_rel.poradi AS poradi /* \\:Sattach_store.poradi */,             attach_store_rel.att_class AS rel_att_class /* \\:Sattach_store.att_class:HOdkaz druh přílohy */,             attach_store_rel.att_tab AS rel_att_tab /* \\:Sattach_store.att_tab:HOdkaz tabulka druhu přílohy */,             attach_store_rel.att_type AS rel_att_type /* \\:Sattach_store.att_type:HOdkaz typ přílohy */,             attach_store_rel.vlastnik AS rel_vlastnik /* \\:Sattach_store.vlastnik:HOdkaz vlastník */,             dba.admin_attach_get_pravo_fce(attach_store_rel.tabulka, attach_store_rel.pk, attach_store_rel.poradi, attach_store_rel.att_class, attach_store_rel.att_tab, 'KSWPVKA', '', '#ATTACH_PRAVO_PARAM') AS rel_pravo /* \\:Sattach_usr.pravo:HOdkaz právo */,             attach_store_rel.link_readonly AS rel_link_readonly /* \\:Sattach_store.link_readonly */,             1 AS opravneni /* \\:Sattach_class.p_zamek:HOprávněná osoba:NV */         from dba.attach_store attach_store_rel,             dba.attach_store attach_store,             dba.attach_class attach_class with(index(pk_attach_class)),             dba.sd_tables sd_tables with(index(pk_sd_tables))         where attach_store.tabulka = attach_store_rel.link_tabulka             and attach_store.pk = attach_store_rel.link_pk             and attach_store.poradi = attach_store_rel.link_poradi             and attach_class.att_class = attach_store.att_class             and attach_class.att_tab = attach_store.att_tab             and sd_tables.tabulka = attach_store_rel.tabulka             and dba.admin_attach_get_pravo_fce(attach_store_rel.tabulka, attach_store_rel.pk, attach_store_rel.poradi, attach_store_rel.att_class, attach_store_rel.att_tab, 'KSWPVKA', '', '#ATTACH_PRAVO_PARAM') > 0 SEZ_CLASS=w_iftseznam_prilohy SEZ_TITLE=Přílohy k tabulce: Dávky exportu, záznam: 20240423-00033 SEZ_MODIFY_BEGIN pk.edit.limit = 255 odkaz.checkbox.on= \"1\" odkaz.checkbox.off = \"0\" odkaz.checkbox.threed = yes poradi_id.font.weight = '700' datawindow.detail.color=\"255 \t if(do_noedit in (1,2) and exists_noedit=0,8421631,1090519039)\" SEZ_MODIFY_END SEZ_PODMINKA=attach_store_rel.tabulka='user_davky' and attach_store_rel.pk=%(ReplaceAll(String(davka),'|',''))% SEZ_V_PODMINCE=tabulka,pk,verze,stav_verze,poradi_id SEZ_F3_TAG_BEGIN ;    #F3DISADD; #F3DISDELETE; #F3DISEDIT; SEZ_F3_TAG_END NOEDIT=TRUE USER_BEGIN #ATTACH;#MODUL=V_TPV;#TABULKA=user_davky;;;#SETMENUID=O/ATTCH/10/attach_store//201010071014428256189707/15/40/0;    #DONE_ADDTYP=SEZNAM,attach_store_sekr; #PRAVO_DEF=40;;#SETMENUID_END;;;#SETMENUID=O/ATTCH/10/attach_store//202001060756223257624111/15/40/0; #PRAVO_DEF=40;;#SETMENUID_END;;;#SETMENUID=O/SEKR/20/attach_store_sekr/SEZNAM/201011151449460665721050/16/40/0; #-USERSUB5000=#-USERDIR_ATT_WITH_DMS_=if(islicmodul2('DMS'),'#','NO_DMS'):NA; #-USERSUB5001=#-USERDIR_ATT_NO_DMS_=if(islicmodul2('DMS'),'EXIST_DMS','#'):NA; ;#SETMENUID_END;;#ALL_ADD_TYPES=SEZNAM_,SEZNAM_attach_store_sekr,;;;#SETMENUID=O/ATTCH/20/attach_store_dialog/SEZNAM/201409290737171052618695/16/40/0;    #REMOVE_STANDARDSORT; #NOEDIT_EVAL=!(pravo <> 4 and (pravo <> 3 or vlastnik <> '\\IDU')) or (rel_att_type = 73 and rel_link_readonly = 1) or (rel_att_type < 80 and rel_att_type > 73); #NODELETE_EVAL=(rel_pravo <> 4 and (rel_pravo <> 3 or rel_vlastnik <> '\\IDU')); #COMPUTEADD1=link_bmp=bitmap(if(rel_att_type<80 and rel_att_type>=73,'path(PathOpenInExternalProgram)','')):HOdkaz na přílohu:F:NS; #COMPUTEADD2=signature_status_bmp=bitmap(case(signature_status when 5 then 'path(PathQuestionMark),color(6)' when 10 then 'path(PathCertified),color(6)' when 20 then 'path(PathCertified),color(20)' when 30 then 'path(PathCertified),color(12)' when 90 then 'path(PathOrgRisk),color(6)' else '')):HElektronický podpis:F:NS; #REFRESHROW_NOPKWHERE; #REFRESHROW_WHERE=attach_store_rel.tabulka = $tabulka$ and attach_store_rel.pk = $pk$ and attach_store_rel.poradi = $poradi$; #TL_FUNKCE_SEZNAM; #ADDTYP=SEZNAM,attach_store_sekr; #COMPWR=ODKAZ; #DO_THIS_USERSUB; #LEGEND=rgb(255,128,128):Není vytvořena needitovatelná varianta přílohy:Fdo_noedit in (1,2) and exists_noedit=0; #PRAVO_DEF=40;;#SETMENUID_END;#SEZNAM_TREE; #SAVEFILE=ATTCH; USER_END TISK_DW_SHARE=object(..object.karatbaseobject.karatobject.karatcontrol.karatdatawindow.c__dw_ift.c__dw_1) GEN_SORTS1=Tabulka,Primární klíč,Pořadí^tabulka,pk,poradi^attach_store_rel.tabulka,attach_store_rel.pk,attach_store_rel.poradi GEN_SORTS2=Primární klíč,Pořadí,Tabulka^pk,poradi,tabulka^attach_store_rel.pk,attach_store_rel.poradi,attach_store_rel.tabulka GEN_SORTS3=Velikost přílohy,Tabulka,Primární klíč,Pořadí^file_len,tabulka,pk,poradi^attach_store.file_len,attach_store_rel.tabulka,attach_store_rel.pk,attach_store_rel.poradi GEN_SORTS4=Název souboru,Tabulka,Primární klíč,Pořadí^file_name,tabulka,pk,poradi^attach_store.file_name,attach_store_rel.tabulka,attach_store_rel.pk,attach_store_rel.poradi GEN_SORTS5=ID úložiště dat,ID blobu v lokální DB,ID blobu v externí DB,Cesta k souboru v uložišti,Tabulka,Primární klíč,Pořadí^dev_id,loc_blob_id,ext_blob_id,file_pathname,tabulka,pk,poradi^attach_store.dev_id,attach_store.loc_blob_id,attach_store.ext_blob_id,attach_store.file_pathname,attach_store_rel.tabulka,attach_store_rel.pk,attach_store_rel.poradi GEN_SORTS6=Kód druhu přílohy,Tabulka přílohy,Šablona formuláře,Tabulka,Primární klíč,Pořadí^att_class,att_tab,att_templ,tabulka,pk,poradi^attach_store.att_class,attach_store.att_tab,attach_store.att_templ,attach_store_rel.tabulka,attach_store_rel.pk,attach_store_rel.poradi GEN_SORTS7=Pořídil,Tabulka,Primární klíč,Pořadí^vytvoril,tabulka,pk,poradi^attach_store.vytvoril,attach_store_rel.tabulka,attach_store_rel.pk,attach_store_rel.poradi GEN_SORTS8=Tabulka,Primární klíč,ID verze,Verze,Pořadí^tabulka,pk,poradi_id,verze,poradi^attach_store_rel.tabulka,attach_store_rel.pk,attach_store.poradi_id,attach_store.verze,attach_store_rel.poradi GEN_SORTS9=Nastavení rušení přílohy,Tabulka,Primární klíč,Pořadí^nodel,tabulka,pk,poradi^attach_store.nodel,attach_store_rel.tabulka,attach_store_rel.pk,attach_store_rel.poradi GEN_SORTS10=ID blobu v lokální DB,Tabulka,Primární klíč,Pořadí^loc_blob_id,tabulka,pk,poradi^attach_store.loc_blob_id,attach_store_rel.tabulka,attach_store_rel.pk,attach_store_rel.poradi GEN_SORTS11=Cíl odkazu tabulka,Cíl odkazu primární klíč,Cíl odkazu pořadí,Tabulka,Primární klíč,Pořadí^link_tabulka,link_pk,link_poradi,tabulka,pk,poradi^attach_store.link_tabulka,attach_store.link_pk,attach_store.link_poradi,attach_store_rel.tabulka,attach_store_rel.pk,attach_store_rel.poradi GEN_SORTS12=ID přílohy^att_id^attach_store.att_id GEN_SORTS13=Status elektronického podpisu,ID přílohy^signature_status,att_id^attach_store.signature_status,attach_store.att_id w_ift\tparametr/0 01ID_MENU=MNID/ATTCH/201010131118063171193269 01BUTTON_TITLE=Prvotní záznam 01TYP=SEZNAM 01SEZ_TABULKA=%tabulka% 01SEZ_PODMINKA=#DO_LIST=^execute dba.admin_attach_prvdkl %tabulka%, %pk%^; 01USER_BEGIN ;#SETMENUID=O/ATTCH/0/attach_store//201010131118063171193269/20/40/0;    #NOFR; #HIDEPB; #PRAVO_DEF=40;;#SETMENUID_END; 01USER_END 09ID_MENU=MNID/ATTCH/202001060758478210576419 09BUTTON_TITLE=Zobrazit uložené podpisy a razítka 09TYP=SEZNAM 09SEZ_TABULKA=eid_as_podpis 09SEZ_PODMINKA_BEGIN eid_as_podpis.att_id=%att_id% or eid_as_podpis.att_id=(select att.att_id from dba.attach_store att where att.tabulka='attach_pdf' and att.pk=string(%att_id%) and att.poradi= (select max(a.poradi) from dba.attach_store a where a.tabulka='attach_pdf' and a.pk=string(%att_id%))) 09SEZ_PODMINKA_END 09SEZ_V_PODMINCE=att_id 09USER_BEGIN ;#SETMENUID=O/ATTCH/0/attach_store//202001060758478210576419/20/40/0; #NOLINK; #BUTTON_GROUP=Elektronický podpis; #REFRESHROW_ON_CLOSE; #PRAVO_DEF=40;;#SETMENUID_END; 09USER_END 10ID_MENU=MNID/ATTCH/202001060801256619109231 10BUTTON_TITLE=Elektronicky podepsat 10CLASS=as_attach_cert 10USER_BEGIN ;#SETMENUID=O/ATTCH/0/attach_store//202001060801256619109231/20/40/0; #NOEDIT_EVAL_LEFT=zamek=1 and zamek_autor<>'\\IDU'; #NOLINK; #BUTTON_GROUP=Elektronický podpis; #NOMULTIWARN; #BUTTON_COMMAND=AddSignature; #PRAVO_DEF=40;;#SETMENUID_END; 10USER_END 11ID_MENU=MNID/ATTCH/202001060802189630262730 11BUTTON_TITLE=Vložit přidružený podpis ze souboru 11CLASS=as_attach_cert 11USER_BEGIN ;#SETMENUID=O/ATTCH/0/attach_store//202001060802189630262730/20/40/0; #NOEDIT_EVAL_LEFT=(zamek=1 and zamek_autor<>'\\IDU') or (pravo <> 4 and (pravo <> 3 or vlastnik <> '\\IDU')) or (rel_att_type = 73 and rel_link_readonly = 1); #NOLINK; #BUTTON_GROUP=Elektronický podpis; #BUTTON_COMMAND=AddSignatureInFile; #PRAVO_DEF=40;;#SETMENUID_END; 11USER_END 12ID_MENU=MNID/ATTCH/202012010926154397424227 12BUTTON_TITLE=Vytvořit časový protokol 12CLASS=as_attach_cert 12USER_BEGIN ;#SETMENUID=O/ATTCH/0/attach_store//202012010926154397424227/20/40/0; #NOEDIT_EVAL_LEFT=zamek=1 and zamek_autor<>'\\IDU'; #NOLINK; #BUTTON_GROUP=Elektronický podpis; #NOMULTIWARN; #BUTTON_COMMAND=CreateTSProtocol; #PRAVO_DEF=40;;#SETMENUID_END; 12USER_END 13ID_MENU=MNID/ATTCH/202001060802381407430533 13BUTTON_TITLE=Zařazení v časových protokolech 13TYP=SEZNAM 13SEZ_TABULKA=eid_as_ts_att 13SEZ_PODMINKA_BEGIN eid_as_ts_att.att_id=%att_id% or eid_as_ts_att.att_id=(select att.att_id from dba.attach_store att where att.tabulka='attach_pdf' and att.pk=string(%att_id%) and att.poradi= (select max(a.poradi) from dba.attach_store a where a.tabulka='attach_pdf' and a.pk=string(%att_id%))) 13SEZ_PODMINKA_END 13SEZ_V_PODMINCE=att_id 13USER_BEGIN ;#SETMENUID=O/ATTCH/0/attach_store//202001060802381407430533/20/40/0; #NOLINK; #BUTTON_GROUP=Elektronický podpis; #PRAVO_DEF=40;;#SETMENUID_END; 13USER_END 14ID_MENU=MNID/ATTCH/202108301254500095306188 14BUTTON_TITLE=Požadavky na vzdálený podpis dokumentu - zdrojová příloha 14TYP=SEZNAM 14SEZ_TABULKA=attach_sid_poz 14SEZ_VAZBA=TRUE 14SEZ_VAZBA_COLUMN1=att_id 14USER_BEGIN ;#SETMENUID=O/ATTCH/0/attach_store//202108301254500095306188/20/40/0; #SPACEBEFORE; #BUTTON_GROUP=Elektronický podpis; #NOEDIT_EVAL_LEFT=not (lower(right(file_name,4)) in ('.pdf')); #XMESSAGE1=Nelze zadat požadavek na vzdálený podpis dokumentu - dokument je uzamčen posledním elektronickým podpisem!:e:Wselect 'true' where exists(select 1 from dba.eid_as_podpis x with(index(pk_eid_as_podpis)) where x.att_id=#XMAIN_ATT_ID and x.podpis_id=(select max(m.podpis_id) from dba.eid_as_podpis m with(index(pk_eid_as_podpis)) where m.att_id=x.att_id) and x.zamek=1); #CLOSE_AFTER_APP; #SETVAL_REFRESH1=noedit_varianta=0; #SETVAL_REFRESH2=main_att_id=#XMAIN_ATT_ID; #USERSUB1=#XMAIN_ATT_ID=att_id:NA; #HIDEPB; #PRAVO_DEF=40;;#SETMENUID_END; 14USER_END 15ID_MENU=MNID/ATTCH/202206272255541559481013 15BUTTON_TITLE=Požadavky na vzdálený podpis dokumentu - needitovatelná varianta 15TYP=SEZNAM 15SEZ_TABULKA=attach_sid_poz 15SEZ_PODMINKA=attach_sid_poz.att_id=#XATT_ID 15SEZ_V_PODMINCE=att_id 15USER_BEGIN ;#SETMENUID=O/ATTCH/0/attach_store//202206272255541559481013/20/40/0; #BUTTON_GROUP=Elektronický podpis; #NOEDIT_EVAL_LEFT=exists_noedit=0; #XMESSAGE1=Nelze zadat požadavek na vzdálený podpis dokumentu - needitovatelná varianta je uzamčena posledním elektronickým podpisem!:e:Wselect 'true' where exists(select 1 from dba.eid_as_podpis x with(index(pk_eid_as_podpis)) where x.att_id=#XATT_ID and x.podpis_id=(select max(m.podpis_id) from dba.eid_as_podpis m with(index(pk_eid_as_podpis)) where m.att_id=x.att_id) and x.zamek=1); #CLOSE_AFTER_APP; #SETVAL_REFRESH1=noedit_varianta=1; #SETVAL_REFRESH2=main_att_id=#XMAIN_ATT_ID; #SETVAL_REFRESH3=att_id=#XATT_ID; #HIDEPB; #DO_THIS_USERSUB; #USERSUB1=#XMAIN_ATT_ID=att_id:NA; #USERSUB2=#XATT_ID=select isnull(max(att.att_id),1) from dba.attach_store att where att.tabulka='attach_pdf' and att.pk='#XMAIN_ATT_ID' and att.poradi= (select max(a.poradi) from dba.attach_store a where a.tabulka='attach_pdf' and a.pk='#XMAIN_ATT_ID'):NA; #PRAVO_DEF=40;;#SETMENUID_END; 15USER_END 16ID_MENU=MNID/ATTCH/202206141311018608156757 16BUTTON_TITLE=Umístění elektronického podpisu 16TYP=SEZNAM 16SEZ_TABULKA=eid_as_sign 16SEZ_VAZBA=TRUE 16SEZ_VAZBA_COLUMN1=att_id 16USER_BEGIN ;#SETMENUID=O/ATTCH/0/attach_store//202206141311018608156757/20/40/0; #SPACEBEFORE; #BUTTON_GROUP=Elektronický podpis; #NOEDIT_EVAL_LEFT=not (lower(right(file_name,4))='.pdf' or do_noedit=1); #.CLOSE_AFTER_APP; #PRAVO_DEF=40;;#SETMENUID_END; 16USER_END 17ID_MENU=MNID/ATTCH/202304211541519804059316 17BUTTON_TITLE=Odebrat elektronické podpisy z PDF souboru 17CLASS=as_attach_cert 17USER_BEGIN ;#SETMENUID=O/ATTCH/0/attach_store//202304211541519804059316/20/40/0; #SPACEBEFORE; #NOEDIT_EVAL_LEFT=(zamek=1 and zamek_autor<>'\\IDU') or signature_status=0 or not (lower(right(file_name,4))='.pdf' or (do_noedit>=1 and exists_noedit=1)); #NOLINK; #BUTTON_GROUP=Elektronický podpis; #NOMULTIWARN; #BUTTON_COMMAND=RemoveSignaturePdf; #PRAVO_DEF=40;;#SETMENUID_END; 17USER_END 18ID_MENU=MNID/SEKR/201011151451145244870459 18BUTTON_TITLE=Nastavit Odeslat přílohu 18TYP=SQLCOMMAND 18USER_BEGIN ;#BUTTON_WRITE_RIGHT=attach_store;;#SETMENUID=O/SEKR/0/attach_store_sekr//201011151451145244870459/20/40/0; #BUTTON_GROUP=Odeslaná pošta; NO_DMSNOEDIT_EVAL_LEFT=file_name='' or local=1 or (zamek=1 and muj_zamek=0) or odeslat=1 or stav_verze<1 or stav_verze>2 or (loc_blob_id=1 and ext_blob_id=1 and file_pathname='') or rel_att_type in (73,75,76); #NOEDIT_EVAL_LEFT=file_name='' or odeslat=1 or (loc_blob_id=1 and ext_blob_id=1 and file_pathname='') or rel_att_type in (73,75,76); #DO_PARENT_USERSUB; #BUTTON_QUESTION1=Chcete opravdu nastavit příznak Odeslat přílohu? Příloha bude odeslána prostřednictvím požadavku k odeslání v modulu Sekretářka.; #MULTI_BUTTON; #REFRESHROW; #REFRESHROWS_MULTI; #PERCENT_OFF; #PARENTDW=attach_store; #SQLCOMMAND1_BEGIN; update dba.attach_store set xcmd='#ODP;', odeslat=1 from dba.attach_store attach_store with(index(pk_attach_store)) where tabulka=%tabulka% and pk=%pk% and poradi=%poradi% and odeslat=0 #SQLCOMMAND1_END; ;#SETMENUID_END; 18USER_END 19ID_MENU=MNID/SEKR/201011151454199104492558 19BUTTON_TITLE=Zrušit Odeslat přílohu 19TYP=SQLCOMMAND 19USER_BEGIN ;#BUTTON_WRITE_RIGHT=attach_store;;#SETMENUID=O/SEKR/0/attach_store_sekr//201011151454199104492558/20/40/0; #BUTTON_GROUP=Odeslaná pošta; #NOEDIT_EVAL_LEFT=(id_posty<>'' and (stav_odeslani<>0 or tabulka<>'odpost_kniha')) or odeslat=0 or rel_att_type in (73,75,76); #BUTTON_QUESTION1=Chcete opravdu zrušit příznak Odeslat přílohu? Příloha nebude odeslána prostřednictvím požadavku k odeslání v modulu Sekretářka.; #MULTI_BUTTON; #REFRESHROW; #REFRESHROWS_MULTI; #PERCENT_OFF; #PARENTDW=attach_store; #SQLCOMMAND1_BEGIN; update dba.attach_store set xcmd='#ODP;', odeslat=0 from dba.attach_store attach_store with(index(pk_attach_store)) where tabulka=%tabulka% and pk=%pk% and poradi=%poradi% and odeslat=1 #SQLCOMMAND1_END; ;#SETMENUID_END; 19USER_END 20ID_MENU=MNID/SEKR/201011151456513153662001 20BUTTON_TITLE=Požadavek odeslané pošty 20TYP=SEZNAM 20SEZ_TABULKA=odpost_doklady 20SEZ_TITLE=Požadavek odeslané pošty 20SEZ_VAZBA=TRUE 20SEZ_VAZBA_COLUMN1=id_posty_poz 20USER_BEGIN ;#SETMENUID=O/SEKR/0/attach_store_sekr//201011151456513153662001/20/40/0; #BUTTON_GROUP=Odeslaná pošta; #NOEDIT_EVAL_LEFT=isnull(id_posty_poz) or id_posty_poz=0 or rel_att_type in (73,75,76);;#SETMENUID_END; 20USER_END 21ID_MENU=MNID/SEKR/201011151458072493073819 21BUTTON_TITLE=Doklad odeslané pošty 21TYP=SEZNAM 21SEZ_TABULKA=odpost_kniha 21SEZ_TITLE=Doklad odeslané pošty 21SEZ_PODMINKA=odpost_kniha.doklad=%if(tabulka='odpost_kniha',pk,id_posty)% 21SEZ_V_PODMINCE=doklad,fiskalni_rok,denik,rada,citac 21USER_BEGIN ;#SETMENUID=O/SEKR/0/attach_store_sekr//201011151458072493073819/20/40/0; #BUTTON_GROUP=Odeslaná pošta; #NOADDCOMBO; #PARENTDW=attach_store; #REFRESHROW_ON_CLOSE; #NOEDIT_EVAL_LEFT=(isnull(id_posty) or id_posty='') and tabulka<>'odpost_kniha' or rel_att_type in (73,75,76);;#SETMENUID_END; 21USER_END 22ID_MENU=MNID/SEKR/201012221137526337751642 22BUTTON_TITLE=Odešli dokument ručně 22TYP=GROUP 22USER_BEGIN ;#SETMENUID=O/SEKR/0/attach_store_sekr//201012221137526337751642/20/40/0; #BUTTON_GROUP=Odeslaná pošta; #DO_PARENT_USERSUB; NO_DMSNOEDIT_EVAL_LEFT=id_posty<>'' or tabulka='odpost_kniha' or stav_verze<1 or stav_verze>2 or (loc_blob_id=1 and ext_blob_id=1 and file_pathname='') or rel_att_type in (73,75,76); #NOEDIT_EVAL_LEFT=id_posty<>'' or tabulka='odpost_kniha' or (loc_blob_id=1 and ext_blob_id=1 and file_pathname='') or rel_att_type in (73,75,76); #MULTI_BUTTON; #REFRESHROWS_MULTI; #REFRESHROW; #SETWSOURCE; #DO_PARENT_USERSUB; #BUTTON_SUB1=#XATTACH_TABLE=tabulka:NA; #BUTTON_SUB2=#XATTACH_PK=pk:NA; #BUTTON_SUB3=#XSPID=select @@spid:NA; #BUTTON_SUB4=#XIDTEMP=select isnull(max(id),0)+1 from dba.temptable where spid=@@spid:NA; ;#SETMENUID_END; 22USER_END 2201ID_MENU=MNID/SEKR/201012221147106562523196 2201BUTTON_TITLE=SQLCOMMAND 2201TYP=SQLCOMMAND 2201USER_BEGIN ;#TYPP=45;;#SETMENUID=O/SEKR/0/attach_store_sekr//201012221147106562523196/45/40/0; #PERCENT_OFF; #MULTI_BUTTON; #PARENTDW=attach_store; #SQLCOMMAND1_BEGIN; insert into dba.temptable(spid, id, poradi, varchar01, varchar02, int03) select #XSPID, #XIDTEMP, isnull(max(poradi),0)+1, %tabulka%, %pk%, %poradi% from dba.temptable temptable with(index(pk_temptable)) where spid=#XSPID and id=#XIDTEMP #SQLCOMMAND1_END; ;#SETMENUID_END; 2201USER_END 2202ID_MENU=MNID/SEKR/201012221147343213572115 2202BUTTON_TITLE=MULTIDETAIL 2202TYP=MULTIDETAIL 2202DET_TITLE=Odešli dokument ručně 2202USER_BEGIN ;#TYPP=45;;#SETMENUID=O/SEKR/0/attach_store_sekr//201012221147343213572115/45/40/0; #GROUP_WAIT; #.REFRESH; #NOMULTI; #EDIT_COL_DEFAULT1=fiskalni_rok^denik^rada^odeslani^id_partnera^id_firmy_crm^osoba_rc='\\FR_SEKR^#XDENIK^#XRADA^#XODESLANI^#XPARTNER^#XFIRMA^#XOSOBA'; #.EDIT_COL_DEFAULT_MULTI1=fiskalni_rok^denik^rada^odeslani^id_partnera^id_firmy_crm^osoba_rc='\\FR_SEKR^#XDENIK^#XRADA^#XODESLANI^#XPARTNER^#XFIRMA^#XOSOBA'; #EDIT_COL_TESTEVAL1=Není vyplněná řada odeslané pošty|rada<>'' and denik<>''; #EDIT_COL_TESTEVAL2=Není vyplněný partner, firma nebo osoba|id_partnera<>'' or id_firmy_crm<>'' or osoba_rc<>''; #EDIT_COL_TESTEVAL3=Není vyplněný způsob odeslání pošty|odeslani<>''; #EDIT_COL_DISABLE=fiskalni_rok,denik#DISCRM; #EDIT_COL_NOTAB; #EDIT_COL_NOQUESTION; #EDIT_COL_NOINFO; #EDIT_COL_ALL_MODIFIED; #------------------------------------------------; #------------------------------------------------; #EDIT_GROUP1=Řada odeslané pošty; #EDIT_COL1_TEXT=Fiskální rok; #EDIT_COL1=odpost_kniha.fiskalni_rok; #EDIT_COL1_TAG_BEGIN; #F3TAB=fiscis; #F3SAY=nazev; #EDIT_COL1_TAG_END; #------------------------------------------------; #EDIT_COL2_TEXT=Kniha odeslané pošty; #EDIT_COL2=odpost_kniha.denik; #EDIT_COL2_TAG_BEGIN; #F3TAB=odpost_deniky; #F3COL=fiskalni_rok,denik; #F3SAY=nazev; #EDIT_COL2_TAG_END; #------------------------------------------------; #EDIT_COL3_TEXT=Řada odeslané pošty>>; #EDIT_COL3=odpost_kniha.rada; #EDIT_COL3_TAG_BEGIN; #F3TAB=odpost_rada; #F3COL=fiskalni_rok,denik,rada; #F3SAY=nazev; #F3WHERE1=odpost_rada.fiskalni_rok=%fiskalni_rok% and exists(select 1 from dba.odpost_zpusoby z with(index(pk_odpost_zpusoby)) where z.odeslani=odpost_rada.odeslani and z.forma_odeslani='MANUAL'); #F3NOFILTER1=fiskalni_rok; #SELECT1=odeslani=select odeslani from dba.odpost_rada where fiskalni_rok=%fiskalni_rok% and denik=%denik% and rada=%rada%:Wrada<>''; #SELECT2=odeslani='':Wnot rada<>''; #EDIT_COL3_TAG_END; #------------------------------------------------; #EDIT_COL4_TEXT=Způsob odeslání>>; #EDIT_COL4=odpost_kniha.odeslani; #EDIT_COL4_TAG_BEGIN; #F3TAB=odpost_zpusoby; #F3SAY=nazev; #F3WHERE1=odpost_zpusoby.forma_odeslani='MANUAL'; #EDIT_COL4_TAG_END; #------------------------------------------------; #EDIT_GROUP5=Partner; #EDIT_COL5_TEXT=ID partnera>>; #EDIT_COL5=odpost_kniha.id_partnera; #EDIT_COL5_TAG_BEGIN; #F3TAB=parcis; #F3SAY=zkraceny_nazev; #EDIT_COL5_TAG_END; #------------------------------------------------; #EDIT_COL6_TEXT=Pořadí osoby partnera>>; #EDIT_COL6=odpost_kniha.poradi_paroso; #EDIT_COL6_TAG_BEGIN; #F3TAB=paroso; #F3COL=id_partnera,poradi_paroso; #F3WHERE1=paroso.id_partnera=%id_partnera% and paroso.poradi<>0:Wid_partnera<>''; #F3WHERE2=paroso.poradi<>0:Wnot id_partnera<>''; #F3NOFILTER1=id_partnera:Wid_partnera<>''; #F3SAY=prijmeni+' '+jmeno; #EDIT_COL6_TAG_END; #------------------------------------------------; #EDIT_GROUP7=Firma CRM; #EDIT_COL7_TEXT=ID firmy CRM>>; #EDIT_COL7=odpost_kniha.id_firmy_crm; #EDIT_COL7_TAG_BEGIN; #F3TAB=crm_fir_cis; #F3SAY=zkr_naz; #EDIT_COL7_TAG_END; #------------------------------------------------; #EDIT_COL8_TEXT=Pořadí osoby CRM>>; #EDIT_COL8=odpost_kniha.osoba_crm; #EDIT_COL8_TAG_BEGIN; #F3TAB=crm_fir_oso; #F3COL=id_firmy_crm,osoba_crm; #F3WHERE1=crm_fir_oso.id_firmy=%id_firmy_crm% and crm_fir_oso.osoba<>0:Wid_firmy_crm<>''; #F3WHERE2=crm_fir_oso.osoba<>0:Wnot id_firmy_crm<>''; #F3NOFILTER1=id_firmy:Wid_firmy_crm<>''; #F3SAY=prijmeni+' '+jmeno; #EDIT_COL8_TAG_END; #------------------------------------------------; #EDIT_GROUP9=Osoba; #EDIT_COL9_TEXT=Osoba>>; #EDIT_COL9=odpost_kniha.osoba_rc; #EDIT_COL9_TAG_BEGIN; #F3TAB=osoby; #F3SAY=prijmeni+' '+jmeno; #EDIT_COL9_TAG_END; #------------------------------------------------; #EDIT_GROUP10=Předmět / Věc; #EDIT_COL10_TEXT=Předmět / Věc; #EDIT_COL10=odpost_kniha.text; #EDIT_COL10_BIG; #EDIT_COL_SQLAFTER1_BEGIN; exec dba.sekr_attach_odesli #XSPID, #XIDTEMP, !fiskalni_rok!, !denik!, !rada!, !odeslani!, !id_partnera!, !poradi_paroso!, !id_firmy_crm!, !osoba_crm!, !osoba_rc!, !text! #EDIT_COL_SQLAFTER1_END; #USERSUB1=#STRING=select isnull((select isnull(max(rtrim(denik)+'^'+rtrim(rada)+'^'+rtrim(odeslani)),'^^')+'^'+convert(varchar(20)/*BY*/,count(1)) from dba.odpost_rada r with(index(pk_odpost_rada)) where r.fiskalni_rok='\\FR_SEKR' and r.denik>'' and r.platnost=1 and exists(select 1 from dba.odpost_zpusoby z with(index(odpost_zpusoby_forma)) where z.odeslani=r.odeslani and z.forma_odeslani='MANUAL') and exists(select 1 from dba.odpost_druhy d with(index(pk_odpost_druhy)) where d.druh=r.druh and d.modul='')),'') +'^'+isnull((select isnull(max(rtrim(denik)+'^'+rtrim(rada)+'^'+rtrim(odeslani)),'^^')+'^'+convert(varchar(20)/*BY*/,count(1)) from dba.odpost_rada r with(index(pk_odpost_rada)) where r.fiskalni_rok='\\FR_SEKR' and r.denik>'' and r.platnost=1 and exists(select 1 from dba.odpost_zpusoby z with(index(odpost_zpusoby_forma)) where z.odeslani=r.odeslani and z.forma_odeslani='MANUAL')),''); #USERSUB2=#XDENIK=if(item(#STRING,4)='1',item(#STRING,1),if(item(#STRING,8)='1',item(#STRING,5),'')):NA; #USERSUB3=#XRADA=if(item(#STRING,4)='1',item(#STRING,2),if(item(#STRING,8)='1',item(#STRING,6),'')):NA; #USERSUB4=#XODESLANI=if(item(#STRING,4)='1',item(#STRING,3),if(item(#STRING,8)='1',item(#STRING,7),'')):NA; #USERSUB5=#PARTNER_FIRMA=execute dba.sekr_attach_zjisti '#XATTACH_TABLE', '#XATTACH_PK'; #USERSUB6=#XPARTNER=item(#PARTNER_FIRMA,1):NA; #USERSUB7=#XFIRMA=item(#PARTNER_FIRMA,2):NA:Wislicmodul('CRM'); #USERSUB8=#XFIRMA='':NA:Wnot islicmodul('CRM'); #USERSUB9=#XOSOBA=item(#PARTNER_FIRMA,3):NA; #USERSUB10=#DISCRM=if(islicmodul('CRM'),'',',id_firmy_crm,osoba_crm'):NA;;#SETMENUID_END; 2202USER_END 2203ID_MENU=MNID/SEKR/201012221147533461776130 2203BUTTON_TITLE=SQLCOMMAND 2203TYP=SQLCOMMAND 2203USER_BEGIN ;#TYPP=45;;#SETMENUID=O/SEKR/0/attach_store_sekr//201012221147533461776130/45/40/0; #SQLCOMMAND1_BEGIN; delete dba.temptable from dba.temptable temptable with(index(pk_temptable)) where spid=#XSPID and id=#XIDTEMP #SQLCOMMAND1_END; ;#SETMENUID_END; 2203USER_END 2204ID_MENU=MNID/SEKR/201012221148106181838950 2204BUTTON_TITLE=GROUP 2204TYP=GROUP 2204USER_BEGIN ;#TYPP=45;;#SETMENUID=O/SEKR/0/attach_store_sekr//201012221148106181838950/45/40/0; #GROUP_WHEN=#ID_POSTY<>''; #GROUP_WAIT; #SETWSOURCE; #XMESSAGE1=Doklad Odeslané pošty byl úspěšně vytvořen. Chcete zobrazit tento doklad?:q; #PARENTDW=attach_store; #GROUP_SUB1=#ID_POSTY=select id_posty from dba.attach_store attach_store with(index(pk_attach_store)) where tabulka=%tabulka% and pk=%pk% and poradi=%poradi%#NOCACHE;;#SETMENUID_END; 2204USER_END 220401ID_MENU=MNID/SEKR/201012221148364814965374 220401BUTTON_TITLE=SEZNAM 220401TYP=SEZNAM 220401SEZ_TABULKA=odpost_kniha 220401SEZ_TITLE=Doklad odeslané pošty 220401SEZ_PODMINKA=odpost_kniha.doklad=#ID_POSTY 220401SEZ_V_PODMINCE=doklad,fiskalni_rok,denik,rada,citac 220401USER_BEGIN ;#TYPP=45;;#SETMENUID=O/SEKR/0/attach_store_sekr//201012221148364814965374/45/40/0; #DO_GROUP_SUB; #NOADDCOMBO; ;#SETMENUID_END; 220401USER_END 23ID_MENU=MNID/SEKR/201012171043395368455060 23BUTTON_TITLE=Odešli dokument datovou schránkou 23TYP=GROUP 23USER_BEGIN ;#SETMENUID=O/SEKR/0/attach_store_sekr//201012171043395368455060/20/40/0; #BUTTON_GROUP=Odeslaná pošta; #DO_PARENT_USERSUB; NO_DMSNOEDIT_EVAL_LEFT=id_posty<>'' or tabulka='odpost_kniha' or stav_verze<1 or stav_verze>2 or (loc_blob_id=1 and ext_blob_id=1 and file_pathname='') or rel_att_type in (73,75,76); #NOEDIT_EVAL_LEFT=id_posty<>'' or tabulka='odpost_kniha' or (loc_blob_id=1 and ext_blob_id=1 and file_pathname='') or rel_att_type in (73,75,76); #MULTI_BUTTON; #REFRESHROWS_MULTI; #REFRESHROW; #SETWSOURCE; #DO_PARENT_USERSUB; #BUTTON_SUB1=#XATTACH_TABLE=tabulka:NA; #BUTTON_SUB2=#XATTACH_PK=pk:NA; #BUTTON_SUB3=#XSPID=select @@spid:NA; #BUTTON_SUB4=#XIDTEMP=select isnull(max(id),0)+1 from dba.temptable where spid=@@spid:NA; ;#SETMENUID_END; 23USER_END 2301ID_MENU=MNID/SEKR/201012211630208612664576 2301BUTTON_TITLE=SQLCOMMAND 2301TYP=SQLCOMMAND 2301USER_BEGIN ;#TYPP=45;;#SETMENUID=O/SEKR/0/attach_store_sekr//201012211630208612664576/45/40/0; #PERCENT_OFF; #MULTI_BUTTON; #PARENTDW=attach_store; #SQLCOMMAND1_BEGIN; insert into dba.temptable(spid, id, poradi, varchar01, varchar02, int03) select #XSPID, #XIDTEMP, isnull(max(poradi),0)+1, %tabulka%, %pk%, %poradi% from dba.temptable temptable with(index(pk_temptable)) where spid=#XSPID and id=#XIDTEMP #SQLCOMMAND1_END; ;#SETMENUID_END; 2301USER_END 2302ID_MENU=MNID/SEKR/201012200911333922904385 2302BUTTON_TITLE=MULTIDETAIL 2302TYP=MULTIDETAIL 2302DET_TITLE=Odešli dokument datovou schránkou 2302USER_BEGIN ;#TYPP=45;;#SETMENUID=O/SEKR/0/attach_store_sekr//201012200911333922904385/45/40/0; #GROUP_WAIT; #.REFRESH; #NOMULTI; #EDIT_COL_DEFAULT1=idds^fiskalni_rok^denik^rada^odeslani^id_partnera^id_firmy_crm^idds_2^idds_3='#XIDDS^\\FR_SEKR^#XDENIK^#XRADA^#XODESLANI^#XPARTNER^#XFIRMA^#IDDS_2^#IDDS_3'; #.EDIT_COL_DEFAULT_MULTI1=idds^fiskalni_rok^denik^rada^odeslani^id_partnera^id_firmy_crm^idds_2^idds_3='#XIDDS^\\FR_SEKR^#XDENIK^#XRADA^#XODESLANI^#XPARTNER^#XFIRMA^#IDDS_2^#IDDS_3'; #EDIT_COL_TESTEVAL1=Není vyplněná řada odeslané pošty|rada<>'' and denik<>''; #EDIT_COL_TESTEVAL2=Není vyplněný partner nebo firma|id_partnera<>'' or id_firmy_crm<>''; #EDIT_COL_TESTEVAL3=Není vyplněný způsob odeslání pošty|odeslani<>''; #EDIT_COL_TESTEVAL4=Není vyplněné ID datové schránky partnera nebo firmy|idds_2<>'' or idds_3<>''; #EDIT_COL_DISABLE=fiskalni_rok,denik,idds_2,idds_3#DISCRM; #EDIT_COL_NOTAB; #EDIT_COL_NOQUESTION; #EDIT_COL_NOINFO; #EDIT_COL_ALL_MODIFIED; #------------------------------------------------; #------------------------------------------------; #EDIT_GROUP1=Datová schránka, řada odeslané pošty; #EDIT_COL1=odpost_rada.idds; #EDIT_COL1_TAG_BEGIN; #F3TAB=kds_ds; #F3SAY=nazev; #EDIT_COL1_TAG_END; #------------------------------------------------; #EDIT_COL2_TEXT=Fiskální rok; #EDIT_COL2=odpost_kniha.fiskalni_rok; #EDIT_COL2_TAG_BEGIN; #F3TAB=fiscis; #F3SAY=nazev; #EDIT_COL2_TAG_END; #------------------------------------------------; #EDIT_COL3_TEXT=Kniha odeslané pošty; #EDIT_COL3=odpost_kniha.denik; #EDIT_COL3_TAG_BEGIN; #F3TAB=odpost_deniky; #F3COL=fiskalni_rok,denik; #F3SAY=nazev; #EDIT_COL3_TAG_END; #------------------------------------------------; #EDIT_COL4_TEXT=Řada odeslané pošty>>; #EDIT_COL4=odpost_kniha.rada; #EDIT_COL4_TAG_BEGIN; #F3TAB=odpost_rada; #F3COL=fiskalni_rok,denik,rada; #F3SAY=nazev; #F3WHERE1=odpost_rada.fiskalni_rok=%fiskalni_rok% and odpost_rada.idds=%idds% and exists(select 1 from dba.odpost_zpusoby z with(index(pk_odpost_zpusoby)) where z.odeslani=odpost_rada.odeslani and z.forma_odeslani='ISDS'):Widds<>''; #F3WHERE2=odpost_rada.fiskalni_rok=%fiskalni_rok% and exists(select 1 from dba.odpost_zpusoby z with(index(pk_odpost_zpusoby)) where z.odeslani=odpost_rada.odeslani and z.forma_odeslani='ISDS'):Wnot idds<>''; #F3NOFILTER1=fiskalni_rok; #F3NOFILTER2=fiskalni_rok; #SELECT1=odeslani=select odeslani from dba.odpost_rada where fiskalni_rok=%fiskalni_rok% and denik=%denik% and rada=%rada%:Wrada<>''; #SELECT2=odeslani='':Wnot rada<>''; #EDIT_COL4_TAG_END; #------------------------------------------------; #EDIT_COL5_TEXT=Způsob odeslání>>; #EDIT_COL5=odpost_kniha.odeslani; #EDIT_COL5_TAG_BEGIN; #F3TAB=odpost_zpusoby; #F3SAY=nazev; #F3WHERE1=odpost_zpusoby.forma_odeslani='ISDS'; #EDIT_COL5_TAG_END; #------------------------------------------------; #EDIT_GROUP6=Partner; #EDIT_COL6_TEXT=ID partnera>>; #EDIT_COL6=odpost_kniha.id_partnera; #EDIT_COL6_TAG_BEGIN; #F3TAB=parcis; #F3SAY=zkraceny_nazev; #_F3WHERE=isnull(parcis.idds,'')<>'' and isnull(parcis.idds,'')<>%idds%; #SELECT1=idds_2=select isnull(p.idds,'') from dba.parcis p where p.id_partnera=%id_partnera%:Wid_partnera<>''; #SELECT2=idds_2='':Wnot id_partnera<>''; #EDIT_COL6_TAG_END; #------------------------------------------------; #EDIT_COL7_TEXT=Pořadí osoby partnera>>; #EDIT_COL7=odpost_kniha.poradi_paroso; #EDIT_COL7_TAG_BEGIN; #F3TAB=paroso; #F3COL=id_partnera,poradi_paroso; #F3WHERE1=paroso.id_partnera=%id_partnera% and paroso.poradi<>0:Wid_partnera<>''; #F3WHERE2=paroso.poradi<>0:Wnot id_partnera<>''; #F3NOFILTER1=id_partnera:Wid_partnera<>''; #F3SAY=prijmeni+' '+jmeno; #EDIT_COL7_TAG_END; #------------------------------------------------; #EDIT_COL8_TEXT=ID datové schránky partnera; #EDIT_COL8=odpost_rada.idds; #------------------------------------------------; #EDIT_GROUP9=Firma CRM; #EDIT_COL9_TEXT=ID firmy CRM>>; #EDIT_COL9=odpost_kniha.id_firmy_crm; #EDIT_COL9_TAG_BEGIN; #F3TAB=crm_fir_cis; #F3SAY=zkr_naz; #_F3WHERE=isnull(crm_fir_cis.idds,'')<>'' and isnull(crm_fir_cis.idds,'')<>%idds%; #SELECT1=idds_3=select isnull(f.idds,'') from dba.crm_fir_cis f where f.id_firmy=%id_firmy_crm%:Wid_firmy_crm<>'' and islicmodul('CRM'); #SELECT2=idds_3='':Wnot id_firmy_crm<>''; #EDIT_COL9_TAG_END; #------------------------------------------------; #EDIT_COL10_TEXT=Pořadí osoby CRM>>; #EDIT_COL10=odpost_kniha.osoba_crm; #EDIT_COL10_TAG_BEGIN; #F3TAB=crm_fir_oso; #F3COL=id_firmy_crm,osoba_crm; #F3WHERE1=crm_fir_oso.id_firmy=%id_firmy_crm% and crm_fir_oso.osoba<>0:Wid_firmy_crm<>''; #F3WHERE2=crm_fir_oso.osoba<>0:Wnot id_firmy_crm<>''; #F3NOFILTER1=id_firmy:Wid_firmy_crm<>''; #F3SAY=prijmeni+' '+jmeno; #EDIT_COL10_TAG_END; #------------------------------------------------; #EDIT_COL11_TEXT=ID datové schránky firmy; #EDIT_COL11=odpost_rada.idds; #------------------------------------------------; #EDIT_GROUP12=Předmět / Věc; #EDIT_COL12_TEXT=Předmět / Věc; #EDIT_COL12=odpost_kniha.text; #EDIT_COL12_BIG; #EDIT_COL_SQLAFTER1_BEGIN; exec dba.sekr_attach_odesli #XSPID, #XIDTEMP, !fiskalni_rok!, !denik!, !rada!, !odeslani!, !id_partnera!, !poradi_paroso!, !id_firmy_crm!, !osoba_crm!, '', !text! #EDIT_COL_SQLAFTER1_END; #USERSUB1=#XIDDS=select coalesce( (select max(idds) from dba.kds_ds kds_ds with(index(pk_kds_ds)) where idds>'' and platnost=1 and hlavni=1), (select max(idds) from dba.kds_ds kds_ds with(index(pk_kds_ds)) where idds>'' and platnost=1),''):NA; #USERSUB2=#STRING=select isnull((select isnull(max(rtrim(denik)+'^'+rtrim(rada)+'^'+rtrim(odeslani)),'^^')+'^'+convert(varchar(20)/*BY*/,count(1)) from dba.odpost_rada r with(index(pk_odpost_rada)) where r.fiskalni_rok='\\FR_SEKR' and r.denik>'' and r.idds='#XIDDS' and r.platnost=1 and exists(select 1 from dba.odpost_zpusoby z with(index(odpost_zpusoby_forma)) where z.odeslani=r.odeslani and z.forma_odeslani='ISDS') and exists(select 1 from dba.odpost_druhy d with(index(pk_odpost_druhy)) where d.druh=r.druh and d.modul='')),'') +'^'+isnull((select isnull(max(rtrim(denik)+'^'+rtrim(rada)+'^'+rtrim(odeslani)),'^^')+'^'+convert(varchar(20)/*BY*/,count(1)/*BY*/) from dba.odpost_rada r with(index(pk_odpost_rada)) where r.fiskalni_rok='\\FR_SEKR' and r.denik>'' and r.idds='#XIDDS' and r.platnost=1 and exists(select 1 from dba.odpost_zpusoby z with(index(odpost_zpusoby_forma)) where z.odeslani=r.odeslani and z.forma_odeslani='ISDS')),''); #USERSUB3=#XDENIK=if(item(#STRING,4)='1',item(#STRING,1),if(item(#STRING,8)='1',item(#STRING,5),'')):NA; #USERSUB4=#XRADA=if(item(#STRING,4)='1',item(#STRING,2),if(item(#STRING,8)='1',item(#STRING,6),'')):NA; #USERSUB5=#XODESLANI=if(item(#STRING,4)='1',item(#STRING,3),if(item(#STRING,8)='1',item(#STRING,7),'')):NA; #USERSUB6=#PARTNER_FIRMA=execute dba.sekr_attach_zjisti '#XATTACH_TABLE', '#XATTACH_PK'; #USERSUB7=#XPARTNER=item(#PARTNER_FIRMA,1):NA; #USERSUB8=#XFIRMA=item(#PARTNER_FIRMA,2):NA:Wislicmodul('CRM'); #USERSUB9=#XFIRMA='':NA:Wnot islicmodul('CRM'); #USERSUB10=#IDDS_2=select isnull(idds,'') from dba.parcis parcis with(index(pk_parcis)) where id_partnera='#XPARTNER':NA; #USERSUB11=#IDDS_3=select isnull(idds,'') from dba.crm_fir_cis crm_fir_cis with(index(pk_crm_fir_cis)) where id_firmy='#XFIRMA':NA:Wislicmodul('CRM'); #USERSUB12=#IDDS_3='':NA:Wnot islicmodul('CRM'); #USERSUB13=#DISCRM=if(islicmodul('CRM'),'',',id_firmy_crm,osoba_crm'):NA; ;#SETMENUID_END; 2302USER_END 2303ID_MENU=MNID/SEKR/201012211649023800917333 2303BUTTON_TITLE=SQLCOMMAND 2303TYP=SQLCOMMAND 2303USER_BEGIN ;#TYPP=45;;#SETMENUID=O/SEKR/0/attach_store_sekr//201012211649023800917333/45/40/0; #SQLCOMMAND1_BEGIN; delete dba.temptable from dba.temptable temptable with(index(pk_temptable)) where spid=#XSPID and id=#XIDTEMP #SQLCOMMAND1_END; ;#SETMENUID_END; 2303USER_END 2304ID_MENU=MNID/SEKR/201012220938541659657617 2304BUTTON_TITLE=GROUP 2304TYP=GROUP 2304USER_BEGIN ;#TYPP=45;;#SETMENUID=O/SEKR/0/attach_store_sekr//201012220938541659657617/45/40/0; #GROUP_WHEN=#ID_POSTY<>''; #GROUP_WAIT; #SETWSOURCE; #XMESSAGE1=Doklad Odeslané pošty byl úspěšně vytvořen. Chcete zobrazit tento doklad?:q; #PARENTDW=attach_store; #GROUP_SUB1=#ID_POSTY=select id_posty from dba.attach_store attach_store with(index(pk_attach_store)) where tabulka=%tabulka% and pk=%pk% and poradi=%poradi%#NOCACHE;;#SETMENUID_END; 2304USER_END 230401ID_MENU=MNID/SEKR/201012221114495182320820 230401BUTTON_TITLE=SEZNAM 230401TYP=SEZNAM 230401SEZ_TABULKA=odpost_kniha 230401SEZ_TITLE=Doklad odeslané pošty 230401SEZ_PODMINKA=odpost_kniha.doklad=#ID_POSTY 230401SEZ_V_PODMINCE=doklad,fiskalni_rok,denik,rada,citac 230401USER_BEGIN ;#TYPP=45;;#SETMENUID=O/SEKR/0/attach_store_sekr//201012221114495182320820/45/40/0; #DO_GROUP_SUB; #NOADDCOMBO; ;#SETMENUID_END; 230401USER_END 24ID_MENU=MNID/SEKR/201012230827370375700194 24BUTTON_TITLE=Odešli dokument elektronickou poštou 24TYP=GROUP 24USER_BEGIN ;#SETMENUID=O/SEKR/0/attach_store_sekr//201012230827370375700194/20/40/0; #BUTTON_GROUP=Odeslaná pošta; #DO_PARENT_USERSUB; NO_DMSNOEDIT_EVAL_LEFT=id_posty<>'' or tabulka='odpost_kniha' or stav_verze<1 or stav_verze>2 or (loc_blob_id=1 and ext_blob_id=1 and file_pathname='') or rel_att_type in (73,75,76); #NOEDIT_EVAL_LEFT=id_posty<>'' or tabulka='odpost_kniha' or (loc_blob_id=1 and ext_blob_id=1 and file_pathname='') or rel_att_type in (73,75,76); #MULTI_BUTTON; #REFRESHROWS_MULTI; #REFRESHROW; #SETWSOURCE; #DO_PARENT_USERSUB; #BUTTON_SUB1=#XATTACH_TABLE=tabulka:NA; #BUTTON_SUB2=#XATTACH_PK=pk:NA; #BUTTON_SUB3=#XSPID=select @@spid:NA; #BUTTON_SUB4=#XIDTEMP=select isnull(max(id),0)+1 from dba.temptable where spid=@@spid:NA; ;#SETMENUID_END; 24USER_END 2401ID_MENU=MNID/SEKR/201012230833355070087755 2401BUTTON_TITLE=SQLCOMMAND 2401TYP=SQLCOMMAND 2401USER_BEGIN ;#TYPP=45;;#SETMENUID=O/SEKR/0/attach_store_sekr//201012230833355070087755/45/40/0; #PERCENT_OFF; #MULTI_BUTTON; #PARENTDW=attach_store; #SQLCOMMAND1_BEGIN; insert into dba.temptable(spid, id, poradi, varchar01, varchar02, int03) select #XSPID, #XIDTEMP, isnull(max(poradi),0)+1, %tabulka%, %pk%, %poradi% from dba.temptable temptable with(index(pk_temptable)) where spid=#XSPID and id=#XIDTEMP #SQLCOMMAND1_END; ;#SETMENUID_END; 2401USER_END 2402ID_MENU=MNID/SEKR/201012230833516805360898 2402BUTTON_TITLE=MULTIDETAIL 2402TYP=MULTIDETAIL 2402DET_TITLE=Odešli dokument elektronickou poštou 2402USER_BEGIN ;#TYPP=45;;#SETMENUID=O/SEKR/0/attach_store_sekr//201012230833516805360898/45/40/0; #GROUP_WAIT; #_REFRESH; #NOMULTI; #EDIT_COL_DEFAULT1_BEGIN;fiskalni_rok^denik^rada^odeslani^id_partnera^id_firmy_crm^osoba_rc^e_mail^telefon^fax='\\FR_SEKR^#XDENIK^#XRADA^#XODESLANI^#XPARTNER^#XFIRMA^#XOSOBA^#XE_MAIL^#XTELEFON^#XFAX'#EDIT_COL_DEFAULT1_END; --#EDIT_COL_DEFAULT_MULTI1_BEGIN;fiskalni_rok^denik^rada^odeslani^id_partnera^id_firmy_crm^osoba_rc^e_mail^telefon^fax='\\FR_SEKR^#XDENIK^#XRADA^#XODESLANI^#XPARTNER^#XFIRMA^#XOSOBA^#XE_MAIL^#XTELEFON^#XFAX'#EDIT_COL_DEFAULT_MULTI1_END; #EDIT_COL_TESTEVAL1=Není vyplněná řada odeslané pošty|rada<>'' and denik<>''; #EDIT_COL_TESTEVAL2=Není vyplněný partner, firma nebo osoba|id_partnera<>'' or id_firmy_crm<>'' or osoba_rc<>''; #EDIT_COL_TESTEVAL3=Není vyplněný e-mail partnera, firmy nebo osoby|e_mail<>'' or telefon<>'' or fax<>''; #EDIT_COL_TESTEVAL4=Není vyplněný způsob odeslání pošty|odeslani<>''; #EDIT_COL_DISABLE=fiskalni_rok,denik,e_mail,telefon,fax#DISCRM; #EDIT_COL_NOTAB; #EDIT_COL_NOQUESTION; #EDIT_COL_NOINFO; #EDIT_COL_ALL_MODIFIED; #------------------------------------------------; #------------------------------------------------; #EDIT_GROUP1=Řada odeslané pošty; #EDIT_COL1_TEXT=Fiskální rok; #EDIT_COL1=odpost_kniha.fiskalni_rok; #EDIT_COL1_TAG_BEGIN; #F3TAB=fiscis; #F3SAY=nazev; #EDIT_COL1_TAG_END; #------------------------------------------------; #EDIT_COL2_TEXT=Kniha odeslané pošty; #EDIT_COL2=odpost_kniha.denik; #EDIT_COL2_TAG_BEGIN; #F3TAB=odpost_deniky; #F3COL=fiskalni_rok,denik; #F3SAY=nazev; #EDIT_COL2_TAG_END; #------------------------------------------------; #EDIT_COL3_TEXT=Řada odeslané pošty>>; #EDIT_COL3=odpost_kniha.rada; #EDIT_COL3_TAG_BEGIN; #F3TAB=odpost_rada; #F3COL=fiskalni_rok,denik,rada; #F3SAY=nazev; #F3WHERE1=odpost_rada.fiskalni_rok=%fiskalni_rok% and exists(select 1 from dba.odpost_zpusoby z with(index(pk_odpost_zpusoby)) where z.odeslani=odpost_rada.odeslani and z.forma_odeslani='EMAIL'); #F3NOFILTER1=fiskalni_rok; #SELECT1=odeslani=select odeslani from dba.odpost_rada where fiskalni_rok=%fiskalni_rok% and denik=%denik% and rada=%rada%:Wrada<>''; #SELECT2=odeslani='':Wnot rada<>''; #EDIT_COL3_TAG_END; #------------------------------------------------; #EDIT_COL4_TEXT=Způsob odeslání>>; #EDIT_COL4=odpost_kniha.odeslani; #EDIT_COL4_TAG_BEGIN; #F3TAB=odpost_zpusoby; #F3SAY=nazev; #F3WHERE1=odpost_zpusoby.forma_odeslani='EMAIL'; #EDIT_COL4_TAG_END; #------------------------------------------------; #EDIT_GROUP5=Partner; #EDIT_COL5_TEXT=ID partnera>>; #EDIT_COL5=odpost_kniha.id_partnera; #EDIT_COL5_TAG_BEGIN; #F3TAB=parcis; #F3SAY=zkraceny_nazev; #SELECT1=e_mail=select case when isnull(o.e_mail,'')<>'' then isnull(o.e_mail,'') else isnull(p.e_mail,'') end from dba.parcis p, dba.paroso o where p.id_partnera=%id_partnera% and o.id_partnera=%id_partnera% and o.poradi=%poradi_paroso%:Wid_partnera<>'' and poradi_paroso<>0; #SELECT2=e_mail=select isnull(p.e_mail,'') from dba.parcis p where p.id_partnera=%id_partnera%:Wid_partnera<>'' and (not poradi_paroso<>0); #SELECT3=e_mail='':Wnot id_partnera<>''; #EDIT_COL5_TAG_END; #------------------------------------------------; #EDIT_COL6_TEXT=Pořadí osoby partnera>>; #EDIT_COL6=odpost_kniha.poradi_paroso; #EDIT_COL6_TAG_BEGIN; #F3TAB=paroso; #F3COL=id_partnera,poradi_paroso; #F3WHERE1=paroso.id_partnera=%id_partnera% and paroso.poradi<>0:Wid_partnera<>''; #F3WHERE2=paroso.poradi<>0:Wnot id_partnera<>''; #F3NOFILTER1=id_partnera:Wid_partnera<>''; #F3SAY=prijmeni+' '+jmeno; #SELECT1=e_mail=select case when isnull(o.e_mail,'')<>'' then isnull(o.e_mail,'') else isnull(p.e_mail,'') end from dba.parcis p, dba.paroso o where p.id_partnera=%id_partnera% and o.id_partnera=%id_partnera% and o.poradi=%poradi_paroso%:Wid_partnera<>'' and poradi_paroso<>0; #SELECT2=e_mail=select isnull(p.e_mail,'') from dba.parcis p where p.id_partnera=%id_partnera%:Wid_partnera<>'' and (not poradi_paroso<>0); #SELECT3=e_mail='':Wnot id_partnera<>''; #EDIT_COL6_TAG_END; #------------------------------------------------; #EDIT_COL7_TEXT=E-mail; #EDIT_COL7=parcis.e_mail; #------------------------------------------------; #EDIT_GROUP8=Firma CRM; #EDIT_COL8_TEXT=ID firmy CRM>>; #EDIT_COL8=odpost_kniha.id_firmy_crm; #EDIT_COL8_TAG_BEGIN; #F3TAB=crm_fir_cis; #F3SAY=zkr_naz; #SELECT1=telefon=select case when isnull(o.e_mail,'')<>'' then isnull(o.e_mail,'') else isnull(f.e_mail,'') end from dba.crm_fir_cis f, dba.crm_fir_oso o where f.id_firmy=%id_firmy_crm% and o.id_firmy=%id_firmy_crm% and o.osoba=%osoba_crm%:Wid_firmy_crm<>'' and osoba_crm<>0 and islicmodul('CRM'); #SELECT2=telefon=select isnull(f.e_mail,'') from dba.crm_fir_cis f where f.id_firmy=%id_firmy_crm%:Wid_firmy_crm<>'' and (not osoba_crm<>0) and islicmodul('CRM'); #SELECT3=telefon='':Wnot id_firmy_crm<>''; #EDIT_COL8_TAG_END; #------------------------------------------------; #EDIT_COL9_TEXT=Pořadí osoby CRM>>; #EDIT_COL9=odpost_kniha.osoba_crm; #EDIT_COL9_TAG_BEGIN; #F3TAB=crm_fir_oso; #F3COL=id_firmy_crm,osoba_crm; #F3WHERE1=crm_fir_oso.id_firmy=%id_firmy_crm% and crm_fir_oso.osoba<>0:Wid_firmy_crm<>''; #F3WHERE2=crm_fir_oso.osoba<>0:Wnot id_firmy_crm<>''; #F3NOFILTER1=id_firmy:Wid_firmy_crm<>''; #F3SAY=prijmeni+' '+jmeno; #SELECT1=telefon=select case when isnull(o.e_mail,'')<>'' then isnull(o.e_mail,'') else isnull(f.e_mail,'') end from dba.crm_fir_cis f, dba.crm_fir_oso o where f.id_firmy=%id_firmy_crm% and o.id_firmy=%id_firmy_crm% and o.osoba=%osoba_crm%:Wid_firmy_crm<>'' and osoba_crm<>0 and islicmodul('CRM'); #SELECT2=telefon=select isnull(f.e_mail,'') from dba.crm_fir_cis f where f.id_firmy=%id_firmy_crm%:Wid_firmy_crm<>'' and (not osoba_crm<>0) and islicmodul('CRM'); #SELECT3=telefon='':Wnot id_firmy_crm<>''; #EDIT_COL9_TAG_END; #------------------------------------------------; #EDIT_COL10_TEXT=E-mail; #EDIT_COL10=parcis.telefon; #------------------------------------------------; #EDIT_GROUP11=Osoba; #EDIT_COL11_TEXT=Osoba>>; #EDIT_COL11=odpost_kniha.osoba_rc; #EDIT_COL11_TAG_BEGIN; #F3TAB=osoby; #F3SAY=prijmeni+' '+jmeno; #SELECT1=fax=select isnull(e_mail,'') from dba.osoby with(index(pk_osoby)) where rodne_cislo=%osoba_rc%:Wosoba_rc<>''; #SELECT2=fax='':Wnot osoba_rc<>''; #EDIT_COL11_TAG_END; #------------------------------------------------; #EDIT_COL12_TEXT=E-mail; #EDIT_COL12=parcis.fax; #------------------------------------------------; #EDIT_GROUP13=Předmět / Věc; #EDIT_COL13_TEXT=Předmět / Věc; #EDIT_COL13=odpost_kniha.text; #EDIT_COL13_BIG; #EDIT_COL_SQLAFTER1_BEGIN; exec dba.sekr_attach_odesli #XSPID, #XIDTEMP, !fiskalni_rok!, !denik!, !rada!, !odeslani!, !id_partnera!, !poradi_paroso!, !id_firmy_crm!, !osoba_crm!, !osoba_rc!, !text! #EDIT_COL_SQLAFTER1_END; #USERSUB1=#STRING=select isnull((select isnull(max(rtrim(denik)+'^'+rtrim(rada)+'^'+rtrim(odeslani)),'^^')+'^'+convert(varchar(20)/*BY*/,count(1)) from dba.odpost_rada r with(index(pk_odpost_rada)) where r.fiskalni_rok='\\FR_SEKR' and r.denik>'' and r.platnost=1 and exists(select 1 from dba.odpost_zpusoby z with(index(odpost_zpusoby_forma)) where z.odeslani=r.odeslani and z.forma_odeslani='EMAIL') and exists(select 1 from dba.odpost_druhy d with(index(pk_odpost_druhy)) where d.druh=r.druh and d.modul='')),'') +'^'+isnull((select isnull(max(rtrim(denik)+'^'+rtrim(rada)+'^'+rtrim(odeslani)),'^^')+'^'+convert(varchar(20)/*BY*/,count(1)) from dba.odpost_rada r with(index(pk_odpost_rada)) where r.fiskalni_rok='\\FR_SEKR' and r.denik>'' and r.platnost=1 and exists(select 1 from dba.odpost_zpusoby z with(index(odpost_zpusoby_forma)) where z.odeslani=r.odeslani and z.forma_odeslani='EMAIL')),''); #USERSUB2=#XDENIK=if(item(#STRING,4)='1',item(#STRING,1),if(item(#STRING,8)='1',item(#STRING,5),'')):NA; #USERSUB3=#XRADA=if(item(#STRING,4)='1',item(#STRING,2),if(item(#STRING,8)='1',item(#STRING,6),'')):NA; #USERSUB4=#XODESLANI=if(item(#STRING,4)='1',item(#STRING,3),if(item(#STRING,8)='1',item(#STRING,7),'')):NA; #USERSUB5=#PARTNER_FIRMA=execute dba.sekr_attach_zjisti '#XATTACH_TABLE', '#XATTACH_PK'; #USERSUB6=#XPARTNER=item(#PARTNER_FIRMA,1):NA; #USERSUB7=#XFIRMA=item(#PARTNER_FIRMA,2):NA:Wislicmodul('CRM'); #USERSUB8=#XFIRMA='':NA:Wnot islicmodul('CRM'); #USERSUB9=#XOSOBA=item(#PARTNER_FIRMA,3):NA; #USERSUB10=#XE_MAIL=select isnull(p.e_mail,'') from dba.parcis p with(index(pk_parcis)) where p.id_partnera='#XPARTNER':NA; #USERSUB11=#XTELEFON=select isnull(f.e_mail,'') from dba.crm_fir_cis f with(index(pk_crm_fir_cis)) where f.id_firmy='#XFIRMA':NA:Wislicmodul('CRM'); #USERSUB12=#XTELEFON='':NA:Wnot islicmodul('CRM'); #USERSUB13=#XFAX=select isnull(e_mail,'') from dba.osoby with(index(pk_osoby)) where rodne_cislo='#XOSOBA':NA; #USERSUB14=#DISCRM=if(islicmodul('CRM'),'',',id_firmy_crm,osoba_crm'):NA;;#SETMENUID_END; 2402USER_END 2403ID_MENU=MNID/SEKR/201012230834121231549937 2403BUTTON_TITLE=SQLCOMMAND 2403TYP=SQLCOMMAND 2403USER_BEGIN ;#TYPP=45;;#SETMENUID=O/SEKR/0/attach_store_sekr//201012230834121231549937/45/40/0; #SQLCOMMAND1_BEGIN; delete dba.temptable from dba.temptable temptable with(index(pk_temptable)) where spid=#XSPID and id=#XIDTEMP #SQLCOMMAND1_END; ;#SETMENUID_END; 2403USER_END 2404ID_MENU=MNID/SEKR/201012230834473455733071 2404BUTTON_TITLE=GROUP 2404TYP=GROUP 2404USER_BEGIN ;#TYPP=45;;#SETMENUID=O/SEKR/0/attach_store_sekr//201012230834473455733071/45/40/0; #GROUP_WHEN=#ID_POSTY<>''; #GROUP_WAIT; #SETWSOURCE; #XMESSAGE1=Doklad Odeslané pošty byl úspěšně vytvořen. Chcete zobrazit tento doklad?:q; #PARENTDW=attach_store; #GROUP_SUB1=#ID_POSTY=select id_posty from dba.attach_store attach_store with(index(pk_attach_store)) where tabulka=%tabulka% and pk=%pk% and poradi=%poradi%#NOCACHE;;#SETMENUID_END; 2404USER_END 240401ID_MENU=MNID/SEKR/201012230835030605765357 240401BUTTON_TITLE=SEZNAM 240401TYP=SEZNAM 240401SEZ_TABULKA=odpost_kniha 240401SEZ_TITLE=Doklad odeslané pošty 240401SEZ_PODMINKA=odpost_kniha.doklad=#ID_POSTY 240401SEZ_V_PODMINCE=doklad,fiskalni_rok,denik,rada,citac 240401USER_BEGIN ;#TYPP=45;;#SETMENUID=O/SEKR/0/attach_store_sekr//201012230835030605765357/45/40/0; #DO_GROUP_SUB; #NOADDCOMBO; ;#SETMENUID_END; 240401USER_END w_ift\tparametr/25 02ID_MENU=MNID/ATTCH/201009211324100515937695 02BUTTON_TITLE=Zobraz detail přílohy 02TYP=DETAIL 02DET_TABULKA=attach_store 02DET_WHERE=attach_store.tabulka=%tabulka% and attach_store.pk=%pk% and attach_store.poradi=%poradi% 02NOEDIT=TRUE 02USER=;#TYPP=25;;#SETMENUID=O/ATTCH/0/attach_store//201009211324100515937695/25/40/0;;#SETMENUID_END; 03ID_MENU=MNID/ATTCH/201010061200149734757758 03BUTTON_TITLE=Zobraz protokol přílohy 03TYP=SEZNAM 03ID_SAVE=attach_store_his 03SEZ_TABULKA=kar_users 03SEZ_SQL_BEGIN #NOTAB=kar_users;SELECT attach_store_his.poradi2 AS poradi2, attach_store_his.id_uzivatele AS kar_users, kar_users.nazev, attach_store_his.datum AS datum, attach_store_his.akce AS akce FROM dba.attach_store_his attach_store_his with(index(pk_attach_store_his)), dba.kar_users WHERE attach_store_his.tabulka=%tabulka% and attach_store_his.pk=%pk% and attach_store_his.poradi=%poradi% AND kar_users.id_uzivatele=attach_store_his.id_uzivatele ORDER BY attach_store_his.tabulka,attach_store_his.pk,attach_store_his.poradi,attach_store_his.poradi2 03SEZ_SQL_END 03SEZ_TITLE=Protokol přílohy 03USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ATTCH/0/attach_store//201010061200149734757758/25/40/0; #NOEDIT_EVAL_LEFT=history=0; #NOADDADDMENU; #HIDEPB; #SAVEFILE=attch; #PRAVO_DEF=40;;#SETMENUID_END; 03USER_END 04ID_MENU=MNID/ATTCH/201010271258029781742092 04BUTTON_TITLE=Zobraz přístup k editaci přílohy 04TYP=GROUP 04USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ATTCH/0/attach_store//201010271258029781742092/25/40/0; #SETWSOURCE; #PRAVO_DEF=40;;#SETMENUID_END; 04USER_END 0401ID_MENU=MNID/ATTCH/201010271304542750014562 0401BUTTON_TITLE=SQLCOMMAND 0401TYP=SQLCOMMAND 0401USER_BEGIN ;#TYPP=45;;#SETMENUID=O/ATTCH/0/attach_store//201010271304542750014562/45/40/0;    #PERCENT_OFF; #GROUP_SUB1=#ID_PRISTUP=select isnull(max(id), 0) + 1 from dba.attach_access aa with(index(pk_attach_access), readuncommitted) where aa.spid = @@spid#NOCACHE:NA; #GROUP_SUB2=#SPID=select @@spid:NA; #SQLCOMMAND1_BEGIN; execute dba.admin_attach_access #ID_PRISTUP, %tabulka%, %pk%, %poradi% #SQLCOMMAND1_END;;#SETMENUID_END; 0401USER_END 0402ID_MENU=MNID/ATTCH/201010271306178319939388 0402BUTTON_TITLE=SEZNAM 0402TYP=SEZNAM 0402ID_SAVE=attach_access 0402SEZ_TABULKA=kar_users 0402SEZ_SQL_BEGIN #NOTAB=kar_users; SELECT attach_access.spid AS spid, attach_access.id AS id, attach_access.poradi AS poradi, attach_access.akce AS akce, attach_access.vysledek AS vysledek, attach_access.pristup AS pristup, attach_access.autor AS autor, attach_access.ts AS ts, attach_access.xattach AS xattach FROM dba.kar_users kar_users with(index(pk_kar_users)), dba.attach_access attach_access with(index(pk_attach_access)) WHERE kar_users.id_uzivatele = 'KSWPVKA' AND attach_access.spid = #SPID and attach_access.id = #ID_PRISTUP 0402SEZ_SQL_END 0402SEZ_TITLE=Přehled přístupu k editaci přílohy {tabulka},{pk},{poradi_id} 0402SEZ_V_PODMINCE=spid,id 0402SEZ_F3_TAG_BEGIN #F3DISADD; #F3DISDELETE; #F3DISEDIT; 0402SEZ_F3_TAG_END 0402USER_BEGIN ;#TYPP=45;;#SETMENUID=O/ATTCH/0/attach_store//201010271306178319939388/45/40/0;    #ADD_CONTEXT=BUTTON; #GROUP_WAIT; #NOADDADDMENU; #HIDEPB; #SAVEFILE=attch; #CHECKMULTI; #LEGEND1=rgb(255,0,0):Přístup k editaci přílohy je zakázán:Fpristup=0;;#SETMENUID_END; 0402USER_END 0403ID_MENU=MNID/ATTCH/201010271309418600990582 0403BUTTON_TITLE=SQLCOMMAND 0403TYP=SQLCOMMAND 0403USER_BEGIN ;#TYPP=45;;#SETMENUID=O/ATTCH/0/attach_store//201010271309418600990582/45/40/0;    #SQLCOMMAND1_BEGIN; delete dba.attach_access from dba.attach_access ata with(index(pk_attach_access)) where ata.spid = @@spid and ata.id = #ID_PRISTUP #SQLCOMMAND1_END;;#SETMENUID_END; 0403USER_END 05ID_MENU=MNID/ATTCH/201710310825311227193468 05BUTTON_TITLE=Odkazy na přílohy 05USER=;#TYPP=25;;#SETMENUID=O/ATTCH/0/attach_store//201710310825311227193468/25/40/0;;#SETMENUID_END; 0501ID_MENU=MNID/ATTCH/201710310828551090763066 0501BUTTON_TITLE=Zobraz odkazovaný dokument 0501TYP=SEZNAM 0501SEZ_TABULKA=attach_store 0501SEZ_TITLE=Odkazovaný dokument 0501SEZ_PODMINKA=attach_store_rel.tabulka = %link_tabulka% and attach_store_rel.pk = %link_pk% and #VERZE_PODMINKA /*#DMS_OPTIMIZE*/ 0501USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ATTCH/0/attach_store//201710310828551090763066/25/40/0;    #NOEDIT_EVAL_LEFT=rel_att_type <> 73; #HIDEPB; #DO_THIS_USERSUB; #USERSUB1=#VERZE_PODMINKA=select coalesce(max('attach_store_rel.poradi_id = ' + convert(varchar/*BY*/, a.poradi_id) + ' and attach_store_rel.verze >= ''' + a.verze + '''' + case when coalesce(l.link_verze_do, '') <> '' then ' and attach_store_rel.verze <= ''' + l.link_verze_do + '''' else '' end), 'attach_store_rel.poradi = ' + convert(varchar/*BY*/, %link_poradi%)) from dba.attach_store_link l with(index(pk_attach_store_link), readuncommitted), dba.attach_store a with(index(pk_attach_store), readuncommitted) where l.tabulka = %tabulka% and l.pk = %pk% and l.poradi = %poradi% and a.tabulka = %link_tabulka% and a.pk = %link_pk% and a.poradi = %link_poradi% and a.stav_verze = 2:NA; /* #IGNORE=UnKnownDirectiveInContext; */ #DEFAULT_LAST=3; #NODMSTREE; #PRAVO_DEF=40;;#SETMENUID_END; 0501USER_END 0502ID_MENU=MNID/ATTCH/201606061636486066941085 0502BUTTON_TITLE=Zobraz odkazy na přílohu 0502TYP=SEZNAM 0502ID_SAVE=attach_store_odkazy 0502SEZ_TABULKA=attach_store 0502SEZ_SQL_BEGIN #NOTAB=attach_store; select attach_store.tabulka, attach_store.pk, attach_store.poradi, attach_store.file_name, attach_store.autor, attach_store.ts from dba.attach_store attach_store where attach_store.att_type in (73, 75) 0502SEZ_SQL_END 0502SEZ_TITLE=Přehled odkazů na přílohu 0502SEZ_F3_TAG=    #F3DISEDIT; 0502SEZ_VAZBA=TRUE 0502SEZ_VAZBA_INDEX=attach_store_link 0502SEZ_VAZBA_COLUMN1=tabulka 0502SEZ_VAZBA_COLUMN2=pk 0502SEZ_VAZBA_COLUMN3=poradi 0502USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ATTCH/0/attach_store//201606061636486066941085/25/40/0;    #NOADDADDMENU; #ATTACH_NAHLED; #PRAVO_DEF=40;;#SETMENUID_END; 0502USER_END 050201ID_MENU=MNID/ATTCH/201606071036246548955269 050201BUTTON_TITLE=Příloha 050201TYP=SEZNAM 050201ID_SAVE=admin_attach_store 050201SEZ_TABULKA=attach_store 050201SEZ_PODMINKA=attach_store_rel.tabulka=%tabulka% and attach_store_rel.pk=%pk% and attach_store_rel.poradi=%poradi% /*#DMS_OPTIMIZE*/ 050201USER=;#SETMENUID=O/ATTCH/0/attach_store//201606071036246548955269/20/40/0; #NODMSTREE;;#SETMENUID_END; 0503ID_MENU=MNID/ATTCH/201710301910046476459645 0503BUTTON_TITLE=Vazby verzí dokumentu 0503TYP=SEZNAM 0503ID_SAVE=attach_store_vazby 0503SEZ_TABULKA=attach_store 0503SEZ_SQL_BEGIN #NOTAB=attach_store; select attach_store.tabulka, attach_store.pk, attach_store.poradi, attach_store.att_type, attach_store_link.link_poradi_id AS poradi_id /* \\:Sattach_store.poradi_id:HID verze */, coalesce((select max(x.verze) from dba.attach_store x with(index(attach_store_verze)) where x.tabulka = attach_store_link.link_tabulka and x.pk = attach_store_link.link_pk and x.poradi_id = attach_store_link.link_poradi_id and x.stav_verze = 2), coalesce(((select max('*' + x.verze) from dba.attach_store x with(index(attach_store_verze)) where x.tabulka = attach_store_link.link_tabulka and x.pk = attach_store_link.link_pk and x.poradi_id = attach_store_link.link_poradi_id and x.stav_verze = 9)), '')) AS verze /* \\:Sattach_store.verze:HAktuální verze */, attach_store_link.link_verze_od AS link_verze_od, attach_store_link.link_verze_do AS link_verze_do, coalesce(cil.verze, '') AS zobr_verze /* \\:Sattach_store.verze:HZobrazovaná verze */, coalesce(cil.stav_verze, 0) AS stav_zobr_verze /* \\:Sattach_store.stav_verze:HStav zobrazované verze */, 1 AS xporadi /* \\:Sattach_store.poradi:NV */, 1 AS poradi_vlozeni /* \\:Sattach_store.poradi:NV */, case when attach_store.tabulka = %tabulka% and attach_store.pk = %pk% and attach_store.poradi = %poradi% then 1 else 0 end AS cur_row /* \\:Sattach_class.platnost:NV */ from dba.attach_store attach_store with(index(pk_attach_store)) INNER JOIN dba.attach_store_link attach_store_link with(index(pk_attach_store_link)) ON(attach_store_link.tabulka = attach_store.tabulka and attach_store_link.pk = attach_store.pk and attach_store_link.poradi = attach_store.poradi) LEFT OUTER JOIN dba.attach_store cil with(index(pk_attach_store)) ON(cil.tabulka = attach_store.link_tabulka and cil.pk = attach_store.link_pk and cil.poradi = attach_store.link_poradi and attach_store.att_type in (73, 75)) WHERE /* cíl odkazu */ exists(select 1 from dba.attach_store_link a with(index(attach_store_link_link)) where a.link_tabulka = %tabulka% and a.link_pk = %pk% and a.link_poradi_id = %poradi_id% and a.tabulka = attach_store.tabulka and a.pk = attach_store.pk and a.poradi = attach_store.poradi) or /* odkaz */ exists(select 1 from dba.attach_store_link a with(index(attach_store_link_link)) where a.link_tabulka = %link_tabulka% and a.link_pk = %link_pk% and a.link_poradi_id = (select x.poradi_id from dba.attach_store x with(index(pk_attach_store)) where x.tabulka = %link_tabulka% and x.pk = %link_pk% and x.poradi = %link_poradi%) and a.tabulka = attach_store.tabulka and a.pk = attach_store.pk and a.poradi = attach_store.poradi) or /* chybný odkaz */ exists(select 1 from dba.attach_store x with(index(pk_attach_store)), dba.attach_store_link l with(index(pk_attach_store_link)), dba.attach_store_link a with(index(attach_store_link_link)) where x.tabulka = %tabulka% and x.pk = %pk% and x.poradi = %poradi% and x.att_type > 73 and l.tabulka = %tabulka% and l.pk = %pk% and l.poradi = %poradi% and a.link_tabulka = l.link_tabulka and a.link_pk = l.link_pk and a.link_poradi_id = l.link_poradi_id and a.tabulka = attach_store.tabulka and a.pk = attach_store.pk and a.poradi = attach_store.poradi) 0503SEZ_SQL_END 0503SEZ_TITLE=Vazby verzí dokumentu 0503SEZ_F3_TAG=    #F3DISEDIT; 0503USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ATTCH/0/attach_store//201710301910046476459645/25/40/0;    #NOEDIT_EVAL_LEFT=(rel_att_type = 73 and p_verze = 0) or (rel_att_type < 73 and p_verze = 0); #SAVEFILE=attch; #SEZNAM_EDIT; #NOADDADDMENU; #ATTACH_NAHLED; #HIDEPB; #EDITCOLS=link_verze_od,link_verze_do; #SQLTYPEEVAL='upd'; #PORADI_VLOZENI=xporadi; #PORADI_START=select 1; #ENABLE_AUTO_SAVE_ROW; #DEFAULT_AUTO_SAVE=ROW; #REFRESHROW_SELECT=select attach_store.att_type, coalesce(cil.verze, ''), coalesce(cil.stav_verze, 0) from dba.attach_store attach_store with(index(pk_attach_store)) LEFT OUTER JOIN dba.attach_store cil with(index(pk_attach_store)) on(cil.tabulka = attach_store.link_tabulka and cil.pk = attach_store.link_pk and cil.poradi = attach_store.link_poradi and attach_store.att_type in (73, 75)) where attach_store.tabulka = !tabulka! and attach_store.pk = !pk! and attach_store.poradi = !poradi!; #REFRESHROW_COLUMNS=att_type,zobr_verze,stav_zobr_verze; #NOREFRESHSOURCE; #W_SOURCE_REFRESH_ROW; #WINDOW_WAIT; #DO_WINDOW_AFTER; #CHECKBEFOREEVAL1=link_verze_od<=link_verze_do or link_verze_do=''; #CHECKBEFOREMESS1=Hodnota \"Zobrazit verzi do\" je menší než hodnota \"Zobrazit verzi od\"; #UPDATE1_BEGIN; update dba.attach_store_link set link_verze_od = %link_verze_od%, link_verze_do = %link_verze_do% from dba.attach_store_link attach_store_link with(index(pk_attach_store_link)) where attach_store_link.tabulka = %tabulka% and attach_store_link.pk = %pk% and attach_store_link.poradi = %poradi% and (link_verze_od <> %link_verze_od% or link_verze_do <> %link_verze_do%) #UPDATE1_END; #LEGEND=#DOKL_SCHVAL:Aktuální záznam:Fcur_row = 1; #PRAVO_DEF=40;;#SETMENUID_END; 0503USER_END 0504ID_MENU=MNID/ATTCH/202107131012058845843499 0504BUTTON_TITLE=Změna odkazu na přílohu 0504TYP=GROUP 0504USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ATTCH/0/attach_store//202107131012058845843499/25/40/0;    #NOEDIT_EVAL_LEFT=rel_att_type <> 73; #SETWSOURCE; #MULTI_BUTTON; #STOP_ON_ERROR; #PRAVO_DEF=40;;#SETMENUID_END; 0504USER_END 050401ID_MENU=MNID/ATTCH/202107131014487238301553 050401BUTTON_TITLE=Smazání pomocné tabulky 050401TYP=SQLCOMMAND 050401USER_BEGIN ;#TYPP=45;;#SETMENUID=O/ATTCH/0/attach_store//202107131014487238301553/45/40/0;    #ON_FIRST_ROW; #SQLCOMMAND1_BEGIN; delete dba.temptable from dba.temptable t with(index(pk_temptable)) where spid = @@spid and id = 200 #SQLCOMMAND1_END; ;#SETMENUID_END; 050401USER_END 050402ID_MENU=MNID/ATTCH/202107131018568912545067 050402BUTTON_TITLE=Plnění pomocné tabulky 050402TYP=SQLCOMMAND 050402USER_BEGIN ;#TYPP=45;;#SETMENUID=O/ATTCH/0/attach_store//202107131018568912545067/45/40/0;    #PERCENT_OFF; #MULTI_BUTTON; #SQLCOMMAND1_BEGIN; exec dba.attach_convert_link '#INIT', %tabulka%, %pk%, %poradi% #SQLCOMMAND1_END; ;#SETMENUID_END; 050402USER_END 050403ID_MENU=MNID/ATTCH/202108021430249637835089 050403BUTTON_TITLE=MULTIDETAIL 050403TYP=MULTIDETAIL 050403DET_TITLE=Změna odkazu na přílohu 050403USER_BEGIN ;#TYPP=45;;#SETMENUID=O/ATTCH/0/attach_store//202108021430249637835089/45/40/0;  #GROUP_WHEN=not islicmodul('DMS'); #GROUP_WAIT; #NOMULTIWARN; #EDIT_COL_NOTAB; #EDIT_COL_NOQUESTION; #EDIT_COL_NOINFO; #MODIFY_IF_FULL=#COL.color=\"33554432\"; #EDIT_COL_ALL_MODIFIED; #EDIT_COL_DEFAULT1=att_class^att_tab=#XATT_CLASS+'^'+#XATT_TAB; #EDIT_COL_DEFAULT_MULTI1=att_class^att_tab=#XATT_CLASS+'^'+#XATT_TAB; #EDIT_COL1=attach_store.att_class; #EDIT_COL1_TAG_BEGIN; #F3TAB=attach_class; #F3COL=att_class,att_tab; #F3SAY=attach_class.nazev; #F3WHERE=#XTABULKA like rtrim(attach_class.att_tab); #EDIT_COL1_TAG_END; #EDIT_COL2=attach_store.att_tab; #EDIT_COL2_TAG_BEGIN; #F3TAB=attach_class; #F3COL=att_class,att_tab; #F3WHERE=#XTABULKA like rtrim(attach_class.att_tab); #EDIT_COL2_TAG_END; #EDIT_COL_SQLAFTER1_BEGIN; exec dba.attach_convert_link '#CONVERT', %tabulka%, %pk%, %poradi%, !att_class!, !att_tab!, '' #EDIT_COL_SQLAFTER1_END; #MULTIDETAIL_OK_SET_WINDOW_RESULT; #GROUP_STOP_BY_WINDOW_RESULT; #USERSUB1=#ATT_DATA=select case when max(varchar01) = min(varchar01) then max(varchar01) else '' end+'^'+ case when max(varchar03) = min(varchar03) then max(varchar03) else '' end+'^'+ case when max(varchar03) = min(varchar03) and max(varchar04) = min(varchar04) then max(varchar04) else '' end from dba.temptable x with(index(pk_temptable)) where spid = @@spid and id = 200; #USERSUB2=#XTABULKA=item(#ATT_DATA,1); #USERSUB3=#XATT_CLASS=item(#ATT_DATA,2); #USERSUB4=#XATT_TAB=item(#ATT_DATA,3); ;#SETMENUID_END; 050403USER_END 050404ID_MENU=MNID/ATTCH/202108021431066187115823 050404BUTTON_TITLE=MULTIDETAIL 050404TYP=MULTIDETAIL 050404DET_TITLE=Změna odkazu na přílohu 050404USER_BEGIN ;#TYPP=45;;#SETMENUID=O/ATTCH/0/attach_store//202108021431066187115823/45/40/0;  #GROUP_WHEN=islicmodul('DMS'); #GROUP_WAIT; #NOMULTIWARN; #EDIT_COL_NOTAB; #EDIT_COL_NOQUESTION; #EDIT_COL_NOINFO; #MODIFY_IF_FULL=#COL.color=\"33554432\"; #EDIT_COL_ALL_MODIFIED; #EDIT_COL_DEFAULT1=att_class^att_tab^typ_doc=#XATT_CLASS+'^'+#XATT_TAB+'^'+#XTYP_DOC; #EDIT_COL_DEFAULT_MULTI1=att_class^att_tab^typ_doc=#XATT_CLASS+'^'+#XATT_TAB+'^'+#XTYP_DOC; #EDIT_COL1=attach_store.att_class; #EDIT_COL1_TAG_BEGIN; #F3TAB=attach_class; #F3COL=att_class,att_tab; #F3SAY=attach_class.nazev; #F3WHERE=#XTABULKA like rtrim(attach_class.att_tab); #; #SELECT1=typ_doc='':Wselect 'true' where %att_class%<>'' and %typ_doc%<>'' and not exists(select 1 from dba.dms_class_typ_doc c with(index(pk_dms_class_typ_doc)) where c.att_class = %att_class% and c.att_tab = %att_tab% and c.typ_doc = %typ_doc%); #SELECT2=typ_doc=select c.typ_doc from dba.dms_class_typ_doc c with(index(pk_dms_class_typ_doc)) where c.att_class = %att_class% and c.att_tab = %att_tab%:Wselect 'true' where %att_class%<>'' and %typ_doc%='' and (select count(1) from dba.dms_class_typ_doc c with(index(pk_dms_class_typ_doc)) where c.att_class = %att_class% and c.att_tab = %att_tab%)=1; #EDIT_COL1_TAG_END; #EDIT_COL2=attach_store.att_tab; #EDIT_COL2_TAG_BEGIN; #F3TAB=attach_class; #F3COL=att_class,att_tab; #F3WHERE=#XTABULKA like rtrim(attach_class.att_tab); #EDIT_COL2_TAG_END; #EDIT_COL3=dms_typ_doc.typ_doc; #EDIT_COL3_TAG_BEGIN; #F3TAB=dms_typ_doc; #F3COL=typ_doc; #F3SAY=dms_typ_doc.nazev; #F3WHERE=exists(select 1 from dba.dms_class_typ_doc c with(index(pk_dms_class_typ_doc)) where c.att_class = %att_class% and c.att_tab = %att_tab% and c.typ_doc = dms_typ_doc.typ_doc); #EDIT_COL3_TAG_END; #EDIT_COL_SQLAFTER1_BEGIN; exec dba.attach_convert_link '#CONVERT', %tabulka%, %pk%, %poradi%, !att_class!, !att_tab!, !typ_doc! #EDIT_COL_SQLAFTER1_END; #MULTIDETAIL_OK_SET_WINDOW_RESULT; #GROUP_STOP_BY_WINDOW_RESULT; #USERSUB1=#ATT_DATA=select case when max(varchar01) = min(varchar01) then max(varchar01) else '' end+'^'+ case when max(varchar03) = min(varchar03) then max(varchar03) else '' end+'^'+ case when max(varchar03) = min(varchar03) and max(varchar04) = min(varchar04) then max(varchar04) else '' end+'^'+ case when max(varchar05) = min(varchar05) then max(varchar05) else '' end from dba.temptable x with(index(pk_temptable)) where spid = @@spid and id = 200; #USERSUB2=#XTABULKA=item(#ATT_DATA,1); #USERSUB3=#XATT_CLASS=item(#ATT_DATA,2); #USERSUB4=#XATT_TAB=item(#ATT_DATA,3); #USERSUB5=#XTYP_DOC=item(#ATT_DATA,4); ;#SETMENUID_END; 050404USER_END 050405ID_MENU=MNID/ATTCH/202108021431217498159423 050405BUTTON_TITLE=Smazání pomocné tabulky 050405TYP=SQLCOMMAND 050405USER_BEGIN ;#TYPP=45;;#SETMENUID=O/ATTCH/0/attach_store//202108021431217498159423/45/40/0; #SQLCOMMAND1_BEGIN; delete dba.temptable from dba.temptable t with(index(pk_temptable)) where spid = @@spid and id = 200 #SQLCOMMAND1_END; ;#SETMENUID_END; 050405USER_END 050406ID_MENU=MNID/ATTCH/202108021431514443588252 050406BUTTON_TITLE=Refresh seznamu 050406TYP=NOTHING 050406USER_BEGIN ;#TYPP=45;;#SETMENUID=O/ATTCH/0/attach_store//202108021431514443588252/45/40/0; #GROUP_SUB1=#POCET=sum(if(isselected(), 1, 0) for all):NA; #GROUP_WHEN='#MULTIDETAIL_'<>'#'+'MULTIDETAIL_' and #POCET<2; #.W_SOURCE_REFRESH;       -- provede refresh celého seznamu #W_SOURCE_REFRESH_ROW;  -- provede refresh pouze jednoho záznamu ;#SETMENUID_END; 050406USER_END 050407ID_MENU=MNID/ATTCH/202108021432135107839163 050407BUTTON_TITLE=Refresh seznamu 050407TYP=NOTHING 050407USER_BEGIN ;#TYPP=45;;#SETMENUID=O/ATTCH/0/attach_store//202108021432135107839163/45/40/0; #GROUP_WHEN='#MULTIDETAIL_'<>'#'+'MULTIDETAIL_' and #POCET>1; #W_SOURCE_REFRESH;       -- provede refresh celého seznamu #.W_SOURCE_REFRESH_ROW;  -- provede refresh pouze jednoho záznamu ;#SETMENUID_END; 050407USER_END 06ID_MENU=MNID/ATTCH/201908190926008931953773 06BUTTON_TITLE=Sdílení příloh 06USER=;#TYPP=25;;#SETMENUID=O/ATTCH/0/attach_store//201908190926008931953773/25/40/0;;#SETMENUID_END; 0601ID_MENU=MNID/ATTCH/201908190930445077254069 0601BUTTON_TITLE=Zařadit přílohu do sdílení 0601TYP=SEZNAM 0601SEZ_TABULKA=attach_share 0601SEZ_PODMINKA=dba.attach_share_get_pravo_fce(attach_share.skupina, attach_share.vlastnik, 'KSWPVKA', '')=1 0601USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ATTCH/0/attach_store//201908190930445077254069/25/40/0;  #NOEDIT_EVAL_LEFT=att_type in (10,70,71) or stav_verze=9; #SHOWPASTE; #NOMULTIWARN; #MULTI_TARGET; #UPDATE_ADD_BEGIN; exec dba.attach_share_add !id!, %tabulka%, %pk%, %poradi% #UPDATE_ADD_END; ;#SETMENUID_END; 0601USER_END 0602ID_MENU=MNID/ATTCH/201908191248194366428886 0602BUTTON_TITLE=Zobraz sdílení přílohy 0602TYP=SEZNAM 0602ID_SAVE=attach_share_prehled 0602SEZ_TABULKA=attach_share 0602SEZ_SQL_BEGIN #NOTAB=attach_share; select attach_share.id, attach_share.nazev, attach_share.skupina, attach_share.platnost, attach_share.platnost_do, attach_share.vlastnik, dba.attach_share_get_pravo_fce(attach_share.skupina, attach_share.vlastnik, 'KSWPVKA', '') AS pravo/*\\:Sattach_share.platnost:HPrávo sdílení*/, attach_share.autor, attach_share.ts from dba.attach_store attach_store with(index(attach_store_link)), dba.attach_share attach_share with(index(pk_attach_share)) where attach_store.att_type in (73, 75) and attach_store.link_tabulka=%link_tabulka% and attach_store.link_pk=%link_pk% and attach_store.link_poradi=%link_poradi% and attach_store.tabulka='attach_share' and attach_share.id = convert(#BY(attach_share.id),attach_store.pk) 0602SEZ_SQL_END 0602SEZ_TITLE=Přehled sdílení přílohy 0602SEZ_F3_TAG=    #F3DISEDIT; 0602USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ATTCH/0/attach_store//201908191248194366428886/25/40/0;    #NOEDIT_EVAL_LEFT=att_type in (10,70,71); #NOADDADDMENU; #NO_ATTACH; #PRAVO_DEF=40;;#SETMENUID_END; 0602USER_END 060201ID_MENU=MNID/ATTCH/201908191336086124240942 060201BUTTON_TITLE=Sdílení přílohy 060201TYP=SEZNAM 060201ID_SAVE=attach_share 060201SEZ_TABULKA=attach_share 060201SEZ_PODMINKA=attach_share.id=%id% 060201SEZ_V_PODMINCE=id,skupina,guid 060201SEZ_F3_TAG=#F3DISADD; 060201USER_BEGIN ;#SETMENUID=O/ATTCH/0/attach_store//201908191336086124240942/20/40/0;  #NOEDIT_EVAL_LEFT=pravo=0; #NOADDCOMBO;;#SETMENUID_END; 060201USER_END 07ID_MENU=MNID/ATTCH/201010251418251524086561 07BUTTON_TITLE=Zobraz propojené přílohy 07TYP=SEZNAM 07CLASS=w_iftseznam_tree2 07ID_SAVE=admin_attach_store 07SEZ_TABULKA=attach_store 07SEZ_TITLE=Přílohy odkazem 07SEZ_PODMINKA=#TREE_WHERE and attach_store_rel.dev_id = %dev_id% and attach_store_rel.loc_blob_id = %loc_blob_id% and attach_store_rel.ext_blob_id = %ext_blob_id% and attach_store_rel.file_pathname = %file_pathname% and attach_store_rel.verze = %verze% and attach_store_rel.odkaz = 1 07SEZ_V_PODMINCE=dev_id,loc_blob_id,ext_blob_id,file_pathname,verze,odkaz 07USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ATTCH/0/attach_store//201010251418251524086561/25/40/0;    #NOEDIT_EVAL_LEFT=odkaz=0; #PERCENT_OFF; #TREESELECT1_BEGIN; SELECT '<VSE>', '<ROOT>', dba.get_text_tran2_fce('ADMIN', 'TREE', 'ROOT', '\\MAIN_LANG_PRG', '') #TREESELECT1_END; #TREESELECTWHEN1='$PARNOD$'='<ROOT>'; #TREESELECT2_BEGIN; SELECT sd_tables.tabulka, '<VSE>', case when sd_tables.label <> '' then sd_tables.label else sd_tables.tabulka end FROM dba.sd_tables sd_tables WHERE sd_tables.tabulka <> '' and exists(select 1 from dba.attach_store attach_store with(index(attach_store_store)) where attach_store.tabulka = sd_tables.tabulka and attach_store.dev_id = %dev_id% and attach_store.loc_blob_id = %loc_blob_id% and attach_store.ext_blob_id = %ext_blob_id% and attach_store.file_pathname = %file_pathname% and attach_store.verze = %verze% and attach_store.odkaz = 1) and coalesce( (select prava_tab.pravo_nevyjm from dba.prava_tab prava_tab with(index(pk_prava_tab)) where prava_tab.id_uzivatele = '\\IDU' and prava_tab.tabulka = sd_tables.tabulka), (select moduly_prava.pravo from dba.moduly_prava moduly_prava with(index(pk_moduly_prava)) where moduly_prava.id_modulu = sd_tables.modul and moduly_prava.id_uzivatele = '\\IDU'), 0) > 0 order by case when sd_tables.label <> '' then sd_tables.label else sd_tables.tabulka end #TREESELECT2_END; #TREE_WHERE2=attach_store_rel.tabulka = $ID$; #ROOTID=<ROOT>; #PRAVO_DEF=40;;#SETMENUID_END; 07USER_END 08ID_MENU=MNID/ATTCH/201705171339453597493054 08BUTTON_TITLE=Needitovatelná varianta přílohy 08USER=;#TYPP=25;;#SETMENUID=O/ATTCH/0/attach_store//201705171339453597493054/25/40/0;;#SETMENUID_END; 0801ID_MENU=MNID/ATTCH/201705171342185123045408 0801BUTTON_TITLE=Zobrazit 0801CLASS=as_admin_noedit_att 0801USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ATTCH/0/attach_store//201705171342185123045408/25/40/0; #NOEDIT_EVAL_LEFT=exists_noedit=0; #BUTTON_COMMAND=ShowNoEditVersion; #PRAVO_DEF=40;;#SETMENUID_END; 0801USER_END 0802ID_MENU=MNID/ATTCH/201705171342544973674641 0802BUTTON_TITLE=Nahrát 0802CLASS=as_admin_noedit_att 0802USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ATTCH/0/attach_store//201705171342544973674641/25/40/0; #NOEDIT_EVAL_LEFT=do_noedit=0 or file_name='' or att_type in (10,70,71,72,73,74) or noedit=1 or (zamek=1 and muj_zamek=0) or (p_verze=1 and stav>0 and exists_noedit=1) or local=2 or opravneni=0 or (pravo<>4 and (pravo<>3 or vlastnik<>'\\IDU')); #BUTTON_COMMAND=LoadNoEditVersion; #PRAVO_DEF=40;;#SETMENUID_END; 0802USER_END 0803ID_MENU=MNID/ATTCH/202306171911579731581248 0803BUTTON_TITLE=Zrušit 0803CLASS=as_admin_noedit_att 0803USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ATTCH/0/attach_store//202306171911579731581248/25/40/0; #NOEDIT_EVAL_LEFT=exists_noedit=0 or do_noedit=1 or file_name='' or att_type in (10,70,71,72,73,74) or noedit=1 or (zamek=1 and muj_zamek=0) or (p_verze=1 and stav>0 and exists_noedit=1) or local=2 or opravneni=0 or (pravo<>4 and (pravo<>3 or vlastnik<>'\\IDU')); #BUTTON_COMMAND=DeleteNoEditVersion; #PRAVO_DEF=40;;#SETMENUID_END; 0803USER_END 0804ID_MENU=MNID/ATTCH/202207181446089666870108 0804BUTTON_TITLE=Uložit do souboru 0804TYP=COMUNICATION 0804USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ATTCH/0/attach_store//202207181446089666870108/25/40/0; #NOEDIT_EVAL_LEFT=exists_noedit=0; #CALL_COMMUNICATION_STR=AttachSaveAsNoEdit; #PRAVO_DEF=40;;#SETMENUID_END; 0804USER_END 0805ID_MENU=MNID/ATTCH/202207221409209548227415 0805BUTTON_TITLE=Vložit do clipboardu 0805TYP=COMUNICATION 0805USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ATTCH/0/attach_store//202207221409209548227415/25/40/0; #NOEDIT_EVAL_LEFT=exists_noedit=0 or \\ISHTML=1; #CALL_COMMUNICATION_STR=AttachCopyNoEdit; #PRAVO_DEF=40;;#SETMENUID_END; 0805USER_END 0806ID_MENU=MNID/ATTCH/202207221410248627180262 0806BUTTON_TITLE=Odeslat mailem 0806TYP=COMUNICATION 0806USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ATTCH/0/attach_store//202207221410248627180262/25/40/0; #NOEDIT_EVAL_LEFT=exists_noedit=0 or \\ISHTML=1; #CALL_COMMUNICATION_STR=AttachSendMailNoEdit; #PRAVO_DEF=40;;#SETMENUID_END; 0806USER_END 0807ID_MENU=MNID/ATTCH/202207221411458443032606 0807BUTTON_TITLE=Vytisknout 0807TYP=COMUNICATION 0807USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ATTCH/0/attach_store//202207221411458443032606/25/40/0; #NOEDIT_EVAL_LEFT=exists_noedit=0 or \\ISHTML=1; #CALL_COMMUNICATION_STR=AttachPrintNoEdit; #PRAVO_DEF=40;;#SETMENUID_END; 0807USER_END 0808ID_MENU=MNID/ATTCH/202207221417006839141253 0808BUTTON_TITLE=- 0808USER=;#TYPP=25;;#SETMENUID=O/ATTCH/0/attach_store//202207221417006839141253/25/40/0;;#SETMENUID_END; 0809ID_MENU=MNID/ATTCH/201711291022056917174734 0809BUTTON_TITLE=Zobrazit originál 0809CLASS=as_admin_noedit_att 0809USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ATTCH/0/attach_store//201711291022056917174734/25/40/0; #NOEDIT_EVAL_LEFT=exists_noedit=0 or p_verze=0 or (p_verze=1 and not stav in (9,10,11)) or (pravo<>4 and (pravo<>3 or vlastnik<>'\\IDU')) or opravneni=0; #BUTTON_COMMAND=ShowAttach; #PRAVO_DEF=40;;#SETMENUID_END; 0809USER_END w_ift\tconn\tms_19216810247_karat_termopan 73 w_ift\tf11\tStandard AllDevices w_ift\tRefreshObjects\tLIST LIST_TREE2 PARENT_LIST PARENT_FAST w_ift\tPercentOffDWs\tLIST\tdba.attach_store\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.11139.11142.11382.11405 PARENT_LIST\tdba.user_davky\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.11139.11142.11165 PARENT_FAST\tdba.user_davky\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.11139.11142.preview.fast.dw_fast_preview w_iftseznam\tsez_tabulka\tattach_store w_iftseznam\tlink\tkarat://termopan:@0/seznam/attach_store?where=%28%20attach%5fstore%2etabulka%20%3d%20%27user%5fdavky%27%20and%20attach%5fstore%2epk%20%3d%20%2720240423%2d00033%27%20and%20attach%5fstore%2eporadi%20%3d%201%20%29&menu=0 w_iftseznam\tsez_sql\t    #NOTAB=attach_store;     select *^(tabulka, pk, poradi, pozn, popis, file_name, noedit, nodel, p_zamek, p_verze, p_schval, verze, stav_verze, zamek, zamek_autor, zamek_ts, stav, exist_verze, workflow, kod_procesu, pred_stav, h_verze, revize, aktualni_h_verze, aktualni_revize, aktualni_verze, stav1_autor, stav9_autor, stav10_autor, stav1_datum, stav9_datum, stav10_datum, xattach, typ_doc, link_readonly, signature_status),             coalesce(attach_store.pozn_uni, attach_store.pozn) AS pozn /* \\:Sattach_store.pozn */,             coalesce(attach_store.popis_uni, attach_store.popis) AS popis /* \\:Sattach_store.popis */,             coalesce(attach_store.file_name_uni, attach_store.file_name) AS file_name /* \\:Sattach_store.file_name */,             (case when attach_store.id_posty <> '' and attach_store.stav_odeslani <> 0 then 1 else attach_store.noedit end) AS noedit /* \\:Sattach_store.noedit */,             (case when attach_store.id_posty <> '' and attach_store.stav_odeslani <> 0 then 1 else attach_store.nodel end) AS nodel /* \\:Sattach_store.nodel */,             sd_tables.modul AS modul,             #EXPAND_LANG_COL_BEGIN;|CZ||1|1|sd_tables|sd_tables|label#EXPAND_LANG_COL_END; AS tabulka_nazev /* \\:Ssd_tables.label:HNázev tabulky */,             coalesce((select max(a.pristup) from dba.attach_extension a with(index(pk_attach_extension)) where a.extension = (case when coalesce(charindex('.', attach_store.file_name), 0) > 0 then reverse(substring(upper(reverse(attach_store.file_name)), 1, charindex('.', reverse(attach_store.file_name)) - 1)) else '' end)), 20) AS ext_pristup /* \\:Sattach_extension.pristup:HPřístup dle přípony souboru */,             (case attach_class.p_nazev when 20 then (case when attach_store.att_type = 70 and isnull(charindex('\\', isnull(attach_store.file_name_uni, attach_store.file_name)), 0) > 0 then reverse(substring(reverse(isnull(attach_store.file_name_uni, attach_store.file_name)), 1, charindex('\\', reverse(isnull(attach_store.file_name_uni, attach_store.file_name))) - 1)) else isnull(attach_store.file_name_uni, attach_store.file_name) end) when 30 then isnull(attach_store.pozn_uni, attach_store.pozn) else #EXPAND_LANG_COL_BEGIN;|CZ||1|1|attach_class|attach_class|nazev#EXPAND_LANG_COL_END; end) AS nazev /* \\:Sattach_store.pozn:HNázev přílohy */,             #EXPAND_LANG_COL_BEGIN;|CZ||1|1|attach_class|attach_class|nazev#EXPAND_LANG_COL_END; AS class_nazev /* \\:Sattach_class.nazev:HDruh přílohy */,             (case when coalesce(charindex('.', attach_store.file_name), 0) > 0 then reverse(substring(upper(reverse(attach_store.file_name)), 1, charindex('.', reverse(attach_store.file_name)) - 1)) else '' end) AS file_ext /* \\:Sattach_class.nazev:HPřípona souboru */,             dba.admin_attach_get_pravo_fce(attach_store.tabulka, attach_store.pk, attach_store.poradi, attach_store.att_class, attach_store.att_tab, 'KSWPVKA', '', '') AS pravo /* \\:Sattach_usr.pravo:HPrávo */,             0 AS local /* \\:Sattach_store.noedit:NV:HLokální uložiště */,             upper(user) AS id_uzivatele /* \\:Sattach_store.autor:HAktuální uživatel */,             attach_store.verze AS verze /* \\:Sattach_store.verze:NV */,             case when attach_class.do_noedit=1 and dba.attach_can_create_noedit_fce(attach_store.file_name,'')=0               then 0               else attach_class.do_noedit             end AS do_noedit /* \\:Sattach_class.do_noedit:NV */,             case when attach_class.do_noedit > 0 and attach_store.att_id > 0                then case when exists(select 1 from dba.attach_pdf attach_pdf with(index(pk_attach_pdf)) where attach_pdf.att_id = attach_store.att_id) then 1 else 0 end                else 0              end AS exists_noedit /* \\:Sattach_class.do_noedit:NV */,             0 AS p_verze /* \\:Sattach_store.p_verze:NV */,             0 AS vyhrazeny /* \\:Sattach_store.vyhrazeny:NV */,             2 AS stav_verze /* \\:Sattach_store.stav_verze:NV */,             0 AS zamek /* \\:Sattach_store.zamek:NV */,             '' AS zamek_autor /* \\:Sattach_store.zamek_autor:NV */,             isnull(attach_store.signature_status,0) AS signature_status /*\\:Sattach_store.signature_status:NV*/,             attach_store_rel.tabulka AS tabulka /* \\:Sattach_store.tabulka */,             attach_store_rel.pk AS pk /* \\:Sattach_store.pk */,             attach_store_rel.poradi AS poradi /* \\:Sattach_store.poradi */,             attach_store_rel.att_class AS rel_att_class /* \\:Sattach_store.att_class:HOdkaz druh přílohy */,             attach_store_rel.att_tab AS rel_att_tab /* \\:Sattach_store.att_tab:HOdkaz tabulka druhu přílohy */,             attach_store_rel.att_type AS rel_att_type /* \\:Sattach_store.att_type:HOdkaz typ přílohy */,             attach_store_rel.vlastnik AS rel_vlastnik /* \\:Sattach_store.vlastnik:HOdkaz vlastník */,             dba.admin_attach_get_pravo_fce(attach_store_rel.tabulka, attach_store_rel.pk, attach_store_rel.poradi, attach_store_rel.att_class, attach_store_rel.att_tab, 'KSWPVKA', '', '#ATTACH_PRAVO_PARAM') AS rel_pravo /* \\:Sattach_usr.pravo:HOdkaz právo */,             attach_store_rel.link_readonly AS rel_link_readonly /* \\:Sattach_store.link_readonly */,             1 AS opravneni /* \\:Sattach_class.p_zamek:HOprávněná osoba:NV */         from dba.attach_store attach_store_rel,             dba.attach_store attach_store,             dba.attach_class attach_class with(index(pk_attach_class)),             dba.sd_tables sd_tables with(index(pk_sd_tables))         where attach_store.tabulka = attach_store_rel.link_tabulka             and attach_store.pk = attach_store_rel.link_pk             and attach_store.poradi = attach_store_rel.link_poradi             and attach_class.att_class = attach_store.att_class             and attach_class.att_tab = attach_store.att_tab             and sd_tables.tabulka = attach_store_rel.tabulka             and dba.admin_attach_get_pravo_fce(attach_store_rel.tabulka, attach_store_rel.pk, attach_store_rel.poradi, attach_store_rel.att_class, attach_store_rel.att_tab, 'KSWPVKA', '', '#ATTACH_PRAVO_PARAM') > 0 w_iftseznam\tdetail.color\t255 w_iftseznam\tdwselect\tSELECT TOP 351  attach_store.att_class,attach_store.att_tab,attach_store.att_templ,attach_store.att_type,attach_store.dev_id,attach_store.loc_blob_id,attach_store.ext_blob_id,attach_store.file_pathname,attach_store.file_len,attach_store.file_len2,attach_store.vytvoril,attach_store.vytvoril_datum,attach_store.vlastnik,attach_store.poradi_id,attach_store.vyhrazeny,attach_store.totrash,attach_store.history,attach_store.odkaz,attach_store.odeslat,attach_store.stav_odeslani,attach_store.id_posty_poz,attach_store.id_posty,attach_store.stav11_autor,attach_store.stav11_datum,attach_store.att_hash,attach_store.att_fulltext,attach_store.link_tabulka,attach_store.link_pk,attach_store.link_poradi,attach_store.att_id,attach_store.i_pro_rs,attach_store.autor,attach_store.ts,isnull(attach_store.xattach,0) xattach,             isnull(attach_store.pozn_uni, attach_store.pozn) pozn ,             isnull(attach_store.popis_uni, attach_store.popis) popis ,             isnull(attach_store.file_name_uni, attach_store.file_name) file_name ,             (case when attach_store.id_posty <> '' and attach_store.stav_odeslani <> 0 then 1 else attach_store.noedit end) noedit ,             (case when attach_store.id_posty <> '' and attach_store.stav_odeslani <> 0 then 1 else attach_store.nodel end) nodel ,             sd_tables.modul modul,             isnull(sd_tables.labelxcz,sd_tables.label) tabulka_nazev ,             isnull((select max(a.pristup) from dba.attach_extension a with(index(pk_attach_extension)) where a.extension = (case when isnull(charindex('.', attach_store.file_name), 0) > 0 then reverse(substring(upper(reverse(attach_store.file_name)), 1, charindex('.', reverse(attach_store.file_name)) - 1)) else '' end)), 20) ext_pristup ,             (case attach_class.p_nazev when 20 then (case when attach_store.att_type = 70 and isnull(charindex('\\', isnull(attach_store.file_name_uni, attach_store.file_name)), 0) > 0 then reverse(substring(reverse(isnull(attach_store.file_name_uni, attach_store.file_name)), 1, charindex('\\', reverse(isnull(attach_store.file_name_uni, attach_store.file_name))) - 1)) else isnull(attach_store.file_name_uni, attach_store.file_name) end) when 30 then isnull(attach_store.pozn_uni, attach_store.pozn) else isnull(attach_class.nazevxcz,attach_class.nazev)  end) nazev ,             isnull(attach_class.nazevxcz,attach_class.nazev) class_nazev ,             (case when isnull(charindex('.', attach_store.file_name), 0) > 0 then reverse(substring(upper(reverse(attach_store.file_name)), 1, charindex('.', reverse(attach_store.file_name)) - 1)) else '' end) file_ext ,             dba.admin_attach_get_pravo_fce(attach_store.tabulka, attach_store.pk, attach_store.poradi, attach_store.att_class, attach_store.att_tab, 'KSWPVKA', '', '') pravo ,             0 local ,             upper(user) id_uzivatele ,             attach_store.verze verze ,             case when attach_class.do_noedit=1 and dba.attach_can_create_noedit_fce(attach_store.file_name,'')=0               then 0               else attach_class.do_noedit             end do_noedit ,             case when attach_class.do_noedit > 0 and attach_store.att_id > 0                then case when 1 in(select 1 from dba.attach_pdf attach_pdf with(index(pk_attach_pdf)) where attach_pdf.att_id = attach_store.att_id) then 1 else 0 end                else 0              end exists_noedit ,             0 p_verze ,             0 vyhrazeny ,             2 stav_verze ,             0 zamek ,             '' zamek_autor ,             isnull(attach_store.signature_status,0) signature_status ,             attach_store_rel.tabulka tabulka ,             attach_store_rel.pk pk ,             attach_store_rel.poradi poradi ,             attach_store_rel.att_class rel_att_class ,             attach_store_rel.att_tab rel_att_tab ,             attach_store_rel.att_type rel_att_type ,             attach_store_rel.vlastnik rel_vlastnik ,             dba.admin_attach_get_pravo_fce(attach_store_rel.tabulka, attach_store_rel.pk, attach_store_rel.poradi, attach_store_rel.att_class, attach_store_rel.att_tab, 'KSWPVKA', '', '#ATTACH_PRAVO_PARAM') rel_pravo ,             attach_store_rel.link_readonly rel_link_readonly ,             1 opravneni          from dba.attach_store attach_store_rel  , dba.attach_store attach_store  , dba.attach_class attach_class with(index(pk_attach_class)) , dba.sd_tables sd_tables with(index(pk_sd_tables)) where attach_store.tabulka = attach_store_rel.link_tabulka             and attach_store.pk = attach_store_rel.link_pk             and attach_store.poradi = attach_store_rel.link_poradi             and attach_class.att_class = attach_store.att_class             and attach_class.att_tab = attach_store.att_tab             and sd_tables.tabulka = attach_store_rel.tabulka             and dba.admin_attach_get_pravo_fce(attach_store_rel.tabulka, attach_store_rel.pk, attach_store_rel.poradi, attach_store_rel.att_class, attach_store_rel.att_tab, 'KSWPVKA', '', '#ATTACH_PRAVO_PARAM') > 0  AND (attach_store_rel.tabulka='user_davky' and attach_store_rel.pk=/*apb600*/'20240423-00033'/*ape600*/ /* sez_podm */) AND (attach_store_rel.tabulka='user_davky' and attach_store_rel.pk=/*npb*/'20240423-00033'/*npe*/)    ORDER BY attach_store_rel.poradi DESC OPTION(fast 350) /* seznam attach_store O/ATTCH/10/attach_store//201010071014428256189707/15/40/0 */ w_iftseznam\tdwcolumns\tatt_class,att_tab,att_templ,att_type,dev_id,loc_blob_id,ext_blob_id,file_pathname,file_len,file_len2,vytvoril,vytvoril_datum,vlastnik,poradi_id,vyhrazeny,totrash,history,odkaz,odeslat,stav_odeslani,id_posty_poz,id_posty,stav11_autor,stav11_datum,att_hash,att_fulltext,link_tabulka,link_pk,link_poradi,att_id,i_pro_rs,autor,ts,xattach,pozn,popis,file_name,noedit,nodel,modul,tabulka_nazev,ext_pristup,nazev,class_nazev,file_ext,pravo,local,id_uzivatele,verze,do_noedit,exists_noedit,p_verze,vyhrazeny_1,stav_verze,zamek,zamek_autor,signature_status,tabulka,pk,poradi,rel_att_class,rel_att_tab,rel_att_type,rel_vlastnik,rel_pravo,rel_link_readonly,opravneni,xremind w_iftseznam\tdwcolumns_visible\txremind_bmp,poradi,link_bmp,signature_status_bmp,nazev,class_nazev,vlastnik,pozn,popis,file_name,tabulka_nazev,att_class,att_tab,att_type,att_templ,dev_id,loc_blob_id,ext_blob_id,file_pathname,file_len2,file_len,modul,vytvoril,vytvoril_datum,history,odeslat,stav_odeslani,id_posty_poz,id_posty,noedit,nodel,totrash,ext_pristup,pravo,file_ext,odkaz,stav11_autor,stav11_datum,att_hash,att_fulltext,link_tabulka,link_pk,link_poradi,att_id,i_pro_rs,rel_att_class,rel_att_tab,rel_att_type,rel_vlastnik,rel_pravo,rel_link_readonly,tabulka,pk,autor,ts,vyhrazeny 0\txremind_bmp\t25 1\tporadi\t40 2\tlink_bmp\t35 3\tsignature_status_bmp\t38 4\tnazev\t204 5\tclass_nazev\t174 6\tvlastnik\t84 7\tpozn\t218 8\tpopis\t257 9\tfile_name\t272 10\ttabulka_nazev\t193 11\tatt_class\t93 12\tatt_tab\t131 13\tatt_type\t129 14\tatt_templ\t97 15\tdev_id\t62 16\tloc_blob_id\t113 17\text_blob_id\t114 18\tfile_pathname\t257 19\tfile_len2\t96 20\tfile_len\t74 21\tmodul\t37 22\tvytvoril\t56 23\tvytvoril_datum\t150 24\thistory\t99 25\todeslat\t82 26\tstav_odeslani\t75 27\tid_posty_poz\t141 28\tid_posty\t120 29\tnoedit\t78 30\tnodel\t130 31\ttotrash\t101 32\text_pristup\t142 33\tpravo\t136 34\tfile_ext\t110 35\todkaz\t40 36\tstav11_autor\t56 37\tstav11_datum\t147 38\tatt_hash\t304 39\tatt_fulltext\t120 40\tlink_tabulka\t114 41\tlink_pk\t145 42\tlink_poradi\t100 43\tatt_id\t112 44\ti_pro_rs\t99 45\trel_att_class\t153 46\trel_att_tab\t159 47\trel_att_type\t155 48\trel_vlastnik\t86 49\trel_pravo\t140 50\trel_link_readonly\t142 51\ttabulka\t130 52\tpk\t203 53\tautor\t56 54\tts\t150 55\tvyhrazeny\t122 w_iftseznam\tdwcolumns_invisible\tloc_blob_id_sum,ext_blob_id_sum,file_len_sum,file_len2_sum,poradi_id,poradi_id_sum,id_posty_poz_sum,link_poradi_sum,att_id_sum,xattach,local,id_uzivatele,verze,do_noedit,exists_noedit,p_verze,vyhrazeny_1,stav_verze,zamek,zamek_autor,signature_status,poradi_sum,opravneni,xattach_bmp,xremind w_iftseznam\tid_save\tattch/attach_store w_iftseznam\tfirstuser\t#ATTACH;#MODUL=V_TPV;#TABULKA=user_davky;;;#SETMENUID=O/ATTCH/10/attach_store//201010071014428256189707/15/40/0;    #DONE_ADDTYP=SEZNAM,attach_store_sekr; #PRAVO_DEF=40;;#SETMENUID_END;;;#SETMENUID=O/ATTCH/10/attach_store//202001060756223257624111/15/40/0; #PRAVO_DEF=40;;#SETMENUID_END;;;#SETMENUID=O/SEKR/20/attach_store_sekr/SEZNAM/201011151449460665721050/16/40/0; #-USERSUB5000=#-USERDIR_ATT_WITH_DMS_=if(islicmodul2('DMS'),'#','NO_DMS'):NA; #-USERSUB5001=#-USERDIR_ATT_NO_DMS_=if(islicmodul2('DMS'),'EXIST_DMS','#'):NA; ;#SETMENUID_END;;#ALL_ADD_TYPES=SEZNAM_,SEZNAM_attach_store_sekr,;;;#SETMENUID=O/ATTCH/20/attach_store_dialog/SEZNAM/201409290737171052618695/16/40/0;    #REMOVE_STANDARDSORT; #NOEDIT_EVAL=!(pravo <> 4 and (pravo <> 3 or vlastnik <> '\\IDU')) or (rel_att_type = 73 and rel_link_readonly = 1) or (rel_att_type < 80 and rel_att_type > 73); #NODELETE_EVAL=(rel_pravo <> 4 and (rel_pravo <> 3 or rel_vlastnik <> '\\IDU')); #COMPUTEADD1=link_bmp=bitmap(if(rel_att_type<80 and rel_att_type>=73,'path(PathOpenInExternalProgram)','')):HOdkaz na přílohu:F:NS; #COMPUTEADD2=signature_status_bmp=bitmap(case(signature_status when 5 then 'path(PathQuestionMark),color(6)' when 10 then 'path(PathCertified),color(6)' when 20 then 'path(PathCertified),color(20)' when 30 then 'path(PathCertified),color(12)' when 90 then 'path(PathOrgRisk),color(6)' else '')):HElektronický podpis:F:NS; #REFRESHROW_NOPKWHERE; #REFRESHROW_WHERE=attach_store_rel.tabulka = $tabulka$ and attach_store_rel.pk = $pk$ and attach_store_rel.poradi = $poradi$; #TL_FUNKCE_SEZNAM; #ADDTYP=SEZNAM,attach_store_sekr; #COMPWR=ODKAZ; #DO_THIS_USERSUB; #LEGEND=rgb(255,128,128):Není vytvořena needitovatelná varianta přílohy:Fdo_noedit in (1,2) and exists_noedit=0; #PRAVO_DEF=40;;#SETMENUID_END;#SEZNAM_TREE; #SAVEFILE=ATTCH; w_iftseznam\tmaxrows\t350 w_iftseznam\tstorage\t559 w_iftseznam\tsorting w_iftseznam\tadd_sorting\tporadi A, ------------------------------- Workspace: Rozpad dílců (V_TPV/202311150958528994779223) Window: Seznam Rozpad dílců (V_TPV disabled visible c__w_iftseznam tab=user_rozpad_dilcu) w_ift\tclassname\tw_iftseznam w_ift\tclasses\t.object.karatbaseobject.karatobject.karatcontrol.karatwindow.c__w_ift.c__w_filter_parent.c__w_iftseznam w_ift\tlink\tkarat://termopan:@0/mnid/v_tpv/202311150958528994779223?menu=0&nss=0 w_ift\tparametr ID_MENU=MNID/V_TPV/202311150958528994779223 TYP=SEZNAM CLASS=w_iftseznam AKCE=user_rozpad_dilcu ID_SAVE=user_rozpad_dilcu SEZ_TABULKA=user_rozpad_dilcu SEZ_SQL=#NOTAB=user_rozpad_dilcu;SELECT *- FROM dba.user_rozpad_dilcu SEZ_CLASS=w_iftseznam SEZ_MODIFY= datawindow.detail.color=\"255 \t if(storno = 1,8421504,if(davka<>'' and exportovano = 0,57343,if(exportovano = 1,32768,1090519039)))\" NOEDIT=IFT USER_BEGIN ;#SETMENUID=A/V_TPV/user_rozpad_dilcu/202311150958528994779223/10/30/0;#--CALENDAR_TO_BOX; #COMBO_ID1=exportovano; #COLUMN1=user_rozpad_dilcu.exportovano; #POLOZKY1=Exportované dílce\\1^Neexportované dílce\\0; #POPISBEZ1=Exportováno; #DEFAULT1='NUM:0'; #CALENDAR_FILTER_BEGIN; #CF_LABEL1=Datum expedice; #CF_COLUMN1=(select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad); #CALENDAR_FILTER_END; #DO_SEZ_SQL; #SEZ_SQL_ADD3000=(select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS dat_expedice /*\\:Sop_zahlavi.dat_expedice:HDatum expedice*/; #SEZ_SQL_ADD3001=(select op_zahlavi.zkraceny_nazev from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS zakaznik /*\\:Sop_zahlavi.zkraceny_nazev:HZákazník*/; #SEZ_SQL_ADD3002=(select op_zahlavi.misto_dp from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS misto_dod /*\\:Sop_zahlavi.misto_dp:HMísto dodání*/; #LEGEND=#DOKL_STORNO:Stornovaná položka:Fstorno = 1; #LEGEND=#O_OBJ_ODS:Vygenerována dávka:Fdavka<>'' and exportovano = 0; #LEGEND=#DOKL_SCHVAL:Exportováno:Fexportovano = 1; #MNUMAKCE=202311150958528994779223;;#SETMENUID_END;; #WORKSPACE_TITLE_BEGIN;Rozpad dílců#WORKSPACE_TITLE_END;; #WORKSPACE_MODULE=V_TPV;; #WORKSPACE_MNID=202311150958528994779223;;#ALL_ADD_TYPES=SEZNAM_user_rozpad_dilcu,; #STANDARDSORT;#HIDEBLANKREC;#ENAB_ADD_IN_VIEW;#ENAB_DELETE_IN_VIEW;#ENAB_FAST_PREV_IN_VIEW;#SEZ_SQL_SLOUPCEADD;#SEZ_SQL_COMPUTEADD; USER_END w_ift\tparametr/0 01ID_MENU=MNID/V_TPV/202311191846439310651865 01BUTTON_TITLE=Exportuj do pily 01TYP=GROUP 01USER_BEGIN ;#SETMENUID=O/V_TPV/0/user_rozpad_dilcu//202311191846439310651865/20/30/0;  #BUTTON_COLOR=rgb(0,255,0); #PERCENT_OFF; #--N--OEDIT_EVAL_LEFT=exportovano = 1 or davka=''; #NOEDIT_EVAL_LEFT=davka=''; #BUTTON_QUESTION1=Opravdu chcete exportovat již exportovanou dávku %davka%?:Wexportovano = 1; #SETWSOURCE; #USERSUB1=#DAVKA=%davka%:NA; #USERSUB2=#GENERUJ_EXPORT=1:NA; #REFRESHROWS;;#SETMENUID_END; 01USER_END 0101ID_MENU=MNID/V_TPV/202311162114515813595763 0101TYP=NOTHING 0101USER_BEGIN ;#TYPP=45;;#SETMENUID=O/V_TPV/0/user_rozpad_dilcu//202311162114515813595763/45/30/0; #DO_PARENT_USERSUB; #GROUP_WHEN=#GENERUJ_EXPORT=1; #PERCENT_OFF; #NOMULTIWARN; #USERSUB1=#EXPORT_FILENAME=select top 1 'c:\\export_pila\\' + user_rozpad_dilcu.davka + '.CSV' from dba.user_rozpad_dilcu where user_rozpad_dilcu.davka ='#DAVKA':NA; #USERSUB2_BEGIN;#EXPORT_TEXT=#DO_LIST_BEGIN;| SELECT 'CSVAZEK1'+';'+'DAVKA2'+';'+'DOKLAD3'+';'+'POLOZKA4'+';'+'QR5'+';'+'PORADI6'+';'+'DILEC7'+';'+'CAST8'+';'+'PCROZP9'+';'+'DELKA10'+';'+'VYSKA11'+';'+'TYP_DESKY12'+';'+'TL_DESKY13'+';'+'POCET_KS_ROZPADU14'+';'+'TISK15'+';'+'ZKRACENY_NAZEV16'+';'+'KODKZ17'+';'+'OBJEDNAVKA18'+';'+'NAZEV_DOPRAVCE19'+';'+'ZPUSOB_DOPRAVY20'+';'+'DAT_EXPEDICE21'+';'+'KARTA22'+';'+'NAZEV_PRODUKTU23'+';'+'MNOZSTVI_VYR24'+';'+'OP_DELKA25'+';'+'OP_VYSKA26'+';'+'OP_HLOUBKA27'+';'+'CLENENI28'+';'+'USER_ZAKVY29'+';'+'USER_POLOZKA_ZD30'+';'+'USER_PRIP31'+';'+'KCOP32'+';'+'USER_POL_POZ33'+';'+'USER_PROFIL_ZAK34'+';'+'USER_TYP_PROFIL35'+';'+'USER_VRTANI_MET36'+';'+'USER_EAN37'+';'+'ADR_DOD38'+char(13)+char(10) union all select  '1'/*CSVAZEK1*/+';'+ convert(varchar,user_rozpad_dilcu.davka)/*DAVKA2*/+';'+ convert(varchar,user_rozpad_dilcu.doklad)/*DOKLAD3*/+';'+ right('000' + convert(varchar,user_rozpad_dilcu.polozka), 3)/*POLOZKA4*/+';'+ convert(varchar,user_rozpad_dilcu.doklad)+(right('000' + convert(varchar,user_rozpad_dilcu.polozka), 3))+convert(varchar,user_rozpad_dilcu.cast)+(right('00' + convert(varchar,user_rozpad_dilcu.dilec), 2))+(right('000' + convert(varchar,user_rozpad_dilcu.poradi), 3))+(right('00' + convert(varchar,user_rozpad_dilcu.por_pol), 2))/*QR5*/+';'+ convert(varchar,user_rozpad_dilcu.poradi)/*PORADI6*/+';'+ convert(varchar,user_rozpad_dilcu.dilec)/*DILEC7*/+';'+ convert(varchar,user_rozpad_dilcu.cast)/*CAST8*/+';'+ convert(varchar,user_rozpad_dilcu.por_pol)/*PCROZP9*/+';'+ convert(varchar,user_rozpad_dilcu.delka)/*DELKA10*/+';'+ convert(varchar,user_rozpad_dilcu.sirka)/*VYSKA11 - změněno z vyska na sirka*/+';'+ convert(varchar,user_rozpad_dilcu.material_typ)/*TYP_DESKY12*/+';'+ convert(varchar,user_rozpad_dilcu.material_tl)/*TL_DESKY13*/+';'+ convert(varchar,user_rozpad_dilcu.mnozstvi)/*POCET_KS_ROZPADU14*/+';'+ '1'/*TISK15*/+';'+ convert(varchar,op_zahlavi.zkraceny_nazev)/*ZKRACENY_NAZEV16*/+';'+ convert(varchar,op_zahlavi.user_kodkz)/*KODKZ17*/+';'+ convert(varchar,op_zahlavi.objednavka)/*OBJEDNAVKA18*/+';'+ convert(varchar,op_zahlavi.zkraceny_nazev_dop)/*NAZEV_DOPRAVCE19*/+';'+ convert(varchar,case when op_zahlavi.zpusob_dopravy = 1 then 'Vlastní' when op_zahlavi.zpusob_dopravy = 2 then 'Cizí' else 'Nezadáno' end)/*ZPUSOB_DOPRAVY20*/+';'+ convert(varchar,op_zahlavi.dat_expedice,104)/*DAT_EXPEDICE21*/+';'+ convert(varchar,op_polozky.karta)/*KARTA22*/+';'+ convert(varchar,op_polozky.nazev)/*NAZEV_PRODUKTU23*/+';'+ convert(varchar,op_polozky.user_mnozstvi_vyr)/*MNOZSTVI_VYR24*/+';'+ convert(varchar,op_polozky.user_delka)/*OP_DELKA25*/+';'+ convert(varchar,op_polozky.user_vyska)/*OP_VYSKA26*/+';'+ convert(varchar,op_polozky.user_hloubka)/*OP_HLOUBKA27*/+';'+ convert(varchar,op_polozky.user_sirka1)+'/'+convert(varchar,op_polozky.user_sirka2)+'/'+convert(varchar,op_polozky.user_sirka3)+'/'+convert(varchar,op_polozky.user_sirka4)+'/'+convert(varchar,op_polozky.user_sirka5)/*CLENENI28*/+';'+ convert(varchar,op_polozky.user_zakvy)/*USER_ZAKVY29*/+';'+ convert(varchar,op_polozky.user_polozka_zd)/*USER_POLOZKA_ZD30*/+';'+ convert(varchar,op_polozky.user_prip)/*USER_PRIP31*/+';'+ right(convert(varchar,user_rozpad_dilcu.doklad),3)/*KCOP32*/+';'+ convert(varchar,op_polozky.user_pol_poz)/*USER_POL_POZ33*/+';'+ convert(varchar,op_polozky.user_profil_zak)/*USER_PROFIL_ZAK34*/+';'+ convert(varchar,op_polozky.user_typ_profil)/*USER_TYP_PROFIL35*/+';'+ convert(varchar,op_polozky.user_vrtani_met)/*USER_VRTANI_MET36*/+';'+ dba.user_o_obj_gen_ean16_1_fce (user_rozpad_dilcu.doklad,user_rozpad_dilcu.polozka,user_rozpad_dilcu.poradi)/*USER_EAN37*/+';'+ convert(varchar,op_zahlavi.misto_dp)/*ADR_DOD38*/+char(13)+char(10) from  dba.user_rozpad_dilcu user_rozpad_dilcu with(index(user_rozpad_dilcu_davka)), dba.op_polozky op_polozky with(index(pk_op_polozky)), dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)), dba.nomenklatura nomenklatura with(index(nomenklatura_cislo_nomen)) where user_rozpad_dilcu.davka = '#DAVKA' and user_rozpad_dilcu.doklad=op_polozky.doklad and user_rozpad_dilcu.polozka=op_polozky.polozka and op_polozky.doklad=op_zahlavi.doklad and nomenklatura.cislo_nomenklatury=user_rozpad_dilcu.material and user_rozpad_dilcu.exportovat = 1 #DO_LIST_END;:NA#USERSUB2_END; #FILEWRITE_AFTER1=#EXPORT_FILENAME; #FILEWRITE_BODY1_BEGIN;#EXPORT_TEXT#FILEWRITE_BODY1_END; #GROUP_WAIT; ;#SETMENUID_END; 0101USER_END 0102ID_MENU=MNID/V_TPV/202311191856023193910946 0102TYP=SQLCOMMAND 0102USER_BEGIN ;#TYPP=45;;#SETMENUID=O/V_TPV/0/user_rozpad_dilcu//202311191856023193910946/45/30/0;    #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.user_rozpad_dilcu set exportovano = 1, autor_exp=user, dat_exp=getdate() from dba.user_rozpad_dilcu urd with(index(pk_user_rozpad_dilcu)) where urd.davka=%davka% #SQLCOMMAND1_END; #SQLCOMMAND2_BEGIN; update dba.user_davky set autor_exp=user, dat_exp=getdate() from dba.user_davky user_davky with(index(pk_user_davky)) where user_davky.davka=%davka% #SQLCOMMAND2_END;;#SETMENUID_END; 0102USER_END 0103ID_MENU=MNID/V_TPV/202311192036412925514925 0103TYP=ATTADD 0103USER_BEGIN ;#TYPP=45;;#SETMENUID=O/V_TPV/0/user_rozpad_dilcu//202311192036412925514925/45/30/0; #DO_PARENT_USERSUB; #GROUP_WHEN=#GENERUJ_EXPORT=1; #FILE_FROM_CLIENT; #USERSUB1=#EXPORT_FILENAME=select top 1 'c:\\export_pila\\' + user_rozpad_dilcu.davka + '.CSV' from dba.user_rozpad_dilcu where user_rozpad_dilcu.davka ='#DAVKA':NA; #ATT_TABULKA=user_davky; #ATT_PK=#DAVKA; #ATT_CLASS=EXPORT_FILE; #ATT_TAB=user_davky; #ATT_POZN=EXPORTOVANO; #FILE=#EXPORT_FILENAME; ;#SETMENUID_END; 0103USER_END 02ID_MENU=MNID/V_TPV/202311192042136607116962 02BUTTON_TITLE=Dávka 02TYP=SEZNAM 02SEZ_TABULKA=user_davky 02SEZ_TITLE=Dávka: {davka} 02SEZ_VAZBA=TRUE 02SEZ_VAZBA_COLUMN1=davka 02USER=;#SETMENUID=O/V_TPV/0///202311192042136607116962/20/30/0;;#SETMENUID_END; 03ID_MENU=MNID/V_TPV/202311281516584940055182 03BUTTON_TITLE=Generuj dávku pro export 03TYP=MULTIDETAIL 03USER_BEGIN ;#BUTTON_WRITE_RIGHT=user_rozpad_dilcu;;#SETMENUID=O/V_TPV/0///202311281516584940055182/20/30/0;    #NOMULTIWARN; #NOEDIT_EVAL_LEFT=davka<>''; #EDIT_COL_NOTAB; #EDIT_COL_ALL_MODIFIED; #EDIT_GROUP1=Dávka pro export; #EDIT_COL1=user_rozpad_dilcu.davka; #EDIT_COL_DEFAULT1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL_DEFAULT_MULTI1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL1_EMPTY; #EDIT_COL1_SQL1_BEGIN; update dba.user_rozpad_dilcu set davka = #VAL, autor = user, ts = getdate() from dba.user_rozpad_dilcu user_rozpad_dilcu with(index(pk_user_rozpad_dilcu)) where user_rozpad_dilcu.doklad = %doklad% and user_rozpad_dilcu.polozka=%polozka% and user_rozpad_dilcu.cast=%cast% and user_rozpad_dilcu.dilec=%dilec% #EDIT_COL1_SQL1_END; #REFRESHROWSAFTER; ;#SETMENUID_END; 03USER_END 04ID_MENU=MNID/V_TPV/202312201241247088534145 04BUTTON_TITLE=Generuj dávku pro export pro celou OBJ 04TYP=MULTIDETAIL 04USER_BEGIN ;#BUTTON_WRITE_RIGHT=user_rozpad_dilcu;;#SETMENUID=O/V_TPV/0///202312201241247088534145/20/30/0;    #NOMULTIWARN; #NOEDIT_EVAL_LEFT=davka<>''; #EDIT_COL_NOTAB; #EDIT_COL_ALL_MODIFIED; #EDIT_GROUP1=Dávka pro export; #EDIT_COL1=user_rozpad_dilcu.davka; #EDIT_COL_DEFAULT1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL_DEFAULT_MULTI1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL1_EMPTY; #EDIT_COL1_SQL1_BEGIN; update dba.user_rozpad_dilcu set davka = #VAL, autor = user, ts = getdate() from dba.user_rozpad_dilcu user_rozpad_dilcu with(index(pk_user_rozpad_dilcu)) where user_rozpad_dilcu.doklad = %doklad% #EDIT_COL1_SQL1_END; #REFRESHROWSAFTER; ;#SETMENUID_END; 04USER_END 05ID_MENU=MNID/V_TPV/202401011237088621624371 05BUTTON_TITLE=Generuj dávku pro export za položku OBJ 05TYP=MULTIDETAIL 05USER_BEGIN ;#BUTTON_WRITE_RIGHT=user_rozpad_dilcu;;#SETMENUID=O/V_TPV/0///202401011237088621624371/20/30/0;    #NOMULTIWARN; #NOEDIT_EVAL_LEFT=davka<>''; #EDIT_COL_NOTAB; #EDIT_COL_ALL_MODIFIED; #EDIT_GROUP1=Dávka pro export; #EDIT_COL1=user_rozpad_dilcu.davka; #EDIT_COL_DEFAULT1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL_DEFAULT_MULTI1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL1_EMPTY; #EDIT_COL1_SQL1_BEGIN; update dba.user_rozpad_dilcu set davka = #VAL, autor = user, ts = getdate() from dba.user_rozpad_dilcu user_rozpad_dilcu with(index(pk_user_rozpad_dilcu)) where user_rozpad_dilcu.doklad = %doklad% and user_rozpad_dilcu.polozka=%polozka% #EDIT_COL1_SQL1_END; #REFRESHROWSAFTER; ;#SETMENUID_END; 05USER_END 06ID_MENU=MNID/V_TPV/202401101317041814512620 06BUTTON_TITLE=Položka objednávky 06TYP=SEZNAM 06SEZ_TABULKA=op_polozky 06SEZ_TITLE=Položka objednávky: {doklad}{polozka} 06SEZ_VAZBA=TRUE 06SEZ_VAZBA_COLUMN1=doklad 06SEZ_VAZBA_COLUMN2=polozka 06USER=;#SETMENUID=O/V_TPV/0///202401101317041814512620/20/30/0;;#SETMENUID_END; w_ift\tconn\tms_19216810247_karat_termopan 73 w_ift\tf11\tStandard AllDevices w_ift\tRefreshObjects\tLIST FAST w_ift\tPercentOffDWs\tLIST\tdba.user_rozpad_dilcu\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.12120 FAST\tdba.user_rozpad_dilcu\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.preview.fast.dw_fast_preview w_ift\tpreview1\tRychlý náhled ---Id: FAST ---UserParam: #TYPE=Fast;#ID=FAST;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=1;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1; ---Directives: #TYPE=Fast;#ID=FAST;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=1;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1;#PREVIEW_FAST;#FAST_PREV_TAB=user_rozpad_dilcu;#FAST_PREV_DW=;#ENAB_FAST_PREV_IN_VIEW=;#FAST_PREVIEW_SUBS=; w_ift\tCurrentPreviewUserParam\t#USR_PREVIEW;#PREVIEW_GRID_ROWS=1;#PREVIEW_GRID_COLS=1;#PREVIEW_VIEW_TAB=0;#PREVIEW_CAN_ADD=0;#GENERATED_PREVIEW; #USR_PREVIEW1_BEGIN;#TYPE=Fast;#ID=FAST;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=1;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1;#USR_PREVIEW1_END; w_iftseznam\tsez_tabulka\tuser_rozpad_dilcu w_iftseznam\tlink\tkarat://termopan:@0/mnid/v_tpv/202311150958528994779223?where=%28%20user%5frozpad%5fdilcu%2edoklad%20%3d%20%2724op010100000013%27%20and%20user%5frozpad%5fdilcu%2epolozka%20%3d%201%20and%20user%5frozpad%5fdilcu%2eporadi%20%3d%202%20and%20user%5frozpad%5fdilcu%2ecast%20%3d%203%20and%20user%5frozpad%5fdilcu%2edilec%20%3d%201%20and%20user%5frozpad%5fdilcu%2epor%5fpol%20%3d%201%20%29&menu=0 w_iftseznam\tsez_sql\t#NOTAB=user_rozpad_dilcu;SELECT *- FROM dba.user_rozpad_dilcu w_iftseznam\tdetail.color\t255 w_iftseznam\tdwselect\tSELECT TOP 100001  user_rozpad_dilcu.doklad,user_rozpad_dilcu.polozka,user_rozpad_dilcu.poradi,user_rozpad_dilcu.delka,user_rozpad_dilcu.vyska,user_rozpad_dilcu.sirka,user_rozpad_dilcu.cast,user_rozpad_dilcu.dilec,user_rozpad_dilcu.mnozstvi,user_rozpad_dilcu.material,user_rozpad_dilcu.exportovano,user_rozpad_dilcu.davka,user_rozpad_dilcu.por_pol,user_rozpad_dilcu.nomenklatura,user_rozpad_dilcu.material_typ,user_rozpad_dilcu.material_tl,user_rozpad_dilcu.spotreba_mat,user_rozpad_dilcu.cena_mat,user_rozpad_dilcu.storno,user_rozpad_dilcu.produkt,user_rozpad_dilcu.exportovat,user_rozpad_dilcu.qr,user_rozpad_dilcu.autor,user_rozpad_dilcu.ts,isnull(user_rozpad_dilcu.xattach,0) xattach ,(select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) dat_expedice  ,(select op_zahlavi.zkraceny_nazev from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) zakaznik  ,(select op_zahlavi.misto_dp from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) misto_dod  FROM dba.user_rozpad_dilcu user_rozpad_dilcu with(index(pk_user_rozpad_dilcu)) WHERE 1=1  AND ( ((1=1) AND ((select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) between convert(datetime,'1901-01-01') and convert(datetime,'9999-01-01'))) AND (user_rozpad_dilcu.doklad + '') <> '' /* blankrec */)    ORDER BY user_rozpad_dilcu.doklad,user_rozpad_dilcu.polozka,user_rozpad_dilcu.poradi,user_rozpad_dilcu.cast,user_rozpad_dilcu.dilec,user_rozpad_dilcu.por_pol OPTION(fast 100000) /* seznam user_rozpad_dilcu A/V_TPV/user_rozpad_dilcu/202311150958528994779223/10/30/0 */ w_iftseznam\tdwcolumns\tdoklad,polozka,poradi,delka,vyska,sirka,cast,dilec,mnozstvi,material,exportovano,davka,por_pol,nomenklatura,material_typ,material_tl,spotreba_mat,cena_mat,storno,produkt,exportovat,qr,autor,ts,xattach,dat_expedice,zakaznik,misto_dod,xremind w_iftseznam\tdwcolumns_visible\tdat_expedice,zakaznik,misto_dod,davka,xattach_bmp,xremind_bmp,doklad,polozka,cast,dilec,poradi,por_pol,delka,vyska,sirka,mnozstvi,material,exportovano,nomenklatura,autor,ts,material_typ,material_tl,spotreba_mat,cena_mat,storno,produkt,exportovat,qr 0\tdat_expedice\t96 1\tzakaznik\t99 2\tmisto_dod\t213 3\tdavka\t158 4\txattach_bmp\t18 5\txremind_bmp\t18 6\tdoklad\t127 7\tpolozka\t79 8\tcast\t64 9\tdilec\t66 10\tporadi\t234 11\tpor_pol\t200 12\tdelka\t40 13\tvyska\t40 14\tsirka\t40 15\tmnozstvi\t58 16\tmaterial\t158 17\texportovano\t77 18\tnomenklatura\t158 19\tautor\t57 20\tts\t146 21\tmaterial_typ\t158 22\tmaterial_tl\t103 23\tspotreba_mat\t111 24\tcena_mat\t127 25\tstorno\t45 26\tprodukt\t80 27\texportovat\t95 28\tqr\t235 w_iftseznam\tdwcolumns_invisible\tporadi_sum,delka_sum,vyska_sum,sirka_sum,mnozstvi_sum,por_pol_sum,material_tl_sum,spotreba_mat_sum,cena_mat_sum,xattach,xremind w_iftseznam\tid_save\tv_tpv/user_rozpad_dilcu w_iftseznam\tfirstuser\t;#SETMENUID=A/V_TPV/user_rozpad_dilcu/202311150958528994779223/10/30/0;#--CALENDAR_TO_BOX; #COMBO_ID1=exportovano; #COLUMN1=user_rozpad_dilcu.exportovano; #POLOZKY1=Exportované dílce\\1^Neexportované dílce\\0; #POPISBEZ1=Exportováno; #DEFAULT1='NUM:0'; #CALENDAR_FILTER_BEGIN; #CF_LABEL1=Datum expedice; #CF_COLUMN1=(select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad); #CALENDAR_FILTER_END; #DO_SEZ_SQL; #SEZ_SQL_ADD3000=(select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS dat_expedice /*\\:Sop_zahlavi.dat_expedice:HDatum expedice*/; #SEZ_SQL_ADD3001=(select op_zahlavi.zkraceny_nazev from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS zakaznik /*\\:Sop_zahlavi.zkraceny_nazev:HZákazník*/; #SEZ_SQL_ADD3002=(select op_zahlavi.misto_dp from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS misto_dod /*\\:Sop_zahlavi.misto_dp:HMísto dodání*/; #LEGEND=#DOKL_STORNO:Stornovaná položka:Fstorno = 1; #LEGEND=#O_OBJ_ODS:Vygenerována dávka:Fdavka<>'' and exportovano = 0; #LEGEND=#DOKL_SCHVAL:Exportováno:Fexportovano = 1; #MNUMAKCE=202311150958528994779223;;#SETMENUID_END;; #WORKSPACE_TITLE_BEGIN;Rozpad dílců#WORKSPACE_TITLE_END;; #WORKSPACE_MODULE=V_TPV;; #WORKSPACE_MNID=202311150958528994779223;;#ALL_ADD_TYPES=SEZNAM_user_rozpad_dilcu,; #STANDARDSORT;#HIDEBLANKREC;#ENAB_ADD_IN_VIEW;#ENAB_DELETE_IN_VIEW;#ENAB_FAST_PREV_IN_VIEW;#SEZ_SQL_SLOUPCEADD;#SEZ_SQL_COMPUTEADD; w_iftseznam\tmaxrows\t0 w_iftseznam\tstorage\t501 778 w_iftseznam\tsorting w_iftseznam\tadd_sorting\tdoklad A,polozka A,poradi A,cast A,dilec A,por_pol A, ------------------------------- Window: Neuvedeno Odkazy na definici menu a tabulek (V_TPV disabled visible c__w_menu_odkaz) w_ift\tclassname\tw_menu_odkaz w_ift\tclasses\t.object.karatbaseobject.karatobject.karatcontrol.karatwindow.c__w_ift.c__w_menu_odkaz w_ift\tparametr TYP=ADMINMODE CLASS=w_menu_odkaz W_SOURCE=object(c__w_iftseznam AppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097) USER=#PARMISSET;;#ALL_ADD_TYPES=; w_ift\tparametr/0 01ID_MENU=MNID/V_TPV/202311150958528994779223 01TYP=SEZNAM 01CLASS=w_iftseznam 01AKCE=user_rozpad_dilcu 01ID_SAVE=user_rozpad_dilcu 01SEZ_TABULKA=user_rozpad_dilcu 01SEZ_SQL=#NOTAB=user_rozpad_dilcu;SELECT *- FROM dba.user_rozpad_dilcu 01SEZ_CLASS=w_iftseznam 01SEZ_MODIFY= datawindow.detail.color=\"255 \t if(storno = 1,8421504,if(davka<>'' and exportovano = 0,57343,if(exportovano = 1,32768,1090519039)))\" 01NOEDIT=IFT 01USER_BEGIN ;#SETMENUID=A/V_TPV/user_rozpad_dilcu/202311150958528994779223/10/30/0;#--CALENDAR_TO_BOX; #COMBO_ID1=exportovano; #COLUMN1=user_rozpad_dilcu.exportovano; #POLOZKY1=Exportované dílce\\1^Neexportované dílce\\0; #POPISBEZ1=Exportováno; #DEFAULT1='NUM:0'; #CALENDAR_FILTER_BEGIN; #CF_LABEL1=Datum expedice; #CF_COLUMN1=(select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad); #CALENDAR_FILTER_END; #DO_SEZ_SQL; #SEZ_SQL_ADD3000=(select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS dat_expedice /*\\:Sop_zahlavi.dat_expedice:HDatum expedice*/; #SEZ_SQL_ADD3001=(select op_zahlavi.zkraceny_nazev from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS zakaznik /*\\:Sop_zahlavi.zkraceny_nazev:HZákazník*/; #SEZ_SQL_ADD3002=(select op_zahlavi.misto_dp from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS misto_dod /*\\:Sop_zahlavi.misto_dp:HMísto dodání*/; #LEGEND=#DOKL_STORNO:Stornovaná položka:Fstorno = 1; #LEGEND=#O_OBJ_ODS:Vygenerována dávka:Fdavka<>'' and exportovano = 0; #LEGEND=#DOKL_SCHVAL:Exportováno:Fexportovano = 1; #MNUMAKCE=202311150958528994779223;;#SETMENUID_END;; #WORKSPACE_TITLE_BEGIN;Rozpad dílců#WORKSPACE_TITLE_END;; #WORKSPACE_MODULE=V_TPV;; #WORKSPACE_MNID=202311150958528994779223;;#ALL_ADD_TYPES=SEZNAM_user_rozpad_dilcu,; #STANDARDSORT;#HIDEBLANKREC;#ENAB_ADD_IN_VIEW;#ENAB_DELETE_IN_VIEW;#ENAB_FAST_PREV_IN_VIEW;#SEZ_SQL_SLOUPCEADD;#SEZ_SQL_COMPUTEADD; 01USER_END 0101ID_MENU=MNID/V_TPV/202311191846439310651865 0101BUTTON_TITLE=Exportuj do pily 0101TYP=GROUP 0101USER_BEGIN ;#SETMENUID=O/V_TPV/0/user_rozpad_dilcu//202311191846439310651865/20/30/0;  #BUTTON_COLOR=rgb(0,255,0); #PERCENT_OFF; #--N--OEDIT_EVAL_LEFT=exportovano = 1 or davka=''; #NOEDIT_EVAL_LEFT=davka=''; #BUTTON_QUESTION1=Opravdu chcete exportovat již exportovanou dávku %davka%?:Wexportovano = 1; #SETWSOURCE; #USERSUB1=#DAVKA=%davka%:NA; #USERSUB2=#GENERUJ_EXPORT=1:NA; #REFRESHROWS;;#SETMENUID_END; 0101USER_END 010101ID_MENU=MNID/V_TPV/202311162114515813595763 010101TYP=NOTHING 010101USER_BEGIN ;#TYPP=45;;#SETMENUID=O/V_TPV/0/user_rozpad_dilcu//202311162114515813595763/45/30/0; #DO_PARENT_USERSUB; #GROUP_WHEN=#GENERUJ_EXPORT=1; #PERCENT_OFF; #NOMULTIWARN; #USERSUB1=#EXPORT_FILENAME=select top 1 'c:\\export_pila\\' + user_rozpad_dilcu.davka + '.CSV' from dba.user_rozpad_dilcu where user_rozpad_dilcu.davka ='#DAVKA':NA; #USERSUB2_BEGIN;#EXPORT_TEXT=#DO_LIST_BEGIN;| SELECT 'CSVAZEK1'+';'+'DAVKA2'+';'+'DOKLAD3'+';'+'POLOZKA4'+';'+'QR5'+';'+'PORADI6'+';'+'DILEC7'+';'+'CAST8'+';'+'PCROZP9'+';'+'DELKA10'+';'+'VYSKA11'+';'+'TYP_DESKY12'+';'+'TL_DESKY13'+';'+'POCET_KS_ROZPADU14'+';'+'TISK15'+';'+'ZKRACENY_NAZEV16'+';'+'KODKZ17'+';'+'OBJEDNAVKA18'+';'+'NAZEV_DOPRAVCE19'+';'+'ZPUSOB_DOPRAVY20'+';'+'DAT_EXPEDICE21'+';'+'KARTA22'+';'+'NAZEV_PRODUKTU23'+';'+'MNOZSTVI_VYR24'+';'+'OP_DELKA25'+';'+'OP_VYSKA26'+';'+'OP_HLOUBKA27'+';'+'CLENENI28'+';'+'USER_ZAKVY29'+';'+'USER_POLOZKA_ZD30'+';'+'USER_PRIP31'+';'+'KCOP32'+';'+'USER_POL_POZ33'+';'+'USER_PROFIL_ZAK34'+';'+'USER_TYP_PROFIL35'+';'+'USER_VRTANI_MET36'+';'+'USER_EAN37'+';'+'ADR_DOD38'+char(13)+char(10) union all select  '1'/*CSVAZEK1*/+';'+ convert(varchar,user_rozpad_dilcu.davka)/*DAVKA2*/+';'+ convert(varchar,user_rozpad_dilcu.doklad)/*DOKLAD3*/+';'+ right('000' + convert(varchar,user_rozpad_dilcu.polozka), 3)/*POLOZKA4*/+';'+ convert(varchar,user_rozpad_dilcu.doklad)+(right('000' + convert(varchar,user_rozpad_dilcu.polozka), 3))+convert(varchar,user_rozpad_dilcu.cast)+(right('00' + convert(varchar,user_rozpad_dilcu.dilec), 2))+(right('000' + convert(varchar,user_rozpad_dilcu.poradi), 3))+(right('00' + convert(varchar,user_rozpad_dilcu.por_pol), 2))/*QR5*/+';'+ convert(varchar,user_rozpad_dilcu.poradi)/*PORADI6*/+';'+ convert(varchar,user_rozpad_dilcu.dilec)/*DILEC7*/+';'+ convert(varchar,user_rozpad_dilcu.cast)/*CAST8*/+';'+ convert(varchar,user_rozpad_dilcu.por_pol)/*PCROZP9*/+';'+ convert(varchar,user_rozpad_dilcu.delka)/*DELKA10*/+';'+ convert(varchar,user_rozpad_dilcu.sirka)/*VYSKA11 - změněno z vyska na sirka*/+';'+ convert(varchar,user_rozpad_dilcu.material_typ)/*TYP_DESKY12*/+';'+ convert(varchar,user_rozpad_dilcu.material_tl)/*TL_DESKY13*/+';'+ convert(varchar,user_rozpad_dilcu.mnozstvi)/*POCET_KS_ROZPADU14*/+';'+ '1'/*TISK15*/+';'+ convert(varchar,op_zahlavi.zkraceny_nazev)/*ZKRACENY_NAZEV16*/+';'+ convert(varchar,op_zahlavi.user_kodkz)/*KODKZ17*/+';'+ convert(varchar,op_zahlavi.objednavka)/*OBJEDNAVKA18*/+';'+ convert(varchar,op_zahlavi.zkraceny_nazev_dop)/*NAZEV_DOPRAVCE19*/+';'+ convert(varchar,case when op_zahlavi.zpusob_dopravy = 1 then 'Vlastní' when op_zahlavi.zpusob_dopravy = 2 then 'Cizí' else 'Nezadáno' end)/*ZPUSOB_DOPRAVY20*/+';'+ convert(varchar,op_zahlavi.dat_expedice,104)/*DAT_EXPEDICE21*/+';'+ convert(varchar,op_polozky.karta)/*KARTA22*/+';'+ convert(varchar,op_polozky.nazev)/*NAZEV_PRODUKTU23*/+';'+ convert(varchar,op_polozky.user_mnozstvi_vyr)/*MNOZSTVI_VYR24*/+';'+ convert(varchar,op_polozky.user_delka)/*OP_DELKA25*/+';'+ convert(varchar,op_polozky.user_vyska)/*OP_VYSKA26*/+';'+ convert(varchar,op_polozky.user_hloubka)/*OP_HLOUBKA27*/+';'+ convert(varchar,op_polozky.user_sirka1)+'/'+convert(varchar,op_polozky.user_sirka2)+'/'+convert(varchar,op_polozky.user_sirka3)+'/'+convert(varchar,op_polozky.user_sirka4)+'/'+convert(varchar,op_polozky.user_sirka5)/*CLENENI28*/+';'+ convert(varchar,op_polozky.user_zakvy)/*USER_ZAKVY29*/+';'+ convert(varchar,op_polozky.user_polozka_zd)/*USER_POLOZKA_ZD30*/+';'+ convert(varchar,op_polozky.user_prip)/*USER_PRIP31*/+';'+ right(convert(varchar,user_rozpad_dilcu.doklad),3)/*KCOP32*/+';'+ convert(varchar,op_polozky.user_pol_poz)/*USER_POL_POZ33*/+';'+ convert(varchar,op_polozky.user_profil_zak)/*USER_PROFIL_ZAK34*/+';'+ convert(varchar,op_polozky.user_typ_profil)/*USER_TYP_PROFIL35*/+';'+ convert(varchar,op_polozky.user_vrtani_met)/*USER_VRTANI_MET36*/+';'+ dba.user_o_obj_gen_ean16_1_fce (user_rozpad_dilcu.doklad,user_rozpad_dilcu.polozka,user_rozpad_dilcu.poradi)/*USER_EAN37*/+';'+ convert(varchar,op_zahlavi.misto_dp)/*ADR_DOD38*/+char(13)+char(10) from  dba.user_rozpad_dilcu user_rozpad_dilcu with(index(user_rozpad_dilcu_davka)), dba.op_polozky op_polozky with(index(pk_op_polozky)), dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)), dba.nomenklatura nomenklatura with(index(nomenklatura_cislo_nomen)) where user_rozpad_dilcu.davka = '#DAVKA' and user_rozpad_dilcu.doklad=op_polozky.doklad and user_rozpad_dilcu.polozka=op_polozky.polozka and op_polozky.doklad=op_zahlavi.doklad and nomenklatura.cislo_nomenklatury=user_rozpad_dilcu.material and user_rozpad_dilcu.exportovat = 1 #DO_LIST_END;:NA#USERSUB2_END; #FILEWRITE_AFTER1=#EXPORT_FILENAME; #FILEWRITE_BODY1_BEGIN;#EXPORT_TEXT#FILEWRITE_BODY1_END; #GROUP_WAIT; ;#SETMENUID_END; 010101USER_END 010102ID_MENU=MNID/V_TPV/202311191856023193910946 010102TYP=SQLCOMMAND 010102USER_BEGIN ;#TYPP=45;;#SETMENUID=O/V_TPV/0/user_rozpad_dilcu//202311191856023193910946/45/30/0;    #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.user_rozpad_dilcu set exportovano = 1, autor_exp=user, dat_exp=getdate() from dba.user_rozpad_dilcu urd with(index(pk_user_rozpad_dilcu)) where urd.davka=%davka% #SQLCOMMAND1_END; #SQLCOMMAND2_BEGIN; update dba.user_davky set autor_exp=user, dat_exp=getdate() from dba.user_davky user_davky with(index(pk_user_davky)) where user_davky.davka=%davka% #SQLCOMMAND2_END;;#SETMENUID_END; 010102USER_END 010103ID_MENU=MNID/V_TPV/202311192036412925514925 010103TYP=ATTADD 010103USER_BEGIN ;#TYPP=45;;#SETMENUID=O/V_TPV/0/user_rozpad_dilcu//202311192036412925514925/45/30/0; #DO_PARENT_USERSUB; #GROUP_WHEN=#GENERUJ_EXPORT=1; #FILE_FROM_CLIENT; #USERSUB1=#EXPORT_FILENAME=select top 1 'c:\\export_pila\\' + user_rozpad_dilcu.davka + '.CSV' from dba.user_rozpad_dilcu where user_rozpad_dilcu.davka ='#DAVKA':NA; #ATT_TABULKA=user_davky; #ATT_PK=#DAVKA; #ATT_CLASS=EXPORT_FILE; #ATT_TAB=user_davky; #ATT_POZN=EXPORTOVANO; #FILE=#EXPORT_FILENAME; ;#SETMENUID_END; 010103USER_END 0102ID_MENU=MNID/V_TPV/202311192042136607116962 0102BUTTON_TITLE=Dávka 0102TYP=SEZNAM 0102SEZ_TABULKA=user_davky 0102SEZ_TITLE=Dávka: {davka} 0102SEZ_VAZBA=TRUE 0102SEZ_VAZBA_COLUMN1=davka 0102USER=;#SETMENUID=O/V_TPV/0///202311192042136607116962/20/30/0;;#SETMENUID_END; 0103ID_MENU=MNID/V_TPV/202311281516584940055182 0103BUTTON_TITLE=Generuj dávku pro export 0103TYP=MULTIDETAIL 0103USER_BEGIN ;#BUTTON_WRITE_RIGHT=user_rozpad_dilcu;;#SETMENUID=O/V_TPV/0///202311281516584940055182/20/30/0;    #NOMULTIWARN; #NOEDIT_EVAL_LEFT=davka<>''; #EDIT_COL_NOTAB; #EDIT_COL_ALL_MODIFIED; #EDIT_GROUP1=Dávka pro export; #EDIT_COL1=user_rozpad_dilcu.davka; #EDIT_COL_DEFAULT1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL_DEFAULT_MULTI1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL1_EMPTY; #EDIT_COL1_SQL1_BEGIN; update dba.user_rozpad_dilcu set davka = #VAL, autor = user, ts = getdate() from dba.user_rozpad_dilcu user_rozpad_dilcu with(index(pk_user_rozpad_dilcu)) where user_rozpad_dilcu.doklad = %doklad% and user_rozpad_dilcu.polozka=%polozka% and user_rozpad_dilcu.cast=%cast% and user_rozpad_dilcu.dilec=%dilec% #EDIT_COL1_SQL1_END; #REFRESHROWSAFTER; ;#SETMENUID_END; 0103USER_END 0104ID_MENU=MNID/V_TPV/202312201241247088534145 0104BUTTON_TITLE=Generuj dávku pro export pro celou OBJ 0104TYP=MULTIDETAIL 0104USER_BEGIN ;#BUTTON_WRITE_RIGHT=user_rozpad_dilcu;;#SETMENUID=O/V_TPV/0///202312201241247088534145/20/30/0;    #NOMULTIWARN; #NOEDIT_EVAL_LEFT=davka<>''; #EDIT_COL_NOTAB; #EDIT_COL_ALL_MODIFIED; #EDIT_GROUP1=Dávka pro export; #EDIT_COL1=user_rozpad_dilcu.davka; #EDIT_COL_DEFAULT1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL_DEFAULT_MULTI1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL1_EMPTY; #EDIT_COL1_SQL1_BEGIN; update dba.user_rozpad_dilcu set davka = #VAL, autor = user, ts = getdate() from dba.user_rozpad_dilcu user_rozpad_dilcu with(index(pk_user_rozpad_dilcu)) where user_rozpad_dilcu.doklad = %doklad% #EDIT_COL1_SQL1_END; #REFRESHROWSAFTER; ;#SETMENUID_END; 0104USER_END 0105ID_MENU=MNID/V_TPV/202401011237088621624371 0105BUTTON_TITLE=Generuj dávku pro export za položku OBJ 0105TYP=MULTIDETAIL 0105USER_BEGIN ;#BUTTON_WRITE_RIGHT=user_rozpad_dilcu;;#SETMENUID=O/V_TPV/0///202401011237088621624371/20/30/0;    #NOMULTIWARN; #NOEDIT_EVAL_LEFT=davka<>''; #EDIT_COL_NOTAB; #EDIT_COL_ALL_MODIFIED; #EDIT_GROUP1=Dávka pro export; #EDIT_COL1=user_rozpad_dilcu.davka; #EDIT_COL_DEFAULT1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL_DEFAULT_MULTI1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL1_EMPTY; #EDIT_COL1_SQL1_BEGIN; update dba.user_rozpad_dilcu set davka = #VAL, autor = user, ts = getdate() from dba.user_rozpad_dilcu user_rozpad_dilcu with(index(pk_user_rozpad_dilcu)) where user_rozpad_dilcu.doklad = %doklad% and user_rozpad_dilcu.polozka=%polozka% #EDIT_COL1_SQL1_END; #REFRESHROWSAFTER; ;#SETMENUID_END; 0105USER_END 0106ID_MENU=MNID/V_TPV/202401101317041814512620 0106BUTTON_TITLE=Položka objednávky 0106TYP=SEZNAM 0106SEZ_TABULKA=op_polozky 0106SEZ_TITLE=Položka objednávky: {doklad}{polozka} 0106SEZ_VAZBA=TRUE 0106SEZ_VAZBA_COLUMN1=doklad 0106SEZ_VAZBA_COLUMN2=polozka 0106USER=;#SETMENUID=O/V_TPV/0///202401101317041814512620/20/30/0;;#SETMENUID_END; w_ift\tconn\tms_19216810247_karat_termopan 73 w_ift\tRefreshObjects\tPARENT_LIST PARENT_FAST w_ift\tPercentOffDWs\tPARENT_LIST\tdba.user_rozpad_dilcu\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.12120 PARENT_FAST\tdba.user_rozpad_dilcu\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.preview.fast.dw_fast_preview ------------------------------- Window: Seznam Definice menu (filtrováno dle okna) (ADMIN disabled visible c__w_iftseznam tab=menu_system) w_ift\tclassname\tw_iftseznam w_ift\tclasses\t.object.karatbaseobject.karatobject.karatcontrol.karatwindow.c__w_ift.c__w_filter_parent.c__w_iftseznam w_ift\tparametr TYP=SEZNAM CLASS=w_iftseznam AKCE=menu_system ID_SAVE=menu_system_std W_SOURCE=object(c__w_menu_odkaz AppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.12860) SEZ_TABULKA=menu_system SEZ_SQL=#NOTAB=menu_system;SELECT *,    menu_hierarchy.tree_info,    menu_hierarchy.root_id_modulu,    menu_hierarchy.root_typ_def,    menu_hierarchy.root_typ_obj_akce,    menu_hierarchy.root_id_akce_tabulka,    menu_hierarchy.root_level,    menu_hierarchy.root_mnid,    menu_hierarchy2.abs_order0 AS menu_hierarchy_abs_order0 /*\\:Smenu_hierarchy.abs_order0*/,    menu_hierarchy.abs_order,    (select count(*) from dba.hide_menu hm1 with(index(pk_hide_menu), forceseek) where hm1.mnid=menu_system.mnid) AS is_hide /*\\:Smenu_system.hide_in_lite:HJe skryto na firemní úrovni*/,    menu_system.root_typ_def AS ms_root_typ_def,    (case when convert(char(6)/*BY*/, menu_usage.ts, 112) = convert(char(6)/*BY*/, GetDate(), 112) then menu_usage.cnt_m else 0 end) AS usage_cnt_m /* \\:Smenu_usage.cnt_m:HPočet použití tento měsíc */,    (case when convert(char(6)/*BY*/, menu_usage.ts, 112) = convert(char(6)/*BY*/, GetDate(), 112) then menu_usage.cnt_pm when convert(char(6)/*BY*/, menu_usage.ts, 112) = convert(char(6)/*BY*/, DateAdd(month, -1, GetDate()), 112) then menu_usage.cnt_m else 0 end) AS usage_cnt_pm /* \\:Smenu_usage.cnt_pm:HPočet použití minulý měsíc */,    (case when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) then menu_usage.cnt_y else 0 end) AS usage_cnt_y /* \\:Smenu_usage.cnt_y:HPočet použití letos */,    (case when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) then menu_usage.cnt_py when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, DateAdd(year, -1, GetDate()), 112) then menu_usage.cnt_y else 0 end) AS usage_cnt_py /* \\:Smenu_usage.cnt_py:HPočet použití loni */,    (case when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) then menu_usage.cnt_y + menu_usage.cnt_py when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, DateAdd(year, -1, GetDate()), 112) then menu_usage.cnt_y else 0 end) AS usage_cnt_y2 /* \\:Smenu_usage.cnt_py:HPočet použití letos a loni */,    coalesce(menu_usage.ts, '1901-01-01') AS usage_last /* \\:Smenu_usage.ts:HPoslední použití */   FROM       dba.menu_system menu_system,       dba.menu_hierarchy menu_hierarchy,       dba.menu_hierarchy menu_hierarchy2 with(index(menu_hierarchy_par), forceseek),       dba.menu_usage menu_usage with(index(pk_menu_usage), forceseek)   WHERE menu_hierarchy.mnid=menu_system.mnid    and menu_hierarchy.par_mnid=menu_system.mnid    and menu_hierarchy.par_level=0    and menu_hierarchy2.mnid=menu_hierarchy.root_mnid    and menu_hierarchy2.par_mnid=menu_hierarchy.root_mnid    and menu_hierarchy2.par_level=0    and menu_usage.mnid=*menu_system.mnid SEZ_CLASS=w_iftseznam_tree2 SEZ_TITLE=Definice menu (filtrováno dle okna) SEZ_MODIFY=menu_hierarchy_tree_info.font.face=\"Courier New CE\" menu_hierarchy_tree_info.font.family=\"1\" menu_hierarchy_tree_info.font.pitch=\"1\" datawindow.detail.color=\"255 \t if(typ_def=10,16777215,if(typ_def=15 or typ_def=16,65535,if(typ_def=20,16776960,if(1=1,65280,1090519039))))\" SEZ_PODMINKA=(menu_system.mnid='202311150958528994779223') OR (menu_system.mnid='202311191846439310651865') OR (menu_system.mnid='202311192042136607116962') OR (menu_system.mnid='202311281516584940055182') OR (menu_system.mnid='202312201241247088534145') OR (menu_system.mnid='202401011237088621624371') OR (menu_system.mnid='202401101317041814512620') OR (menu_system.mnid='200712131400008904774679') AND #TREE_WHERE USER_BEGIN #XSUB=#FOR_STD^0;;;#SETMENUID=O/ADMIN/10/menu_system//200705041442125791594212/15/40/0;  #NOADD_EVAL=\\DEVFIRM <> 1; #NOEDIT_EVAL=\\DEVFIRM <> 1; #TL_FUNKCE_SEZNAM; #FILTER_COL_NO_SET_TO_DETAIL=menu_hierarchy_root_id_modulu,menu_hierarchy_root_typ_def,menu_hierarchy_root_id_akce_tabulka,menu_hierarchy_root_typ_obj_akce,menu_hierarchy_abs_order0,menu_hierarchy_abs_order; #LEGEND1=#ADMIN_MENU10:#TEXT_ADMIN_MENU10:Ftyp_def=10; #LEGEND2=#ADMIN_MENU1X:#TEXT_ADMIN_MENU1X:Ftyp_def=15 or typ_def=16; #LEGEND3=#ADMIN_MENU20:#TEXT_ADMIN_MENU20:Ftyp_def=20; #LEGEND4=#ADMIN_MENUXX:#TEXT_ADMIN_MENUXX:F1=1; #COMBO_BEGIN; #COMBO_ID=ROOT_LEVEL; #COLUMN=menu_hierarchy.root_level; #POPISBEZ=.Úroveň zanoření; #POLOZKY=1. úroveň (Hlavní nabídky)\\0^2. úroveň (Podnabídky)\\1^3. úroveň\\2^4. úroveň\\3; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=TYP_DEF; #COLUMN=menu_system.typ_def; #POLOZKY=Menu aplikace\\10^Menu objektů tabulky\\15^Menu objektů akce\\16^Tlačítko seznam\\20^Funkce seznamu\\25^Tlačítko detailu\\30^Funkce detailu\\35^Nod stromu\\40^Ostatní\\45^Doplněk\\50^Náhrada\\55^Odkaz bez podakcí\\85^Odkaz včetně podakcí\\90; #POPISBEZ=.Typ definice; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=HIDE; #COLUMN=-; #POPISBEZ=.Skrytí; #POLOZKY=Neskryté\\1\\not exists(select 1 from dba.hide_menu hm1 where hm1.mnid=menu_system.mnid)^Skryté\\2\\exists(select 1 from dba.hide_menu hm1 where hm1.mnid=menu_system.mnid); #DEFAULT=1; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=STANDARD; #POPISBEZ=Standard; #COLUMN=menu_system.standard; #ITEMS_COLUMN=menu_system.standard; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=USAGE; #COLUMN=-; #POPISBEZ=.Použití; #POLOZKY_BEGIN;Použité tento měsíc\\1\\exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and convert(char(6)/*BY*/, u.ts, 112) = convert(char(6)/*BY*/, GetDate(), 112) and u.cnt_m > 0) ^Použité minulý měsíc\\2\\exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and ((convert(char(6)/*BY*/, u.ts, 112) = convert(char(6)/*BY*/, GetDate(), 112) and u.cnt_pm > 0) or (convert(char(6)/*BY*/, u.ts, 112) = convert(char(6)/*BY*/, DateAdd(month, -1, GetDate()), 112) and u.cnt_m > 0))) ^Použité letos\\3\\exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) and u.cnt_y > 0) ^Použité loni\\4\\exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and ((convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) and u.cnt_py > 0) or (convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, DateAdd(year, -1, GetDate()), 112) and u.cnt_y > 0))) ^Nepoužité letos ani loni\\5\\not exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and ((convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) and (u.cnt_py > 0 or u.cnt_y > 0)) or (convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, DateAdd(year, -1, GetDate()), 112) and u.cnt_y > 0))) #POLOZKY_END; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=REFACTOR; #COLUMN=-; #POPISBEZ=.Možnost úpravy; #POLOZKY_BEGIN;Tlačítko s akcí Zpět\\1\\1 = 1 and menu_system.typ_def = 20 /*tlačítko na seznamu*/ and convert(varchar(255)/*BY*/, menu_system.parametr) is not null and menu_system.parametr like char(37) + '#' + 'RIGHTBUTTON;' + char(37) and (menu_system.parametr not like char(37) + '#' + 'BUTTON_CLASS=' + char(37) + ';' + char(37) and menu_system.parametr not like char(37) + '#' + 'BUTTON_CLASS_BEGIN;' + char(37) + '#' + 'BUTTON_CLASS_END;' + char(37)) and (menu_system.parametr not like char(37) + '#' + 'BUTTON_CLASS_RIGHT=' + char(37) + ';' + char(37) and menu_system.parametr not like char(37) + '#' + 'BUTTON_CLASS_RIGHT_BEGIN;' + char(37) + '#' + 'BUTTON_CLASS_RIGHT_END;' + char(37)) and (menu_system.parametr not like char(37) + '#' + 'BUTTON_GROUP=' + char(37) + ';' + char(37) and menu_system.parametr not like char(37) + '#' + 'BUTTON_GROUP_BEGIN;' + char(37) + '#' + 'BUTTON_GROUP_END;' + char(37)) and dba.getmenudirective_fce(menu_system.parametr, 'BUTTON_TITLE') <> '' and dba.getmenudirective_fce(menu_system.parametr, 'TYP') <> 'GROUP' and not exists(select 1 from dba.menu_system ms2 where ms2.par_mnid = menu_system.mnid) ^ #POLOZKY_END; #COMBO_END; #ENAB_ADD_IN_VIEW; #ENAB_DELETE_IN_VIEW; #DONE_ADDTYP=menu_system_tree; #PASTEIFPASTE; #PASTE_TO_DETAIL;;#SETMENUID_END;;;#SETMENUID=O/ADMIN/20/menu_system_tree/ADDTYP/200706211207172425861253/16/40/0; #ONELEVEL; #ROOTID=<ROOT>; -- Vše #TREESELECT1=select '<ALL>', '<ROOT>', 'Vše'/*TRAN*/; #TREESELECTWHEN1='$PARNOD$'='<ROOT>'; #TREE_WHERE1=1=1; -- Seznam modulů #TREESELECT2_BEGIN; #EXPAND_LANG_BEGIN;|\\MAIN_LANG_PRG||1|1| select 'MODUL:'+moduly.id_modulu, '<ALL>', rtrim(moduly.id_modulu)+'  - '+rtrim(moduly.nazev) from dba.moduly with(index(pk_moduly)) where moduly.id_modulu<>'' and (moduly.id_modulu='#FOR_MOD' or '#FOR_MOD'='#FOR'+'_MOD') order by moduly.id_modulu #EXPAND_LANG_END; #TREESELECT2_END; #TREESELECTWHEN2='$PARNOD$'='<ALL>'; #TREE_WHERE2=menu_hierarchy.root_id_modulu=convert(#BY(menu_system.id_modulu),substring($ID$,7,5)); -- Typ definice - popis #TREESELECT3_BEGIN; select 'RMN'+convert(char(2)/*BY*/,cisla.num)+':'+substring('$PARNOD$',7,5), 'MODUL:'+substring('$PARNOD$',7,20), #ITEMS(\\MAIN_LANG_PRG,menu_system.typ_def,cisla.num) from dba.cisla cisla with(index(pk_cisla)) where cisla.num>=10 and cisla.num<=16 and cisla.num in (10,15,16) order by cisla.num #TREESELECT3_END; #TREESELECTWHEN3=Left('$PARNOD$',6)='MODUL:'; #TREE_WHERE3=menu_hierarchy.root_typ_def=convert(#BY(menu_system.typ_def),substring($ID$,4,2)); #TREE_WHERE_ADD_PARENT3; -- Rootové položky menu aplikace #TREESELECT4_BEGIN; #EXPAND_LANG_BEGIN;|\\MAIN_LANG_PRG||1|1| select 'PMENU:'+menu_hierarchy.mnid, 'RMN10:'+menu_hierarchy.root_id_modulu, isnull(menu_system.popis,'-')+'  ('+#ITEMS(\\MAIN_LANG_PRG,menu_system.standard,menu_system.standard)+')' from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.root_id_modulu = convert(#BY(menu_hierarchy.root_id_modulu),substring('$PARNOD$',7,5)) and menu_hierarchy.root_typ_def = 10 and menu_hierarchy.root_mnid = menu_hierarchy.mnid and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.abs_order0 #EXPAND_LANG_END; #TREESELECT4_END; #TREESELECTWHEN4=Left('$PARNOD$',6)='RMN10:'; #TREE_WHERE4=exists(select 1 from dba.menu_hierarchy mh_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring($ID$,7,24)) and mh_tree.mnid=menu_system.mnid); -- Rootové typy menu objektů #TREESELECT5_BEGIN; select DISTINCT 'TMN'+convert(char(2)/*BY*/,menu_hierarchy.root_typ_def)+':'+substring(RTrim(menu_hierarchy.root_id_modulu)+replicate('*',5), 1, 5) + substring(RTrim(menu_hierarchy.root_typ_obj_akce)+replicate('*',20), 1, 20), 'RMN'+convert(char(2)/*BY*/,menu_hierarchy.root_typ_def)+':'+menu_hierarchy.root_id_modulu, menu_hierarchy.root_typ_obj_akce from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.root_id_modulu = convert(#BY(menu_hierarchy.root_id_modulu),str_replace(substring('$PARNOD$',7,5),'*','')) and menu_hierarchy.root_typ_def = convert(#BY(menu_system.typ_def),substring('$PARNOD$',4,2)) and menu_hierarchy.root_mnid = menu_hierarchy.mnid and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.root_typ_obj_akce #TREESELECT5_END; #TREESELECTWHEN5=Left('$PARNOD$',6) in ('RMN15:','RMN16:'); #TREE_WHERE5=menu_hierarchy.root_typ_obj_akce=convert(#BY(menu_hierarchy.root_typ_obj_akce),str_replace(substring($ID$,12,20),'*','')); #TREE_WHERE_ADD_PARENT5; -- Rootové položky menu objektů #TREESELECT6_BEGIN; #EXPAND_LANG_BEGIN;|\\MAIN_LANG_PRG||1|1| select 'DMENU:'+menu_system.mnid, 'TMN'+convert(char(2)/*BY*/,menu_hierarchy.root_typ_def)+':'+substring(RTrim(menu_hierarchy.root_id_modulu)+replicate('*',5), 1, 5) + substring(RTrim(menu_hierarchy.root_typ_obj_akce)+replicate('*',20), 1, 20), isnull(menu_system.popis,'-')+'  ('+#ITEMS(\\MAIN_LANG_PRG,menu_system.standard,menu_system.standard)+')' from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.root_id_modulu = convert(#BY(menu_hierarchy.root_id_modulu),str_replace(substring('$PARNOD$',7,5),'*','')) and menu_hierarchy.root_typ_def = convert(#BY(menu_system.typ_def),substring('$PARNOD$',4,2)) and menu_hierarchy.root_mnid = menu_hierarchy.mnid and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.root_typ_obj_akce, menu_hierarchy.root_id_akce_tabulka #EXPAND_LANG_END; #TREESELECT6_END; #TREESELECTWHEN6=Left('$PARNOD$',3)='TMN'; #TREE_WHERE6=exists(select 1 from dba.menu_hierarchy mh_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring($ID$,7,24)) and mh_tree.mnid=menu_system.mnid); -- Typy pod-položek rootů menu objektů #TREESELECT7_BEGIN; select DISTINCT 'KMN'+convert(char(2)/*BY*/,menu_system.typ_def)+':'+menu_hierarchy.this_par_mnid, 'DMENU:'+menu_hierarchy.this_par_mnid, #ITEMS(\\MAIN_LANG_PRG,menu_system.typ_def,menu_system.typ_def) from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.this_par_mnid=convert(#BY(menu_hierarchy.this_par_mnid),substring('$PARNOD$',7,24)) and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by 1 #TREESELECT7_END; #TREESELECTWHEN7=Left('$PARNOD$',6)='DMENU:'; #TREE_WHERE7=exists(select 1 from dba.menu_hierarchy mh_tree, dba.menu_system ms_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring($ID$,7,24)) and mh_tree.mnid=menu_system.mnid and ms_tree.mnid=mh_tree.mnid and ms_tree.typ_def=convert(#BY(menu_system.typ_def),substring($ID$,4,2)) ); -- Pod-položky typů #TREESELECT8_BEGIN; #EXPAND_LANG_BEGIN;|\\MAIN_LANG_PRG||1|1| select 'PMENU:'+menu_hierarchy.mnid, 'KMN'+convert(char(2)/*BY*/,menu_system.typ_def)+':'+menu_hierarchy.this_par_mnid, (case when menu_system.typ_def=10 then isnull(menu_system.popis,'-') else #ITEMS(\\MAIN_LANG_PRG,menu_system.typ_def,menu_system.typ_def) +' '+dba.getmenudirective_fce(convert(#MAXVARCHAR/*BY*/,menu_system.parametr),'BUTTON_TITLE') end) +'  ('+#ITEMS(\\MAIN_LANG_PRG,menu_system.standard,menu_system.standard)+')' from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.this_par_mnid=convert(#BY(menu_hierarchy.this_par_mnid),substring('$PARNOD$',7,24)) and menu_system.typ_def=convert(#BY(menu_system.typ_def),substring('$PARNOD$',4,2)) and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.abs_order #EXPAND_LANG_END; #TREESELECT8_END; #TREESELECTWHEN8=Left('$PARNOD$',3)='KMN'; #TREE_WHERE8=exists(select 1 from dba.menu_hierarchy mh_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring($ID$,7,24)) and mh_tree.mnid=menu_system.mnid); -- Pod-položky obecné #TREESELECT9_BEGIN; #EXPAND_LANG_BEGIN;|\\MAIN_LANG_PRG||1|1| select 'PMENU:'+menu_hierarchy.mnid, 'PMENU:'+menu_hierarchy.this_par_mnid, (case when menu_system.typ_def=10 then isnull(menu_system.popis,'-') else #ITEMS(\\MAIN_LANG_PRG,menu_system.typ_def,menu_system.typ_def) +' '+dba.getmenudirective_fce(convert(#MAXVARCHAR/*BY*/,menu_system.parametr),'BUTTON_TITLE') end) +'  ('+#ITEMS(\\MAIN_LANG_PRG,menu_system.standard,menu_system.standard)+')' from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.this_par_mnid=convert(#BY(menu_hierarchy.this_par_mnid),substring('$PARNOD$',7,24)) and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.abs_order #EXPAND_LANG_END; #TREESELECT9_END; #TREESELECTWHEN9=Left('$PARNOD$',6)='PMENU:'; #TREE_WHERE9=exists(select 1 from dba.menu_hierarchy mh_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring($ID$,7,24)) and mh_tree.mnid=menu_system.mnid);;#SETMENUID_END;;#ALL_ADD_TYPES=SEZNAM_,ADDTYP_menu_system_tree,;;#SEZNAM_TREE; USER_END GEN_SORTS1=ID Menu^mnid^menu_system.mnid GEN_SORTS2=Modul kořenu,Typ definice kořenu,Celkové pořadí kořenu,Celkové pořadí položky^menu_hierarchy_root_id_modulu,menu_hierarchy_root_typ_def,menu_hierarchy_abs_order0,menu_hierarchy_abs_order^menu_hierarchy.root_id_modulu,menu_hierarchy.root_typ_def,menu_hierarchy2.abs_order0,menu_hierarchy.abs_order GEN_SORTS3=Typ definice kořenu,Typ objektu,ID Akce/Tabulka,Celkové pořadí kořenu,Celkové pořadí položky^menu_hierarchy_root_typ_def,menu_hierarchy_root_typ_obj_akce,menu_hierarchy_root_id_akce_tabulka,menu_hierarchy_abs_order0,menu_hierarchy_abs_order^menu_hierarchy.root_typ_def,menu_hierarchy.root_typ_obj_akce,menu_hierarchy.root_id_akce_tabulka,menu_hierarchy2.abs_order0,menu_hierarchy.abs_order GEN_SORTS4=Typ definice kořenu,ID Akce/Tabulka,Typ objektu,Celkové pořadí kořenu,Celkové pořadí položky^menu_hierarchy_root_typ_def,menu_hierarchy_root_id_akce_tabulka,menu_hierarchy_root_typ_obj_akce,menu_hierarchy_abs_order0,menu_hierarchy_abs_order^menu_hierarchy.root_typ_def,menu_hierarchy.root_id_akce_tabulka,menu_hierarchy.root_typ_obj_akce,menu_hierarchy2.abs_order0,menu_hierarchy.abs_order w_ift\tparametr/25 01ID_MENU=MNID/ADMIN/200705041442125216114966 01BUTTON_TITLE=Přegenerace popisu 01TYP=SQLCOMMAND 01USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200705041442125216114966/25/40/0;#NOEDIT_EVAL_LEFT=\\DEVFIRM <> 1; #PERCENT_OFF; #MULTI_BUTTON; #PROCESBAR; #PROCESTEXT=Přegenerování popisu; #REFRESHROW; #SQLCOMMAND1_BEGIN; update dba.menu_system set popis= (case when typ_def in (15,16) then rtrim(typ_obj_akce)+' 00 '+lower(rtrim(id_akce_tabulka)) else substring( (case typ_def when 20 then 'Tlačítko seznam'/*TRAN*/ when 25 then 'Funkce seznam'/*TRAN*/ when 30 then 'Tlačítko detail'/*TRAN*/ when 35 then 'Funkce detail'/*TRAN*/ when 40 then 'Nod stromu'/*TRAN*/ when 45 then 'Ostatní'/*TRAN*/ else 'Chyba'/*TRAN*/ end)+ (case when coalesce(patindex(char(37)+'BUTTON_TITLE='+char(37),parametr),0)>0 then char(32)+char(32)+ltrim(rtrim(substring(convert(varchar(255)/*BY*/,parametr), 13+patindex(char(37)+'BUTTON_TITLE='+char(37),parametr), patindex(char(37)+char(13)+char(10)+char(37),substring(convert(varchar(255)/*BY*/,parametr), 13+patindex(char(37)+'BUTTON_TITLE='+char(37),parametr),253)++char(13)+char(10))-1))) else '' end) ,1,100) end) from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid% and isnull(popis,'')<>'-' and typ_def in(15,16,20,25,30,35,40,45) #SQLCOMMAND1_END; #SQLMESS1=Úprava popisu nabídek menu; #SQLERR1=Chyba při úpravě popisu nabídek menu;;#SETMENUID_END; 01USER_END 02ID_MENU=MNID/ADMIN/200705041442129067457607 02BUTTON_TITLE=Refres&h menu 02TYP=NOTHING 02USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200705041442129067457607/25/40/0;#REFRESHMENU;#PRAVO_DEF=10;;#SETMENUID_END; 03ID_MENU=MNID/ADMIN/200705281524516005362103 03BUTTON_TITLE=- 03USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200705281524516005362103/25/40/0;;#SETMENUID_END; 04ID_MENU=MNID/ADMIN/200705041442127244230768 04BUTTON_TITLE=Práva na menu 04TYP=SEZNAM 04AKCE=admin_prehled_menu_s 04SEZ_PODMINKA=menu_system.mnid=%mnid% 04SEZ_V_PODMINCE=menu_system.mnid,prava_menu.mnid,mnid 04SEZ_INITINDEX=sort_2 04USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200705041442127244230768/25/40/0;;#SETMENUID_END; 05ID_MENU=MNID/ADMIN/200705041442123786522673 05BUTTON_TITLE=Skrýt nabídku všem 05TYP=SQLCOMMAND 05USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=hide_menu;;#SETMENUID=O/ADMIN/0/menu_system//200705041442123786522673/25/40/0; #BUTTON_QUESTION=Opravdu chcete skrýt nabídku všem uživatelům této databáze?; #NOEDIT_EVAL_LEFT=is_hide=1; #PERCENT_OFF; #MULTI_BUTTON; #PROCESBAR; #PROCESTEXT=Skrytí nabídky; #SQLCOMMAND1_BEGIN; insert into dba.hide_menu(mnid,ts,autor) select %mnid%,GetDate(),user where not exists(select 1 from dba.hide_menu with(index(pk_hide_menu)) where mnid=%mnid%) #SQLCOMMAND1_END; #SQLMESS1=Skrytí nabídky;;#SETMENUID_END; 05USER_END 06ID_MENU=MNID/ADMIN/200705041442120086570885 06BUTTON_TITLE=Zrušit skrytí nabídky všem 06TYP=SQLCOMMAND 06USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=hide_menu;;#SETMENUID=O/ADMIN/0/menu_system//200705041442120086570885/25/40/0; #BUTTON_QUESTION=Opravdu chcete zrušit skrytí nabídky všem uživatelům této databáze?; #NOEDIT_EVAL_LEFT=is_hide=0; #PERCENT_OFF; #MULTI_BUTTON; #PROCESBAR; #PROCESTEXT=Zrušení skrytí nabídky; #SQLCOMMAND1=delete dba.hide_menu from dba.hide_menu hide_menu with(index(pk_hide_menu)) where mnid=%mnid%; #SQLMESS1=Zrušení skrytí nabídky;;#SETMENUID_END; 06USER_END 07ID_MENU=MNID/ADMIN/202208111458062528230757 07BUTTON_TITLE=Použití uživatelem 07TYP=SEZNAM 07AKCE=menu_usr_usage_stats 07ID_SAVE=menu_usr_usage_stats_mnid 07SEZ_TABULKA=menu_usr_usage 07SEZ_PODMINKA=menu_usr_usage.mnid = %mnid% 07SEZ_V_PODMINCE=menu_usr_usage.mnid,mnid 07USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//202208111458062528230757/25/40/0;;#SETMENUID_END; 08ID_MENU=MNID/ADMIN/200705281524512120861161 08BUTTON_TITLE=- 08USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200705281524512120861161/25/40/0;;#SETMENUID_END; 09ID_MENU=MNID/ADMIN/200706181505327111302212 09BUTTON_TITLE=Neintegritní položky 09TYP=SEZNAM 09ID_SAVE=menu_system_neinteg 09SEZ_TABULKA=menu_system 09SEZ_TITLE=Neintegritní položky 09SEZ_PODMINKA_BEGIN not exists(select 1 from dba.menu_system ms3 with(index(pk_menu_system)) where  ms3.mnid=menu_system.ord_mnid) or not exists(select 1 from dba.menu_system ms3 with(index(pk_menu_system)) where  ms3.mnid=menu_system.par_mnid) or (menu_system.standard<=30 and not exists(select 1 from dba.menu_system ms3 with(index(pk_menu_system)) where  ms3.mnid=menu_system.ref_mnid)) 09SEZ_PODMINKA_END 09USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200706181505327111302212/25/40/0;  #NOADDTABMENU; #SEZNOROW;;#SETMENUID_END; 09USER_END 10ID_MENU=MNID/ADMIN/200707121416482425861253 10BUTTON_TITLE=Položky bez vypočtené hierarchie 10TYP=SEZNAM 10ID_SAVE=menu_system_nohier 10SEZ_TABULKA=menu_system 10SEZ_TITLE=Položky bez vypočtené hierarchie 10SEZ_PODMINKA_BEGIN (menu_system.standard<=30 or menu_system.ref_mnid='') and not exists(select 1 from dba.menu_hierarchy mh with(index(pk_menu_hierarchy)) where  mh.mnid=menu_system.mnid and  mh.par_mnid=menu_system.mnid) 10SEZ_PODMINKA_END 10USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200707121416482425861253/25/40/0;  #NOADDTABMENU; #SEZNOROW;;#SETMENUID_END; 10USER_END 11ID_MENU=MNID/ADMIN/200706150855272425861253 11BUTTON_TITLE=Chybně převedné položky 11TYP=SEZNAM 11SEZ_TABULKA=menu_system 11SEZ_TITLE=Chybně převedné položky 11SEZ_PODMINKA=menu_system.par_mnid='' and menu_system.typ_def not in (10,15,16) 11USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200706150855272425861253/25/40/0;  #SEZNOROW;;#SETMENUID_END; 12ID_MENU=MNID/ADMIN/200706150855271450073627 12BUTTON_TITLE=Zacyklené pořadí položek 12TYP=SEZNAM 12SEZ_TABULKA=menu_system 12SEZ_TITLE=Zacyklené pořadí položek 12SEZ_PODMINKA=menu_system.ord_typ=10 and menu_system.ord_mnid<>menu_hierarchy.aft_mnid 12USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200706150855271450073627/25/40/0;  #SEZNOROW;;#SETMENUID_END; 13ID_MENU=MNID/ADMIN/200706151517148733028224 13BUTTON_TITLE=Kontrola nastavení práva 13TYP=SEZNAM 13ID_SAVE=menu_system_pravodef 13SEZ_TABULKA=menu_system 13SEZ_TITLE=Kontrola nastavení práva 13USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200706151517148733028224/25/40/0;  #SEZNOROW; #ADDTYP=menu_system_pravodef;;#SETMENUID_END; 13USER_END 1301ID_MENU=MNID/ADMIN/200706181720085133507953 1301BUTTON_TITLE=Nastavit na samostatně definované 1301TYP=SQLCOMMAND 1301USER_BEGIN ;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200706181720085133507953/20/40/0; #NOEDIT_EVAL_LEFT=pravo_def=10 or spravne_pravo<>10; #BUTTON_COLOR=rgb(255,0,0); #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1=update dba.menu_system set pravo_def=10, pravo_tab='',autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%; #REFRESHROWS;;#SETMENUID_END; 1301USER_END 1302ID_MENU=MNID/ADMIN/200706181720084222950765 1302BUTTON_TITLE=Nastavit dle nadřízené 1302TYP=SQLCOMMAND 1302USER_BEGIN ;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200706181720084222950765/20/40/0; #NOEDIT_EVAL_LEFT=pravo_def=20 or spravne_pravo<>20; #BUTTON_COLOR=rgb(255,0,0); #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1=update dba.menu_system set pravo_def=20, pravo_tab='',autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%; #REFRESHROWS;;#SETMENUID_END; 1302USER_END 1303ID_MENU=MNID/ADMIN/200706181720084072959062 1303BUTTON_TITLE=Nastavit na přístupné všem 1303TYP=SQLCOMMAND 1303USER_BEGIN ;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200706181720084072959062/20/40/0; #NOEDIT_EVAL_LEFT=pravo_def=40 or spravne_pravo<>40; #BUTTON_COLOR=rgb(255,0,0); #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1=update dba.menu_system set pravo_def=40, pravo_tab='',autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%; #REFRESHROWS;;#SETMENUID_END; 1303USER_END 14ID_MENU=MNID/ADMIN/200706181505323161425178 14BUTTON_TITLE=- 14USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200706181505323161425178/25/40/0;;#SETMENUID_END; 15ID_MENU=MNID/ADMIN/200901291527504958642779 15BUTTON_TITLE=Propočet 15USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200901291527504958642779/25/40/0;;#SETMENUID_END; 1501ID_MENU=MNID/ADMIN/200705281524515313526627 1501BUTTON_TITLE=Kompletní propočet menu tabulek 1501TYP=SQLCOMMAND 1501USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_hierarchy;;#SETMENUID=O/ADMIN/0/menu_system//200705281524515313526627/25/40/0;    #SEZNOROW; #SQLCOMMAND1=exec dba.admin_akt_menu_odkaz; #SQLMESS1=Menu odkazem; #SQLCOMMAND2=exec dba.admin_menu_hierarchy; #SQLMESS2=Hierarchie; #SQLCOMMAND3=exec dba.admin_menu_order @sub = 1; #SQLMESS3=Pořadí; #SQLCOMMAND4=exec dba.admin_menu_abs_order; #SQLMESS4=Absolutní pořadí;;#SETMENUID_END; 1501USER_END 1502ID_MENU=MNID/ADMIN/200901291611486405315225 1502BUTTON_TITLE=Propočet menu tabulek modulu 1502TYP=SQLCOMMAND 1502USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200901291611486405315225/25/40/0; #SQLCOMMAND1=exec dba.admin_akt_menu %id_modulu%; #PERCENT_OFF;;#SETMENUID_END; 1502USER_END 1503ID_MENU=MNID/ADMIN/200901291530014901129206 1503BUTTON_TITLE=Propočet menu tabulek zvolené větve 1503TYP=SQLCOMMAND 1503USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200901291530014901129206/25/40/0; #SQLCOMMAND1=exec dba.admin_akt_menu '',%menu_hierarchy_root_mnid%,1,1; #PERCENT_OFF;;#SETMENUID_END; 1503USER_END 1504ID_MENU=MNID/ADMIN/200801101508576293661982 1504BUTTON_TITLE=Propočet menu odkazem 1504TYP=SQLCOMMAND 1504USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200801101508576293661982/25/40/0; #NOEDIT_EVAL_LEFT=(not typ_def in (85,90)); #PERCENT_OFF; #SQLCOMMAND1=exec dba.admin_akt_menu_odkaz %id_modulu%,%mnid%; #SQLMESS1=Menu odkazem;;#SETMENUID_END; 1504USER_END 16ID_MENU=MNID/ADMIN/201108191600050509259974 16BUTTON_TITLE=Skupina zobrazení 16USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//201108191600050509259974/25/40/0;;#SETMENUID_END; 1601ID_MENU=MNID/ADMIN/201108191601199005030522 1601BUTTON_TITLE=Evidence 1601TYP=SQLCOMMAND 1601USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201108191601199005030522/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=10,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1601USER_END 1602ID_MENU=MNID/ADMIN/201108191603431777557299 1602BUTTON_TITLE=Přehledy 1602TYP=SQLCOMMAND 1602USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201108191603431777557299/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=20,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1602USER_END 1603ID_MENU=MNID/ADMIN/201108191604227349324688 1603BUTTON_TITLE=Sestavy 1603TYP=SQLCOMMAND 1603USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201108191604227349324688/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=30,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1603USER_END 1604ID_MENU=MNID/ADMIN/201108191604426444594495 1604BUTTON_TITLE=Číselníky 1604TYP=SQLCOMMAND 1604USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201108191604426444594495/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=40,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1604USER_END 1605ID_MENU=MNID/ADMIN/201108191605132908746532 1605BUTTON_TITLE=Operace 1605TYP=SQLCOMMAND 1605USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201108191605132908746532/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=50,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1605USER_END 1606ID_MENU=MNID/ADMIN/201108191605568078817429 1606BUTTON_TITLE=Servis 1606TYP=SQLCOMMAND 1606USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201108191605568078817429/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=60,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1606USER_END 1607ID_MENU=MNID/ADMIN/201108191606105706911498 1607BUTTON_TITLE=Neuvedeno 1607TYP=SQLCOMMAND 1607USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201108191606105706911498/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=0,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1607USER_END 1608ID_MENU=MNID/ADMIN/201201191613322310285425 1608BUTTON_TITLE=Skrytá 1608TYP=SQLCOMMAND 1608USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201201191613322310285425/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=100,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1608USER_END 17ID_MENU=MNID/ADMIN/202212142225447161060144 17BUTTON_TITLE=Rozděl tlačítko se Zpět akcí 17TYP=SQLCOMMAND 17USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//202212142225447161060144/25/40/0;    #NOEDIT_EVAL_LEFT=\\DEVFIRM <> 1; #MULTI_BUTTON; #PERCENT_OFF; #NOEDIT_EVAL_LEFT_BEGIN; (typ_def <> 20 /*tlačítko na seznamu*/ or isnull(parametr) or pos(parametr, '#' + 'RIGHTBUTTON;') <= 0 or getdirective(parametr, 'BUTTON_CLASS') <> '' or getdirective(parametr, 'BUTTON_CLASS_RIGHT') <> '' or getdirective(parametr, 'BUTTON_GROUP') <> '' or menudirective(parametr, 'BUTTON_TITLE') = '' or menudirective(parametr, 'TYP') = 'GROUP') #NOEDIT_EVAL_LEFT_END; #SQLCOMMAND1_BEGIN; declare @left_mnid #BY(menu_system.mnid), @right_mnid #BY(menu_system.mnid) select @left_mnid = %mnid%, @right_mnid = convert(varchar(8)/*BY*/, GetDate(), 112) + left(replace(convert(varchar(11)/*BY*/, GetDate(), 14), ':', ''), 8) + right('00000000' + convert(varchar(8)/*BY*/, convert(int/*BY*/, floor(rand() * 99999999))), 8) declare @left_parm #VARCHARMAX/*BY*/, @right_parm #VARCHARMAX/*BY*/, @right_popis #BY(menu_system.popis), @menu_ok tinyint/*BY*/ select @menu_ok = 0 select @menu_ok = 1, @left_parm = dba.removedirective_fce( dba.substitute_fce(dba.removedirective_fce( dba.removedirective_fce( dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce( replace(convert(varchar(max)/*BY*/, ms.parametr), '#' + 'RIGHTBUTTON;', '#' + 'BUTTON_GROUP=' + dba.getmenudirective_fce(ms.parametr, 'BUTTON_TITLE') + ';'), 'BUTTON_R_QUESTION'), 'BUTTON_R_QUESTION1'), 'BUTTON_R_QUESTION2'), 'BUTTON_R_QUESTION3'), 'BUTTON_R_QUESTION4'), 'BUTTON_R_QUESTION5'), 'BUTTON_R_QUESTION3000'), 'BUTTON_R_QUESTION3001'), 'BUTTON_R_QUESTION3002'), 'BUTTON_R_QUESTION3003'), 'NOEDIT_EVAL_RIGHT'), 'SUBST_RIGHT'), '#' + 'RIGHTCLICK|0|1-#' + 'RIGHTCLICK|1|1 - #' + 'RIGHTCLICK|1|' + 'case when #' + 'RIGHTCLICK=1 then 0 else 1 end|1|case when #' + 'RIGHTCLICK = 1 then 0 else 1 end|1|' + 'case when #' + 'RIGHTCLICK=1 then 1 else 0 end|0|case when #' + 'RIGHTCLICK = 1 then 1 else 0 end|0|' + 'case when #' + 'RIGHTCLICK=0 then 0 else 1 end|0|case when #' + 'RIGHTCLICK = 0 then 0 else 1 end|0|' + 'case when #' + 'RIGHTCLICK=0 then 1 else 0 end|1|case when #' + 'RIGHTCLICK = 0 then 1 else 0 end|1|' + 'case when #' + 'RIGHTCLICK=1 then ''FALSE'' else ''TRUE'' end|''TRUE''|case when #' + 'RIGHTCLICK = 1 then ''FALSE'' else ''TRUE'' end|''TRUE''|' + 'case when #' + 'RIGHTCLICK=1 then ''TRUE'' else ''FALSE'' end|''FALSE''|case when #' + 'RIGHTCLICK = 1 then ''TRUE'' else ''FALSE'' end|''FALSE''|' + 'case when #' + 'RIGHTCLICK=0 then ''FALSE'' else ''TRUE'' end|''FALSE''|case when #' + 'RIGHTCLICK = 0 then ''FALSE'' else ''TRUE'' end|''FALSE''|' + 'case when #' + 'RIGHTCLICK=0 then ''TRUE'' else ''FALSE'' end|''TRUE''|case when #' + 'RIGHTCLICK = 0 then ''TRUE'' else ''FALSE'' end|''TRUE''|' + '#' + 'RIGHTCLICK=0 and ||#' + 'RIGHTCLICK = 0 and ||#' + 'RIGHTCLICK=1 or ||#' + 'RIGHTCLICK = 1 or ||', '|'), 'BUTTONTEXT_RIGHT'), @right_parm = dba.removedirective_fce('BUTTON_TITLE=' + dba.getdirective_def_fce(ms.parametr, 'BUTTONTEXT_RIGHT', 'Zpět ' + dba.getmenudirective_fce(ms.parametr, 'BUTTON_TITLE')) + char(13) + char(10) + dba.removemenudirective_fce( dba.substitute_fce(dba.removedirective_fce( replace(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce( replace(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce( replace(dba.removedirective_fce( replace(convert(varchar(max)/*BY*/, ms.parametr), '#' + 'RIGHTBUTTON;', '#' + 'BUTTON_GROUP=' + dba.getmenudirective_fce(ms.parametr, 'BUTTON_TITLE') + ';#' + 'BUTTON_GROUP_RIGHT;/' + '*#' + 'LEFT_MNID=' + @left_mnid + ';*' + '/'), 'NOEDIT_EVAL_LEFT'), '#' + 'NOEDIT_EVAL_RIGHT', '#' + 'NOEDIT_EVAL_LEFT'), 'BUTTON_QUESTION'), 'BUTTON_QUESTION1'), 'BUTTON_QUESTION2'), 'BUTTON_QUESTION3'), 'BUTTON_QUESTION4'), 'BUTTON_QUESTION5'), 'BUTTON_QUESTION3000'), 'BUTTON_QUESTION3001'), 'BUTTON_QUESTION3002'), 'BUTTON_QUESTION3003'), '#' + 'BUTTON_R_QUESTION', '#' + 'BUTTON_QUESTION'), 'BUTTON_TITLE1'), 'BUTTON_TITLE2'), 'BUTTON_TITLE3'), 'BUTTON_TITLE4'), 'BUTTON_TITLE5'), 'BUTTON_TITLE6'), 'BUTTON_TITLE3000'), 'BUTTON_TITLE3001'), 'BUTTON_TITLE3002'), 'BUTTON_TITLE3003'), '#' + 'BUTTON_TITLE', '#' + '.BUTTON_TITLE'), 'SUBST_RIGHT'), '#' + 'RIGHTCLICK|1|1-#' + 'RIGHTCLICK|0|1 - #' + 'RIGHTCLICK|0|' + 'case when #' + 'RIGHTCLICK=1 then 0 else 1 end|0|case when #' + 'RIGHTCLICK = 1 then 0 else 1 end|0|' + 'case when #' + 'RIGHTCLICK=1 then 1 else 0 end|1|case when #' + 'RIGHTCLICK = 1 then 1 else 0 end|1|' + 'case when #' + 'RIGHTCLICK=0 then 0 else 1 end|1|case when #' + 'RIGHTCLICK = 0 then 0 else 1 end|1|' + 'case when #' + 'RIGHTCLICK=0 then 1 else 0 end|0|case when #' + 'RIGHTCLICK = 0 then 1 else 0 end|0|' + 'case when #' + 'RIGHTCLICK=1 then ''FALSE'' else ''TRUE'' end|''FALSE''|case when #' + 'RIGHTCLICK = 1 then ''FALSE'' else ''TRUE'' end|''FALSE''|' + 'case when #' + 'RIGHTCLICK=1 then ''TRUE'' else ''FALSE'' end|''TRUE''|case when #' + 'RIGHTCLICK = 1 then ''TRUE'' else ''FALSE'' end|''TRUE''|' + 'case when #' + 'RIGHTCLICK=0 then ''FALSE'' else ''TRUE'' end|''TRUE''|case when #' + 'RIGHTCLICK = 0 then ''FALSE'' else ''TRUE'' end|''TRUE''|' + 'case when #' + 'RIGHTCLICK=0 then ''TRUE'' else ''FALSE'' end|''FALSE''|case when #' + 'RIGHTCLICK = 0 then ''TRUE'' else ''FALSE'' end|''FALSE''|' + '#' + 'RIGHTCLICK=1 and ||#' + 'RIGHTCLICK = 1 and ||#' + 'RIGHTCLICK=0 or ||#' + 'RIGHTCLICK = 0 or ||' + '#' + 'DEFAULT_BUTTON;||' + dba.getdirective_fce(ms.parametr, 'SUBST_RIGHT'), '|'), 'BUTTON_TITLE'), 'BUTTONTEXT_RIGHT'), @right_popis = 'Tlačítko seznam ' + dba.getdirective_def_fce(ms.parametr, 'BUTTONTEXT_RIGHT', 'Zpět ' + dba.getmenudirective_fce(ms.parametr, 'BUTTON_TITLE')) from dba.menu_system ms where ms.mnid = @left_mnid and ms.typ_def = 20 /*tlačítko na seznamu*/ and convert(varchar(255)/*BY*/, ms.parametr) is not null and ms.parametr like char(37) + '#' + 'RIGHTBUTTON;' + char(37) and (ms.parametr not like char(37) + '#' + 'BUTTON_CLASS=' + char(37) + ';' + char(37) and ms.parametr not like char(37) + '#' + 'BUTTON_CLASS_BEGIN;' + char(37) + '#' + 'BUTTON_CLASS_END;' + char(37)) and (ms.parametr not like char(37) + '#' + 'BUTTON_CLASS_RIGHT=' + char(37) + ';' + char(37) and ms.parametr not like char(37) + '#' + 'BUTTON_CLASS_RIGHT_BEGIN;' + char(37) + '#' + 'BUTTON_CLASS_RIGHT_END;' + char(37)) and (ms.parametr not like char(37) + '#' + 'BUTTON_GROUP=' + char(37) + ';' + char(37) and ms.parametr not like char(37) + '#' + 'BUTTON_GROUP_BEGIN;' + char(37) + '#' + 'BUTTON_GROUP_END;' + char(37)) and dba.getmenudirective_fce(ms.parametr, 'BUTTON_TITLE') <> '' if @menu_ok <> 1 begin raiserror 99999 'Menu %1! není vhodné pro rozklad na dvě tlačítka' return end insert into dba.menu_system(mnid, id_modulu, standard, typ_def, par_mnid, ord_typ, ord_mnid, typ_obj_akce, id_akce_tabulka, popis, pravo_def, pravo_tab, parametr, lang, menu_visible, platnost, autor, ts) select @right_mnid, ms.id_modulu, ms.standard, ms.typ_def, ms.par_mnid, 10 /*za*/, @left_mnid, ms.typ_obj_akce, ms.id_akce_tabulka, @right_popis, ms.pravo_def, ms.pravo_tab, @right_parm, ms.lang, ms.menu_visible, ms.platnost, user, GetDate() from dba.menu_system ms where ms.mnid = @left_mnid update dba.menu_system set parametr = @left_parm, autor = user, ts =  GetDate() from dba.menu_system ms where ms.mnid = @left_mnid #SQLCOMMAND1_END; #REFRESHROWS;;#SETMENUID_END; 17USER_END w_ift\tparametr/0 18ID_MENU=MNID/ADMIN/200705041442127098270895 18BUTTON_TITLE=Nadřízená položka 18TYP=SEZNAM 18SEZ_TABULKA=menu_system 18SEZ_VAZBA=TRUE 18SEZ_VAZBA_COLUMN1=par_mnid 18USER=;#SETMENUID=O/ADMIN/0/menu_system//200705041442127098270895/20/40/0; #NOEDIT_EVAL_LEFT=par_mnid='';;#SETMENUID_END; 19ID_MENU=MNID/ADMIN/200705041442120638940181 19BUTTON_TITLE=Přímo podřízené 19TYP=SEZNAM 19SEZ_TABULKA=menu_system 19SEZ_PODMINKA=menu_system.par_mnid=%mnid% 19SEZ_V_PODMINCE=menu_system.par_mnid,par_mnid 19USER_BEGIN ;#SETMENUID=O/ADMIN/0/menu_system//200705041442120638940181/20/40/0; #SETVAL1=par_mnid=%mnid%:W\\APP=1 and \\COPY=0:V; #PERCENT_OFF;;#SETMENUID_END; 19USER_END 20ID_MENU=MNID/ADMIN/200705041442128667621216 20BUTTON_TITLE=Všechny podřízené 20TYP=SEZNAM 20SEZ_TABULKA=menu_system 20SEZ_PODMINKA=exists(select 1 from dba.menu_hierarchy mh1 with(index(pk_menu_hierarchy)) where mh1.mnid=menu_system.mnid and mh1.par_mnid=%mnid% and mh1.mnid<>%mnid%) 20USER_BEGIN ;#SETMENUID=O/ADMIN/0/menu_system//200705041442128667621216/20/40/0; #SETVAL1=par_mnid=%mnid%:W\\APP=1 and \\COPY=0:V; #PERCENT_OFF;;#SETMENUID_END; 20USER_END 21ID_MENU=MNID/ADMIN/201805091630597661895178 21BUTTON_TITLE=Přičítané položky 21TYP=SEZNAM 21SEZ_TABULKA=menu_system 21SEZ_PODMINKA=menu_system.mnid <> '' and menu_system.mnid in ('' %(ReplaceAll(ReplaceAll(GetReferredBatches('^', 'menu_system', 'parametr', '#TYP_DEF='+string(typ_def)+';#TYP_OBJ_AKCE='+trim(typ_obj_akce)+';#ID_AKCE_TABULKA='+trim(id_akce_tabulka)+';#PAR_MNID='+string(par_mnid)+';', parametr, 0),'menu_system'+GetGlobalPar('ADMIN_PK_SEPAR')+'parametr'+GetGlobalPar('ADMIN_PK_SEPAR'),', '''), '^', '''')):NA%) 21USER=;#SETMENUID=O/ADMIN/0/menu_system//201805091630597661895178/20/40/0;;#SETMENUID_END; 22ID_MENU=MNID/ADMIN/200705281524511450073627 22BUTTON_TITLE=Přidej pod 22TYP=DETAIL 22DET_TABULKA=menu_system 22DET_WHERE=APP 22USER_BEGIN ;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200705281524511450073627/20/40/0; #BUTTON_GROUP=Přidej položku; #NOEDIT_EVAL_LEFT=\\DEVFIRM <> 1; #SETVAL1=id_modulu=%id_modulu%:W\\APP=1:V; #SETVAL2=standard=%if('\\DEVSTANDARD'=0 and standard=40, 30, standard)%:W\\APP=1:V; #SETVAL3=typ_def=%if(typ_def in (10,15,16),20,typ_def)%:W\\APP=1:V; #SETVAL4=par_mnid=%mnid%:W\\APP=1:V; #PERCENT_OFF; #PRAVO_DEF=30;;#SETMENUID_END; 22USER_END 23ID_MENU=MNID/ADMIN/200705281524511387441722 23BUTTON_TITLE=Přidej za 23TYP=DETAIL 23DET_TABULKA=menu_system 23DET_WHERE=APP 23USER_BEGIN ;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200705281524511387441722/20/40/0; #BUTTON_GROUP=Přidej položku; #NOEDIT_EVAL_LEFT=\\DEVFIRM <> 1; #SETVAL1=id_modulu=%id_modulu%:W\\APP=1:V; #SETVAL2=standard=%if('\\DEVSTANDARD'=0 and standard=40, 30, standard)%:W\\APP=1:V; #SETVAL3=typ_def=%typ_def%:W\\APP=1:V; #SETVAL4=par_mnid=%par_mnid%:W\\APP=1:V; #SETVAL5=ord_mnid=%mnid%:W\\APP=1:V; #PERCENT_OFF; #PRAVO_DEF=30;;#SETMENUID_END; 23USER_END 24ID_MENU=MNID/ADMIN/200705281524518733028224 24BUTTON_TITLE=Přidej na konec 24TYP=DETAIL 24DET_TABULKA=menu_system 24DET_WHERE=APP 24USER_BEGIN ;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200705281524518733028224/20/40/0; #BUTTON_GROUP=Přidej položku; #NOEDIT_EVAL_LEFT=\\DEVFIRM <> 1; #SETVAL1=id_modulu=%id_modulu%:W\\APP=1:V; #SETVAL2=standard=%if('\\DEVSTANDARD'=0 and standard=40, 30, standard)%:W\\APP=1:V; #SETVAL3=typ_def=%typ_def%:W\\APP=1:V; #SETVAL4=par_mnid=%par_mnid%:W\\APP=1:V; #PERCENT_OFF; #PRAVO_DEF=30;;#SETMENUID_END; 24USER_END 25ID_MENU=MNID/ADMIN/200705041442126709779267 25BUTTON_TITLE=Export položky 25TYP=EXPORT 25USER_BEGIN ;#SETMENUID=O/ADMIN/0/menu_system//200705041442126709779267/20/40/0; #BUTTON_GROUP=Export; #MULTI_BUTTON; #PERCENT_OFF; #TABLES=menu_system\\WHERE id_modulu=%id_modulu% and standard=%standard% and mnid=%mnid%:D; #FILENAME=%mnid:NA%_%(case(typ_def when 10 then 'M' when 15 then 'T' when 16 then 'A' when 20 then 'L' when 25 then 'FL' when 30 then 'D' when 35 then 'DL' when 40 then 'N' when 45 then 'O' when 50 then 'P' when 52 then 'E' when 55 then 'R' when 85 then 'RN' when 90 then 'RF' else 'X')):NA%_%ReplaceChars(typ_obj_akce,'not [0-9][a-z][A-Z]_', '_'):NA%_%ReplaceChars(id_akce_tabulka,'not [0-9][a-z][A-Z]_', '_'):NA%__%case(standard when 10 then 'u' when 20 then 'g' when 30 then 'f' when 31 then 'a' when 33 then 'p' when 36 then 'c' when 40 then 's' else 'x'):NA%_mn.xml; #COMMENTFILE=Menu; #FILE_ID=menu_exp; #FILETYPE=xml; #EXP_FORMAT=xml; #SAVEDLG; #SEPAR=,; #MAXLEN=4096; #.B.BE; #.U.SERLOG; #.T.IMELOG; #XCMD=T-I-R-; #DPLUS; #XWHERE=sd_columns.standard in (40,38); #APPENDFILE_BEGIN;/*UPD_BEGIN*/exec dba.admin_akt_menu %id_modulu%,%mnid%/*UPD_END*/; COMMIT; #APPENDFILE_END;;#SETMENUID_END; 25USER_END 26ID_MENU=MNID/ADMIN/200705041442121260133722 26BUTTON_TITLE=Export akce 26TYP=EXPORT 26USER_BEGIN ;#SETMENUID=O/ADMIN/0/menu_system//200705041442121260133722/20/40/0; #BUTTON_GROUP=Export; #MULTI_BUTTON; #PERCENT_OFF; #TABLES=menu_system\\WHERE exists(select 1 from dba.menu_hierarchy mh1 where mh1.par_mnid=%mnid% and menu_system.mnid=mh1.mnid) ORDER BY menu_system.mnid:D; #FILENAME=menu_%id_modulu:NA%_%mnid:NA%+.xml; #FILE_ID=menu_exp; #FILETYPE=xml; #EXP_FORMAT=xml; #SAVEDLG; #SEPAR=,; #MAXLEN=4096; #.B.BE; #.U.SERLOG; #.T.IMELOG; #XCMD=T-I-; #DPLUS; #XWHERE=sd_columns.standard in (40,38); #APPENDFILE_BEGIN;exec dba.admin_akt_menu %id_modulu%,%mnid%; COMMIT; #APPENDFILE_END;;#SETMENUID_END; 26USER_END 27ID_MENU=MNID/ADMIN/201804190958392681187069 27BUTTON_TITLE=Repository revize 27TYP=SEZNAM 27SEZ_TITLE=Revize {(mnid + ' ' + popis)} 27USER_BEGIN ;#SETMENUID=O/ADMIN/0/menu_system//201804190958392681187069/20/40/0;    #NO_MENU_TEST; #USERSUB1=#MODUL=lower(id_modulu):NA; #USERSUB2=#XSTD=select (case when moduly.firemni = 1 then 30 else %standard% end) from dba.moduly moduly with(index(pk_moduly)) where moduly.id_modulu='#MODUL':NA; #USERSUB3=#VERSION=case(#XSTD when 30 then '_firm\\' + '\\LICREG' + '\\'+'termopan' when 31 then '_firm\\' + '\\LICREG' + '\\_all' else '\\KARAT_VERSION' + case(#XSTD when 36 then '\\_stat\\' + lower('\\VZOR_STAT') when 33 then '\\_part\\' + lower('\\VZOR_PART') else '')):NA; #USERSUB4=#PATCH=select coalesce(max(right(moduly_verze.verze, 3)), '000') from dba.moduly_verze moduly_verze where moduly_verze.standard=#XSTD and moduly_verze.id_modulu='#MODUL':NA; #USERSUB5=#FOLDER=#MODUL_sql\\menu:C:NA; #USERSUB6_BEGIN;#NAME=lower(mnid + '_' + case (typ_def when 10 /* Menu aplikace */ then 'M' when 15 /* Menu objektů tabulky */ then 'T' when 16 /* Menu objektů akce */ then 'A' when 20 /* Tlačítko seznam */ then 'L' when 25 /* Funkce seznamu */ then 'FL' when 30 /* Tlačítko detailu */ then 'D' when 35 /* Funkce detailu */ then 'DL' when 40 /* Nod stromu */ then 'N' when 45 /* Ostatní */ then 'O' when 50 /* Doplněk nadřízeného (před) */ then 'P' when 52 /* Doplněk nadřízeného (za) */ then 'E' when 55 /* Náhrada */ then 'R' when 85 /* Odkaz bez podakcí */ then 'RN' when 90 /* Odkaz včetně podakcí */ then 'RF' else '') + '_' + regexreplace(typ_obj_akce, '[^\\w]', '_') + '_' + regexreplace(id_akce_tabulka, '[^\\w]', '_') + '__' + case (standard when 10 then 'u' when 20 then 'g' when 30 then 'f' when 31 then 'a' when 33 then 'p' when 36 then 'c' when 40 then 's' else 'x') + '_mn.xml') :NA#USERSUB6_END; #ADDTYP=SEZNAM,repository_revisions; #SUPERVISION_PARAMS_BEGIN; #SOURCE=#VERSION\\#MODUL\\#PATCH\\#FOLDER\\#NAME; #SUPERVISION_PARAMS_END;;#SETMENUID_END; 27USER_END 28ID_MENU=MNID/ADMIN/201804191001246884004964 28BUTTON_TITLE=Repository viník 28TYP=SEZNAM 28SEZ_TITLE=Viník {(mnid + ' ' + popis)} 28USER_BEGIN ;#SETMENUID=O/ADMIN/0/menu_system//201804191001246884004964/20/40/0;    #NO_MENU_TEST; #USERSUB1=#MODUL=lower(id_modulu):NA; #USERSUB2=#XSTD=select (case when moduly.firemni = 1 then 30 else %standard% end) from dba.moduly moduly with(index(pk_moduly)) where moduly.id_modulu='#MODUL':NA; #USERSUB3=#VERSION=case(#XSTD when 30 then '_firm\\' + '\\LICREG' + '\\'+'termopan' when 31 then '_firm\\' + '\\LICREG' + '\\_all' else '\\KARAT_VERSION' + case(#XSTD when 36 then '\\_stat\\' + lower('\\VZOR_STAT') when 33 then '\\_part\\' + lower('\\VZOR_PART') else '')):NA; #USERSUB4=#PATCH=select coalesce(max(right(moduly_verze.verze, 3)), '000') from dba.moduly_verze moduly_verze where moduly_verze.standard=#XSTD and moduly_verze.id_modulu='#MODUL':NA; #USERSUB5=#FOLDER=#MODUL_sql\\menu:C:NA; #USERSUB6_BEGIN;#NAME=lower(mnid + '_' + case (typ_def when 10 /* Menu aplikace */ then 'M' when 15 /* Menu objektů tabulky */ then 'T' when 16 /* Menu objektů akce */ then 'A' when 20 /* Tlačítko seznam */ then 'L' when 25 /* Funkce seznamu */ then 'FL' when 30 /* Tlačítko detailu */ then 'D' when 35 /* Funkce detailu */ then 'DL' when 40 /* Nod stromu */ then 'N' when 45 /* Ostatní */ then 'O' when 50 /* Doplněk nadřízeného (před) */ then 'P' when 52 /* Doplněk nadřízeného (za) */ then 'E' when 55 /* Náhrada */ then 'R' when 85 /* Odkaz bez podakcí */ then 'RN' when 90 /* Odkaz včetně podakcí */ then 'RF' else '') + '_' + regexreplace(typ_obj_akce, '[^\\w]', '_') + '_' + regexreplace(id_akce_tabulka, '[^\\w]', '_') + '__' + case (standard when 10 then 'u' when 20 then 'g' when 30 then 'f' when 31 then 'a' when 33 then 'p' when 36 then 'c' when 40 then 's' else 'x') + '_mn.xml') :NA#USERSUB6_END; #ADDTYP=SEZNAM,repository_blame; #SUPERVISION_PARAMS_BEGIN; #SOURCE=#VERSION\\#MODUL\\#PATCH\\#FOLDER\\#NAME; #SUPERVISION_PARAMS_END;;#SETMENUID_END; 28USER_END 29ID_MENU=MNID/ADMIN/201805221357521737295274 29BUTTON_TITLE=Spusť 29TYP=KARAT_URL 29USER_BEGIN ;#SETMENUID=O/ADMIN/0/menu_system//201805221357521737295274/20/40/0;    #NOEDIT_EVAL_LEFT=typ_def<>10 or isnull(parametr) or trim(parametr)='' or trim(popis)='' or trim(popis)='-'; #USERSUB1=#XMYURL='mnid/'+lower(trim(id_modulu))+'/'+trim(mnid)+'?menu=1&nss=0':NA; #URL=#XMYURL; #BUTTON_NO_FOCUS;;#SETMENUID_END; 29USER_END w_ift\tconn\tms_19216810247_karat_termopan 73 w_ift\tf11\tStandard AllDevices w_ift\tRefreshObjects\tLIST LIST_TREE2 FAST PARENT_PARENT_LIST PARENT_PARENT_FAST w_ift\tPercentOffDWs\tLIST\tdba.menu_system\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.12860.12886.12909 FAST\tdba.menu_system\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.12860.12886.preview.fast.dw_fast_preview PARENT_PARENT_LIST\tdba.user_rozpad_dilcu\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.12120 PARENT_PARENT_FAST\tdba.user_rozpad_dilcu\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.preview.fast.dw_fast_preview w_ift\tpreview1\tRychlý náhled ---Id: FAST ---UserParam: #TYPE=Fast;#ID=FAST;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=1;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1; ---Directives: #TYPE=Fast;#ID=FAST;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROW=1;#HIDDEN_HEADER=1;#PREVIEW_FAST;#FAST_PREV_TAB=menu_system;#FAST_PREV_DW=;#ENAB_FAST_PREV_IN_VIEW=;#FAST_PREVIEW_SUBS=; w_ift\tCurrentPreviewUserParam\t#USR_PREVIEW;#PREVIEW_GRID_ROWS=1;#PREVIEW_GRID_COLS=1;#PREVIEW_VIEW_TAB=0;#PREVIEW_CAN_ADD=0;#GENERATED_PREVIEW; #USR_PREVIEW1_BEGIN;#TYPE=Fast;#ID=FAST;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=1;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1;#USR_PREVIEW1_END; w_iftseznam\tsez_tabulka\tmenu_system w_iftseznam\tlink\tkarat://termopan:@0/seznam/menu_system?where=%28%20menu%5fsystem%2emnid%20%3d%20%27202311191846439310651865%27%20%29&menu=0 w_iftseznam\tsez_sql\t#NOTAB=menu_system;SELECT *,    menu_hierarchy.tree_info,    menu_hierarchy.root_id_modulu,    menu_hierarchy.root_typ_def,    menu_hierarchy.root_typ_obj_akce,    menu_hierarchy.root_id_akce_tabulka,    menu_hierarchy.root_level,    menu_hierarchy.root_mnid,    menu_hierarchy2.abs_order0 AS menu_hierarchy_abs_order0 /*\\:Smenu_hierarchy.abs_order0*/,    menu_hierarchy.abs_order,    (select count(*) from dba.hide_menu hm1 with(index(pk_hide_menu), forceseek) where hm1.mnid=menu_system.mnid) AS is_hide /*\\:Smenu_system.hide_in_lite:HJe skryto na firemní úrovni*/,    menu_system.root_typ_def AS ms_root_typ_def,    (case when convert(char(6)/*BY*/, menu_usage.ts, 112) = convert(char(6)/*BY*/, GetDate(), 112) then menu_usage.cnt_m else 0 end) AS usage_cnt_m /* \\:Smenu_usage.cnt_m:HPočet použití tento měsíc */,    (case when convert(char(6)/*BY*/, menu_usage.ts, 112) = convert(char(6)/*BY*/, GetDate(), 112) then menu_usage.cnt_pm when convert(char(6)/*BY*/, menu_usage.ts, 112) = convert(char(6)/*BY*/, DateAdd(month, -1, GetDate()), 112) then menu_usage.cnt_m else 0 end) AS usage_cnt_pm /* \\:Smenu_usage.cnt_pm:HPočet použití minulý měsíc */,    (case when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) then menu_usage.cnt_y else 0 end) AS usage_cnt_y /* \\:Smenu_usage.cnt_y:HPočet použití letos */,    (case when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) then menu_usage.cnt_py when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, DateAdd(year, -1, GetDate()), 112) then menu_usage.cnt_y else 0 end) AS usage_cnt_py /* \\:Smenu_usage.cnt_py:HPočet použití loni */,    (case when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) then menu_usage.cnt_y + menu_usage.cnt_py when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, DateAdd(year, -1, GetDate()), 112) then menu_usage.cnt_y else 0 end) AS usage_cnt_y2 /* \\:Smenu_usage.cnt_py:HPočet použití letos a loni */,    coalesce(menu_usage.ts, '1901-01-01') AS usage_last /* \\:Smenu_usage.ts:HPoslední použití */   FROM       dba.menu_system menu_system,       dba.menu_hierarchy menu_hierarchy,       dba.menu_hierarchy menu_hierarchy2 with(index(menu_hierarchy_par), forceseek),       dba.menu_usage menu_usage with(index(pk_menu_usage), forceseek)   WHERE menu_hierarchy.mnid=menu_system.mnid    and menu_hierarchy.par_mnid=menu_system.mnid    and menu_hierarchy.par_level=0    and menu_hierarchy2.mnid=menu_hierarchy.root_mnid    and menu_hierarchy2.par_mnid=menu_hierarchy.root_mnid    and menu_hierarchy2.par_level=0    and menu_usage.mnid=*menu_system.mnid w_iftseznam\tdetail.color\t255 w_iftseznam\tdwselect\tSELECT TOP 351  menu_system.mnid,menu_system.id_modulu,menu_system.standard,menu_system.typ_def,menu_system.par_mnid,menu_system.ord_typ,menu_system.ord_mnid,menu_system.ref_mnid,menu_system.typ_obj_akce,menu_system.id_akce_tabulka,menu_system.popis,menu_system.microhelp,menu_system.hide_in_lite,menu_system.pravo_def,menu_system.pravo_tab,menu_system.parametr,menu_system.lang,menu_system.menu_visible,menu_system.root_typ_def,menu_system.menu_box,menu_system.autor,menu_system.ts,menu_system.popisxcz,menu_system.microhelpxcz,menu_system.parametrxcz,isnull(menu_system.xattach,0) xattach,    menu_hierarchy.tree_info,    menu_hierarchy.root_id_modulu,    menu_hierarchy.root_typ_def,    menu_hierarchy.root_typ_obj_akce,    menu_hierarchy.root_id_akce_tabulka,    menu_hierarchy.root_level,    menu_hierarchy.root_mnid,    menu_hierarchy2.abs_order0 menu_hierarchy_abs_order0 ,    menu_hierarchy.abs_order,    (select count(*) from dba.hide_menu hm1 with(index(pk_hide_menu), forceseek) where hm1.mnid=menu_system.mnid) is_hide ,    menu_system.root_typ_def ms_root_typ_def,    (case when convert(char(6)/*BY*/, menu_usage.ts, 112) = convert(char(6)/*BY*/, GetDate(), 112) then menu_usage.cnt_m else 0 end) usage_cnt_m ,    (case when convert(char(6)/*BY*/, menu_usage.ts, 112) = convert(char(6)/*BY*/, GetDate(), 112) then menu_usage.cnt_pm when convert(char(6)/*BY*/, menu_usage.ts, 112) = convert(char(6)/*BY*/, dateadd(month, -1, convert(datetime/*BY*/, GetDate())), 112) then menu_usage.cnt_m else 0 end) usage_cnt_pm ,    (case when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) then menu_usage.cnt_y else 0 end) usage_cnt_y ,    (case when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) then menu_usage.cnt_py when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, dateadd(year, -1, convert(datetime/*BY*/, GetDate())), 112) then menu_usage.cnt_y else 0 end) usage_cnt_py ,    (case when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) then menu_usage.cnt_y + menu_usage.cnt_py when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, dateadd(year, -1, convert(datetime/*BY*/, GetDate())), 112) then menu_usage.cnt_y else 0 end) usage_cnt_y2 ,    isnull(menu_usage.ts, '1901-01-01') usage_last    FROM dba.menu_system menu_system   left outer join dba.menu_usage menu_usage with(index(pk_menu_usage), forceseek) on (menu_system.mnid=menu_usage.mnid) , dba.menu_hierarchy menu_hierarchy  , dba.menu_hierarchy menu_hierarchy2 with(index(menu_hierarchy_par), forceseek)  WHERE menu_hierarchy.mnid=menu_system.mnid    and menu_hierarchy.par_mnid=menu_system.mnid    and menu_hierarchy.par_level=0    and menu_hierarchy2.mnid=menu_hierarchy.root_mnid    and menu_hierarchy2.par_mnid=menu_hierarchy.root_mnid    and menu_hierarchy2.par_level=0    and 1=1  AND ((menu_system.mnid='202311150958528994779223') OR (menu_system.mnid='202311191846439310651865') OR (menu_system.mnid='202311192042136607116962') OR (menu_system.mnid='202311281516584940055182') OR (menu_system.mnid='202312201241247088534145') OR (menu_system.mnid='202401011237088621624371') OR (menu_system.mnid='202401101317041814512620') OR (menu_system.mnid='200712131400008904774679') AND (1=1) /* sez_podm */) AND (((not 1 in(select 1 from dba.hide_menu hm1 where hm1.mnid=menu_system.mnid) /* hide - neskryté */ )) /* combo3 */ )    ORDER BY menu_hierarchy.root_id_modulu,menu_hierarchy.root_typ_def,menu_hierarchy2.abs_order0,menu_hierarchy.abs_order OPTION(fast 350) /* seznam menu_system O/ADMIN/10/menu_system//200705041442125791594212/15/40/0 */ w_iftseznam\tdwcolumns\tmnid,id_modulu,standard,typ_def,par_mnid,ord_typ,ord_mnid,ref_mnid,typ_obj_akce,id_akce_tabulka,popis,microhelp,hide_in_lite,pravo_def,pravo_tab,parametr,lang,menu_visible,root_typ_def,menu_box,autor,ts,popisxcz,microhelpxcz,parametrxcz,xattach,menu_hierarchy_tree_info,menu_hierarchy_root_id_modulu,menu_hierarchy_root_typ_def,menu_hierarchy_root_typ_obj_akce,menu_hierarchy_root_id_akce_tabulka,menu_hierarchy_root_level,menu_hierarchy_root_mnid,menu_hierarchy_abs_order0,menu_hierarchy_abs_order,is_hide,ms_root_typ_def,usage_cnt_m,usage_cnt_pm,usage_cnt_y,usage_cnt_py,usage_cnt_y2,usage_last,xremind w_iftseznam\tdwcolumns_visible\txattach_bmp,xremind_bmp,menu_hierarchy_root_id_modulu,menu_hierarchy_root_typ_def,menu_hierarchy_tree_info,id_modulu,standard,popis,typ_obj_akce,id_akce_tabulka,parametr,mnid,typ_def,ord_typ,ord_mnid,par_mnid,ref_mnid,microhelp,hide_in_lite,pravo_def,pravo_tab,menu_hierarchy_abs_order,autor,ts,menu_hierarchy_root_typ_obj_akce,menu_hierarchy_root_id_akce_tabulka,menu_hierarchy_root_level,menu_hierarchy_abs_order0,lang,menu_visible,root_typ_def,menu_box,popisxcz,microhelpxcz,parametrxcz,menu_hierarchy_root_mnid,is_hide,ms_root_typ_def,usage_cnt_m,usage_cnt_pm,usage_cnt_y,usage_cnt_py,usage_cnt_y2,usage_last 0\txattach_bmp\t18 1\txremind_bmp\t18 2\tmenu_hierarchy_root_id_modulu\t76 3\tmenu_hierarchy_root_typ_def\t119 4\tmenu_hierarchy_tree_info\t257 5\tid_modulu\t37 6\tstandard\t53 7\tpopis\t257 8\ttyp_obj_akce\t131 9\tid_akce_tabulka\t131 10\tparametr\t257 11\tmnid\t156 12\ttyp_def\t119 13\tord_typ\t70 14\tord_mnid\t156 15\tpar_mnid\t156 16\tref_mnid\t156 17\tmicrohelp\t257 18\thide_in_lite\t89 19\tpravo_def\t154 20\tpravo_tab\t133 21\tmenu_hierarchy_abs_order\t84 22\tautor\t49 23\tts\t150 24\tmenu_hierarchy_root_typ_obj_akce\t131 25\tmenu_hierarchy_root_id_akce_tabulka\t133 26\tmenu_hierarchy_root_level\t145 27\tmenu_hierarchy_abs_order0\t122 28\tlang\t58 29\tmenu_visible\t467 30\troot_typ_def\t158 31\tmenu_box\t106 32\tpopisxcz\t467 33\tmicrohelpxcz\t467 34\tparametrxcz\t467 35\tmenu_hierarchy_root_mnid\t158 36\tis_hide\t136 37\tms_root_typ_def\t158 38\tusage_cnt_m\t144 39\tusage_cnt_pm\t151 40\tusage_cnt_y\t108 41\tusage_cnt_py\t102 42\tusage_cnt_y2\t140 43\tusage_last\t146 w_iftseznam\tdwcolumns_invisible\txattach,menu_hierarchy_abs_order0_sum,menu_hierarchy_abs_order_sum,usage_cnt_m_sum,usage_cnt_pm_sum,usage_cnt_y_sum,usage_cnt_py_sum,usage_cnt_y2_sum,xremind w_iftseznam\tid_save\tadmin/menu_system_std w_iftseznam\tfirstuser\t#XSUB=#FOR_STD^0;;;#SETMENUID=O/ADMIN/10/menu_system//200705041442125791594212/15/40/0;  #NOADD_EVAL=\\DEVFIRM <> 1; #NOEDIT_EVAL=\\DEVFIRM <> 1; #TL_FUNKCE_SEZNAM; #FILTER_COL_NO_SET_TO_DETAIL=menu_hierarchy_root_id_modulu,menu_hierarchy_root_typ_def,menu_hierarchy_root_id_akce_tabulka,menu_hierarchy_root_typ_obj_akce,menu_hierarchy_abs_order0,menu_hierarchy_abs_order; #LEGEND1=#ADMIN_MENU10:#TEXT_ADMIN_MENU10:Ftyp_def=10; #LEGEND2=#ADMIN_MENU1X:#TEXT_ADMIN_MENU1X:Ftyp_def=15 or typ_def=16; #LEGEND3=#ADMIN_MENU20:#TEXT_ADMIN_MENU20:Ftyp_def=20; #LEGEND4=#ADMIN_MENUXX:#TEXT_ADMIN_MENUXX:F1=1; #COMBO_BEGIN; #COMBO_ID=ROOT_LEVEL; #COLUMN=menu_hierarchy.root_level; #POPISBEZ=.Úroveň zanoření; #POLOZKY=1. úroveň (Hlavní nabídky)\\0^2. úroveň (Podnabídky)\\1^3. úroveň\\2^4. úroveň\\3; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=TYP_DEF; #COLUMN=menu_system.typ_def; #POLOZKY=Menu aplikace\\10^Menu objektů tabulky\\15^Menu objektů akce\\16^Tlačítko seznam\\20^Funkce seznamu\\25^Tlačítko detailu\\30^Funkce detailu\\35^Nod stromu\\40^Ostatní\\45^Doplněk\\50^Náhrada\\55^Odkaz bez podakcí\\85^Odkaz včetně podakcí\\90; #POPISBEZ=.Typ definice; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=HIDE; #COLUMN=-; #POPISBEZ=.Skrytí; #POLOZKY=Neskryté\\1\\not exists(select 1 from dba.hide_menu hm1 where hm1.mnid=menu_system.mnid)^Skryté\\2\\exists(select 1 from dba.hide_menu hm1 where hm1.mnid=menu_system.mnid); #DEFAULT=1; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=STANDARD; #POPISBEZ=Standard; #COLUMN=menu_system.standard; #ITEMS_COLUMN=menu_system.standard; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=USAGE; #COLUMN=-; #POPISBEZ=.Použití; #POLOZKY_BEGIN;Použité tento měsíc\\1\\exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and convert(char(6)/*BY*/, u.ts, 112) = convert(char(6)/*BY*/, GetDate(), 112) and u.cnt_m > 0) ^Použité minulý měsíc\\2\\exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and ((convert(char(6)/*BY*/, u.ts, 112) = convert(char(6)/*BY*/, GetDate(), 112) and u.cnt_pm > 0) or (convert(char(6)/*BY*/, u.ts, 112) = convert(char(6)/*BY*/, DateAdd(month, -1, GetDate()), 112) and u.cnt_m > 0))) ^Použité letos\\3\\exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) and u.cnt_y > 0) ^Použité loni\\4\\exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and ((convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) and u.cnt_py > 0) or (convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, DateAdd(year, -1, GetDate()), 112) and u.cnt_y > 0))) ^Nepoužité letos ani loni\\5\\not exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and ((convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) and (u.cnt_py > 0 or u.cnt_y > 0)) or (convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, DateAdd(year, -1, GetDate()), 112) and u.cnt_y > 0))) #POLOZKY_END; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=REFACTOR; #COLUMN=-; #POPISBEZ=.Možnost úpravy; #POLOZKY_BEGIN;Tlačítko s akcí Zpět\\1\\1 = 1 and menu_system.typ_def = 20 /*tlačítko na seznamu*/ and convert(varchar(255)/*BY*/, menu_system.parametr) is not null and menu_system.parametr like char(37) + '#' + 'RIGHTBUTTON;' + char(37) and (menu_system.parametr not like char(37) + '#' + 'BUTTON_CLASS=' + char(37) + ';' + char(37) and menu_system.parametr not like char(37) + '#' + 'BUTTON_CLASS_BEGIN;' + char(37) + '#' + 'BUTTON_CLASS_END;' + char(37)) and (menu_system.parametr not like char(37) + '#' + 'BUTTON_CLASS_RIGHT=' + char(37) + ';' + char(37) and menu_system.parametr not like char(37) + '#' + 'BUTTON_CLASS_RIGHT_BEGIN;' + char(37) + '#' + 'BUTTON_CLASS_RIGHT_END;' + char(37)) and (menu_system.parametr not like char(37) + '#' + 'BUTTON_GROUP=' + char(37) + ';' + char(37) and menu_system.parametr not like char(37) + '#' + 'BUTTON_GROUP_BEGIN;' + char(37) + '#' + 'BUTTON_GROUP_END;' + char(37)) and dba.getmenudirective_fce(menu_system.parametr, 'BUTTON_TITLE') <> '' and dba.getmenudirective_fce(menu_system.parametr, 'TYP') <> 'GROUP' and not exists(select 1 from dba.menu_system ms2 where ms2.par_mnid = menu_system.mnid) ^ #POLOZKY_END; #COMBO_END; #ENAB_ADD_IN_VIEW; #ENAB_DELETE_IN_VIEW; #DONE_ADDTYP=menu_system_tree; #PASTEIFPASTE; #PASTE_TO_DETAIL;;#SETMENUID_END;;;#SETMENUID=O/ADMIN/20/menu_system_tree/ADDTYP/200706211207172425861253/16/40/0; #ONELEVEL; #ROOTID=<ROOT>; -- Vše #TREESELECT1=select '<ALL>', '<ROOT>', 'Vše'/*TRAN*/; #TREESELECTWHEN1='$PARNOD$'='<ROOT>'; #TREE_WHERE1=1=1; -- Seznam modulů #TREESELECT2_BEGIN; #EXPAND_LANG_BEGIN;|\\MAIN_LANG_PRG||1|1| select 'MODUL:'+moduly.id_modulu, '<ALL>', rtrim(moduly.id_modulu)+'  - '+rtrim(moduly.nazev) from dba.moduly with(index(pk_moduly)) where moduly.id_modulu<>'' and (moduly.id_modulu='#FOR_MOD' or '#FOR_MOD'='#FOR'+'_MOD') order by moduly.id_modulu #EXPAND_LANG_END; #TREESELECT2_END; #TREESELECTWHEN2='$PARNOD$'='<ALL>'; #TREE_WHERE2=menu_hierarchy.root_id_modulu=convert(#BY(menu_system.id_modulu),substring($ID$,7,5)); -- Typ definice - popis #TREESELECT3_BEGIN; select 'RMN'+convert(char(2)/*BY*/,cisla.num)+':'+substring('$PARNOD$',7,5), 'MODUL:'+substring('$PARNOD$',7,20), #ITEMS(\\MAIN_LANG_PRG,menu_system.typ_def,cisla.num) from dba.cisla cisla with(index(pk_cisla)) where cisla.num>=10 and cisla.num<=16 and cisla.num in (10,15,16) order by cisla.num #TREESELECT3_END; #TREESELECTWHEN3=Left('$PARNOD$',6)='MODUL:'; #TREE_WHERE3=menu_hierarchy.root_typ_def=convert(#BY(menu_system.typ_def),substring($ID$,4,2)); #TREE_WHERE_ADD_PARENT3; -- Rootové položky menu aplikace #TREESELECT4_BEGIN; #EXPAND_LANG_BEGIN;|\\MAIN_LANG_PRG||1|1| select 'PMENU:'+menu_hierarchy.mnid, 'RMN10:'+menu_hierarchy.root_id_modulu, isnull(menu_system.popis,'-')+'  ('+#ITEMS(\\MAIN_LANG_PRG,menu_system.standard,menu_system.standard)+')' from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.root_id_modulu = convert(#BY(menu_hierarchy.root_id_modulu),substring('$PARNOD$',7,5)) and menu_hierarchy.root_typ_def = 10 and menu_hierarchy.root_mnid = menu_hierarchy.mnid and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.abs_order0 #EXPAND_LANG_END; #TREESELECT4_END; #TREESELECTWHEN4=Left('$PARNOD$',6)='RMN10:'; #TREE_WHERE4=exists(select 1 from dba.menu_hierarchy mh_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring($ID$,7,24)) and mh_tree.mnid=menu_system.mnid); -- Rootové typy menu objektů #TREESELECT5_BEGIN; select DISTINCT 'TMN'+convert(char(2)/*BY*/,menu_hierarchy.root_typ_def)+':'+substring(RTrim(menu_hierarchy.root_id_modulu)+replicate('*',5), 1, 5) + substring(RTrim(menu_hierarchy.root_typ_obj_akce)+replicate('*',20), 1, 20), 'RMN'+convert(char(2)/*BY*/,menu_hierarchy.root_typ_def)+':'+menu_hierarchy.root_id_modulu, menu_hierarchy.root_typ_obj_akce from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.root_id_modulu = convert(#BY(menu_hierarchy.root_id_modulu),str_replace(substring('$PARNOD$',7,5),'*','')) and menu_hierarchy.root_typ_def = convert(#BY(menu_system.typ_def),substring('$PARNOD$',4,2)) and menu_hierarchy.root_mnid = menu_hierarchy.mnid and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.root_typ_obj_akce #TREESELECT5_END; #TREESELECTWHEN5=Left('$PARNOD$',6) in ('RMN15:','RMN16:'); #TREE_WHERE5=menu_hierarchy.root_typ_obj_akce=convert(#BY(menu_hierarchy.root_typ_obj_akce),str_replace(substring($ID$,12,20),'*','')); #TREE_WHERE_ADD_PARENT5; -- Rootové položky menu objektů #TREESELECT6_BEGIN; #EXPAND_LANG_BEGIN;|\\MAIN_LANG_PRG||1|1| select 'DMENU:'+menu_system.mnid, 'TMN'+convert(char(2)/*BY*/,menu_hierarchy.root_typ_def)+':'+substring(RTrim(menu_hierarchy.root_id_modulu)+replicate('*',5), 1, 5) + substring(RTrim(menu_hierarchy.root_typ_obj_akce)+replicate('*',20), 1, 20), isnull(menu_system.popis,'-')+'  ('+#ITEMS(\\MAIN_LANG_PRG,menu_system.standard,menu_system.standard)+')' from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.root_id_modulu = convert(#BY(menu_hierarchy.root_id_modulu),str_replace(substring('$PARNOD$',7,5),'*','')) and menu_hierarchy.root_typ_def = convert(#BY(menu_system.typ_def),substring('$PARNOD$',4,2)) and menu_hierarchy.root_mnid = menu_hierarchy.mnid and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.root_typ_obj_akce, menu_hierarchy.root_id_akce_tabulka #EXPAND_LANG_END; #TREESELECT6_END; #TREESELECTWHEN6=Left('$PARNOD$',3)='TMN'; #TREE_WHERE6=exists(select 1 from dba.menu_hierarchy mh_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring($ID$,7,24)) and mh_tree.mnid=menu_system.mnid); -- Typy pod-položek rootů menu objektů #TREESELECT7_BEGIN; select DISTINCT 'KMN'+convert(char(2)/*BY*/,menu_system.typ_def)+':'+menu_hierarchy.this_par_mnid, 'DMENU:'+menu_hierarchy.this_par_mnid, #ITEMS(\\MAIN_LANG_PRG,menu_system.typ_def,menu_system.typ_def) from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.this_par_mnid=convert(#BY(menu_hierarchy.this_par_mnid),substring('$PARNOD$',7,24)) and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by 1 #TREESELECT7_END; #TREESELECTWHEN7=Left('$PARNOD$',6)='DMENU:'; #TREE_WHERE7=exists(select 1 from dba.menu_hierarchy mh_tree, dba.menu_system ms_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring($ID$,7,24)) and mh_tree.mnid=menu_system.mnid and ms_tree.mnid=mh_tree.mnid and ms_tree.typ_def=convert(#BY(menu_system.typ_def),substring($ID$,4,2)) ); -- Pod-položky typů #TREESELECT8_BEGIN; #EXPAND_LANG_BEGIN;|\\MAIN_LANG_PRG||1|1| select 'PMENU:'+menu_hierarchy.mnid, 'KMN'+convert(char(2)/*BY*/,menu_system.typ_def)+':'+menu_hierarchy.this_par_mnid, (case when menu_system.typ_def=10 then isnull(menu_system.popis,'-') else #ITEMS(\\MAIN_LANG_PRG,menu_system.typ_def,menu_system.typ_def) +' '+dba.getmenudirective_fce(convert(#MAXVARCHAR/*BY*/,menu_system.parametr),'BUTTON_TITLE') end) +'  ('+#ITEMS(\\MAIN_LANG_PRG,menu_system.standard,menu_system.standard)+')' from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.this_par_mnid=convert(#BY(menu_hierarchy.this_par_mnid),substring('$PARNOD$',7,24)) and menu_system.typ_def=convert(#BY(menu_system.typ_def),substring('$PARNOD$',4,2)) and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.abs_order #EXPAND_LANG_END; #TREESELECT8_END; #TREESELECTWHEN8=Left('$PARNOD$',3)='KMN'; #TREE_WHERE8=exists(select 1 from dba.menu_hierarchy mh_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring($ID$,7,24)) and mh_tree.mnid=menu_system.mnid); -- Pod-položky obecné #TREESELECT9_BEGIN; #EXPAND_LANG_BEGIN;|\\MAIN_LANG_PRG||1|1| select 'PMENU:'+menu_hierarchy.mnid, 'PMENU:'+menu_hierarchy.this_par_mnid, (case when menu_system.typ_def=10 then isnull(menu_system.popis,'-') else #ITEMS(\\MAIN_LANG_PRG,menu_system.typ_def,menu_system.typ_def) +' '+dba.getmenudirective_fce(convert(#MAXVARCHAR/*BY*/,menu_system.parametr),'BUTTON_TITLE') end) +'  ('+#ITEMS(\\MAIN_LANG_PRG,menu_system.standard,menu_system.standard)+')' from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.this_par_mnid=convert(#BY(menu_hierarchy.this_par_mnid),substring('$PARNOD$',7,24)) and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.abs_order #EXPAND_LANG_END; #TREESELECT9_END; #TREESELECTWHEN9=Left('$PARNOD$',6)='PMENU:'; #TREE_WHERE9=exists(select 1 from dba.menu_hierarchy mh_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring($ID$,7,24)) and mh_tree.mnid=menu_system.mnid);;#SETMENUID_END;;#ALL_ADD_TYPES=SEZNAM_,ADDTYP_menu_system_tree,;;#SEZNAM_TREE; w_iftseznam\tmaxrows\t350 w_iftseznam\tstorage\t7 888 w_iftseznam\tsorting w_iftseznam\tadd_sorting\tmenu_hierarchy_root_id_modulu A,menu_hierarchy_root_typ_def A,menu_hierarchy_abs_order0 A,menu_hierarchy_abs_order A, ------------------------------- Window: Seznam Systém - menu (ADMIN disabled visible c__w_iftseznam tab=menu_system) w_ift\tclassname\tw_iftseznam w_ift\tclasses\t.object.karatbaseobject.karatobject.karatcontrol.karatwindow.c__w_ift.c__w_filter_parent.c__w_iftseznam w_ift\tparametr ID_MENU=MNID/ADMIN/200705041442128667621216 BUTTON_TITLE=Všechny podřízené TYP=SEZNAM CLASS=w_iftseznam AKCE=menu_system ID_SAVE=menu_system_std W_SOURCE=object(c__w_iftseznam AppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.12860.12886) SEZ_TABULKA=menu_system SEZ_SQL=#NOTAB=menu_system;SELECT *,    menu_hierarchy.tree_info,    menu_hierarchy.root_id_modulu,    menu_hierarchy.root_typ_def,    menu_hierarchy.root_typ_obj_akce,    menu_hierarchy.root_id_akce_tabulka,    menu_hierarchy.root_level,    menu_hierarchy.root_mnid,    menu_hierarchy2.abs_order0 AS menu_hierarchy_abs_order0 /*\\:Smenu_hierarchy.abs_order0*/,    menu_hierarchy.abs_order,    (select count(*) from dba.hide_menu hm1 with(index(pk_hide_menu), forceseek) where hm1.mnid=menu_system.mnid) AS is_hide /*\\:Smenu_system.hide_in_lite:HJe skryto na firemní úrovni*/,    menu_system.root_typ_def AS ms_root_typ_def,    (case when convert(char(6)/*BY*/, menu_usage.ts, 112) = convert(char(6)/*BY*/, GetDate(), 112) then menu_usage.cnt_m else 0 end) AS usage_cnt_m /* \\:Smenu_usage.cnt_m:HPočet použití tento měsíc */,    (case when convert(char(6)/*BY*/, menu_usage.ts, 112) = convert(char(6)/*BY*/, GetDate(), 112) then menu_usage.cnt_pm when convert(char(6)/*BY*/, menu_usage.ts, 112) = convert(char(6)/*BY*/, DateAdd(month, -1, GetDate()), 112) then menu_usage.cnt_m else 0 end) AS usage_cnt_pm /* \\:Smenu_usage.cnt_pm:HPočet použití minulý měsíc */,    (case when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) then menu_usage.cnt_y else 0 end) AS usage_cnt_y /* \\:Smenu_usage.cnt_y:HPočet použití letos */,    (case when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) then menu_usage.cnt_py when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, DateAdd(year, -1, GetDate()), 112) then menu_usage.cnt_y else 0 end) AS usage_cnt_py /* \\:Smenu_usage.cnt_py:HPočet použití loni */,    (case when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) then menu_usage.cnt_y + menu_usage.cnt_py when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, DateAdd(year, -1, GetDate()), 112) then menu_usage.cnt_y else 0 end) AS usage_cnt_y2 /* \\:Smenu_usage.cnt_py:HPočet použití letos a loni */,    coalesce(menu_usage.ts, '1901-01-01') AS usage_last /* \\:Smenu_usage.ts:HPoslední použití */   FROM       dba.menu_system menu_system,       dba.menu_hierarchy menu_hierarchy,       dba.menu_hierarchy menu_hierarchy2 with(index(menu_hierarchy_par), forceseek),       dba.menu_usage menu_usage with(index(pk_menu_usage), forceseek)   WHERE menu_hierarchy.mnid=menu_system.mnid    and menu_hierarchy.par_mnid=menu_system.mnid    and menu_hierarchy.par_level=0    and menu_hierarchy2.mnid=menu_hierarchy.root_mnid    and menu_hierarchy2.par_mnid=menu_hierarchy.root_mnid    and menu_hierarchy2.par_level=0    and menu_usage.mnid=*menu_system.mnid SEZ_CLASS=w_iftseznam_tree2 SEZ_MODIFY=menu_hierarchy_tree_info.font.face=\"Courier New CE\" menu_hierarchy_tree_info.font.family=\"1\" menu_hierarchy_tree_info.font.pitch=\"1\" datawindow.detail.color=\"255 \t if(typ_def=10,16777215,if(typ_def=15 or typ_def=16,65535,if(typ_def=20,16776960,if(1=1,65280,1090519039))))\" SEZ_PODMINKA=exists(select 1 from dba.menu_hierarchy mh1 with(index(pk_menu_hierarchy)) where mh1.mnid=menu_system.mnid and mh1.par_mnid=%mnid% and mh1.mnid<>%mnid%) AND #TREE_WHERE USER_BEGIN ;#SETMENUID=O/ADMIN/0/menu_system//200705041442128667621216/20/40/0; #SETVAL1=par_mnid=/*apb645*/'202311191846439310651865'/*ape645*/:W\\APP=1 and \\COPY=0:V; #PERCENT_OFF;;#SETMENUID_END;;#ISFIRSTROW;;#ISLASTROW;;#ISFROMBUTTON;;;#SETMENUID=O/ADMIN/10/menu_system//200705041442125791594212/15/40/0;  #NOADD_EVAL=1 <> 1; #NOEDIT_EVAL=1 <> 1; #TL_FUNKCE_SEZNAM; #FILTER_COL_NO_SET_TO_DETAIL=menu_hierarchy_root_id_modulu,menu_hierarchy_root_typ_def,menu_hierarchy_root_id_akce_tabulka,menu_hierarchy_root_typ_obj_akce,menu_hierarchy_abs_order0,menu_hierarchy_abs_order; #LEGEND1=#ADMIN_MENU10:#TEXT_ADMIN_MENU10:Ftyp_def=10; #LEGEND2=#ADMIN_MENU1X:#TEXT_ADMIN_MENU1X:Ftyp_def=15 or typ_def=16; #LEGEND3=#ADMIN_MENU20:#TEXT_ADMIN_MENU20:Ftyp_def=20; #LEGEND4=#ADMIN_MENUXX:#TEXT_ADMIN_MENUXX:F1=1; #COMBO_BEGIN; #COMBO_ID=ROOT_LEVEL; #COLUMN=menu_hierarchy.root_level; #POPISBEZ=.Úroveň zanoření; #POLOZKY=1. úroveň (Hlavní nabídky)\\0^2. úroveň (Podnabídky)\\1^3. úroveň\\2^4. úroveň\\3; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=TYP_DEF; #COLUMN=menu_system.typ_def; #POLOZKY=Menu aplikace\\10^Menu objektů tabulky\\15^Menu objektů akce\\16^Tlačítko seznam\\20^Funkce seznamu\\25^Tlačítko detailu\\30^Funkce detailu\\35^Nod stromu\\40^Ostatní\\45^Doplněk\\50^Náhrada\\55^Odkaz bez podakcí\\85^Odkaz včetně podakcí\\90; #POPISBEZ=.Typ definice; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=HIDE; #COLUMN=-; #POPISBEZ=.Skrytí; #POLOZKY=Neskryté\\1\\not exists(select 1 from dba.hide_menu hm1 where hm1.mnid=menu_system.mnid)^Skryté\\2\\exists(select 1 from dba.hide_menu hm1 where hm1.mnid=menu_system.mnid); #DEFAULT=1; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=STANDARD; #POPISBEZ=Standard; #COLUMN=menu_system.standard; #ITEMS_COLUMN=menu_system.standard; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=USAGE; #COLUMN=-; #POPISBEZ=.Použití; #POLOZKY_BEGIN;Použité tento měsíc\\1\\exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and convert(char(6)/*BY*/, u.ts, 112) = convert(char(6)/*BY*/, GetDate(), 112) and u.cnt_m > 0) ^Použité minulý měsíc\\2\\exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and ((convert(char(6)/*BY*/, u.ts, 112) = convert(char(6)/*BY*/, GetDate(), 112) and u.cnt_pm > 0) or (convert(char(6)/*BY*/, u.ts, 112) = convert(char(6)/*BY*/, DateAdd(month, -1, GetDate()), 112) and u.cnt_m > 0))) ^Použité letos\\3\\exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) and u.cnt_y > 0) ^Použité loni\\4\\exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and ((convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) and u.cnt_py > 0) or (convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, DateAdd(year, -1, GetDate()), 112) and u.cnt_y > 0))) ^Nepoužité letos ani loni\\5\\not exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and ((convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) and (u.cnt_py > 0 or u.cnt_y > 0)) or (convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, DateAdd(year, -1, GetDate()), 112) and u.cnt_y > 0))) #POLOZKY_END; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=REFACTOR; #COLUMN=-; #POPISBEZ=.Možnost úpravy; #POLOZKY_BEGIN;Tlačítko s akcí Zpět\\1\\1 = 1 and menu_system.typ_def = 20 /*tlačítko na seznamu*/ and convert(varchar(255)/*BY*/, menu_system.parametr) is not null and menu_system.parametr like char(37) + '#' + 'RIGHTBUTTON;' + char(37) and (menu_system.parametr not like char(37) + '#' + 'BUTTON_CLASS=' + char(37) + ';' + char(37) and menu_system.parametr not like char(37) + '#' + 'BUTTON_CLASS_BEGIN;' + char(37) + '#' + 'BUTTON_CLASS_END;' + char(37)) and (menu_system.parametr not like char(37) + '#' + 'BUTTON_CLASS_RIGHT=' + char(37) + ';' + char(37) and menu_system.parametr not like char(37) + '#' + 'BUTTON_CLASS_RIGHT_BEGIN;' + char(37) + '#' + 'BUTTON_CLASS_RIGHT_END;' + char(37)) and (menu_system.parametr not like char(37) + '#' + 'BUTTON_GROUP=' + char(37) + ';' + char(37) and menu_system.parametr not like char(37) + '#' + 'BUTTON_GROUP_BEGIN;' + char(37) + '#' + 'BUTTON_GROUP_END;' + char(37)) and dba.getmenudirective_fce(menu_system.parametr, 'BUTTON_TITLE') <> '' and dba.getmenudirective_fce(menu_system.parametr, 'TYP') <> 'GROUP' and not exists(select 1 from dba.menu_system ms2 where ms2.par_mnid = menu_system.mnid) ^ #POLOZKY_END; #COMBO_END; #ENAB_ADD_IN_VIEW; #ENAB_DELETE_IN_VIEW; #DONE_ADDTYP=menu_system_tree; #PASTEIFPASTE; #PASTE_TO_DETAIL;;#SETMENUID_END;;;#SETMENUID=O/ADMIN/20/menu_system_tree/ADDTYP/200706211207172425861253/16/40/0; #ONELEVEL; #ROOTID=<ROOT>; -- Vše #TREESELECT1=select '<ALL>', '<ROOT>', 'Vše'/*TRAN*/; #TREESELECTWHEN1='$PARNOD$'='<ROOT>'; #TREE_WHERE1=1=1; -- Seznam modulů #TREESELECT2_BEGIN; #EXPAND_LANG_BEGIN;|CZ||1|1| select 'MODUL:'+moduly.id_modulu, '<ALL>', rtrim(moduly.id_modulu)+'  - '+rtrim(moduly.nazev) from dba.moduly with(index(pk_moduly)) where moduly.id_modulu<>'' and (moduly.id_modulu='#FOR_MOD' or '#FOR_MOD'='#FOR'+'_MOD') order by moduly.id_modulu #EXPAND_LANG_END; #TREESELECT2_END; #TREESELECTWHEN2='$PARNOD$'='<ALL>'; #TREE_WHERE2=menu_hierarchy.root_id_modulu=convert(#BY(menu_system.id_modulu),substring($ID$,7,5)); -- Typ definice - popis #TREESELECT3_BEGIN; select 'RMN'+convert(char(2)/*BY*/,cisla.num)+':'+substring('$PARNOD$',7,5), 'MODUL:'+substring('$PARNOD$',7,20), #ITEMS(CZ,menu_system.typ_def,cisla.num) from dba.cisla cisla with(index(pk_cisla)) where cisla.num>=10 and cisla.num<=16 and cisla.num in (10,15,16) order by cisla.num #TREESELECT3_END; #TREESELECTWHEN3=Left('$PARNOD$',6)='MODUL:'; #TREE_WHERE3=menu_hierarchy.root_typ_def=convert(#BY(menu_system.typ_def),substring($ID$,4,2)); #TREE_WHERE_ADD_PARENT3; -- Rootové položky menu aplikace #TREESELECT4_BEGIN; #EXPAND_LANG_BEGIN;|CZ||1|1| select 'PMENU:'+menu_hierarchy.mnid, 'RMN10:'+menu_hierarchy.root_id_modulu, isnull(menu_system.popis,'-')+'  ('+#ITEMS(CZ,menu_system.standard,menu_system.standard)+')' from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.root_id_modulu = convert(#BY(menu_hierarchy.root_id_modulu),substring('$PARNOD$',7,5)) and menu_hierarchy.root_typ_def = 10 and menu_hierarchy.root_mnid = menu_hierarchy.mnid and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.abs_order0 #EXPAND_LANG_END; #TREESELECT4_END; #TREESELECTWHEN4=Left('$PARNOD$',6)='RMN10:'; #TREE_WHERE4=exists(select 1 from dba.menu_hierarchy mh_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring($ID$,7,24)) and mh_tree.mnid=menu_system.mnid); -- Rootové typy menu objektů #TREESELECT5_BEGIN; select DISTINCT 'TMN'+convert(char(2)/*BY*/,menu_hierarchy.root_typ_def)+':'+substring(RTrim(menu_hierarchy.root_id_modulu)+replicate('*',5), 1, 5) + substring(RTrim(menu_hierarchy.root_typ_obj_akce)+replicate('*',20), 1, 20), 'RMN'+convert(char(2)/*BY*/,menu_hierarchy.root_typ_def)+':'+menu_hierarchy.root_id_modulu, menu_hierarchy.root_typ_obj_akce from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.root_id_modulu = convert(#BY(menu_hierarchy.root_id_modulu),str_replace(substring('$PARNOD$',7,5),'*','')) and menu_hierarchy.root_typ_def = convert(#BY(menu_system.typ_def),substring('$PARNOD$',4,2)) and menu_hierarchy.root_mnid = menu_hierarchy.mnid and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.root_typ_obj_akce #TREESELECT5_END; #TREESELECTWHEN5=Left('$PARNOD$',6) in ('RMN15:','RMN16:'); #TREE_WHERE5=menu_hierarchy.root_typ_obj_akce=convert(#BY(menu_hierarchy.root_typ_obj_akce),str_replace(substring($ID$,12,20),'*','')); #TREE_WHERE_ADD_PARENT5; -- Rootové položky menu objektů #TREESELECT6_BEGIN; #EXPAND_LANG_BEGIN;|CZ||1|1| select 'DMENU:'+menu_system.mnid, 'TMN'+convert(char(2)/*BY*/,menu_hierarchy.root_typ_def)+':'+substring(RTrim(menu_hierarchy.root_id_modulu)+replicate('*',5), 1, 5) + substring(RTrim(menu_hierarchy.root_typ_obj_akce)+replicate('*',20), 1, 20), isnull(menu_system.popis,'-')+'  ('+#ITEMS(CZ,menu_system.standard,menu_system.standard)+')' from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.root_id_modulu = convert(#BY(menu_hierarchy.root_id_modulu),str_replace(substring('$PARNOD$',7,5),'*','')) and menu_hierarchy.root_typ_def = convert(#BY(menu_system.typ_def),substring('$PARNOD$',4,2)) and menu_hierarchy.root_mnid = menu_hierarchy.mnid and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.root_typ_obj_akce, menu_hierarchy.root_id_akce_tabulka #EXPAND_LANG_END; #TREESELECT6_END; #TREESELECTWHEN6=Left('$PARNOD$',3)='TMN'; #TREE_WHERE6=exists(select 1 from dba.menu_hierarchy mh_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring($ID$,7,24)) and mh_tree.mnid=menu_system.mnid); -- Typy pod-položek rootů menu objektů #TREESELECT7_BEGIN; select DISTINCT 'KMN'+convert(char(2)/*BY*/,menu_system.typ_def)+':'+menu_hierarchy.this_par_mnid, 'DMENU:'+menu_hierarchy.this_par_mnid, #ITEMS(CZ,menu_system.typ_def,menu_system.typ_def) from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.this_par_mnid=convert(#BY(menu_hierarchy.this_par_mnid),substring('$PARNOD$',7,24)) and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by 1 #TREESELECT7_END; #TREESELECTWHEN7=Left('$PARNOD$',6)='DMENU:'; #TREE_WHERE7=exists(select 1 from dba.menu_hierarchy mh_tree, dba.menu_system ms_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring($ID$,7,24)) and mh_tree.mnid=menu_system.mnid and ms_tree.mnid=mh_tree.mnid and ms_tree.typ_def=convert(#BY(menu_system.typ_def),substring($ID$,4,2)) ); -- Pod-položky typů #TREESELECT8_BEGIN; #EXPAND_LANG_BEGIN;|CZ||1|1| select 'PMENU:'+menu_hierarchy.mnid, 'KMN'+convert(char(2)/*BY*/,menu_system.typ_def)+':'+menu_hierarchy.this_par_mnid, (case when menu_system.typ_def=10 then isnull(menu_system.popis,'-') else #ITEMS(CZ,menu_system.typ_def,menu_system.typ_def) +' '+dba.getmenudirective_fce(convert(#MAXVARCHAR/*BY*/,menu_system.parametr),'BUTTON_TITLE') end) +'  ('+#ITEMS(CZ,menu_system.standard,menu_system.standard)+')' from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.this_par_mnid=convert(#BY(menu_hierarchy.this_par_mnid),substring('$PARNOD$',7,24)) and menu_system.typ_def=convert(#BY(menu_system.typ_def),substring('$PARNOD$',4,2)) and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.abs_order #EXPAND_LANG_END; #TREESELECT8_END; #TREESELECTWHEN8=Left('$PARNOD$',3)='KMN'; #TREE_WHERE8=exists(select 1 from dba.menu_hierarchy mh_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring($ID$,7,24)) and mh_tree.mnid=menu_system.mnid); -- Pod-položky obecné #TREESELECT9_BEGIN; #EXPAND_LANG_BEGIN;|CZ||1|1| select 'PMENU:'+menu_hierarchy.mnid, 'PMENU:'+menu_hierarchy.this_par_mnid, (case when menu_system.typ_def=10 then isnull(menu_system.popis,'-') else #ITEMS(CZ,menu_system.typ_def,menu_system.typ_def) +' '+dba.getmenudirective_fce(convert(#MAXVARCHAR/*BY*/,menu_system.parametr),'BUTTON_TITLE') end) +'  ('+#ITEMS(CZ,menu_system.standard,menu_system.standard)+')' from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.this_par_mnid=convert(#BY(menu_hierarchy.this_par_mnid),substring('$PARNOD$',7,24)) and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.abs_order #EXPAND_LANG_END; #TREESELECT9_END; #TREESELECTWHEN9=Left('$PARNOD$',6)='PMENU:'; #TREE_WHERE9=exists(select 1 from dba.menu_hierarchy mh_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring($ID$,7,24)) and mh_tree.mnid=menu_system.mnid);;#SETMENUID_END;;#ALL_ADD_TYPES=SEZNAM_,ADDTYP_menu_system_tree,;;#SEZNAM_TREE; USER_END GEN_SORTS1=ID Menu^mnid^menu_system.mnid GEN_SORTS2=Modul kořenu,Typ definice kořenu,Celkové pořadí kořenu,Celkové pořadí položky^menu_hierarchy_root_id_modulu,menu_hierarchy_root_typ_def,menu_hierarchy_abs_order0,menu_hierarchy_abs_order^menu_hierarchy.root_id_modulu,menu_hierarchy.root_typ_def,menu_hierarchy2.abs_order0,menu_hierarchy.abs_order GEN_SORTS3=Typ definice kořenu,Typ objektu,ID Akce/Tabulka,Celkové pořadí kořenu,Celkové pořadí položky^menu_hierarchy_root_typ_def,menu_hierarchy_root_typ_obj_akce,menu_hierarchy_root_id_akce_tabulka,menu_hierarchy_abs_order0,menu_hierarchy_abs_order^menu_hierarchy.root_typ_def,menu_hierarchy.root_typ_obj_akce,menu_hierarchy.root_id_akce_tabulka,menu_hierarchy2.abs_order0,menu_hierarchy.abs_order GEN_SORTS4=Typ definice kořenu,ID Akce/Tabulka,Typ objektu,Celkové pořadí kořenu,Celkové pořadí položky^menu_hierarchy_root_typ_def,menu_hierarchy_root_id_akce_tabulka,menu_hierarchy_root_typ_obj_akce,menu_hierarchy_abs_order0,menu_hierarchy_abs_order^menu_hierarchy.root_typ_def,menu_hierarchy.root_id_akce_tabulka,menu_hierarchy.root_typ_obj_akce,menu_hierarchy2.abs_order0,menu_hierarchy.abs_order w_ift\tparametr/25 01ID_MENU=MNID/ADMIN/200705041442125216114966 01BUTTON_TITLE=Přegenerace popisu 01TYP=SQLCOMMAND 01USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200705041442125216114966/25/40/0;#NOEDIT_EVAL_LEFT=\\DEVFIRM <> 1; #PERCENT_OFF; #MULTI_BUTTON; #PROCESBAR; #PROCESTEXT=Přegenerování popisu; #REFRESHROW; #SQLCOMMAND1_BEGIN; update dba.menu_system set popis= (case when typ_def in (15,16) then rtrim(typ_obj_akce)+' 00 '+lower(rtrim(id_akce_tabulka)) else substring( (case typ_def when 20 then 'Tlačítko seznam'/*TRAN*/ when 25 then 'Funkce seznam'/*TRAN*/ when 30 then 'Tlačítko detail'/*TRAN*/ when 35 then 'Funkce detail'/*TRAN*/ when 40 then 'Nod stromu'/*TRAN*/ when 45 then 'Ostatní'/*TRAN*/ else 'Chyba'/*TRAN*/ end)+ (case when coalesce(patindex(char(37)+'BUTTON_TITLE='+char(37),parametr),0)>0 then char(32)+char(32)+ltrim(rtrim(substring(convert(varchar(255)/*BY*/,parametr), 13+patindex(char(37)+'BUTTON_TITLE='+char(37),parametr), patindex(char(37)+char(13)+char(10)+char(37),substring(convert(varchar(255)/*BY*/,parametr), 13+patindex(char(37)+'BUTTON_TITLE='+char(37),parametr),253)++char(13)+char(10))-1))) else '' end) ,1,100) end) from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid% and isnull(popis,'')<>'-' and typ_def in(15,16,20,25,30,35,40,45) #SQLCOMMAND1_END; #SQLMESS1=Úprava popisu nabídek menu; #SQLERR1=Chyba při úpravě popisu nabídek menu;;#SETMENUID_END; 01USER_END 02ID_MENU=MNID/ADMIN/200705041442129067457607 02BUTTON_TITLE=Refres&h menu 02TYP=NOTHING 02USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200705041442129067457607/25/40/0;#REFRESHMENU;#PRAVO_DEF=10;;#SETMENUID_END; 03ID_MENU=MNID/ADMIN/200705281524516005362103 03BUTTON_TITLE=- 03USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200705281524516005362103/25/40/0;;#SETMENUID_END; 04ID_MENU=MNID/ADMIN/200705041442127244230768 04BUTTON_TITLE=Práva na menu 04TYP=SEZNAM 04AKCE=admin_prehled_menu_s 04SEZ_PODMINKA=menu_system.mnid=%mnid% 04SEZ_V_PODMINCE=menu_system.mnid,prava_menu.mnid,mnid 04SEZ_INITINDEX=sort_2 04USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200705041442127244230768/25/40/0;;#SETMENUID_END; 05ID_MENU=MNID/ADMIN/200705041442123786522673 05BUTTON_TITLE=Skrýt nabídku všem 05TYP=SQLCOMMAND 05USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=hide_menu;;#SETMENUID=O/ADMIN/0/menu_system//200705041442123786522673/25/40/0; #BUTTON_QUESTION=Opravdu chcete skrýt nabídku všem uživatelům této databáze?; #NOEDIT_EVAL_LEFT=is_hide=1; #PERCENT_OFF; #MULTI_BUTTON; #PROCESBAR; #PROCESTEXT=Skrytí nabídky; #SQLCOMMAND1_BEGIN; insert into dba.hide_menu(mnid,ts,autor) select %mnid%,GetDate(),user where not exists(select 1 from dba.hide_menu with(index(pk_hide_menu)) where mnid=%mnid%) #SQLCOMMAND1_END; #SQLMESS1=Skrytí nabídky;;#SETMENUID_END; 05USER_END 06ID_MENU=MNID/ADMIN/200705041442120086570885 06BUTTON_TITLE=Zrušit skrytí nabídky všem 06TYP=SQLCOMMAND 06USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=hide_menu;;#SETMENUID=O/ADMIN/0/menu_system//200705041442120086570885/25/40/0; #BUTTON_QUESTION=Opravdu chcete zrušit skrytí nabídky všem uživatelům této databáze?; #NOEDIT_EVAL_LEFT=is_hide=0; #PERCENT_OFF; #MULTI_BUTTON; #PROCESBAR; #PROCESTEXT=Zrušení skrytí nabídky; #SQLCOMMAND1=delete dba.hide_menu from dba.hide_menu hide_menu with(index(pk_hide_menu)) where mnid=%mnid%; #SQLMESS1=Zrušení skrytí nabídky;;#SETMENUID_END; 06USER_END 07ID_MENU=MNID/ADMIN/202208111458062528230757 07BUTTON_TITLE=Použití uživatelem 07TYP=SEZNAM 07AKCE=menu_usr_usage_stats 07ID_SAVE=menu_usr_usage_stats_mnid 07SEZ_TABULKA=menu_usr_usage 07SEZ_PODMINKA=menu_usr_usage.mnid = %mnid% 07SEZ_V_PODMINCE=menu_usr_usage.mnid,mnid 07USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//202208111458062528230757/25/40/0;;#SETMENUID_END; 08ID_MENU=MNID/ADMIN/200705281524512120861161 08BUTTON_TITLE=- 08USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200705281524512120861161/25/40/0;;#SETMENUID_END; 09ID_MENU=MNID/ADMIN/200706181505327111302212 09BUTTON_TITLE=Neintegritní položky 09TYP=SEZNAM 09ID_SAVE=menu_system_neinteg 09SEZ_TABULKA=menu_system 09SEZ_TITLE=Neintegritní položky 09SEZ_PODMINKA_BEGIN not exists(select 1 from dba.menu_system ms3 with(index(pk_menu_system)) where  ms3.mnid=menu_system.ord_mnid) or not exists(select 1 from dba.menu_system ms3 with(index(pk_menu_system)) where  ms3.mnid=menu_system.par_mnid) or (menu_system.standard<=30 and not exists(select 1 from dba.menu_system ms3 with(index(pk_menu_system)) where  ms3.mnid=menu_system.ref_mnid)) 09SEZ_PODMINKA_END 09USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200706181505327111302212/25/40/0;  #NOADDTABMENU; #SEZNOROW;;#SETMENUID_END; 09USER_END 10ID_MENU=MNID/ADMIN/200707121416482425861253 10BUTTON_TITLE=Položky bez vypočtené hierarchie 10TYP=SEZNAM 10ID_SAVE=menu_system_nohier 10SEZ_TABULKA=menu_system 10SEZ_TITLE=Položky bez vypočtené hierarchie 10SEZ_PODMINKA_BEGIN (menu_system.standard<=30 or menu_system.ref_mnid='') and not exists(select 1 from dba.menu_hierarchy mh with(index(pk_menu_hierarchy)) where  mh.mnid=menu_system.mnid and  mh.par_mnid=menu_system.mnid) 10SEZ_PODMINKA_END 10USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200707121416482425861253/25/40/0;  #NOADDTABMENU; #SEZNOROW;;#SETMENUID_END; 10USER_END 11ID_MENU=MNID/ADMIN/200706150855272425861253 11BUTTON_TITLE=Chybně převedné položky 11TYP=SEZNAM 11SEZ_TABULKA=menu_system 11SEZ_TITLE=Chybně převedné položky 11SEZ_PODMINKA=menu_system.par_mnid='' and menu_system.typ_def not in (10,15,16) 11USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200706150855272425861253/25/40/0;  #SEZNOROW;;#SETMENUID_END; 12ID_MENU=MNID/ADMIN/200706150855271450073627 12BUTTON_TITLE=Zacyklené pořadí položek 12TYP=SEZNAM 12SEZ_TABULKA=menu_system 12SEZ_TITLE=Zacyklené pořadí položek 12SEZ_PODMINKA=menu_system.ord_typ=10 and menu_system.ord_mnid<>menu_hierarchy.aft_mnid 12USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200706150855271450073627/25/40/0;  #SEZNOROW;;#SETMENUID_END; 13ID_MENU=MNID/ADMIN/200706151517148733028224 13BUTTON_TITLE=Kontrola nastavení práva 13TYP=SEZNAM 13ID_SAVE=menu_system_pravodef 13SEZ_TABULKA=menu_system 13SEZ_TITLE=Kontrola nastavení práva 13USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200706151517148733028224/25/40/0;  #SEZNOROW; #ADDTYP=menu_system_pravodef;;#SETMENUID_END; 13USER_END 1301ID_MENU=MNID/ADMIN/200706181720085133507953 1301BUTTON_TITLE=Nastavit na samostatně definované 1301TYP=SQLCOMMAND 1301USER_BEGIN ;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200706181720085133507953/20/40/0; #NOEDIT_EVAL_LEFT=pravo_def=10 or spravne_pravo<>10; #BUTTON_COLOR=rgb(255,0,0); #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1=update dba.menu_system set pravo_def=10, pravo_tab='',autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%; #REFRESHROWS;;#SETMENUID_END; 1301USER_END 1302ID_MENU=MNID/ADMIN/200706181720084222950765 1302BUTTON_TITLE=Nastavit dle nadřízené 1302TYP=SQLCOMMAND 1302USER_BEGIN ;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200706181720084222950765/20/40/0; #NOEDIT_EVAL_LEFT=pravo_def=20 or spravne_pravo<>20; #BUTTON_COLOR=rgb(255,0,0); #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1=update dba.menu_system set pravo_def=20, pravo_tab='',autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%; #REFRESHROWS;;#SETMENUID_END; 1302USER_END 1303ID_MENU=MNID/ADMIN/200706181720084072959062 1303BUTTON_TITLE=Nastavit na přístupné všem 1303TYP=SQLCOMMAND 1303USER_BEGIN ;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200706181720084072959062/20/40/0; #NOEDIT_EVAL_LEFT=pravo_def=40 or spravne_pravo<>40; #BUTTON_COLOR=rgb(255,0,0); #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1=update dba.menu_system set pravo_def=40, pravo_tab='',autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%; #REFRESHROWS;;#SETMENUID_END; 1303USER_END 14ID_MENU=MNID/ADMIN/200706181505323161425178 14BUTTON_TITLE=- 14USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200706181505323161425178/25/40/0;;#SETMENUID_END; 15ID_MENU=MNID/ADMIN/200901291527504958642779 15BUTTON_TITLE=Propočet 15USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200901291527504958642779/25/40/0;;#SETMENUID_END; 1501ID_MENU=MNID/ADMIN/200705281524515313526627 1501BUTTON_TITLE=Kompletní propočet menu tabulek 1501TYP=SQLCOMMAND 1501USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_hierarchy;;#SETMENUID=O/ADMIN/0/menu_system//200705281524515313526627/25/40/0;    #SEZNOROW; #SQLCOMMAND1=exec dba.admin_akt_menu_odkaz; #SQLMESS1=Menu odkazem; #SQLCOMMAND2=exec dba.admin_menu_hierarchy; #SQLMESS2=Hierarchie; #SQLCOMMAND3=exec dba.admin_menu_order @sub = 1; #SQLMESS3=Pořadí; #SQLCOMMAND4=exec dba.admin_menu_abs_order; #SQLMESS4=Absolutní pořadí;;#SETMENUID_END; 1501USER_END 1502ID_MENU=MNID/ADMIN/200901291611486405315225 1502BUTTON_TITLE=Propočet menu tabulek modulu 1502TYP=SQLCOMMAND 1502USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200901291611486405315225/25/40/0; #SQLCOMMAND1=exec dba.admin_akt_menu %id_modulu%; #PERCENT_OFF;;#SETMENUID_END; 1502USER_END 1503ID_MENU=MNID/ADMIN/200901291530014901129206 1503BUTTON_TITLE=Propočet menu tabulek zvolené větve 1503TYP=SQLCOMMAND 1503USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200901291530014901129206/25/40/0; #SQLCOMMAND1=exec dba.admin_akt_menu '',%menu_hierarchy_root_mnid%,1,1; #PERCENT_OFF;;#SETMENUID_END; 1503USER_END 1504ID_MENU=MNID/ADMIN/200801101508576293661982 1504BUTTON_TITLE=Propočet menu odkazem 1504TYP=SQLCOMMAND 1504USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200801101508576293661982/25/40/0; #NOEDIT_EVAL_LEFT=(not typ_def in (85,90)); #PERCENT_OFF; #SQLCOMMAND1=exec dba.admin_akt_menu_odkaz %id_modulu%,%mnid%; #SQLMESS1=Menu odkazem;;#SETMENUID_END; 1504USER_END 16ID_MENU=MNID/ADMIN/201108191600050509259974 16BUTTON_TITLE=Skupina zobrazení 16USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//201108191600050509259974/25/40/0;;#SETMENUID_END; 1601ID_MENU=MNID/ADMIN/201108191601199005030522 1601BUTTON_TITLE=Evidence 1601TYP=SQLCOMMAND 1601USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201108191601199005030522/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=10,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1601USER_END 1602ID_MENU=MNID/ADMIN/201108191603431777557299 1602BUTTON_TITLE=Přehledy 1602TYP=SQLCOMMAND 1602USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201108191603431777557299/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=20,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1602USER_END 1603ID_MENU=MNID/ADMIN/201108191604227349324688 1603BUTTON_TITLE=Sestavy 1603TYP=SQLCOMMAND 1603USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201108191604227349324688/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=30,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1603USER_END 1604ID_MENU=MNID/ADMIN/201108191604426444594495 1604BUTTON_TITLE=Číselníky 1604TYP=SQLCOMMAND 1604USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201108191604426444594495/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=40,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1604USER_END 1605ID_MENU=MNID/ADMIN/201108191605132908746532 1605BUTTON_TITLE=Operace 1605TYP=SQLCOMMAND 1605USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201108191605132908746532/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=50,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1605USER_END 1606ID_MENU=MNID/ADMIN/201108191605568078817429 1606BUTTON_TITLE=Servis 1606TYP=SQLCOMMAND 1606USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201108191605568078817429/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=60,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1606USER_END 1607ID_MENU=MNID/ADMIN/201108191606105706911498 1607BUTTON_TITLE=Neuvedeno 1607TYP=SQLCOMMAND 1607USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201108191606105706911498/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=0,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1607USER_END 1608ID_MENU=MNID/ADMIN/201201191613322310285425 1608BUTTON_TITLE=Skrytá 1608TYP=SQLCOMMAND 1608USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201201191613322310285425/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=100,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1608USER_END 17ID_MENU=MNID/ADMIN/202212142225447161060144 17BUTTON_TITLE=Rozděl tlačítko se Zpět akcí 17TYP=SQLCOMMAND 17USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//202212142225447161060144/25/40/0;    #NOEDIT_EVAL_LEFT=\\DEVFIRM <> 1; #MULTI_BUTTON; #PERCENT_OFF; #NOEDIT_EVAL_LEFT_BEGIN; (typ_def <> 20 /*tlačítko na seznamu*/ or isnull(parametr) or pos(parametr, '#' + 'RIGHTBUTTON;') <= 0 or getdirective(parametr, 'BUTTON_CLASS') <> '' or getdirective(parametr, 'BUTTON_CLASS_RIGHT') <> '' or getdirective(parametr, 'BUTTON_GROUP') <> '' or menudirective(parametr, 'BUTTON_TITLE') = '' or menudirective(parametr, 'TYP') = 'GROUP') #NOEDIT_EVAL_LEFT_END; #SQLCOMMAND1_BEGIN; declare @left_mnid #BY(menu_system.mnid), @right_mnid #BY(menu_system.mnid) select @left_mnid = %mnid%, @right_mnid = convert(varchar(8)/*BY*/, GetDate(), 112) + left(replace(convert(varchar(11)/*BY*/, GetDate(), 14), ':', ''), 8) + right('00000000' + convert(varchar(8)/*BY*/, convert(int/*BY*/, floor(rand() * 99999999))), 8) declare @left_parm #VARCHARMAX/*BY*/, @right_parm #VARCHARMAX/*BY*/, @right_popis #BY(menu_system.popis), @menu_ok tinyint/*BY*/ select @menu_ok = 0 select @menu_ok = 1, @left_parm = dba.removedirective_fce( dba.substitute_fce(dba.removedirective_fce( dba.removedirective_fce( dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce( replace(convert(varchar(max)/*BY*/, ms.parametr), '#' + 'RIGHTBUTTON;', '#' + 'BUTTON_GROUP=' + dba.getmenudirective_fce(ms.parametr, 'BUTTON_TITLE') + ';'), 'BUTTON_R_QUESTION'), 'BUTTON_R_QUESTION1'), 'BUTTON_R_QUESTION2'), 'BUTTON_R_QUESTION3'), 'BUTTON_R_QUESTION4'), 'BUTTON_R_QUESTION5'), 'BUTTON_R_QUESTION3000'), 'BUTTON_R_QUESTION3001'), 'BUTTON_R_QUESTION3002'), 'BUTTON_R_QUESTION3003'), 'NOEDIT_EVAL_RIGHT'), 'SUBST_RIGHT'), '#' + 'RIGHTCLICK|0|1-#' + 'RIGHTCLICK|1|1 - #' + 'RIGHTCLICK|1|' + 'case when #' + 'RIGHTCLICK=1 then 0 else 1 end|1|case when #' + 'RIGHTCLICK = 1 then 0 else 1 end|1|' + 'case when #' + 'RIGHTCLICK=1 then 1 else 0 end|0|case when #' + 'RIGHTCLICK = 1 then 1 else 0 end|0|' + 'case when #' + 'RIGHTCLICK=0 then 0 else 1 end|0|case when #' + 'RIGHTCLICK = 0 then 0 else 1 end|0|' + 'case when #' + 'RIGHTCLICK=0 then 1 else 0 end|1|case when #' + 'RIGHTCLICK = 0 then 1 else 0 end|1|' + 'case when #' + 'RIGHTCLICK=1 then ''FALSE'' else ''TRUE'' end|''TRUE''|case when #' + 'RIGHTCLICK = 1 then ''FALSE'' else ''TRUE'' end|''TRUE''|' + 'case when #' + 'RIGHTCLICK=1 then ''TRUE'' else ''FALSE'' end|''FALSE''|case when #' + 'RIGHTCLICK = 1 then ''TRUE'' else ''FALSE'' end|''FALSE''|' + 'case when #' + 'RIGHTCLICK=0 then ''FALSE'' else ''TRUE'' end|''FALSE''|case when #' + 'RIGHTCLICK = 0 then ''FALSE'' else ''TRUE'' end|''FALSE''|' + 'case when #' + 'RIGHTCLICK=0 then ''TRUE'' else ''FALSE'' end|''TRUE''|case when #' + 'RIGHTCLICK = 0 then ''TRUE'' else ''FALSE'' end|''TRUE''|' + '#' + 'RIGHTCLICK=0 and ||#' + 'RIGHTCLICK = 0 and ||#' + 'RIGHTCLICK=1 or ||#' + 'RIGHTCLICK = 1 or ||', '|'), 'BUTTONTEXT_RIGHT'), @right_parm = dba.removedirective_fce('BUTTON_TITLE=' + dba.getdirective_def_fce(ms.parametr, 'BUTTONTEXT_RIGHT', 'Zpět ' + dba.getmenudirective_fce(ms.parametr, 'BUTTON_TITLE')) + char(13) + char(10) + dba.removemenudirective_fce( dba.substitute_fce(dba.removedirective_fce( replace(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce( replace(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce( replace(dba.removedirective_fce( replace(convert(varchar(max)/*BY*/, ms.parametr), '#' + 'RIGHTBUTTON;', '#' + 'BUTTON_GROUP=' + dba.getmenudirective_fce(ms.parametr, 'BUTTON_TITLE') + ';#' + 'BUTTON_GROUP_RIGHT;/' + '*#' + 'LEFT_MNID=' + @left_mnid + ';*' + '/'), 'NOEDIT_EVAL_LEFT'), '#' + 'NOEDIT_EVAL_RIGHT', '#' + 'NOEDIT_EVAL_LEFT'), 'BUTTON_QUESTION'), 'BUTTON_QUESTION1'), 'BUTTON_QUESTION2'), 'BUTTON_QUESTION3'), 'BUTTON_QUESTION4'), 'BUTTON_QUESTION5'), 'BUTTON_QUESTION3000'), 'BUTTON_QUESTION3001'), 'BUTTON_QUESTION3002'), 'BUTTON_QUESTION3003'), '#' + 'BUTTON_R_QUESTION', '#' + 'BUTTON_QUESTION'), 'BUTTON_TITLE1'), 'BUTTON_TITLE2'), 'BUTTON_TITLE3'), 'BUTTON_TITLE4'), 'BUTTON_TITLE5'), 'BUTTON_TITLE6'), 'BUTTON_TITLE3000'), 'BUTTON_TITLE3001'), 'BUTTON_TITLE3002'), 'BUTTON_TITLE3003'), '#' + 'BUTTON_TITLE', '#' + '.BUTTON_TITLE'), 'SUBST_RIGHT'), '#' + 'RIGHTCLICK|1|1-#' + 'RIGHTCLICK|0|1 - #' + 'RIGHTCLICK|0|' + 'case when #' + 'RIGHTCLICK=1 then 0 else 1 end|0|case when #' + 'RIGHTCLICK = 1 then 0 else 1 end|0|' + 'case when #' + 'RIGHTCLICK=1 then 1 else 0 end|1|case when #' + 'RIGHTCLICK = 1 then 1 else 0 end|1|' + 'case when #' + 'RIGHTCLICK=0 then 0 else 1 end|1|case when #' + 'RIGHTCLICK = 0 then 0 else 1 end|1|' + 'case when #' + 'RIGHTCLICK=0 then 1 else 0 end|0|case when #' + 'RIGHTCLICK = 0 then 1 else 0 end|0|' + 'case when #' + 'RIGHTCLICK=1 then ''FALSE'' else ''TRUE'' end|''FALSE''|case when #' + 'RIGHTCLICK = 1 then ''FALSE'' else ''TRUE'' end|''FALSE''|' + 'case when #' + 'RIGHTCLICK=1 then ''TRUE'' else ''FALSE'' end|''TRUE''|case when #' + 'RIGHTCLICK = 1 then ''TRUE'' else ''FALSE'' end|''TRUE''|' + 'case when #' + 'RIGHTCLICK=0 then ''FALSE'' else ''TRUE'' end|''TRUE''|case when #' + 'RIGHTCLICK = 0 then ''FALSE'' else ''TRUE'' end|''TRUE''|' + 'case when #' + 'RIGHTCLICK=0 then ''TRUE'' else ''FALSE'' end|''FALSE''|case when #' + 'RIGHTCLICK = 0 then ''TRUE'' else ''FALSE'' end|''FALSE''|' + '#' + 'RIGHTCLICK=1 and ||#' + 'RIGHTCLICK = 1 and ||#' + 'RIGHTCLICK=0 or ||#' + 'RIGHTCLICK = 0 or ||' + '#' + 'DEFAULT_BUTTON;||' + dba.getdirective_fce(ms.parametr, 'SUBST_RIGHT'), '|'), 'BUTTON_TITLE'), 'BUTTONTEXT_RIGHT'), @right_popis = 'Tlačítko seznam ' + dba.getdirective_def_fce(ms.parametr, 'BUTTONTEXT_RIGHT', 'Zpět ' + dba.getmenudirective_fce(ms.parametr, 'BUTTON_TITLE')) from dba.menu_system ms where ms.mnid = @left_mnid and ms.typ_def = 20 /*tlačítko na seznamu*/ and convert(varchar(255)/*BY*/, ms.parametr) is not null and ms.parametr like char(37) + '#' + 'RIGHTBUTTON;' + char(37) and (ms.parametr not like char(37) + '#' + 'BUTTON_CLASS=' + char(37) + ';' + char(37) and ms.parametr not like char(37) + '#' + 'BUTTON_CLASS_BEGIN;' + char(37) + '#' + 'BUTTON_CLASS_END;' + char(37)) and (ms.parametr not like char(37) + '#' + 'BUTTON_CLASS_RIGHT=' + char(37) + ';' + char(37) and ms.parametr not like char(37) + '#' + 'BUTTON_CLASS_RIGHT_BEGIN;' + char(37) + '#' + 'BUTTON_CLASS_RIGHT_END;' + char(37)) and (ms.parametr not like char(37) + '#' + 'BUTTON_GROUP=' + char(37) + ';' + char(37) and ms.parametr not like char(37) + '#' + 'BUTTON_GROUP_BEGIN;' + char(37) + '#' + 'BUTTON_GROUP_END;' + char(37)) and dba.getmenudirective_fce(ms.parametr, 'BUTTON_TITLE') <> '' if @menu_ok <> 1 begin raiserror 99999 'Menu %1! není vhodné pro rozklad na dvě tlačítka' return end insert into dba.menu_system(mnid, id_modulu, standard, typ_def, par_mnid, ord_typ, ord_mnid, typ_obj_akce, id_akce_tabulka, popis, pravo_def, pravo_tab, parametr, lang, menu_visible, platnost, autor, ts) select @right_mnid, ms.id_modulu, ms.standard, ms.typ_def, ms.par_mnid, 10 /*za*/, @left_mnid, ms.typ_obj_akce, ms.id_akce_tabulka, @right_popis, ms.pravo_def, ms.pravo_tab, @right_parm, ms.lang, ms.menu_visible, ms.platnost, user, GetDate() from dba.menu_system ms where ms.mnid = @left_mnid update dba.menu_system set parametr = @left_parm, autor = user, ts =  GetDate() from dba.menu_system ms where ms.mnid = @left_mnid #SQLCOMMAND1_END; #REFRESHROWS;;#SETMENUID_END; 17USER_END w_ift\tparametr/0 18ID_MENU=MNID/ADMIN/200705041442127098270895 18BUTTON_TITLE=Nadřízená položka 18TYP=SEZNAM 18SEZ_TABULKA=menu_system 18SEZ_VAZBA=TRUE 18SEZ_VAZBA_COLUMN1=par_mnid 18USER=;#SETMENUID=O/ADMIN/0/menu_system//200705041442127098270895/20/40/0; #NOEDIT_EVAL_LEFT=par_mnid='';;#SETMENUID_END; 19ID_MENU=MNID/ADMIN/200705041442120638940181 19BUTTON_TITLE=Přímo podřízené 19TYP=SEZNAM 19SEZ_TABULKA=menu_system 19SEZ_PODMINKA=menu_system.par_mnid=%mnid% 19SEZ_V_PODMINCE=menu_system.par_mnid,par_mnid 19USER_BEGIN ;#SETMENUID=O/ADMIN/0/menu_system//200705041442120638940181/20/40/0; #SETVAL1=par_mnid=%mnid%:W\\APP=1 and \\COPY=0:V; #PERCENT_OFF;;#SETMENUID_END; 19USER_END 20ID_MENU=MNID/ADMIN/200705041442128667621216 20BUTTON_TITLE=Všechny podřízené 20TYP=SEZNAM 20SEZ_TABULKA=menu_system 20SEZ_PODMINKA=exists(select 1 from dba.menu_hierarchy mh1 with(index(pk_menu_hierarchy)) where mh1.mnid=menu_system.mnid and mh1.par_mnid=%mnid% and mh1.mnid<>%mnid%) 20USER_BEGIN ;#SETMENUID=O/ADMIN/0/menu_system//200705041442128667621216/20/40/0; #SETVAL1=par_mnid=%mnid%:W\\APP=1 and \\COPY=0:V; #PERCENT_OFF;;#SETMENUID_END; 20USER_END 21ID_MENU=MNID/ADMIN/201805091630597661895178 21BUTTON_TITLE=Přičítané položky 21TYP=SEZNAM 21SEZ_TABULKA=menu_system 21SEZ_PODMINKA=menu_system.mnid <> '' and menu_system.mnid in ('' %(ReplaceAll(ReplaceAll(GetReferredBatches('^', 'menu_system', 'parametr', '#TYP_DEF='+string(typ_def)+';#TYP_OBJ_AKCE='+trim(typ_obj_akce)+';#ID_AKCE_TABULKA='+trim(id_akce_tabulka)+';#PAR_MNID='+string(par_mnid)+';', parametr, 0),'menu_system'+GetGlobalPar('ADMIN_PK_SEPAR')+'parametr'+GetGlobalPar('ADMIN_PK_SEPAR'),', '''), '^', '''')):NA%) 21USER=;#SETMENUID=O/ADMIN/0/menu_system//201805091630597661895178/20/40/0;;#SETMENUID_END; 22ID_MENU=MNID/ADMIN/200705281524511450073627 22BUTTON_TITLE=Přidej pod 22TYP=DETAIL 22DET_TABULKA=menu_system 22DET_WHERE=APP 22USER_BEGIN ;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200705281524511450073627/20/40/0; #BUTTON_GROUP=Přidej položku; #NOEDIT_EVAL_LEFT=\\DEVFIRM <> 1; #SETVAL1=id_modulu=%id_modulu%:W\\APP=1:V; #SETVAL2=standard=%if('\\DEVSTANDARD'=0 and standard=40, 30, standard)%:W\\APP=1:V; #SETVAL3=typ_def=%if(typ_def in (10,15,16),20,typ_def)%:W\\APP=1:V; #SETVAL4=par_mnid=%mnid%:W\\APP=1:V; #PERCENT_OFF; #PRAVO_DEF=30;;#SETMENUID_END; 22USER_END 23ID_MENU=MNID/ADMIN/200705281524511387441722 23BUTTON_TITLE=Přidej za 23TYP=DETAIL 23DET_TABULKA=menu_system 23DET_WHERE=APP 23USER_BEGIN ;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200705281524511387441722/20/40/0; #BUTTON_GROUP=Přidej položku; #NOEDIT_EVAL_LEFT=\\DEVFIRM <> 1; #SETVAL1=id_modulu=%id_modulu%:W\\APP=1:V; #SETVAL2=standard=%if('\\DEVSTANDARD'=0 and standard=40, 30, standard)%:W\\APP=1:V; #SETVAL3=typ_def=%typ_def%:W\\APP=1:V; #SETVAL4=par_mnid=%par_mnid%:W\\APP=1:V; #SETVAL5=ord_mnid=%mnid%:W\\APP=1:V; #PERCENT_OFF; #PRAVO_DEF=30;;#SETMENUID_END; 23USER_END 24ID_MENU=MNID/ADMIN/200705281524518733028224 24BUTTON_TITLE=Přidej na konec 24TYP=DETAIL 24DET_TABULKA=menu_system 24DET_WHERE=APP 24USER_BEGIN ;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200705281524518733028224/20/40/0; #BUTTON_GROUP=Přidej položku; #NOEDIT_EVAL_LEFT=\\DEVFIRM <> 1; #SETVAL1=id_modulu=%id_modulu%:W\\APP=1:V; #SETVAL2=standard=%if('\\DEVSTANDARD'=0 and standard=40, 30, standard)%:W\\APP=1:V; #SETVAL3=typ_def=%typ_def%:W\\APP=1:V; #SETVAL4=par_mnid=%par_mnid%:W\\APP=1:V; #PERCENT_OFF; #PRAVO_DEF=30;;#SETMENUID_END; 24USER_END 25ID_MENU=MNID/ADMIN/200705041442126709779267 25BUTTON_TITLE=Export položky 25TYP=EXPORT 25USER_BEGIN ;#SETMENUID=O/ADMIN/0/menu_system//200705041442126709779267/20/40/0; #BUTTON_GROUP=Export; #MULTI_BUTTON; #PERCENT_OFF; #TABLES=menu_system\\WHERE id_modulu=%id_modulu% and standard=%standard% and mnid=%mnid%:D; #FILENAME=%mnid:NA%_%(case(typ_def when 10 then 'M' when 15 then 'T' when 16 then 'A' when 20 then 'L' when 25 then 'FL' when 30 then 'D' when 35 then 'DL' when 40 then 'N' when 45 then 'O' when 50 then 'P' when 52 then 'E' when 55 then 'R' when 85 then 'RN' when 90 then 'RF' else 'X')):NA%_%ReplaceChars(typ_obj_akce,'not [0-9][a-z][A-Z]_', '_'):NA%_%ReplaceChars(id_akce_tabulka,'not [0-9][a-z][A-Z]_', '_'):NA%__%case(standard when 10 then 'u' when 20 then 'g' when 30 then 'f' when 31 then 'a' when 33 then 'p' when 36 then 'c' when 40 then 's' else 'x'):NA%_mn.xml; #COMMENTFILE=Menu; #FILE_ID=menu_exp; #FILETYPE=xml; #EXP_FORMAT=xml; #SAVEDLG; #SEPAR=,; #MAXLEN=4096; #.B.BE; #.U.SERLOG; #.T.IMELOG; #XCMD=T-I-R-; #DPLUS; #XWHERE=sd_columns.standard in (40,38); #APPENDFILE_BEGIN;/*UPD_BEGIN*/exec dba.admin_akt_menu %id_modulu%,%mnid%/*UPD_END*/; COMMIT; #APPENDFILE_END;;#SETMENUID_END; 25USER_END 26ID_MENU=MNID/ADMIN/200705041442121260133722 26BUTTON_TITLE=Export akce 26TYP=EXPORT 26USER_BEGIN ;#SETMENUID=O/ADMIN/0/menu_system//200705041442121260133722/20/40/0; #BUTTON_GROUP=Export; #MULTI_BUTTON; #PERCENT_OFF; #TABLES=menu_system\\WHERE exists(select 1 from dba.menu_hierarchy mh1 where mh1.par_mnid=%mnid% and menu_system.mnid=mh1.mnid) ORDER BY menu_system.mnid:D; #FILENAME=menu_%id_modulu:NA%_%mnid:NA%+.xml; #FILE_ID=menu_exp; #FILETYPE=xml; #EXP_FORMAT=xml; #SAVEDLG; #SEPAR=,; #MAXLEN=4096; #.B.BE; #.U.SERLOG; #.T.IMELOG; #XCMD=T-I-; #DPLUS; #XWHERE=sd_columns.standard in (40,38); #APPENDFILE_BEGIN;exec dba.admin_akt_menu %id_modulu%,%mnid%; COMMIT; #APPENDFILE_END;;#SETMENUID_END; 26USER_END 27ID_MENU=MNID/ADMIN/201804190958392681187069 27BUTTON_TITLE=Repository revize 27TYP=SEZNAM 27SEZ_TITLE=Revize {(mnid + ' ' + popis)} 27USER_BEGIN ;#SETMENUID=O/ADMIN/0/menu_system//201804190958392681187069/20/40/0;    #NO_MENU_TEST; #USERSUB1=#MODUL=lower(id_modulu):NA; #USERSUB2=#XSTD=select (case when moduly.firemni = 1 then 30 else %standard% end) from dba.moduly moduly with(index(pk_moduly)) where moduly.id_modulu='#MODUL':NA; #USERSUB3=#VERSION=case(#XSTD when 30 then '_firm\\' + '\\LICREG' + '\\'+'termopan' when 31 then '_firm\\' + '\\LICREG' + '\\_all' else '\\KARAT_VERSION' + case(#XSTD when 36 then '\\_stat\\' + lower('\\VZOR_STAT') when 33 then '\\_part\\' + lower('\\VZOR_PART') else '')):NA; #USERSUB4=#PATCH=select coalesce(max(right(moduly_verze.verze, 3)), '000') from dba.moduly_verze moduly_verze where moduly_verze.standard=#XSTD and moduly_verze.id_modulu='#MODUL':NA; #USERSUB5=#FOLDER=#MODUL_sql\\menu:C:NA; #USERSUB6_BEGIN;#NAME=lower(mnid + '_' + case (typ_def when 10 /* Menu aplikace */ then 'M' when 15 /* Menu objektů tabulky */ then 'T' when 16 /* Menu objektů akce */ then 'A' when 20 /* Tlačítko seznam */ then 'L' when 25 /* Funkce seznamu */ then 'FL' when 30 /* Tlačítko detailu */ then 'D' when 35 /* Funkce detailu */ then 'DL' when 40 /* Nod stromu */ then 'N' when 45 /* Ostatní */ then 'O' when 50 /* Doplněk nadřízeného (před) */ then 'P' when 52 /* Doplněk nadřízeného (za) */ then 'E' when 55 /* Náhrada */ then 'R' when 85 /* Odkaz bez podakcí */ then 'RN' when 90 /* Odkaz včetně podakcí */ then 'RF' else '') + '_' + regexreplace(typ_obj_akce, '[^\\w]', '_') + '_' + regexreplace(id_akce_tabulka, '[^\\w]', '_') + '__' + case (standard when 10 then 'u' when 20 then 'g' when 30 then 'f' when 31 then 'a' when 33 then 'p' when 36 then 'c' when 40 then 's' else 'x') + '_mn.xml') :NA#USERSUB6_END; #ADDTYP=SEZNAM,repository_revisions; #SUPERVISION_PARAMS_BEGIN; #SOURCE=#VERSION\\#MODUL\\#PATCH\\#FOLDER\\#NAME; #SUPERVISION_PARAMS_END;;#SETMENUID_END; 27USER_END 28ID_MENU=MNID/ADMIN/201804191001246884004964 28BUTTON_TITLE=Repository viník 28TYP=SEZNAM 28SEZ_TITLE=Viník {(mnid + ' ' + popis)} 28USER_BEGIN ;#SETMENUID=O/ADMIN/0/menu_system//201804191001246884004964/20/40/0;    #NO_MENU_TEST; #USERSUB1=#MODUL=lower(id_modulu):NA; #USERSUB2=#XSTD=select (case when moduly.firemni = 1 then 30 else %standard% end) from dba.moduly moduly with(index(pk_moduly)) where moduly.id_modulu='#MODUL':NA; #USERSUB3=#VERSION=case(#XSTD when 30 then '_firm\\' + '\\LICREG' + '\\'+'termopan' when 31 then '_firm\\' + '\\LICREG' + '\\_all' else '\\KARAT_VERSION' + case(#XSTD when 36 then '\\_stat\\' + lower('\\VZOR_STAT') when 33 then '\\_part\\' + lower('\\VZOR_PART') else '')):NA; #USERSUB4=#PATCH=select coalesce(max(right(moduly_verze.verze, 3)), '000') from dba.moduly_verze moduly_verze where moduly_verze.standard=#XSTD and moduly_verze.id_modulu='#MODUL':NA; #USERSUB5=#FOLDER=#MODUL_sql\\menu:C:NA; #USERSUB6_BEGIN;#NAME=lower(mnid + '_' + case (typ_def when 10 /* Menu aplikace */ then 'M' when 15 /* Menu objektů tabulky */ then 'T' when 16 /* Menu objektů akce */ then 'A' when 20 /* Tlačítko seznam */ then 'L' when 25 /* Funkce seznamu */ then 'FL' when 30 /* Tlačítko detailu */ then 'D' when 35 /* Funkce detailu */ then 'DL' when 40 /* Nod stromu */ then 'N' when 45 /* Ostatní */ then 'O' when 50 /* Doplněk nadřízeného (před) */ then 'P' when 52 /* Doplněk nadřízeného (za) */ then 'E' when 55 /* Náhrada */ then 'R' when 85 /* Odkaz bez podakcí */ then 'RN' when 90 /* Odkaz včetně podakcí */ then 'RF' else '') + '_' + regexreplace(typ_obj_akce, '[^\\w]', '_') + '_' + regexreplace(id_akce_tabulka, '[^\\w]', '_') + '__' + case (standard when 10 then 'u' when 20 then 'g' when 30 then 'f' when 31 then 'a' when 33 then 'p' when 36 then 'c' when 40 then 's' else 'x') + '_mn.xml') :NA#USERSUB6_END; #ADDTYP=SEZNAM,repository_blame; #SUPERVISION_PARAMS_BEGIN; #SOURCE=#VERSION\\#MODUL\\#PATCH\\#FOLDER\\#NAME; #SUPERVISION_PARAMS_END;;#SETMENUID_END; 28USER_END 29ID_MENU=MNID/ADMIN/201805221357521737295274 29BUTTON_TITLE=Spusť 29TYP=KARAT_URL 29USER_BEGIN ;#SETMENUID=O/ADMIN/0/menu_system//201805221357521737295274/20/40/0;    #NOEDIT_EVAL_LEFT=typ_def<>10 or isnull(parametr) or trim(parametr)='' or trim(popis)='' or trim(popis)='-'; #USERSUB1=#XMYURL='mnid/'+lower(trim(id_modulu))+'/'+trim(mnid)+'?menu=1&nss=0':NA; #URL=#XMYURL; #BUTTON_NO_FOCUS;;#SETMENUID_END; 29USER_END w_ift\tconn\tms_19216810247_karat_termopan 73 w_ift\tf11\tStandard AllDevices w_ift\tRefreshObjects\tLIST LIST_TREE2 FAST PARENT_LIST PARENT_LIST_TREE2 PARENT_FAST PARENT_PARENT_PARENT_LIST PARENT_PARENT_PARENT_FAST w_ift\tPercentOffDWs\tLIST\tdba.menu_system\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.12860.12886.19062.19085 FAST\tdba.menu_system\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.12860.12886.19062.preview.fast.dw_fast_preview PARENT_LIST\tdba.menu_system\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.12860.12886.12909 PARENT_FAST\tdba.menu_system\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.12860.12886.preview.fast.dw_fast_preview PARENT_PARENT_PARENT_LIST\tdba.user_rozpad_dilcu\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.12120 PARENT_PARENT_PARENT_FAST\tdba.user_rozpad_dilcu\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.preview.fast.dw_fast_preview w_ift\tpreview1\tRychlý náhled ---Id: FAST ---UserParam: #TYPE=Fast;#ID=FAST;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=1;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1; ---Directives: #TYPE=Fast;#ID=FAST;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROW=1;#HIDDEN_HEADER=1;#PREVIEW_FAST;#FAST_PREV_TAB=menu_system;#FAST_PREV_DW=;#ENAB_FAST_PREV_IN_VIEW=;#FAST_PREVIEW_SUBS=; w_ift\tCurrentPreviewUserParam\t#USR_PREVIEW;#PREVIEW_GRID_ROWS=1;#PREVIEW_GRID_COLS=1;#PREVIEW_VIEW_TAB=0;#PREVIEW_CAN_ADD=0;#GENERATED_PREVIEW; #USR_PREVIEW1_BEGIN;#TYPE=Fast;#ID=FAST;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=1;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1;#USR_PREVIEW1_END; w_iftseznam\tsez_tabulka\tmenu_system w_iftseznam\tlink\tkarat://termopan:@0/seznam/menu_system?where=%28%20menu%5fsystem%2emnid%20%3d%20%27202311162114515813595763%27%20%29&menu=0 w_iftseznam\tsez_sql\t#NOTAB=menu_system;SELECT *,    menu_hierarchy.tree_info,    menu_hierarchy.root_id_modulu,    menu_hierarchy.root_typ_def,    menu_hierarchy.root_typ_obj_akce,    menu_hierarchy.root_id_akce_tabulka,    menu_hierarchy.root_level,    menu_hierarchy.root_mnid,    menu_hierarchy2.abs_order0 AS menu_hierarchy_abs_order0 /*\\:Smenu_hierarchy.abs_order0*/,    menu_hierarchy.abs_order,    (select count(*) from dba.hide_menu hm1 with(index(pk_hide_menu), forceseek) where hm1.mnid=menu_system.mnid) AS is_hide /*\\:Smenu_system.hide_in_lite:HJe skryto na firemní úrovni*/,    menu_system.root_typ_def AS ms_root_typ_def,    (case when convert(char(6)/*BY*/, menu_usage.ts, 112) = convert(char(6)/*BY*/, GetDate(), 112) then menu_usage.cnt_m else 0 end) AS usage_cnt_m /* \\:Smenu_usage.cnt_m:HPočet použití tento měsíc */,    (case when convert(char(6)/*BY*/, menu_usage.ts, 112) = convert(char(6)/*BY*/, GetDate(), 112) then menu_usage.cnt_pm when convert(char(6)/*BY*/, menu_usage.ts, 112) = convert(char(6)/*BY*/, DateAdd(month, -1, GetDate()), 112) then menu_usage.cnt_m else 0 end) AS usage_cnt_pm /* \\:Smenu_usage.cnt_pm:HPočet použití minulý měsíc */,    (case when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) then menu_usage.cnt_y else 0 end) AS usage_cnt_y /* \\:Smenu_usage.cnt_y:HPočet použití letos */,    (case when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) then menu_usage.cnt_py when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, DateAdd(year, -1, GetDate()), 112) then menu_usage.cnt_y else 0 end) AS usage_cnt_py /* \\:Smenu_usage.cnt_py:HPočet použití loni */,    (case when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) then menu_usage.cnt_y + menu_usage.cnt_py when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, DateAdd(year, -1, GetDate()), 112) then menu_usage.cnt_y else 0 end) AS usage_cnt_y2 /* \\:Smenu_usage.cnt_py:HPočet použití letos a loni */,    coalesce(menu_usage.ts, '1901-01-01') AS usage_last /* \\:Smenu_usage.ts:HPoslední použití */   FROM       dba.menu_system menu_system,       dba.menu_hierarchy menu_hierarchy,       dba.menu_hierarchy menu_hierarchy2 with(index(menu_hierarchy_par), forceseek),       dba.menu_usage menu_usage with(index(pk_menu_usage), forceseek)   WHERE menu_hierarchy.mnid=menu_system.mnid    and menu_hierarchy.par_mnid=menu_system.mnid    and menu_hierarchy.par_level=0    and menu_hierarchy2.mnid=menu_hierarchy.root_mnid    and menu_hierarchy2.par_mnid=menu_hierarchy.root_mnid    and menu_hierarchy2.par_level=0    and menu_usage.mnid=*menu_system.mnid w_iftseznam\tdetail.color\t255 w_iftseznam\tdwselect\tSELECT TOP 351  menu_system.mnid,menu_system.id_modulu,menu_system.standard,menu_system.typ_def,menu_system.par_mnid,menu_system.ord_typ,menu_system.ord_mnid,menu_system.ref_mnid,menu_system.typ_obj_akce,menu_system.id_akce_tabulka,menu_system.popis,menu_system.microhelp,menu_system.hide_in_lite,menu_system.pravo_def,menu_system.pravo_tab,menu_system.parametr,menu_system.lang,menu_system.menu_visible,menu_system.root_typ_def,menu_system.menu_box,menu_system.autor,menu_system.ts,menu_system.popisxcz,menu_system.microhelpxcz,menu_system.parametrxcz,isnull(menu_system.xattach,0) xattach,    menu_hierarchy.tree_info,    menu_hierarchy.root_id_modulu,    menu_hierarchy.root_typ_def,    menu_hierarchy.root_typ_obj_akce,    menu_hierarchy.root_id_akce_tabulka,    menu_hierarchy.root_level,    menu_hierarchy.root_mnid,    menu_hierarchy2.abs_order0 menu_hierarchy_abs_order0 ,    menu_hierarchy.abs_order,    (select count(*) from dba.hide_menu hm1 with(index(pk_hide_menu), forceseek) where hm1.mnid=menu_system.mnid) is_hide ,    menu_system.root_typ_def ms_root_typ_def,    (case when convert(char(6)/*BY*/, menu_usage.ts, 112) = convert(char(6)/*BY*/, GetDate(), 112) then menu_usage.cnt_m else 0 end) usage_cnt_m ,    (case when convert(char(6)/*BY*/, menu_usage.ts, 112) = convert(char(6)/*BY*/, GetDate(), 112) then menu_usage.cnt_pm when convert(char(6)/*BY*/, menu_usage.ts, 112) = convert(char(6)/*BY*/, dateadd(month, -1, convert(datetime/*BY*/, GetDate())), 112) then menu_usage.cnt_m else 0 end) usage_cnt_pm ,    (case when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) then menu_usage.cnt_y else 0 end) usage_cnt_y ,    (case when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) then menu_usage.cnt_py when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, dateadd(year, -1, convert(datetime/*BY*/, GetDate())), 112) then menu_usage.cnt_y else 0 end) usage_cnt_py ,    (case when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) then menu_usage.cnt_y + menu_usage.cnt_py when convert(char(4)/*BY*/, menu_usage.ts, 112) = convert(char(4)/*BY*/, dateadd(year, -1, convert(datetime/*BY*/, GetDate())), 112) then menu_usage.cnt_y else 0 end) usage_cnt_y2 ,    isnull(menu_usage.ts, '1901-01-01') usage_last    FROM dba.menu_system menu_system   left outer join dba.menu_usage menu_usage with(index(pk_menu_usage), forceseek) on (menu_system.mnid=menu_usage.mnid) , dba.menu_hierarchy menu_hierarchy  , dba.menu_hierarchy menu_hierarchy2 with(index(menu_hierarchy_par), forceseek)  WHERE menu_hierarchy.mnid=menu_system.mnid    and menu_hierarchy.par_mnid=menu_system.mnid    and menu_hierarchy.par_level=0    and menu_hierarchy2.mnid=menu_hierarchy.root_mnid    and menu_hierarchy2.par_mnid=menu_hierarchy.root_mnid    and menu_hierarchy2.par_level=0    and 1=1  AND (1 in(select 1 from dba.menu_hierarchy mh1 with(index(pk_menu_hierarchy)) where mh1.mnid=menu_system.mnid and mh1.par_mnid=/*apb987*/'202311191846439310651865'/*ape987*/ and mh1.mnid<>/*apb221*/'202311191846439310651865'/*ape221*/) AND (1=1) /* sez_podm */) AND (((not 1 in(select 1 from dba.hide_menu hm1 where hm1.mnid=menu_system.mnid) /* hide - neskryté */ )) /* combo3 */ )    ORDER BY menu_hierarchy.root_id_modulu,menu_hierarchy.root_typ_def,menu_hierarchy2.abs_order0,menu_hierarchy.abs_order OPTION(fast 350) /* seznam menu_system O/ADMIN/0/menu_system//200705041442128667621216/20/40/0 */ w_iftseznam\tdwcolumns\tmnid,id_modulu,standard,typ_def,par_mnid,ord_typ,ord_mnid,ref_mnid,typ_obj_akce,id_akce_tabulka,popis,microhelp,hide_in_lite,pravo_def,pravo_tab,parametr,lang,menu_visible,root_typ_def,menu_box,autor,ts,popisxcz,microhelpxcz,parametrxcz,xattach,menu_hierarchy_tree_info,menu_hierarchy_root_id_modulu,menu_hierarchy_root_typ_def,menu_hierarchy_root_typ_obj_akce,menu_hierarchy_root_id_akce_tabulka,menu_hierarchy_root_level,menu_hierarchy_root_mnid,menu_hierarchy_abs_order0,menu_hierarchy_abs_order,is_hide,ms_root_typ_def,usage_cnt_m,usage_cnt_pm,usage_cnt_y,usage_cnt_py,usage_cnt_y2,usage_last,xremind w_iftseznam\tdwcolumns_visible\txattach_bmp,xremind_bmp,menu_hierarchy_root_id_modulu,menu_hierarchy_root_typ_def,menu_hierarchy_tree_info,id_modulu,standard,popis,typ_obj_akce,id_akce_tabulka,parametr,mnid,typ_def,ord_typ,ord_mnid,par_mnid,ref_mnid,microhelp,hide_in_lite,pravo_def,pravo_tab,menu_hierarchy_abs_order,autor,ts,menu_hierarchy_root_typ_obj_akce,menu_hierarchy_root_id_akce_tabulka,menu_hierarchy_root_level,menu_hierarchy_abs_order0,lang,menu_visible,root_typ_def,menu_box,popisxcz,microhelpxcz,parametrxcz,menu_hierarchy_root_mnid,is_hide,ms_root_typ_def,usage_cnt_m,usage_cnt_pm,usage_cnt_y,usage_cnt_py,usage_cnt_y2,usage_last 0\txattach_bmp\t18 1\txremind_bmp\t18 2\tmenu_hierarchy_root_id_modulu\t76 3\tmenu_hierarchy_root_typ_def\t119 4\tmenu_hierarchy_tree_info\t257 5\tid_modulu\t37 6\tstandard\t53 7\tpopis\t257 8\ttyp_obj_akce\t131 9\tid_akce_tabulka\t131 10\tparametr\t257 11\tmnid\t156 12\ttyp_def\t119 13\tord_typ\t70 14\tord_mnid\t156 15\tpar_mnid\t156 16\tref_mnid\t156 17\tmicrohelp\t257 18\thide_in_lite\t89 19\tpravo_def\t154 20\tpravo_tab\t133 21\tmenu_hierarchy_abs_order\t84 22\tautor\t49 23\tts\t150 24\tmenu_hierarchy_root_typ_obj_akce\t131 25\tmenu_hierarchy_root_id_akce_tabulka\t133 26\tmenu_hierarchy_root_level\t145 27\tmenu_hierarchy_abs_order0\t122 28\tlang\t58 29\tmenu_visible\t467 30\troot_typ_def\t158 31\tmenu_box\t106 32\tpopisxcz\t467 33\tmicrohelpxcz\t467 34\tparametrxcz\t467 35\tmenu_hierarchy_root_mnid\t158 36\tis_hide\t136 37\tms_root_typ_def\t158 38\tusage_cnt_m\t144 39\tusage_cnt_pm\t151 40\tusage_cnt_y\t108 41\tusage_cnt_py\t102 42\tusage_cnt_y2\t140 43\tusage_last\t146 w_iftseznam\tdwcolumns_invisible\txattach,menu_hierarchy_abs_order0_sum,menu_hierarchy_abs_order_sum,usage_cnt_m_sum,usage_cnt_pm_sum,usage_cnt_y_sum,usage_cnt_py_sum,usage_cnt_y2_sum,xremind w_iftseznam\tid_save\tadmin/menu_system_std w_iftseznam\tfirstuser\t;#SETMENUID=O/ADMIN/0/menu_system//200705041442128667621216/20/40/0; #SETVAL1=par_mnid=%mnid%:W\\APP=1 and \\COPY=0:V; #PERCENT_OFF;;#SETMENUID_END;;#ISFIRSTROW;;#ISLASTROW;;#ISFROMBUTTON;;;#SETMENUID=O/ADMIN/10/menu_system//200705041442125791594212/15/40/0;  #NOADD_EVAL=\\DEVFIRM <> 1; #NOEDIT_EVAL=\\DEVFIRM <> 1; #TL_FUNKCE_SEZNAM; #FILTER_COL_NO_SET_TO_DETAIL=menu_hierarchy_root_id_modulu,menu_hierarchy_root_typ_def,menu_hierarchy_root_id_akce_tabulka,menu_hierarchy_root_typ_obj_akce,menu_hierarchy_abs_order0,menu_hierarchy_abs_order; #LEGEND1=#ADMIN_MENU10:#TEXT_ADMIN_MENU10:Ftyp_def=10; #LEGEND2=#ADMIN_MENU1X:#TEXT_ADMIN_MENU1X:Ftyp_def=15 or typ_def=16; #LEGEND3=#ADMIN_MENU20:#TEXT_ADMIN_MENU20:Ftyp_def=20; #LEGEND4=#ADMIN_MENUXX:#TEXT_ADMIN_MENUXX:F1=1; #COMBO_BEGIN; #COMBO_ID=ROOT_LEVEL; #COLUMN=menu_hierarchy.root_level; #POPISBEZ=.Úroveň zanoření; #POLOZKY=1. úroveň (Hlavní nabídky)\\0^2. úroveň (Podnabídky)\\1^3. úroveň\\2^4. úroveň\\3; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=TYP_DEF; #COLUMN=menu_system.typ_def; #POLOZKY=Menu aplikace\\10^Menu objektů tabulky\\15^Menu objektů akce\\16^Tlačítko seznam\\20^Funkce seznamu\\25^Tlačítko detailu\\30^Funkce detailu\\35^Nod stromu\\40^Ostatní\\45^Doplněk\\50^Náhrada\\55^Odkaz bez podakcí\\85^Odkaz včetně podakcí\\90; #POPISBEZ=.Typ definice; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=HIDE; #COLUMN=-; #POPISBEZ=.Skrytí; #POLOZKY=Neskryté\\1\\not exists(select 1 from dba.hide_menu hm1 where hm1.mnid=menu_system.mnid)^Skryté\\2\\exists(select 1 from dba.hide_menu hm1 where hm1.mnid=menu_system.mnid); #DEFAULT=1; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=STANDARD; #POPISBEZ=Standard; #COLUMN=menu_system.standard; #ITEMS_COLUMN=menu_system.standard; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=USAGE; #COLUMN=-; #POPISBEZ=.Použití; #POLOZKY_BEGIN;Použité tento měsíc\\1\\exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and convert(char(6)/*BY*/, u.ts, 112) = convert(char(6)/*BY*/, GetDate(), 112) and u.cnt_m > 0) ^Použité minulý měsíc\\2\\exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and ((convert(char(6)/*BY*/, u.ts, 112) = convert(char(6)/*BY*/, GetDate(), 112) and u.cnt_pm > 0) or (convert(char(6)/*BY*/, u.ts, 112) = convert(char(6)/*BY*/, DateAdd(month, -1, GetDate()), 112) and u.cnt_m > 0))) ^Použité letos\\3\\exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) and u.cnt_y > 0) ^Použité loni\\4\\exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and ((convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) and u.cnt_py > 0) or (convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, DateAdd(year, -1, GetDate()), 112) and u.cnt_y > 0))) ^Nepoužité letos ani loni\\5\\not exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and ((convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) and (u.cnt_py > 0 or u.cnt_y > 0)) or (convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, DateAdd(year, -1, GetDate()), 112) and u.cnt_y > 0))) #POLOZKY_END; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=REFACTOR; #COLUMN=-; #POPISBEZ=.Možnost úpravy; #POLOZKY_BEGIN;Tlačítko s akcí Zpět\\1\\1 = 1 and menu_system.typ_def = 20 /*tlačítko na seznamu*/ and convert(varchar(255)/*BY*/, menu_system.parametr) is not null and menu_system.parametr like char(37) + '#' + 'RIGHTBUTTON;' + char(37) and (menu_system.parametr not like char(37) + '#' + 'BUTTON_CLASS=' + char(37) + ';' + char(37) and menu_system.parametr not like char(37) + '#' + 'BUTTON_CLASS_BEGIN;' + char(37) + '#' + 'BUTTON_CLASS_END;' + char(37)) and (menu_system.parametr not like char(37) + '#' + 'BUTTON_CLASS_RIGHT=' + char(37) + ';' + char(37) and menu_system.parametr not like char(37) + '#' + 'BUTTON_CLASS_RIGHT_BEGIN;' + char(37) + '#' + 'BUTTON_CLASS_RIGHT_END;' + char(37)) and (menu_system.parametr not like char(37) + '#' + 'BUTTON_GROUP=' + char(37) + ';' + char(37) and menu_system.parametr not like char(37) + '#' + 'BUTTON_GROUP_BEGIN;' + char(37) + '#' + 'BUTTON_GROUP_END;' + char(37)) and dba.getmenudirective_fce(menu_system.parametr, 'BUTTON_TITLE') <> '' and dba.getmenudirective_fce(menu_system.parametr, 'TYP') <> 'GROUP' and not exists(select 1 from dba.menu_system ms2 where ms2.par_mnid = menu_system.mnid) ^ #POLOZKY_END; #COMBO_END; #ENAB_ADD_IN_VIEW; #ENAB_DELETE_IN_VIEW; #DONE_ADDTYP=menu_system_tree; #PASTEIFPASTE; #PASTE_TO_DETAIL;;#SETMENUID_END;;;#SETMENUID=O/ADMIN/20/menu_system_tree/ADDTYP/200706211207172425861253/16/40/0; #ONELEVEL; #ROOTID=<ROOT>; -- Vše #TREESELECT1=select '<ALL>', '<ROOT>', 'Vše'/*TRAN*/; #TREESELECTWHEN1='$PARNOD$'='<ROOT>'; #TREE_WHERE1=1=1; -- Seznam modulů #TREESELECT2_BEGIN; #EXPAND_LANG_BEGIN;|\\MAIN_LANG_PRG||1|1| select 'MODUL:'+moduly.id_modulu, '<ALL>', rtrim(moduly.id_modulu)+'  - '+rtrim(moduly.nazev) from dba.moduly with(index(pk_moduly)) where moduly.id_modulu<>'' and (moduly.id_modulu='#FOR_MOD' or '#FOR_MOD'='#FOR'+'_MOD') order by moduly.id_modulu #EXPAND_LANG_END; #TREESELECT2_END; #TREESELECTWHEN2='$PARNOD$'='<ALL>'; #TREE_WHERE2=menu_hierarchy.root_id_modulu=convert(#BY(menu_system.id_modulu),substring($ID$,7,5)); -- Typ definice - popis #TREESELECT3_BEGIN; select 'RMN'+convert(char(2)/*BY*/,cisla.num)+':'+substring('$PARNOD$',7,5), 'MODUL:'+substring('$PARNOD$',7,20), #ITEMS(\\MAIN_LANG_PRG,menu_system.typ_def,cisla.num) from dba.cisla cisla with(index(pk_cisla)) where cisla.num>=10 and cisla.num<=16 and cisla.num in (10,15,16) order by cisla.num #TREESELECT3_END; #TREESELECTWHEN3=Left('$PARNOD$',6)='MODUL:'; #TREE_WHERE3=menu_hierarchy.root_typ_def=convert(#BY(menu_system.typ_def),substring($ID$,4,2)); #TREE_WHERE_ADD_PARENT3; -- Rootové položky menu aplikace #TREESELECT4_BEGIN; #EXPAND_LANG_BEGIN;|\\MAIN_LANG_PRG||1|1| select 'PMENU:'+menu_hierarchy.mnid, 'RMN10:'+menu_hierarchy.root_id_modulu, isnull(menu_system.popis,'-')+'  ('+#ITEMS(\\MAIN_LANG_PRG,menu_system.standard,menu_system.standard)+')' from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.root_id_modulu = convert(#BY(menu_hierarchy.root_id_modulu),substring('$PARNOD$',7,5)) and menu_hierarchy.root_typ_def = 10 and menu_hierarchy.root_mnid = menu_hierarchy.mnid and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.abs_order0 #EXPAND_LANG_END; #TREESELECT4_END; #TREESELECTWHEN4=Left('$PARNOD$',6)='RMN10:'; #TREE_WHERE4=exists(select 1 from dba.menu_hierarchy mh_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring($ID$,7,24)) and mh_tree.mnid=menu_system.mnid); -- Rootové typy menu objektů #TREESELECT5_BEGIN; select DISTINCT 'TMN'+convert(char(2)/*BY*/,menu_hierarchy.root_typ_def)+':'+substring(RTrim(menu_hierarchy.root_id_modulu)+replicate('*',5), 1, 5) + substring(RTrim(menu_hierarchy.root_typ_obj_akce)+replicate('*',20), 1, 20), 'RMN'+convert(char(2)/*BY*/,menu_hierarchy.root_typ_def)+':'+menu_hierarchy.root_id_modulu, menu_hierarchy.root_typ_obj_akce from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.root_id_modulu = convert(#BY(menu_hierarchy.root_id_modulu),str_replace(substring('$PARNOD$',7,5),'*','')) and menu_hierarchy.root_typ_def = convert(#BY(menu_system.typ_def),substring('$PARNOD$',4,2)) and menu_hierarchy.root_mnid = menu_hierarchy.mnid and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.root_typ_obj_akce #TREESELECT5_END; #TREESELECTWHEN5=Left('$PARNOD$',6) in ('RMN15:','RMN16:'); #TREE_WHERE5=menu_hierarchy.root_typ_obj_akce=convert(#BY(menu_hierarchy.root_typ_obj_akce),str_replace(substring($ID$,12,20),'*','')); #TREE_WHERE_ADD_PARENT5; -- Rootové položky menu objektů #TREESELECT6_BEGIN; #EXPAND_LANG_BEGIN;|\\MAIN_LANG_PRG||1|1| select 'DMENU:'+menu_system.mnid, 'TMN'+convert(char(2)/*BY*/,menu_hierarchy.root_typ_def)+':'+substring(RTrim(menu_hierarchy.root_id_modulu)+replicate('*',5), 1, 5) + substring(RTrim(menu_hierarchy.root_typ_obj_akce)+replicate('*',20), 1, 20), isnull(menu_system.popis,'-')+'  ('+#ITEMS(\\MAIN_LANG_PRG,menu_system.standard,menu_system.standard)+')' from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.root_id_modulu = convert(#BY(menu_hierarchy.root_id_modulu),str_replace(substring('$PARNOD$',7,5),'*','')) and menu_hierarchy.root_typ_def = convert(#BY(menu_system.typ_def),substring('$PARNOD$',4,2)) and menu_hierarchy.root_mnid = menu_hierarchy.mnid and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.root_typ_obj_akce, menu_hierarchy.root_id_akce_tabulka #EXPAND_LANG_END; #TREESELECT6_END; #TREESELECTWHEN6=Left('$PARNOD$',3)='TMN'; #TREE_WHERE6=exists(select 1 from dba.menu_hierarchy mh_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring($ID$,7,24)) and mh_tree.mnid=menu_system.mnid); -- Typy pod-položek rootů menu objektů #TREESELECT7_BEGIN; select DISTINCT 'KMN'+convert(char(2)/*BY*/,menu_system.typ_def)+':'+menu_hierarchy.this_par_mnid, 'DMENU:'+menu_hierarchy.this_par_mnid, #ITEMS(\\MAIN_LANG_PRG,menu_system.typ_def,menu_system.typ_def) from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.this_par_mnid=convert(#BY(menu_hierarchy.this_par_mnid),substring('$PARNOD$',7,24)) and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by 1 #TREESELECT7_END; #TREESELECTWHEN7=Left('$PARNOD$',6)='DMENU:'; #TREE_WHERE7=exists(select 1 from dba.menu_hierarchy mh_tree, dba.menu_system ms_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring($ID$,7,24)) and mh_tree.mnid=menu_system.mnid and ms_tree.mnid=mh_tree.mnid and ms_tree.typ_def=convert(#BY(menu_system.typ_def),substring($ID$,4,2)) ); -- Pod-položky typů #TREESELECT8_BEGIN; #EXPAND_LANG_BEGIN;|\\MAIN_LANG_PRG||1|1| select 'PMENU:'+menu_hierarchy.mnid, 'KMN'+convert(char(2)/*BY*/,menu_system.typ_def)+':'+menu_hierarchy.this_par_mnid, (case when menu_system.typ_def=10 then isnull(menu_system.popis,'-') else #ITEMS(\\MAIN_LANG_PRG,menu_system.typ_def,menu_system.typ_def) +' '+dba.getmenudirective_fce(convert(#MAXVARCHAR/*BY*/,menu_system.parametr),'BUTTON_TITLE') end) +'  ('+#ITEMS(\\MAIN_LANG_PRG,menu_system.standard,menu_system.standard)+')' from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.this_par_mnid=convert(#BY(menu_hierarchy.this_par_mnid),substring('$PARNOD$',7,24)) and menu_system.typ_def=convert(#BY(menu_system.typ_def),substring('$PARNOD$',4,2)) and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.abs_order #EXPAND_LANG_END; #TREESELECT8_END; #TREESELECTWHEN8=Left('$PARNOD$',3)='KMN'; #TREE_WHERE8=exists(select 1 from dba.menu_hierarchy mh_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring($ID$,7,24)) and mh_tree.mnid=menu_system.mnid); -- Pod-položky obecné #TREESELECT9_BEGIN; #EXPAND_LANG_BEGIN;|\\MAIN_LANG_PRG||1|1| select 'PMENU:'+menu_hierarchy.mnid, 'PMENU:'+menu_hierarchy.this_par_mnid, (case when menu_system.typ_def=10 then isnull(menu_system.popis,'-') else #ITEMS(\\MAIN_LANG_PRG,menu_system.typ_def,menu_system.typ_def) +' '+dba.getmenudirective_fce(convert(#MAXVARCHAR/*BY*/,menu_system.parametr),'BUTTON_TITLE') end) +'  ('+#ITEMS(\\MAIN_LANG_PRG,menu_system.standard,menu_system.standard)+')' from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.this_par_mnid=convert(#BY(menu_hierarchy.this_par_mnid),substring('$PARNOD$',7,24)) and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.abs_order #EXPAND_LANG_END; #TREESELECT9_END; #TREESELECTWHEN9=Left('$PARNOD$',6)='PMENU:'; #TREE_WHERE9=exists(select 1 from dba.menu_hierarchy mh_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring($ID$,7,24)) and mh_tree.mnid=menu_system.mnid);;#SETMENUID_END;;#ALL_ADD_TYPES=SEZNAM_,ADDTYP_menu_system_tree,;;#SEZNAM_TREE; w_iftseznam\tmaxrows\t350 w_iftseznam\tstorage\t7 742 w_iftseznam\tsorting w_iftseznam\tadd_sorting\tmenu_hierarchy_root_id_modulu A,menu_hierarchy_root_typ_def A,menu_hierarchy_abs_order0 A,menu_hierarchy_abs_order A, ------------------------------- Window: DetailEditace Systém - menu (ADMIN enabled visible c__w_iftdetail tab=menu_system) w_ift\tclassname\tw_iftdetail w_ift\tclasses\t.object.karatbaseobject.karatobject.karatcontrol.karatwindow.c__w_ift.c__w_iftdetail w_ift\tparametr ID_MENU=MNID/ADMIN/200705041442128667621216 TYP=DETAIL CLASS=w_iftdetail AKCE=menu_system ID_SAVE=menu_system_std W_SOURCE=object(c__w_iftseznam AppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.12860.12886.19062) DET_CLASS=w_iftdetail DET_TABULKA=menu_system DET_DW=d_gd_menu_system USER_BEGIN ;#SETMENUID=O/ADMIN/0/menu_system//200705041442128667621216/20/40/0; #SETVAL1=par_mnid=/*apb645*/'202311191846439310651865'/*ape645*/:W\\APP=1 and \\COPY=0:V; #PERCENT_OFF;;#SETMENUID_END;;#ISFIRSTROW;;#ISLASTROW;;#ISFROMBUTTON;;;#SETMENUID=O/ADMIN/10/menu_system//200705041442125791594212/15/40/0;  #NOADD_EVAL=1 <> 1; #NOEDIT_EVAL=1 <> 1; #TL_FUNKCE_SEZNAM; #FILTER_COL_NO_SET_TO_DETAIL=menu_hierarchy_root_id_modulu,menu_hierarchy_root_typ_def,menu_hierarchy_root_id_akce_tabulka,menu_hierarchy_root_typ_obj_akce,menu_hierarchy_abs_order0,menu_hierarchy_abs_order; #LEGEND1=#ADMIN_MENU10:#TEXT_ADMIN_MENU10:Ftyp_def=10; #LEGEND2=#ADMIN_MENU1X:#TEXT_ADMIN_MENU1X:Ftyp_def=15 or typ_def=16; #LEGEND3=#ADMIN_MENU20:#TEXT_ADMIN_MENU20:Ftyp_def=20; #LEGEND4=#ADMIN_MENUXX:#TEXT_ADMIN_MENUXX:F1=1; #COMBO_BEGIN; #COMBO_ID=ROOT_LEVEL; #COLUMN=menu_hierarchy.root_level; #POPISBEZ=.Úroveň zanoření; #POLOZKY=1. úroveň (Hlavní nabídky)\\0^2. úroveň (Podnabídky)\\1^3. úroveň\\2^4. úroveň\\3; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=TYP_DEF; #COLUMN=menu_system.typ_def; #POLOZKY=Menu aplikace\\10^Menu objektů tabulky\\15^Menu objektů akce\\16^Tlačítko seznam\\20^Funkce seznamu\\25^Tlačítko detailu\\30^Funkce detailu\\35^Nod stromu\\40^Ostatní\\45^Doplněk\\50^Náhrada\\55^Odkaz bez podakcí\\85^Odkaz včetně podakcí\\90; #POPISBEZ=.Typ definice; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=HIDE; #COLUMN=-; #POPISBEZ=.Skrytí; #POLOZKY=Neskryté\\1\\not exists(select 1 from dba.hide_menu hm1 where hm1.mnid=menu_system.mnid)^Skryté\\2\\exists(select 1 from dba.hide_menu hm1 where hm1.mnid=menu_system.mnid); #DEFAULT=1; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=STANDARD; #POPISBEZ=Standard; #COLUMN=menu_system.standard; #ITEMS_COLUMN=menu_system.standard; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=USAGE; #COLUMN=-; #POPISBEZ=.Použití; #POLOZKY_BEGIN;Použité tento měsíc\\1\\exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and convert(char(6)/*BY*/, u.ts, 112) = convert(char(6)/*BY*/, GetDate(), 112) and u.cnt_m > 0) ^Použité minulý měsíc\\2\\exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and ((convert(char(6)/*BY*/, u.ts, 112) = convert(char(6)/*BY*/, GetDate(), 112) and u.cnt_pm > 0) or (convert(char(6)/*BY*/, u.ts, 112) = convert(char(6)/*BY*/, DateAdd(month, -1, GetDate()), 112) and u.cnt_m > 0))) ^Použité letos\\3\\exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) and u.cnt_y > 0) ^Použité loni\\4\\exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and ((convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) and u.cnt_py > 0) or (convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, DateAdd(year, -1, GetDate()), 112) and u.cnt_y > 0))) ^Nepoužité letos ani loni\\5\\not exists(select 1 from dba.menu_usage u with(index(pk_menu_usage), forceseek) where u.mnid = menu_system.mnid and ((convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, GetDate(), 112) and (u.cnt_py > 0 or u.cnt_y > 0)) or (convert(char(4)/*BY*/, u.ts, 112) = convert(char(4)/*BY*/, DateAdd(year, -1, GetDate()), 112) and u.cnt_y > 0))) #POLOZKY_END; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=REFACTOR; #COLUMN=-; #POPISBEZ=.Možnost úpravy; #POLOZKY_BEGIN;Tlačítko s akcí Zpět\\1\\1 = 1 and menu_system.typ_def = 20 /*tlačítko na seznamu*/ and convert(varchar(255)/*BY*/, menu_system.parametr) is not null and menu_system.parametr like char(37) + '#' + 'RIGHTBUTTON;' + char(37) and (menu_system.parametr not like char(37) + '#' + 'BUTTON_CLASS=' + char(37) + ';' + char(37) and menu_system.parametr not like char(37) + '#' + 'BUTTON_CLASS_BEGIN;' + char(37) + '#' + 'BUTTON_CLASS_END;' + char(37)) and (menu_system.parametr not like char(37) + '#' + 'BUTTON_CLASS_RIGHT=' + char(37) + ';' + char(37) and menu_system.parametr not like char(37) + '#' + 'BUTTON_CLASS_RIGHT_BEGIN;' + char(37) + '#' + 'BUTTON_CLASS_RIGHT_END;' + char(37)) and (menu_system.parametr not like char(37) + '#' + 'BUTTON_GROUP=' + char(37) + ';' + char(37) and menu_system.parametr not like char(37) + '#' + 'BUTTON_GROUP_BEGIN;' + char(37) + '#' + 'BUTTON_GROUP_END;' + char(37)) and dba.getmenudirective_fce(menu_system.parametr, 'BUTTON_TITLE') <> '' and dba.getmenudirective_fce(menu_system.parametr, 'TYP') <> 'GROUP' and not exists(select 1 from dba.menu_system ms2 where ms2.par_mnid = menu_system.mnid) ^ #POLOZKY_END; #COMBO_END; #ENAB_ADD_IN_VIEW; #ENAB_DELETE_IN_VIEW; #DONE_ADDTYP=menu_system_tree; #PASTEIFPASTE; #PASTE_TO_DETAIL;;#SETMENUID_END;;;#SETMENUID=O/ADMIN/20/menu_system_tree/ADDTYP/200706211207172425861253/16/40/0; #ONELEVEL; #ROOTID=<ROOT>; -- Vše #TREESELECT1=select '<ALL>', '<ROOT>', 'Vše'/*TRAN*/; #TREESELECTWHEN1='$PARNOD$'='<ROOT>'; #TREE_WHERE1=1=1; -- Seznam modulů #TREESELECT2_BEGIN; #EXPAND_LANG_BEGIN;|CZ||1|1| select 'MODUL:'+moduly.id_modulu, '<ALL>', rtrim(moduly.id_modulu)+'  - '+rtrim(moduly.nazev) from dba.moduly with(index(pk_moduly)) where moduly.id_modulu<>'' and (moduly.id_modulu='#FOR_MOD' or '#FOR_MOD'='#FOR'+'_MOD') order by moduly.id_modulu #EXPAND_LANG_END; #TREESELECT2_END; #TREESELECTWHEN2='$PARNOD$'='<ALL>'; #TREE_WHERE2=menu_hierarchy.root_id_modulu=convert(#BY(menu_system.id_modulu),substring('<ALL>',7,5)); -- Typ definice - popis #TREESELECT3_BEGIN; select 'RMN'+convert(char(2)/*BY*/,cisla.num)+':'+substring('$PARNOD$',7,5), 'MODUL:'+substring('$PARNOD$',7,20), #ITEMS(CZ,menu_system.typ_def,cisla.num) from dba.cisla cisla with(index(pk_cisla)) where cisla.num>=10 and cisla.num<=16 and cisla.num in (10,15,16) order by cisla.num #TREESELECT3_END; #TREESELECTWHEN3=Left('$PARNOD$',6)='MODUL:'; #TREE_WHERE3=menu_hierarchy.root_typ_def=convert(#BY(menu_system.typ_def),substring('<ALL>',4,2)); #TREE_WHERE_ADD_PARENT3; -- Rootové položky menu aplikace #TREESELECT4_BEGIN; #EXPAND_LANG_BEGIN;|CZ||1|1| select 'PMENU:'+menu_hierarchy.mnid, 'RMN10:'+menu_hierarchy.root_id_modulu, isnull(menu_system.popis,'-')+'  ('+#ITEMS(CZ,menu_system.standard,menu_system.standard)+')' from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.root_id_modulu = convert(#BY(menu_hierarchy.root_id_modulu),substring('$PARNOD$',7,5)) and menu_hierarchy.root_typ_def = 10 and menu_hierarchy.root_mnid = menu_hierarchy.mnid and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.abs_order0 #EXPAND_LANG_END; #TREESELECT4_END; #TREESELECTWHEN4=Left('$PARNOD$',6)='RMN10:'; #TREE_WHERE4=exists(select 1 from dba.menu_hierarchy mh_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring('<ALL>',7,24)) and mh_tree.mnid=menu_system.mnid); -- Rootové typy menu objektů #TREESELECT5_BEGIN; select DISTINCT 'TMN'+convert(char(2)/*BY*/,menu_hierarchy.root_typ_def)+':'+substring(RTrim(menu_hierarchy.root_id_modulu)+replicate('*',5), 1, 5) + substring(RTrim(menu_hierarchy.root_typ_obj_akce)+replicate('*',20), 1, 20), 'RMN'+convert(char(2)/*BY*/,menu_hierarchy.root_typ_def)+':'+menu_hierarchy.root_id_modulu, menu_hierarchy.root_typ_obj_akce from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.root_id_modulu = convert(#BY(menu_hierarchy.root_id_modulu),str_replace(substring('$PARNOD$',7,5),'*','')) and menu_hierarchy.root_typ_def = convert(#BY(menu_system.typ_def),substring('$PARNOD$',4,2)) and menu_hierarchy.root_mnid = menu_hierarchy.mnid and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.root_typ_obj_akce #TREESELECT5_END; #TREESELECTWHEN5=Left('$PARNOD$',6) in ('RMN15:','RMN16:'); #TREE_WHERE5=menu_hierarchy.root_typ_obj_akce=convert(#BY(menu_hierarchy.root_typ_obj_akce),str_replace(substring('<ALL>',12,20),'*','')); #TREE_WHERE_ADD_PARENT5; -- Rootové položky menu objektů #TREESELECT6_BEGIN; #EXPAND_LANG_BEGIN;|CZ||1|1| select 'DMENU:'+menu_system.mnid, 'TMN'+convert(char(2)/*BY*/,menu_hierarchy.root_typ_def)+':'+substring(RTrim(menu_hierarchy.root_id_modulu)+replicate('*',5), 1, 5) + substring(RTrim(menu_hierarchy.root_typ_obj_akce)+replicate('*',20), 1, 20), isnull(menu_system.popis,'-')+'  ('+#ITEMS(CZ,menu_system.standard,menu_system.standard)+')' from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.root_id_modulu = convert(#BY(menu_hierarchy.root_id_modulu),str_replace(substring('$PARNOD$',7,5),'*','')) and menu_hierarchy.root_typ_def = convert(#BY(menu_system.typ_def),substring('$PARNOD$',4,2)) and menu_hierarchy.root_mnid = menu_hierarchy.mnid and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.root_typ_obj_akce, menu_hierarchy.root_id_akce_tabulka #EXPAND_LANG_END; #TREESELECT6_END; #TREESELECTWHEN6=Left('$PARNOD$',3)='TMN'; #TREE_WHERE6=exists(select 1 from dba.menu_hierarchy mh_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring('<ALL>',7,24)) and mh_tree.mnid=menu_system.mnid); -- Typy pod-položek rootů menu objektů #TREESELECT7_BEGIN; select DISTINCT 'KMN'+convert(char(2)/*BY*/,menu_system.typ_def)+':'+menu_hierarchy.this_par_mnid, 'DMENU:'+menu_hierarchy.this_par_mnid, #ITEMS(CZ,menu_system.typ_def,menu_system.typ_def) from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.this_par_mnid=convert(#BY(menu_hierarchy.this_par_mnid),substring('$PARNOD$',7,24)) and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by 1 #TREESELECT7_END; #TREESELECTWHEN7=Left('$PARNOD$',6)='DMENU:'; #TREE_WHERE7=exists(select 1 from dba.menu_hierarchy mh_tree, dba.menu_system ms_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring('<ALL>',7,24)) and mh_tree.mnid=menu_system.mnid and ms_tree.mnid=mh_tree.mnid and ms_tree.typ_def=convert(#BY(menu_system.typ_def),substring('<ALL>',4,2)) ); -- Pod-položky typů #TREESELECT8_BEGIN; #EXPAND_LANG_BEGIN;|CZ||1|1| select 'PMENU:'+menu_hierarchy.mnid, 'KMN'+convert(char(2)/*BY*/,menu_system.typ_def)+':'+menu_hierarchy.this_par_mnid, (case when menu_system.typ_def=10 then isnull(menu_system.popis,'-') else #ITEMS(CZ,menu_system.typ_def,menu_system.typ_def) +' '+dba.getmenudirective_fce(convert(#MAXVARCHAR/*BY*/,menu_system.parametr),'BUTTON_TITLE') end) +'  ('+#ITEMS(CZ,menu_system.standard,menu_system.standard)+')' from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.this_par_mnid=convert(#BY(menu_hierarchy.this_par_mnid),substring('$PARNOD$',7,24)) and menu_system.typ_def=convert(#BY(menu_system.typ_def),substring('$PARNOD$',4,2)) and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.abs_order #EXPAND_LANG_END; #TREESELECT8_END; #TREESELECTWHEN8=Left('$PARNOD$',3)='KMN'; #TREE_WHERE8=exists(select 1 from dba.menu_hierarchy mh_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring('<ALL>',7,24)) and mh_tree.mnid=menu_system.mnid); -- Pod-položky obecné #TREESELECT9_BEGIN; #EXPAND_LANG_BEGIN;|CZ||1|1| select 'PMENU:'+menu_hierarchy.mnid, 'PMENU:'+menu_hierarchy.this_par_mnid, (case when menu_system.typ_def=10 then isnull(menu_system.popis,'-') else #ITEMS(CZ,menu_system.typ_def,menu_system.typ_def) +' '+dba.getmenudirective_fce(convert(#MAXVARCHAR/*BY*/,menu_system.parametr),'BUTTON_TITLE') end) +'  ('+#ITEMS(CZ,menu_system.standard,menu_system.standard)+')' from dba.menu_hierarchy, dba.menu_system where menu_hierarchy.this_par_mnid=convert(#BY(menu_hierarchy.this_par_mnid),substring('$PARNOD$',7,24)) and menu_hierarchy.par_mnid = menu_hierarchy.mnid and menu_system.mnid = menu_hierarchy.mnid order by menu_hierarchy.abs_order #EXPAND_LANG_END; #TREESELECT9_END; #TREESELECTWHEN9=Left('$PARNOD$',6)='PMENU:'; #TREE_WHERE9=exists(select 1 from dba.menu_hierarchy mh_tree where mh_tree.par_mnid=convert(#BY(menu_hierarchy.par_mnid),substring('<ALL>',7,24)) and mh_tree.mnid=menu_system.mnid);;#SETMENUID_END;;#ALL_ADD_TYPES=SEZNAM_,ADDTYP_menu_system_tree,;;#SEZNAM_TREE;;#IS_LIST_EDIT;;;#SETMENUID=O/ADMIN/10/menu_system//200705041442116864468994/15/40/0; #CLASS_AFTER_SAVE1=w_update_db; #WHEN_AFTER_SAVE1=GetGlobalPar('ADMIN_LNG_AUTO_TRAN')<>'0' and Lic_Modules('LNG')<>''; #USER_AFTER_SAVE1_BEGIN; #AFTER_SAVE1_XMESSAGE1=Provést překlad?:q; #AFTER_SAVE1_VYBER_BEGIN; #AFTER_SAVE1_TRAN; #AFTER_SAVE1_TRANMENU; #AFTER_SAVE1_VYBER_END; #AFTER_SAVE1_MODULY=@id_modulu:NA@; #AFTER_SAVE1_RUNWITHASKS; #AFTER_SAVE1_WINDOW_WAIT; #USER_AFTER_SAVE1_END; #TYP_AFTER_SAVE2=REFRESHMENU; #TL_FUNKCE_DETAIL;;#SETMENUID_END;;#ALL_ADD_TYPES=DETAIL_menu_system,; USER_END w_ift\tparametr/25 01ID_MENU=MNID/ADMIN/200705041442125216114966 01BUTTON_TITLE=Přegenerace popisu 01TYP=SQLCOMMAND 01USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200705041442125216114966/25/40/0;#NOEDIT_EVAL_LEFT=\\DEVFIRM <> 1; #PERCENT_OFF; #MULTI_BUTTON; #PROCESBAR; #PROCESTEXT=Přegenerování popisu; #REFRESHROW; #SQLCOMMAND1_BEGIN; update dba.menu_system set popis= (case when typ_def in (15,16) then rtrim(typ_obj_akce)+' 00 '+lower(rtrim(id_akce_tabulka)) else substring( (case typ_def when 20 then 'Tlačítko seznam'/*TRAN*/ when 25 then 'Funkce seznam'/*TRAN*/ when 30 then 'Tlačítko detail'/*TRAN*/ when 35 then 'Funkce detail'/*TRAN*/ when 40 then 'Nod stromu'/*TRAN*/ when 45 then 'Ostatní'/*TRAN*/ else 'Chyba'/*TRAN*/ end)+ (case when coalesce(patindex(char(37)+'BUTTON_TITLE='+char(37),parametr),0)>0 then char(32)+char(32)+ltrim(rtrim(substring(convert(varchar(255)/*BY*/,parametr), 13+patindex(char(37)+'BUTTON_TITLE='+char(37),parametr), patindex(char(37)+char(13)+char(10)+char(37),substring(convert(varchar(255)/*BY*/,parametr), 13+patindex(char(37)+'BUTTON_TITLE='+char(37),parametr),253)++char(13)+char(10))-1))) else '' end) ,1,100) end) from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid% and isnull(popis,'')<>'-' and typ_def in(15,16,20,25,30,35,40,45) #SQLCOMMAND1_END; #SQLMESS1=Úprava popisu nabídek menu; #SQLERR1=Chyba při úpravě popisu nabídek menu;;#SETMENUID_END; 01USER_END 02ID_MENU=MNID/ADMIN/200705041442129067457607 02BUTTON_TITLE=Refres&h menu 02TYP=NOTHING 02USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200705041442129067457607/25/40/0;#REFRESHMENU;#PRAVO_DEF=10;;#SETMENUID_END; 03ID_MENU=MNID/ADMIN/200705281524516005362103 03BUTTON_TITLE=- 03USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200705281524516005362103/25/40/0;;#SETMENUID_END; 04ID_MENU=MNID/ADMIN/200705041442127244230768 04BUTTON_TITLE=Práva na menu 04TYP=SEZNAM 04AKCE=admin_prehled_menu_s 04SEZ_PODMINKA=menu_system.mnid=%mnid% 04SEZ_V_PODMINCE=menu_system.mnid,prava_menu.mnid,mnid 04SEZ_INITINDEX=sort_2 04USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200705041442127244230768/25/40/0;;#SETMENUID_END; 05ID_MENU=MNID/ADMIN/200705041442123786522673 05BUTTON_TITLE=Skrýt nabídku všem 05TYP=SQLCOMMAND 05USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=hide_menu;;#SETMENUID=O/ADMIN/0/menu_system//200705041442123786522673/25/40/0; #BUTTON_QUESTION=Opravdu chcete skrýt nabídku všem uživatelům této databáze?; #NOEDIT_EVAL_LEFT=is_hide=1; #PERCENT_OFF; #MULTI_BUTTON; #PROCESBAR; #PROCESTEXT=Skrytí nabídky; #SQLCOMMAND1_BEGIN; insert into dba.hide_menu(mnid,ts,autor) select %mnid%,GetDate(),user where not exists(select 1 from dba.hide_menu with(index(pk_hide_menu)) where mnid=%mnid%) #SQLCOMMAND1_END; #SQLMESS1=Skrytí nabídky;;#SETMENUID_END; 05USER_END 06ID_MENU=MNID/ADMIN/200705041442120086570885 06BUTTON_TITLE=Zrušit skrytí nabídky všem 06TYP=SQLCOMMAND 06USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=hide_menu;;#SETMENUID=O/ADMIN/0/menu_system//200705041442120086570885/25/40/0; #BUTTON_QUESTION=Opravdu chcete zrušit skrytí nabídky všem uživatelům této databáze?; #NOEDIT_EVAL_LEFT=is_hide=0; #PERCENT_OFF; #MULTI_BUTTON; #PROCESBAR; #PROCESTEXT=Zrušení skrytí nabídky; #SQLCOMMAND1=delete dba.hide_menu from dba.hide_menu hide_menu with(index(pk_hide_menu)) where mnid=%mnid%; #SQLMESS1=Zrušení skrytí nabídky;;#SETMENUID_END; 06USER_END 07ID_MENU=MNID/ADMIN/202208111458062528230757 07BUTTON_TITLE=Použití uživatelem 07TYP=SEZNAM 07AKCE=menu_usr_usage_stats 07ID_SAVE=menu_usr_usage_stats_mnid 07SEZ_TABULKA=menu_usr_usage 07SEZ_PODMINKA=menu_usr_usage.mnid = %mnid% 07SEZ_V_PODMINCE=menu_usr_usage.mnid,mnid 07USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//202208111458062528230757/25/40/0;;#SETMENUID_END; 08ID_MENU=MNID/ADMIN/200705281524512120861161 08BUTTON_TITLE=- 08USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200705281524512120861161/25/40/0;;#SETMENUID_END; 09ID_MENU=MNID/ADMIN/200706181505327111302212 09BUTTON_TITLE=Neintegritní položky 09TYP=SEZNAM 09ID_SAVE=menu_system_neinteg 09SEZ_TABULKA=menu_system 09SEZ_TITLE=Neintegritní položky 09SEZ_PODMINKA_BEGIN not exists(select 1 from dba.menu_system ms3 with(index(pk_menu_system)) where  ms3.mnid=menu_system.ord_mnid) or not exists(select 1 from dba.menu_system ms3 with(index(pk_menu_system)) where  ms3.mnid=menu_system.par_mnid) or (menu_system.standard<=30 and not exists(select 1 from dba.menu_system ms3 with(index(pk_menu_system)) where  ms3.mnid=menu_system.ref_mnid)) 09SEZ_PODMINKA_END 09USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200706181505327111302212/25/40/0;  #NOADDTABMENU; #SEZNOROW;;#SETMENUID_END; 09USER_END 10ID_MENU=MNID/ADMIN/200707121416482425861253 10BUTTON_TITLE=Položky bez vypočtené hierarchie 10TYP=SEZNAM 10ID_SAVE=menu_system_nohier 10SEZ_TABULKA=menu_system 10SEZ_TITLE=Položky bez vypočtené hierarchie 10SEZ_PODMINKA_BEGIN (menu_system.standard<=30 or menu_system.ref_mnid='') and not exists(select 1 from dba.menu_hierarchy mh with(index(pk_menu_hierarchy)) where  mh.mnid=menu_system.mnid and  mh.par_mnid=menu_system.mnid) 10SEZ_PODMINKA_END 10USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200707121416482425861253/25/40/0;  #NOADDTABMENU; #SEZNOROW;;#SETMENUID_END; 10USER_END 11ID_MENU=MNID/ADMIN/200706150855272425861253 11BUTTON_TITLE=Chybně převedné položky 11TYP=SEZNAM 11SEZ_TABULKA=menu_system 11SEZ_TITLE=Chybně převedné položky 11SEZ_PODMINKA=menu_system.par_mnid='' and menu_system.typ_def not in (10,15,16) 11USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200706150855272425861253/25/40/0;  #SEZNOROW;;#SETMENUID_END; 12ID_MENU=MNID/ADMIN/200706150855271450073627 12BUTTON_TITLE=Zacyklené pořadí položek 12TYP=SEZNAM 12SEZ_TABULKA=menu_system 12SEZ_TITLE=Zacyklené pořadí položek 12SEZ_PODMINKA=menu_system.ord_typ=10 and menu_system.ord_mnid<>menu_hierarchy.aft_mnid 12USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200706150855271450073627/25/40/0;  #SEZNOROW;;#SETMENUID_END; 13ID_MENU=MNID/ADMIN/200706151517148733028224 13BUTTON_TITLE=Kontrola nastavení práva 13TYP=SEZNAM 13ID_SAVE=menu_system_pravodef 13SEZ_TABULKA=menu_system 13SEZ_TITLE=Kontrola nastavení práva 13USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200706151517148733028224/25/40/0;  #SEZNOROW; #ADDTYP=menu_system_pravodef;;#SETMENUID_END; 13USER_END 1301ID_MENU=MNID/ADMIN/200706181720085133507953 1301BUTTON_TITLE=Nastavit na samostatně definované 1301TYP=SQLCOMMAND 1301USER_BEGIN ;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200706181720085133507953/20/40/0; #NOEDIT_EVAL_LEFT=pravo_def=10 or spravne_pravo<>10; #BUTTON_COLOR=rgb(255,0,0); #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1=update dba.menu_system set pravo_def=10, pravo_tab='',autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%; #REFRESHROWS;;#SETMENUID_END; 1301USER_END 1302ID_MENU=MNID/ADMIN/200706181720084222950765 1302BUTTON_TITLE=Nastavit dle nadřízené 1302TYP=SQLCOMMAND 1302USER_BEGIN ;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200706181720084222950765/20/40/0; #NOEDIT_EVAL_LEFT=pravo_def=20 or spravne_pravo<>20; #BUTTON_COLOR=rgb(255,0,0); #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1=update dba.menu_system set pravo_def=20, pravo_tab='',autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%; #REFRESHROWS;;#SETMENUID_END; 1302USER_END 1303ID_MENU=MNID/ADMIN/200706181720084072959062 1303BUTTON_TITLE=Nastavit na přístupné všem 1303TYP=SQLCOMMAND 1303USER_BEGIN ;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200706181720084072959062/20/40/0; #NOEDIT_EVAL_LEFT=pravo_def=40 or spravne_pravo<>40; #BUTTON_COLOR=rgb(255,0,0); #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1=update dba.menu_system set pravo_def=40, pravo_tab='',autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%; #REFRESHROWS;;#SETMENUID_END; 1303USER_END 14ID_MENU=MNID/ADMIN/200706181505323161425178 14BUTTON_TITLE=- 14USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200706181505323161425178/25/40/0;;#SETMENUID_END; 15ID_MENU=MNID/ADMIN/200901291527504958642779 15BUTTON_TITLE=Propočet 15USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//200901291527504958642779/25/40/0;;#SETMENUID_END; 1501ID_MENU=MNID/ADMIN/200705281524515313526627 1501BUTTON_TITLE=Kompletní propočet menu tabulek 1501TYP=SQLCOMMAND 1501USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_hierarchy;;#SETMENUID=O/ADMIN/0/menu_system//200705281524515313526627/25/40/0;    #SEZNOROW; #SQLCOMMAND1=exec dba.admin_akt_menu_odkaz; #SQLMESS1=Menu odkazem; #SQLCOMMAND2=exec dba.admin_menu_hierarchy; #SQLMESS2=Hierarchie; #SQLCOMMAND3=exec dba.admin_menu_order @sub = 1; #SQLMESS3=Pořadí; #SQLCOMMAND4=exec dba.admin_menu_abs_order; #SQLMESS4=Absolutní pořadí;;#SETMENUID_END; 1501USER_END 1502ID_MENU=MNID/ADMIN/200901291611486405315225 1502BUTTON_TITLE=Propočet menu tabulek modulu 1502TYP=SQLCOMMAND 1502USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200901291611486405315225/25/40/0; #SQLCOMMAND1=exec dba.admin_akt_menu %id_modulu%; #PERCENT_OFF;;#SETMENUID_END; 1502USER_END 1503ID_MENU=MNID/ADMIN/200901291530014901129206 1503BUTTON_TITLE=Propočet menu tabulek zvolené větve 1503TYP=SQLCOMMAND 1503USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200901291530014901129206/25/40/0; #SQLCOMMAND1=exec dba.admin_akt_menu '',%menu_hierarchy_root_mnid%,1,1; #PERCENT_OFF;;#SETMENUID_END; 1503USER_END 1504ID_MENU=MNID/ADMIN/200801101508576293661982 1504BUTTON_TITLE=Propočet menu odkazem 1504TYP=SQLCOMMAND 1504USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200801101508576293661982/25/40/0; #NOEDIT_EVAL_LEFT=(not typ_def in (85,90)); #PERCENT_OFF; #SQLCOMMAND1=exec dba.admin_akt_menu_odkaz %id_modulu%,%mnid%; #SQLMESS1=Menu odkazem;;#SETMENUID_END; 1504USER_END 16ID_MENU=MNID/ADMIN/201108191600050509259974 16BUTTON_TITLE=Skupina zobrazení 16USER=;#TYPP=25;;#SETMENUID=O/ADMIN/0/menu_system//201108191600050509259974/25/40/0;;#SETMENUID_END; 1601ID_MENU=MNID/ADMIN/201108191601199005030522 1601BUTTON_TITLE=Evidence 1601TYP=SQLCOMMAND 1601USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201108191601199005030522/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=10,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1601USER_END 1602ID_MENU=MNID/ADMIN/201108191603431777557299 1602BUTTON_TITLE=Přehledy 1602TYP=SQLCOMMAND 1602USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201108191603431777557299/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=20,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1602USER_END 1603ID_MENU=MNID/ADMIN/201108191604227349324688 1603BUTTON_TITLE=Sestavy 1603TYP=SQLCOMMAND 1603USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201108191604227349324688/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=30,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1603USER_END 1604ID_MENU=MNID/ADMIN/201108191604426444594495 1604BUTTON_TITLE=Číselníky 1604TYP=SQLCOMMAND 1604USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201108191604426444594495/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=40,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1604USER_END 1605ID_MENU=MNID/ADMIN/201108191605132908746532 1605BUTTON_TITLE=Operace 1605TYP=SQLCOMMAND 1605USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201108191605132908746532/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=50,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1605USER_END 1606ID_MENU=MNID/ADMIN/201108191605568078817429 1606BUTTON_TITLE=Servis 1606TYP=SQLCOMMAND 1606USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201108191605568078817429/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=60,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1606USER_END 1607ID_MENU=MNID/ADMIN/201108191606105706911498 1607BUTTON_TITLE=Neuvedeno 1607TYP=SQLCOMMAND 1607USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201108191606105706911498/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=0,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1607USER_END 1608ID_MENU=MNID/ADMIN/201201191613322310285425 1608BUTTON_TITLE=Skrytá 1608TYP=SQLCOMMAND 1608USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//201201191613322310285425/25/40/0; #MULTI_BUTTON; #PERCENT_OFF; #REFRESHROW; #SQLCOMMAND1=update dba.menu_system set menu_box=100,autor=user,ts=GetDate() from dba.menu_system menu_system with(index(pk_menu_system)) where mnid=%mnid%/*UNCACHE=menu_system*/; #REFRESHMENU=%menu_hierarchy_root_id_modulu:NA%;;#SETMENUID_END; 1608USER_END 17ID_MENU=MNID/ADMIN/202212142225447161060144 17BUTTON_TITLE=Rozděl tlačítko se Zpět akcí 17TYP=SQLCOMMAND 17USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//202212142225447161060144/25/40/0;    #NOEDIT_EVAL_LEFT=\\DEVFIRM <> 1; #MULTI_BUTTON; #PERCENT_OFF; #NOEDIT_EVAL_LEFT_BEGIN; (typ_def <> 20 /*tlačítko na seznamu*/ or isnull(parametr) or pos(parametr, '#' + 'RIGHTBUTTON;') <= 0 or getdirective(parametr, 'BUTTON_CLASS') <> '' or getdirective(parametr, 'BUTTON_CLASS_RIGHT') <> '' or getdirective(parametr, 'BUTTON_GROUP') <> '' or menudirective(parametr, 'BUTTON_TITLE') = '' or menudirective(parametr, 'TYP') = 'GROUP') #NOEDIT_EVAL_LEFT_END; #SQLCOMMAND1_BEGIN; declare @left_mnid #BY(menu_system.mnid), @right_mnid #BY(menu_system.mnid) select @left_mnid = %mnid%, @right_mnid = convert(varchar(8)/*BY*/, GetDate(), 112) + left(replace(convert(varchar(11)/*BY*/, GetDate(), 14), ':', ''), 8) + right('00000000' + convert(varchar(8)/*BY*/, convert(int/*BY*/, floor(rand() * 99999999))), 8) declare @left_parm #VARCHARMAX/*BY*/, @right_parm #VARCHARMAX/*BY*/, @right_popis #BY(menu_system.popis), @menu_ok tinyint/*BY*/ select @menu_ok = 0 select @menu_ok = 1, @left_parm = dba.removedirective_fce( dba.substitute_fce(dba.removedirective_fce( dba.removedirective_fce( dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce( replace(convert(varchar(max)/*BY*/, ms.parametr), '#' + 'RIGHTBUTTON;', '#' + 'BUTTON_GROUP=' + dba.getmenudirective_fce(ms.parametr, 'BUTTON_TITLE') + ';'), 'BUTTON_R_QUESTION'), 'BUTTON_R_QUESTION1'), 'BUTTON_R_QUESTION2'), 'BUTTON_R_QUESTION3'), 'BUTTON_R_QUESTION4'), 'BUTTON_R_QUESTION5'), 'BUTTON_R_QUESTION3000'), 'BUTTON_R_QUESTION3001'), 'BUTTON_R_QUESTION3002'), 'BUTTON_R_QUESTION3003'), 'NOEDIT_EVAL_RIGHT'), 'SUBST_RIGHT'), '#' + 'RIGHTCLICK|0|1-#' + 'RIGHTCLICK|1|1 - #' + 'RIGHTCLICK|1|' + 'case when #' + 'RIGHTCLICK=1 then 0 else 1 end|1|case when #' + 'RIGHTCLICK = 1 then 0 else 1 end|1|' + 'case when #' + 'RIGHTCLICK=1 then 1 else 0 end|0|case when #' + 'RIGHTCLICK = 1 then 1 else 0 end|0|' + 'case when #' + 'RIGHTCLICK=0 then 0 else 1 end|0|case when #' + 'RIGHTCLICK = 0 then 0 else 1 end|0|' + 'case when #' + 'RIGHTCLICK=0 then 1 else 0 end|1|case when #' + 'RIGHTCLICK = 0 then 1 else 0 end|1|' + 'case when #' + 'RIGHTCLICK=1 then ''FALSE'' else ''TRUE'' end|''TRUE''|case when #' + 'RIGHTCLICK = 1 then ''FALSE'' else ''TRUE'' end|''TRUE''|' + 'case when #' + 'RIGHTCLICK=1 then ''TRUE'' else ''FALSE'' end|''FALSE''|case when #' + 'RIGHTCLICK = 1 then ''TRUE'' else ''FALSE'' end|''FALSE''|' + 'case when #' + 'RIGHTCLICK=0 then ''FALSE'' else ''TRUE'' end|''FALSE''|case when #' + 'RIGHTCLICK = 0 then ''FALSE'' else ''TRUE'' end|''FALSE''|' + 'case when #' + 'RIGHTCLICK=0 then ''TRUE'' else ''FALSE'' end|''TRUE''|case when #' + 'RIGHTCLICK = 0 then ''TRUE'' else ''FALSE'' end|''TRUE''|' + '#' + 'RIGHTCLICK=0 and ||#' + 'RIGHTCLICK = 0 and ||#' + 'RIGHTCLICK=1 or ||#' + 'RIGHTCLICK = 1 or ||', '|'), 'BUTTONTEXT_RIGHT'), @right_parm = dba.removedirective_fce('BUTTON_TITLE=' + dba.getdirective_def_fce(ms.parametr, 'BUTTONTEXT_RIGHT', 'Zpět ' + dba.getmenudirective_fce(ms.parametr, 'BUTTON_TITLE')) + char(13) + char(10) + dba.removemenudirective_fce( dba.substitute_fce(dba.removedirective_fce( replace(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce( replace(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce(dba.removedirective_fce( replace(dba.removedirective_fce( replace(convert(varchar(max)/*BY*/, ms.parametr), '#' + 'RIGHTBUTTON;', '#' + 'BUTTON_GROUP=' + dba.getmenudirective_fce(ms.parametr, 'BUTTON_TITLE') + ';#' + 'BUTTON_GROUP_RIGHT;/' + '*#' + 'LEFT_MNID=' + @left_mnid + ';*' + '/'), 'NOEDIT_EVAL_LEFT'), '#' + 'NOEDIT_EVAL_RIGHT', '#' + 'NOEDIT_EVAL_LEFT'), 'BUTTON_QUESTION'), 'BUTTON_QUESTION1'), 'BUTTON_QUESTION2'), 'BUTTON_QUESTION3'), 'BUTTON_QUESTION4'), 'BUTTON_QUESTION5'), 'BUTTON_QUESTION3000'), 'BUTTON_QUESTION3001'), 'BUTTON_QUESTION3002'), 'BUTTON_QUESTION3003'), '#' + 'BUTTON_R_QUESTION', '#' + 'BUTTON_QUESTION'), 'BUTTON_TITLE1'), 'BUTTON_TITLE2'), 'BUTTON_TITLE3'), 'BUTTON_TITLE4'), 'BUTTON_TITLE5'), 'BUTTON_TITLE6'), 'BUTTON_TITLE3000'), 'BUTTON_TITLE3001'), 'BUTTON_TITLE3002'), 'BUTTON_TITLE3003'), '#' + 'BUTTON_TITLE', '#' + '.BUTTON_TITLE'), 'SUBST_RIGHT'), '#' + 'RIGHTCLICK|1|1-#' + 'RIGHTCLICK|0|1 - #' + 'RIGHTCLICK|0|' + 'case when #' + 'RIGHTCLICK=1 then 0 else 1 end|0|case when #' + 'RIGHTCLICK = 1 then 0 else 1 end|0|' + 'case when #' + 'RIGHTCLICK=1 then 1 else 0 end|1|case when #' + 'RIGHTCLICK = 1 then 1 else 0 end|1|' + 'case when #' + 'RIGHTCLICK=0 then 0 else 1 end|1|case when #' + 'RIGHTCLICK = 0 then 0 else 1 end|1|' + 'case when #' + 'RIGHTCLICK=0 then 1 else 0 end|0|case when #' + 'RIGHTCLICK = 0 then 1 else 0 end|0|' + 'case when #' + 'RIGHTCLICK=1 then ''FALSE'' else ''TRUE'' end|''FALSE''|case when #' + 'RIGHTCLICK = 1 then ''FALSE'' else ''TRUE'' end|''FALSE''|' + 'case when #' + 'RIGHTCLICK=1 then ''TRUE'' else ''FALSE'' end|''TRUE''|case when #' + 'RIGHTCLICK = 1 then ''TRUE'' else ''FALSE'' end|''TRUE''|' + 'case when #' + 'RIGHTCLICK=0 then ''FALSE'' else ''TRUE'' end|''TRUE''|case when #' + 'RIGHTCLICK = 0 then ''FALSE'' else ''TRUE'' end|''TRUE''|' + 'case when #' + 'RIGHTCLICK=0 then ''TRUE'' else ''FALSE'' end|''FALSE''|case when #' + 'RIGHTCLICK = 0 then ''TRUE'' else ''FALSE'' end|''FALSE''|' + '#' + 'RIGHTCLICK=1 and ||#' + 'RIGHTCLICK = 1 and ||#' + 'RIGHTCLICK=0 or ||#' + 'RIGHTCLICK = 0 or ||' + '#' + 'DEFAULT_BUTTON;||' + dba.getdirective_fce(ms.parametr, 'SUBST_RIGHT'), '|'), 'BUTTON_TITLE'), 'BUTTONTEXT_RIGHT'), @right_popis = 'Tlačítko seznam ' + dba.getdirective_def_fce(ms.parametr, 'BUTTONTEXT_RIGHT', 'Zpět ' + dba.getmenudirective_fce(ms.parametr, 'BUTTON_TITLE')) from dba.menu_system ms where ms.mnid = @left_mnid and ms.typ_def = 20 /*tlačítko na seznamu*/ and convert(varchar(255)/*BY*/, ms.parametr) is not null and ms.parametr like char(37) + '#' + 'RIGHTBUTTON;' + char(37) and (ms.parametr not like char(37) + '#' + 'BUTTON_CLASS=' + char(37) + ';' + char(37) and ms.parametr not like char(37) + '#' + 'BUTTON_CLASS_BEGIN;' + char(37) + '#' + 'BUTTON_CLASS_END;' + char(37)) and (ms.parametr not like char(37) + '#' + 'BUTTON_CLASS_RIGHT=' + char(37) + ';' + char(37) and ms.parametr not like char(37) + '#' + 'BUTTON_CLASS_RIGHT_BEGIN;' + char(37) + '#' + 'BUTTON_CLASS_RIGHT_END;' + char(37)) and (ms.parametr not like char(37) + '#' + 'BUTTON_GROUP=' + char(37) + ';' + char(37) and ms.parametr not like char(37) + '#' + 'BUTTON_GROUP_BEGIN;' + char(37) + '#' + 'BUTTON_GROUP_END;' + char(37)) and dba.getmenudirective_fce(ms.parametr, 'BUTTON_TITLE') <> '' if @menu_ok <> 1 begin raiserror 99999 'Menu %1! není vhodné pro rozklad na dvě tlačítka' return end insert into dba.menu_system(mnid, id_modulu, standard, typ_def, par_mnid, ord_typ, ord_mnid, typ_obj_akce, id_akce_tabulka, popis, pravo_def, pravo_tab, parametr, lang, menu_visible, platnost, autor, ts) select @right_mnid, ms.id_modulu, ms.standard, ms.typ_def, ms.par_mnid, 10 /*za*/, @left_mnid, ms.typ_obj_akce, ms.id_akce_tabulka, @right_popis, ms.pravo_def, ms.pravo_tab, @right_parm, ms.lang, ms.menu_visible, ms.platnost, user, GetDate() from dba.menu_system ms where ms.mnid = @left_mnid update dba.menu_system set parametr = @left_parm, autor = user, ts =  GetDate() from dba.menu_system ms where ms.mnid = @left_mnid #SQLCOMMAND1_END; #REFRESHROWS;;#SETMENUID_END; 17USER_END w_ift\tparametr/0 18ID_MENU=MNID/ADMIN/200705041442127098270895 18BUTTON_TITLE=Nadřízená položka 18TYP=SEZNAM 18SEZ_TABULKA=menu_system 18SEZ_VAZBA=TRUE 18SEZ_VAZBA_COLUMN1=par_mnid 18USER=;#SETMENUID=O/ADMIN/0/menu_system//200705041442127098270895/20/40/0; #NOEDIT_EVAL_LEFT=par_mnid='';;#SETMENUID_END; 19ID_MENU=MNID/ADMIN/200705041442120638940181 19BUTTON_TITLE=Přímo podřízené 19TYP=SEZNAM 19SEZ_TABULKA=menu_system 19SEZ_PODMINKA=menu_system.par_mnid=%mnid% 19SEZ_V_PODMINCE=menu_system.par_mnid,par_mnid 19USER_BEGIN ;#SETMENUID=O/ADMIN/0/menu_system//200705041442120638940181/20/40/0; #SETVAL1=par_mnid=%mnid%:W\\APP=1 and \\COPY=0:V; #PERCENT_OFF;;#SETMENUID_END; 19USER_END 20ID_MENU=MNID/ADMIN/200705041442128667621216 20BUTTON_TITLE=Všechny podřízené 20TYP=SEZNAM 20SEZ_TABULKA=menu_system 20SEZ_PODMINKA=exists(select 1 from dba.menu_hierarchy mh1 with(index(pk_menu_hierarchy)) where mh1.mnid=menu_system.mnid and mh1.par_mnid=%mnid% and mh1.mnid<>%mnid%) 20USER_BEGIN ;#SETMENUID=O/ADMIN/0/menu_system//200705041442128667621216/20/40/0; #SETVAL1=par_mnid=%mnid%:W\\APP=1 and \\COPY=0:V; #PERCENT_OFF;;#SETMENUID_END; 20USER_END 21ID_MENU=MNID/ADMIN/201805091630597661895178 21BUTTON_TITLE=Přičítané položky 21TYP=SEZNAM 21SEZ_TABULKA=menu_system 21SEZ_PODMINKA=menu_system.mnid <> '' and menu_system.mnid in ('' %(ReplaceAll(ReplaceAll(GetReferredBatches('^', 'menu_system', 'parametr', '#TYP_DEF='+string(typ_def)+';#TYP_OBJ_AKCE='+trim(typ_obj_akce)+';#ID_AKCE_TABULKA='+trim(id_akce_tabulka)+';#PAR_MNID='+string(par_mnid)+';', parametr, 0),'menu_system'+GetGlobalPar('ADMIN_PK_SEPAR')+'parametr'+GetGlobalPar('ADMIN_PK_SEPAR'),', '''), '^', '''')):NA%) 21USER=;#SETMENUID=O/ADMIN/0/menu_system//201805091630597661895178/20/40/0;;#SETMENUID_END; 22ID_MENU=MNID/ADMIN/200705281524511450073627 22BUTTON_TITLE=Přidej pod 22TYP=DETAIL 22DET_TABULKA=menu_system 22DET_WHERE=APP 22USER_BEGIN ;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200705281524511450073627/20/40/0; #BUTTON_GROUP=Přidej položku; #NOEDIT_EVAL_LEFT=\\DEVFIRM <> 1; #SETVAL1=id_modulu=%id_modulu%:W\\APP=1:V; #SETVAL2=standard=%if('\\DEVSTANDARD'=0 and standard=40, 30, standard)%:W\\APP=1:V; #SETVAL3=typ_def=%if(typ_def in (10,15,16),20,typ_def)%:W\\APP=1:V; #SETVAL4=par_mnid=%mnid%:W\\APP=1:V; #PERCENT_OFF; #PRAVO_DEF=30;;#SETMENUID_END; 22USER_END 23ID_MENU=MNID/ADMIN/200705281524511387441722 23BUTTON_TITLE=Přidej za 23TYP=DETAIL 23DET_TABULKA=menu_system 23DET_WHERE=APP 23USER_BEGIN ;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200705281524511387441722/20/40/0; #BUTTON_GROUP=Přidej položku; #NOEDIT_EVAL_LEFT=\\DEVFIRM <> 1; #SETVAL1=id_modulu=%id_modulu%:W\\APP=1:V; #SETVAL2=standard=%if('\\DEVSTANDARD'=0 and standard=40, 30, standard)%:W\\APP=1:V; #SETVAL3=typ_def=%typ_def%:W\\APP=1:V; #SETVAL4=par_mnid=%par_mnid%:W\\APP=1:V; #SETVAL5=ord_mnid=%mnid%:W\\APP=1:V; #PERCENT_OFF; #PRAVO_DEF=30;;#SETMENUID_END; 23USER_END 24ID_MENU=MNID/ADMIN/200705281524518733028224 24BUTTON_TITLE=Přidej na konec 24TYP=DETAIL 24DET_TABULKA=menu_system 24DET_WHERE=APP 24USER_BEGIN ;#BUTTON_WRITE_RIGHT=menu_system;;#SETMENUID=O/ADMIN/0/menu_system//200705281524518733028224/20/40/0; #BUTTON_GROUP=Přidej položku; #NOEDIT_EVAL_LEFT=\\DEVFIRM <> 1; #SETVAL1=id_modulu=%id_modulu%:W\\APP=1:V; #SETVAL2=standard=%if('\\DEVSTANDARD'=0 and standard=40, 30, standard)%:W\\APP=1:V; #SETVAL3=typ_def=%typ_def%:W\\APP=1:V; #SETVAL4=par_mnid=%par_mnid%:W\\APP=1:V; #PERCENT_OFF; #PRAVO_DEF=30;;#SETMENUID_END; 24USER_END 25ID_MENU=MNID/ADMIN/200705041442126709779267 25BUTTON_TITLE=Export položky 25TYP=EXPORT 25USER_BEGIN ;#SETMENUID=O/ADMIN/0/menu_system//200705041442126709779267/20/40/0; #BUTTON_GROUP=Export; #MULTI_BUTTON; #PERCENT_OFF; #TABLES=menu_system\\WHERE id_modulu=%id_modulu% and standard=%standard% and mnid=%mnid%:D; #FILENAME=%mnid:NA%_%(case(typ_def when 10 then 'M' when 15 then 'T' when 16 then 'A' when 20 then 'L' when 25 then 'FL' when 30 then 'D' when 35 then 'DL' when 40 then 'N' when 45 then 'O' when 50 then 'P' when 52 then 'E' when 55 then 'R' when 85 then 'RN' when 90 then 'RF' else 'X')):NA%_%ReplaceChars(typ_obj_akce,'not [0-9][a-z][A-Z]_', '_'):NA%_%ReplaceChars(id_akce_tabulka,'not [0-9][a-z][A-Z]_', '_'):NA%__%case(standard when 10 then 'u' when 20 then 'g' when 30 then 'f' when 31 then 'a' when 33 then 'p' when 36 then 'c' when 40 then 's' else 'x'):NA%_mn.xml; #COMMENTFILE=Menu; #FILE_ID=menu_exp; #FILETYPE=xml; #EXP_FORMAT=xml; #SAVEDLG; #SEPAR=,; #MAXLEN=4096; #.B.BE; #.U.SERLOG; #.T.IMELOG; #XCMD=T-I-R-; #DPLUS; #XWHERE=sd_columns.standard in (40,38); #APPENDFILE_BEGIN;/*UPD_BEGIN*/exec dba.admin_akt_menu %id_modulu%,%mnid%/*UPD_END*/; COMMIT; #APPENDFILE_END;;#SETMENUID_END; 25USER_END 26ID_MENU=MNID/ADMIN/200705041442121260133722 26BUTTON_TITLE=Export akce 26TYP=EXPORT 26USER_BEGIN ;#SETMENUID=O/ADMIN/0/menu_system//200705041442121260133722/20/40/0; #BUTTON_GROUP=Export; #MULTI_BUTTON; #PERCENT_OFF; #TABLES=menu_system\\WHERE exists(select 1 from dba.menu_hierarchy mh1 where mh1.par_mnid=%mnid% and menu_system.mnid=mh1.mnid) ORDER BY menu_system.mnid:D; #FILENAME=menu_%id_modulu:NA%_%mnid:NA%+.xml; #FILE_ID=menu_exp; #FILETYPE=xml; #EXP_FORMAT=xml; #SAVEDLG; #SEPAR=,; #MAXLEN=4096; #.B.BE; #.U.SERLOG; #.T.IMELOG; #XCMD=T-I-; #DPLUS; #XWHERE=sd_columns.standard in (40,38); #APPENDFILE_BEGIN;exec dba.admin_akt_menu %id_modulu%,%mnid%; COMMIT; #APPENDFILE_END;;#SETMENUID_END; 26USER_END 27ID_MENU=MNID/ADMIN/201804190958392681187069 27BUTTON_TITLE=Repository revize 27TYP=SEZNAM 27SEZ_TITLE=Revize {(mnid + ' ' + popis)} 27USER_BEGIN ;#SETMENUID=O/ADMIN/0/menu_system//201804190958392681187069/20/40/0;    #NO_MENU_TEST; #USERSUB1=#MODUL=lower(id_modulu):NA; #USERSUB2=#XSTD=select (case when moduly.firemni = 1 then 30 else %standard% end) from dba.moduly moduly with(index(pk_moduly)) where moduly.id_modulu='#MODUL':NA; #USERSUB3=#VERSION=case(#XSTD when 30 then '_firm\\' + '\\LICREG' + '\\'+'termopan' when 31 then '_firm\\' + '\\LICREG' + '\\_all' else '\\KARAT_VERSION' + case(#XSTD when 36 then '\\_stat\\' + lower('\\VZOR_STAT') when 33 then '\\_part\\' + lower('\\VZOR_PART') else '')):NA; #USERSUB4=#PATCH=select coalesce(max(right(moduly_verze.verze, 3)), '000') from dba.moduly_verze moduly_verze where moduly_verze.standard=#XSTD and moduly_verze.id_modulu='#MODUL':NA; #USERSUB5=#FOLDER=#MODUL_sql\\menu:C:NA; #USERSUB6_BEGIN;#NAME=lower(mnid + '_' + case (typ_def when 10 /* Menu aplikace */ then 'M' when 15 /* Menu objektů tabulky */ then 'T' when 16 /* Menu objektů akce */ then 'A' when 20 /* Tlačítko seznam */ then 'L' when 25 /* Funkce seznamu */ then 'FL' when 30 /* Tlačítko detailu */ then 'D' when 35 /* Funkce detailu */ then 'DL' when 40 /* Nod stromu */ then 'N' when 45 /* Ostatní */ then 'O' when 50 /* Doplněk nadřízeného (před) */ then 'P' when 52 /* Doplněk nadřízeného (za) */ then 'E' when 55 /* Náhrada */ then 'R' when 85 /* Odkaz bez podakcí */ then 'RN' when 90 /* Odkaz včetně podakcí */ then 'RF' else '') + '_' + regexreplace(typ_obj_akce, '[^\\w]', '_') + '_' + regexreplace(id_akce_tabulka, '[^\\w]', '_') + '__' + case (standard when 10 then 'u' when 20 then 'g' when 30 then 'f' when 31 then 'a' when 33 then 'p' when 36 then 'c' when 40 then 's' else 'x') + '_mn.xml') :NA#USERSUB6_END; #ADDTYP=SEZNAM,repository_revisions; #SUPERVISION_PARAMS_BEGIN; #SOURCE=#VERSION\\#MODUL\\#PATCH\\#FOLDER\\#NAME; #SUPERVISION_PARAMS_END;;#SETMENUID_END; 27USER_END 28ID_MENU=MNID/ADMIN/201804191001246884004964 28BUTTON_TITLE=Repository viník 28TYP=SEZNAM 28SEZ_TITLE=Viník {(mnid + ' ' + popis)} 28USER_BEGIN ;#SETMENUID=O/ADMIN/0/menu_system//201804191001246884004964/20/40/0;    #NO_MENU_TEST; #USERSUB1=#MODUL=lower(id_modulu):NA; #USERSUB2=#XSTD=select (case when moduly.firemni = 1 then 30 else %standard% end) from dba.moduly moduly with(index(pk_moduly)) where moduly.id_modulu='#MODUL':NA; #USERSUB3=#VERSION=case(#XSTD when 30 then '_firm\\' + '\\LICREG' + '\\'+'termopan' when 31 then '_firm\\' + '\\LICREG' + '\\_all' else '\\KARAT_VERSION' + case(#XSTD when 36 then '\\_stat\\' + lower('\\VZOR_STAT') when 33 then '\\_part\\' + lower('\\VZOR_PART') else '')):NA; #USERSUB4=#PATCH=select coalesce(max(right(moduly_verze.verze, 3)), '000') from dba.moduly_verze moduly_verze where moduly_verze.standard=#XSTD and moduly_verze.id_modulu='#MODUL':NA; #USERSUB5=#FOLDER=#MODUL_sql\\menu:C:NA; #USERSUB6_BEGIN;#NAME=lower(mnid + '_' + case (typ_def when 10 /* Menu aplikace */ then 'M' when 15 /* Menu objektů tabulky */ then 'T' when 16 /* Menu objektů akce */ then 'A' when 20 /* Tlačítko seznam */ then 'L' when 25 /* Funkce seznamu */ then 'FL' when 30 /* Tlačítko detailu */ then 'D' when 35 /* Funkce detailu */ then 'DL' when 40 /* Nod stromu */ then 'N' when 45 /* Ostatní */ then 'O' when 50 /* Doplněk nadřízeného (před) */ then 'P' when 52 /* Doplněk nadřízeného (za) */ then 'E' when 55 /* Náhrada */ then 'R' when 85 /* Odkaz bez podakcí */ then 'RN' when 90 /* Odkaz včetně podakcí */ then 'RF' else '') + '_' + regexreplace(typ_obj_akce, '[^\\w]', '_') + '_' + regexreplace(id_akce_tabulka, '[^\\w]', '_') + '__' + case (standard when 10 then 'u' when 20 then 'g' when 30 then 'f' when 31 then 'a' when 33 then 'p' when 36 then 'c' when 40 then 's' else 'x') + '_mn.xml') :NA#USERSUB6_END; #ADDTYP=SEZNAM,repository_blame; #SUPERVISION_PARAMS_BEGIN; #SOURCE=#VERSION\\#MODUL\\#PATCH\\#FOLDER\\#NAME; #SUPERVISION_PARAMS_END;;#SETMENUID_END; 28USER_END 29ID_MENU=MNID/ADMIN/201805221357521737295274 29BUTTON_TITLE=Spusť 29TYP=KARAT_URL 29USER_BEGIN ;#SETMENUID=O/ADMIN/0/menu_system//201805221357521737295274/20/40/0;    #NOEDIT_EVAL_LEFT=typ_def<>10 or isnull(parametr) or trim(parametr)='' or trim(popis)='' or trim(popis)='-'; #USERSUB1=#XMYURL='mnid/'+lower(trim(id_modulu))+'/'+trim(mnid)+'?menu=1&nss=0':NA; #URL=#XMYURL; #BUTTON_NO_FOCUS;;#SETMENUID_END; 29USER_END w_ift\tparametr/35 30ID_MENU=MNID/ADMIN/201902071842248496052835 30BUTTON_TITLE=RTF náhled na seznamu 30CLASS=as_rtf_wizard 30USER_BEGIN ;#TYPP=35;;#SETMENUID=O/ADMIN/0/menu_system//201902071842248496052835/35/40/0;#BUTTON_GROUP=RTF; #XDIRECTIVE=SEZ_RTF;;#SETMENUID_END; 30USER_END 31ID_MENU=MNID/ADMIN/201902071843314890534272 31BUTTON_TITLE=RTF náhled na detailu dole 31CLASS=as_rtf_wizard 31USER_BEGIN ;#TYPP=35;;#SETMENUID=O/ADMIN/0/menu_system//201902071843314890534272/35/40/0;#BUTTON_GROUP=RTF; #XDIRECTIVE=DET_RTF_DN;;#SETMENUID_END; 31USER_END 32ID_MENU=MNID/ADMIN/201902071844077825141859 32BUTTON_TITLE=RTF náhled na detailu nahoře 32CLASS=as_rtf_wizard 32USER_BEGIN ;#TYPP=35;;#SETMENUID=O/ADMIN/0/menu_system//201902071844077825141859/35/40/0;#BUTTON_GROUP=RTF; #XDIRECTIVE=DET_RTF_UP;;#SETMENUID_END; 32USER_END w_ift\tconn\tms_19216810247_karat_termopan 73 w_ift\tf11\tStandard AllDevices w_ift\tRefreshObjects\tDETAIL PARENT_LIST PARENT_LIST_TREE2 PARENT_FAST PARENT_PARENT_LIST PARENT_PARENT_LIST_TREE2 PARENT_PARENT_FAST PARENT_PARENT_PARENT_PARENT_LIST PARENT_PARENT_PARENT_PARENT_FAST w_ift\tPercentOffDWs\tDETAIL\tdba.menu_system\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.12860.12886.19062.20607.20617.20618.20619 PARENT_LIST\tdba.menu_system\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.12860.12886.19062.19085 PARENT_FAST\tdba.menu_system\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.12860.12886.19062.preview.fast.dw_fast_preview PARENT_PARENT_LIST\tdba.menu_system\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.12860.12886.12909 PARENT_PARENT_FAST\tdba.menu_system\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.12860.12886.preview.fast.dw_fast_preview PARENT_PARENT_PARENT_PARENT_LIST\tdba.user_rozpad_dilcu\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.12120 PARENT_PARENT_PARENT_PARENT_FAST\tdba.user_rozpad_dilcu\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12094.12097.preview.fast.dw_fast_preview w_iftdetail\tlink\tkarat://termopan:@0/detail/menu_system?where=%28%20mnid%20%3d%20%27202311162114515813595763%27%20%29&menu=0 w_iftdetail\tdw.table\tmenu_system w_iftdetail\tdw.oks\tOK mnid    ColBeforeSave OK id_modulu    ColRefresh OK standard    ColBeforeSave Unknown typ_def    ColBeforeSave OK par_mnid    ColRefresh OK ord_typ    ColBeforeSave OK ord_mnid    ColRefresh OK ref_mnid    ColRefresh OK typ_obj_akce    ColBeforeSave OK id_akce_tabulka    ColRefresh OK id_podakce    ColBeforeSave OK poradi    ColBeforeSave OK popis    Col OK microhelp OK hide_in_lite    ColBeforeSave OK pravo_def    ColBeforeSave OK pravo_tab    ColRefresh OK parametr    ColBeforeSave OK lang    ColRefresh OK menu_visible    Col OK root_typ_def OK menu_box OK platnost OK autor    ColBeforeSave OK ts OK popisxcz OK microhelpxcz OK parametrxcz OK xattach OK xattach_bmp w_iftdetail\tdw.form\tStandard w_iftdetail\tdw.dirs\tStandard w_iftdetail\tdws ------------------------------- Workspace: Editor triggerů (ADMIN/200705041441282166451696) Window: Seznam Systém - triggery (ADMIN disabled visible c__w_iftseznam tab=sd_triggers) w_ift\tclassname\tw_iftseznam w_ift\tclasses\t.object.karatbaseobject.karatobject.karatcontrol.karatwindow.c__w_ift.c__w_filter_parent.c__w_iftseznam w_ift\tlink\tkarat://termopan:@0/mnid/admin/200705041441282166451696?menu=0&nss=0 w_ift\tparametr ID_MENU=MNID/ADMIN/200705041441282166451696 TYP=SEZNAM CLASS=w_iftseznam AKCE=sd_triggers ID_SAVE=sd_triggers SEZ_TABULKA=sd_triggers SEZ_SQL=#NOTAB=sd_triggers;SELECT *- FROM dba.sd_triggers SEZ_CLASS=w_iftseznam USER_BEGIN ;#SETMENUID=A/ADMIN/sd_triggers/200705041441282166451696/10/40/0;#NOEDIT_EVAL=\\DEVFIRM<>1;#NOADD_EVAL=\\DEVFIRM<>1; #MNUMAKCE=200705041441282166451696;;#SETMENUID_END;; #WORKSPACE_TITLE_BEGIN;Editor triggerů#WORKSPACE_TITLE_END;; #WORKSPACE_MODULE=ADMIN;; #WORKSPACE_MNID=200705041441282166451696;;;#SETMENUID=O/ADMIN/10/sd_triggers//200705041442128348864866/15/40/0; #TL_FUNKCE_SEZNAM; #DO_SEZ_SQL; #SEZ_SQL_ADD1=len(convert(#VARCHARMAX,sd_triggers.telo)) AS delka /*\\:Ssd_relations.alias:HVelikost*/; #SEZ_SQL_ADD2='dba.' + rtrim(sd_triggers.tabulka) + '_' + (case sd_triggers.typ when 'A' then 'i' when 'B' then 'u' when 'C' then 'd' when 'I' then 'i' when 'U' then 'u' when 'D' then 'd' when 'M' then 'i' when 'N' then 'u' when 'O' then 'd' when 'P' then 'i' when 'Q' then 'u' when 'R' then 'd' when 'X' then 'i' when 'Y' then 'u' when 'Z' then 'd' when '1' then 'i' when '2' then 'u' when '3' then 'd' else '?' end) AS obj_name /*\\:Ssd_procedures.proc_name:HJméno objektu v databázi*/; #SEZ_SQL_ADD3=(select replace(lower(o.type_desc), '_', ' ') from sys.objects o where o.object_id = object_id(obj_name)) AS obj_type /*\\:Ssd_procedures.proc_name:HTyp objektu*/; #SEZ_SQL_ADD4=(select o.create_date from sys.objects o where o.object_id = object_id(obj_name)) AS dbcrea /*\\:Ssd_procedures.ts:HVyvořeno v DB*/; #SEZ_SQL_ADD5=(select o.modify_date from sys.objects o where o.object_id = object_id(obj_name)) AS dbmodif /*\\:Ssd_procedures.ts:HZměněno v DB*/; #COMBO_BEGIN; #COMBO_ID=STANDARD; #POPISBEZ=Standard; #COLUMN=sd_triggers.standard; #ITEMS_COLUMN=sd_triggers.standard; #COMBO_END; #NOEDIT_EVAL=\\DEVFIRM<>1;#NOADD_EVAL=\\DEVFIRM<>1;;#SETMENUID_END;;#ALL_ADD_TYPES=SEZNAM_sd_triggers,; #STANDARDSORT;#HIDEBLANKREC;#ENAB_ADD_IN_VIEW;#ENAB_DELETE_IN_VIEW;#ENAB_FAST_PREV_IN_VIEW;#SEZ_SQL_SLOUPCEADD;#SEZ_SQL_COMPUTEADD; USER_END w_ift\tparametr/0 01ID_MENU=MNID/ADMIN/200705041442129371797009 01BUTTON_TITLE=Tabulka 01TYP=SEZNAM 01SEZ_TABULKA=sd_tables 01SEZ_VAZBA=TRUE 01SEZ_VAZBA_COLUMN1=tabulka 01USER=;#SETMENUID=O/ADMIN/0/sd_triggers//200705041442129371797009/20/40/0;;#SETMENUID_END; 02ID_MENU=MNID/ADMIN/201601121112138851689143 02BUTTON_TITLE=&Generace triggerů 02CLASS=w_update_db 02ID_SAVE=KARATUPD 02USER_BEGIN ;#SETMENUID=O/ADMIN/0/sd_triggers//201601121112138851689143/20/40/0; #PERCENT_OFF; #NOMULTIWARN; #.MULTI_BUTTON; #.BUTTON_COLOR=rgb(255,0,0); #USERSUB1_BEGIN;#DOTRLNG=if(GetGlobalPar('ADMIN_LNG_AUTO_TRAN')<>'0' and Lic_Modules('LNG')<>'', '#'+'TRAN;#'+'TRANMENU;', ''):NA#USERSUB1_END; #VYBER_BEGIN; #TRIGGEN; #DOTRLNG #CHECKS; #CHECKTRG; #CHECKTRGFIRE; #CHECKWARNERR; #VYBER_END; #MODULY_BEGIN;#FOREACH_TABMOD=if(isselected(),modul,''):we;@VALUE_TABMOD,#NEXT_TABMOD;#MODULY_END; #TABULKY_BEGIN;#FOREACH_TABS=if(isselected(),trim(tabulka),''):we;@VALUE_TABS,#NEXT_TABS;#TABULKY_END; #.R.UNWITHASKS;;#SETMENUID_END; 02USER_END 03ID_MENU=MNID/ADMIN/201611081734131415067005 03BUTTON_TITLE=Pracovní kopie 03TYP=SEZNAM 03SEZ_TABULKA=sd_triggers_work 03SEZ_TITLE=Systém - triggery - pracovní - {tabulka}_{typ}_{poradi} 03SEZ_VAZBA=TRUE 03SEZ_VAZBA_COLUMN1=tabulka 03SEZ_VAZBA_COLUMN2=standard 03SEZ_VAZBA_COLUMN3=typ 03SEZ_VAZBA_COLUMN4=poradi 03USER_BEGIN ;#SETMENUID=O/ADMIN/0/sd_triggers//201611081734131415067005/20/40/0; #PERCENT_OFF; #SETVAL1_BEGIN;telo,puvodni_telo=Substitute(%(Substitute(telo,char(37)+'|{{perc}}|:|{{dblq}}|#|{{hsh}}|$|{{dlr}}|;|{{scl}}|'))%,'{{perc}}|'+char(37)+'|{{dblq}}|:|{{hsh}}|#|{{dlr}}|$|{{scl}}|;|'):W\\APP=1#SETVAL1_END; #RETRIEVEREFRESHSOURCE;;#SETMENUID_END; 03USER_END 04ID_MENU=MNID/ADMIN/201804190945109725716428 04BUTTON_TITLE=Repository revize 04TYP=SEZNAM 04SEZ_TITLE=Revize {(tabulka+'_'+lower(typ)+'_'+string(poradi))} 04USER_BEGIN ;#SETMENUID=O/ADMIN/0/sd_triggers//201804190945109725716428/20/40/0;    #NO_MENU_TEST; #USERSUB1=#MODUL=lower(modul):NA; #USERSUB2=#XSTD=select (case when moduly.firemni = 1 then 30 else %standard% end) from dba.moduly moduly with(index(pk_moduly)) where moduly.id_modulu='#MODUL':NA; #USERSUB3=#VERSION=case(#XSTD when 30 then '_firm\\' + '\\LICREG' + '\\'+'termopan' when 31 then '_firm\\' + '\\LICREG' + '\\_all' else '\\KARAT_VERSION' + case(#XSTD when 36 then '\\_stat\\' + lower('\\VZOR_STAT') when 33 then '\\_part\\' + lower('\\VZOR_PART') else '')):NA; #USERSUB4=#PATCH=select coalesce(max(right(moduly_verze.verze, 3)), '000') from dba.moduly_verze moduly_verze where moduly_verze.standard=#XSTD and moduly_verze.id_modulu='#MODUL':NA; #USERSUB5=#FOLDER=#MODUL_sql\\triggers:C:NA; #USERSUB6=#NAME=(if(#XSTD<standard,case(standard when 33 then '__p__' when 36 then '__c__' when 40 then '__s__' else ''),'') + tabulka+'_'+lower(typ)+'_'+string(poradi))+'.sql':NA; #ADDTYP=SEZNAM,repository_revisions; #DWDATACLASS=c__uo_iftdata_supervisor; #SUPERVISION_PARAMS_BEGIN; #SOURCE=#VERSION\\#MODUL\\#PATCH\\#FOLDER\\#NAME; #SUPERVISION_PARAMS_END;;#SETMENUID_END; 04USER_END 05ID_MENU=MNID/ADMIN/201804190945424193786359 05BUTTON_TITLE=Repository viník 05TYP=SEZNAM 05SEZ_TITLE=Viník {(tabulka+'_'+lower(typ)+'_'+string(poradi))} 05USER_BEGIN ;#SETMENUID=O/ADMIN/0/sd_triggers//201804190945424193786359/20/40/0;    #NO_MENU_TEST; #USERSUB1=#MODUL=lower(modul):NA; #USERSUB2=#XSTD=select (case when moduly.firemni = 1 then 30 else %standard% end) from dba.moduly moduly with(index(pk_moduly)) where moduly.id_modulu='#MODUL':NA; #USERSUB3=#VERSION=case(#XSTD when 30 then '_firm\\' + '\\LICREG' + '\\'+'termopan' when 31 then '_firm\\' + '\\LICREG' + '\\_all' else '\\KARAT_VERSION' + case(#XSTD when 36 then '\\_stat\\' + lower('\\VZOR_STAT') when 33 then '\\_part\\' + lower('\\VZOR_PART') else '')):NA; #USERSUB4=#PATCH=select coalesce(max(right(moduly_verze.verze, 3)), '000') from dba.moduly_verze moduly_verze where moduly_verze.standard=#XSTD and moduly_verze.id_modulu='#MODUL':NA; #USERSUB5=#FOLDER=#MODUL_sql\\triggers:C:NA; #USERSUB6=#NAME=(if(#XSTD<standard,case(standard when 33 then '__p__' when 36 then '__c__' when 40 then '__s__' else ''),'') + tabulka+'_'+lower(typ)+'_'+string(poradi))+'.sql':NA; #ADDTYP=SEZNAM,repository_blame; #DWDATACLASS=c__uo_iftdata_supervisor; #SUPERVISION_PARAMS_BEGIN; #SOURCE=#VERSION\\#MODUL\\#PATCH\\#FOLDER\\#NAME; #SUPERVISION_PARAMS_END;;#SETMENUID_END; 05USER_END w_ift\tparametr/25 06ID_MENU=MNID/ADMIN/201701261507090910470427 06BUTTON_TITLE=Zdrojový kód v databázi 06TYP=DETAIL 06DET_TABULKA=sd_triggers 06USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ADMIN/0/sd_triggers//201701261507090910470427/25/40/0;    #MULTIWARN; #PRAVO_DEF=10; #SQLBRD_SUB1=#TABULKA=tabulka; #SQLBRD_SUB2=#STANDARD=30; #SQLBRD_SUB3=#TYP=ReplaceChars(ReplaceChars(ReplaceChars(Upper(typ), 'AMPX1', 'I'), 'BNQY2', 'U'), 'CORZ3', 'D'); #SQLBRD_SUB4=#PORADI=-1; #SQLBRD_AFTER1_BEGIN; insert into dba.sd_triggers(tabulka, standard, typ, poradi, modul, lang, soubor, telo, autor, ts, xcmd) select #TABULKA, #STANDARD, #TYP, #PORADI, coalesce((select t.modul from dba.sd_tables t with(index(pk_sd_tables)) where t.tabulka = #TABULKA), ''), '', 'Database ' + db_name(), object_definition(object_id('dba.' + #TABULKA + '_' + #TYP)), user, GetDate(), 'T-I-' #SQLBRD_AFTER1_END; #NOEDIT_EVAL=1=1;;#SETMENUID_END; 06USER_END w_ift\tconn\tms_19216810247_karat_termopan 73 w_ift\tf11\tStandard AllDevices w_ift\tRefreshObjects\tLIST FAST w_ift\tPercentOffDWs\tLIST\tdba.sd_triggers\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12372.12375.12398 FAST\tdba.sd_triggers\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12372.12375.preview.fast.dw_fast_preview w_ift\tpreview1\tRychlý náhled ---Id: FAST ---UserParam: #TYPE=Fast;#ID=FAST;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=1;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1; ---Directives: #TYPE=Fast;#ID=FAST;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROW=1;#HIDDEN_HEADER=1;#PREVIEW_FAST;#FAST_PREV_TAB=sd_triggers;#FAST_PREV_DW=;#ENAB_FAST_PREV_IN_VIEW=;#FAST_PREVIEW_SUBS=; w_ift\tCurrentPreviewUserParam\t#USR_PREVIEW;#PREVIEW_GRID_ROWS=1;#PREVIEW_GRID_COLS=1;#PREVIEW_VIEW_TAB=0;#PREVIEW_CAN_ADD=0;#GENERATED_PREVIEW; #USR_PREVIEW1_BEGIN;#TYPE=Fast;#ID=FAST;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=1;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1;#USR_PREVIEW1_END; w_iftseznam\tsez_tabulka\tsd_triggers w_iftseznam\tlink\tkarat://termopan:@0/mnid/admin/200705041441282166451696?where=%28%20sd%5ftriggers%2etabulka%20%3d%20%27user%5frozpad%5fdilcu%27%20and%20sd%5ftriggers%2estandard%20%3d%2030%20and%20sd%5ftriggers%2etyp%20%3d%20%27u%27%20and%20sd%5ftriggers%2eporadi%20%3d%203%20%29&menu=0 w_iftseznam\tsez_sql\t#NOTAB=sd_triggers;SELECT *- FROM dba.sd_triggers w_iftseznam\tdetail.color\t1090519039 w_iftseznam\tdwselect\tSELECT TOP 351  sd_triggers.modul,sd_triggers.tabulka,sd_triggers.standard,sd_triggers.typ,sd_triggers.poradi,sd_triggers.telo,sd_triggers.lang,sd_triggers.soubor,sd_triggers.id,sd_triggers.platnost,sd_triggers.autor,sd_triggers.ts,isnull(sd_triggers.xattach,0) xattach ,len(convert(varchar(max),sd_triggers.telo)) delka  ,'dba.' + rtrim(sd_triggers.tabulka) + '_'         + (case sd_triggers.typ         when 'A' then 'i'         when 'B' then 'u'         when 'C' then 'd'         when 'I' then 'i'         when 'U' then 'u'         when 'D' then 'd'         when 'M' then 'i'         when 'N' then 'u'         when 'O' then 'd'         when 'P' then 'i'         when 'Q' then 'u'         when 'R' then 'd'         when 'X' then 'i'         when 'Y' then 'u'         when 'Z' then 'd'         when '1' then 'i'         when '2' then 'u'         when '3' then 'd'         else '?'         end) obj_name  ,(select replace(lower(o.type_desc), '_', ' ') from sys.objects o where o.object_id = object_id(('dba.' + rtrim(sd_triggers.tabulka) + '_'         + (case sd_triggers.typ         when 'A' then 'i'         when 'B' then 'u'         when 'C' then 'd'         when 'I' then 'i'         when 'U' then 'u'         when 'D' then 'd'         when 'M' then 'i'         when 'N' then 'u'         when 'O' then 'd'         when 'P' then 'i'         when 'Q' then 'u'         when 'R' then 'd'         when 'X' then 'i'         when 'Y' then 'u'         when 'Z' then 'd'         when '1' then 'i'         when '2' then 'u'         when '3' then 'd'         else '?'         end)))) obj_type  ,(select o.create_date from sys.objects o where o.object_id = object_id(('dba.' + rtrim(sd_triggers.tabulka) + '_'         + (case sd_triggers.typ         when 'A' then 'i'         when 'B' then 'u'         when 'C' then 'd'         when 'I' then 'i'         when 'U' then 'u'         when 'D' then 'd'         when 'M' then 'i'         when 'N' then 'u'         when 'O' then 'd'         when 'P' then 'i'         when 'Q' then 'u'         when 'R' then 'd'         when 'X' then 'i'         when 'Y' then 'u'         when 'Z' then 'd'         when '1' then 'i'         when '2' then 'u'         when '3' then 'd'         else '?'         end)))) dbcrea  ,(select o.modify_date from sys.objects o where o.object_id = object_id(('dba.' + rtrim(sd_triggers.tabulka) + '_'         + (case sd_triggers.typ         when 'A' then 'i'         when 'B' then 'u'         when 'C' then 'd'         when 'I' then 'i'         when 'U' then 'u'         when 'D' then 'd'         when 'M' then 'i'         when 'N' then 'u'         when 'O' then 'd'         when 'P' then 'i'         when 'Q' then 'u'         when 'R' then 'd'         when 'X' then 'i'         when 'Y' then 'u'         when 'Z' then 'd'         when '1' then 'i'         when '2' then 'u'         when '3' then 'd'         else '?'         end)))) dbmodif  FROM dba.sd_triggers sd_triggers with(index(pk_sd_triggers)) WHERE 1=1  AND ( (sd_triggers.tabulka + '') <> '' /* blankrec */)    ORDER BY sd_triggers.tabulka,sd_triggers.standard,sd_triggers.typ,sd_triggers.poradi OPTION(fast 350) /* seznam sd_triggers A/ADMIN/sd_triggers/200705041441282166451696/10/40/0 */ w_iftseznam\tdwcolumns\tmodul,tabulka,standard,typ,poradi,telo,lang,soubor,id,platnost,autor,ts,xattach,delka,obj_name,obj_type,dbcrea,dbmodif,xremind w_iftseznam\tdwcolumns_visible\txattach_bmp,xremind_bmp,modul,tabulka,typ,poradi,telo,delka,autor,ts,standard,soubor,obj_name,obj_type,dbcrea,dbmodif 0\txattach_bmp\t70 1\txremind_bmp\t18 2\tmodul\t47 3\ttabulka\t152 4\ttyp\t27 5\tporadi\t41 6\ttelo\t278 7\tdelka\t73 8\tautor\t57 9\tts\t137 10\tstandard\t57 11\tsoubor\t454 12\tobj_name\t467 13\tobj_type\t467 14\tdbcrea\t146 15\tdbmodif\t146 w_iftseznam\tdwcolumns_invisible\tporadi_sum,lang,id,id_sum,platnost,xattach,delka_sum,xremind w_iftseznam\tid_save\tadmin/sd_triggers w_iftseznam\tfirstuser\t;#SETMENUID=A/ADMIN/sd_triggers/200705041441282166451696/10/40/0;#NOEDIT_EVAL=\\DEVFIRM<>1;#NOADD_EVAL=\\DEVFIRM<>1; #MNUMAKCE=200705041441282166451696;;#SETMENUID_END;; #WORKSPACE_TITLE_BEGIN;Editor triggerů#WORKSPACE_TITLE_END;; #WORKSPACE_MODULE=ADMIN;; #WORKSPACE_MNID=200705041441282166451696;;;#SETMENUID=O/ADMIN/10/sd_triggers//200705041442128348864866/15/40/0; #TL_FUNKCE_SEZNAM; #DO_SEZ_SQL; #SEZ_SQL_ADD1=len(convert(#VARCHARMAX,sd_triggers.telo)) AS delka /*\\:Ssd_relations.alias:HVelikost*/; #SEZ_SQL_ADD2='dba.' + rtrim(sd_triggers.tabulka) + '_' + (case sd_triggers.typ when 'A' then 'i' when 'B' then 'u' when 'C' then 'd' when 'I' then 'i' when 'U' then 'u' when 'D' then 'd' when 'M' then 'i' when 'N' then 'u' when 'O' then 'd' when 'P' then 'i' when 'Q' then 'u' when 'R' then 'd' when 'X' then 'i' when 'Y' then 'u' when 'Z' then 'd' when '1' then 'i' when '2' then 'u' when '3' then 'd' else '?' end) AS obj_name /*\\:Ssd_procedures.proc_name:HJméno objektu v databázi*/; #SEZ_SQL_ADD3=(select replace(lower(o.type_desc), '_', ' ') from sys.objects o where o.object_id = object_id(obj_name)) AS obj_type /*\\:Ssd_procedures.proc_name:HTyp objektu*/; #SEZ_SQL_ADD4=(select o.create_date from sys.objects o where o.object_id = object_id(obj_name)) AS dbcrea /*\\:Ssd_procedures.ts:HVyvořeno v DB*/; #SEZ_SQL_ADD5=(select o.modify_date from sys.objects o where o.object_id = object_id(obj_name)) AS dbmodif /*\\:Ssd_procedures.ts:HZměněno v DB*/; #COMBO_BEGIN; #COMBO_ID=STANDARD; #POPISBEZ=Standard; #COLUMN=sd_triggers.standard; #ITEMS_COLUMN=sd_triggers.standard; #COMBO_END; #NOEDIT_EVAL=\\DEVFIRM<>1;#NOADD_EVAL=\\DEVFIRM<>1;;#SETMENUID_END;;#ALL_ADD_TYPES=SEZNAM_sd_triggers,; #STANDARDSORT;#HIDEBLANKREC;#ENAB_ADD_IN_VIEW;#ENAB_DELETE_IN_VIEW;#ENAB_FAST_PREV_IN_VIEW;#SEZ_SQL_SLOUPCEADD;#SEZ_SQL_COMPUTEADD; w_iftseznam\tmaxrows\t350 w_iftseznam\tstorage\t686 215 w_iftseznam\tsorting w_iftseznam\tadd_sorting\ttabulka A,standard A,typ A,poradi A, ------------------------------- Window: DetailEditace Systém - triggery - user_rozpad_dilcu_U_3 (ADMIN enabled visible c__w_iftdetail tab=sd_triggers) w_ift\tclassname\tw_iftdetail w_ift\tclasses\t.object.karatbaseobject.karatobject.karatcontrol.karatwindow.c__w_ift.c__w_iftdetail w_ift\tparametr ID_MENU=MNID/ADMIN/200705041441282166451696 TYP=DETAIL CLASS=w_iftdetail AKCE=sd_triggers ID_SAVE=sd_triggers W_SOURCE=object(c__w_iftseznam AppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12372.12375) DET_CLASS=w_iftdetail DET_TITLE=Systém - triggery - <tabulka>_<typ>_<poradi> DET_TABULKA=sd_triggers DET_DW=d_gd_sd_triggers USER_BEGIN ;#SETMENUID=A/ADMIN/sd_triggers/200705041441282166451696/10/40/0;#NOEDIT_EVAL=\\DEVFIRM<>1;#NOADD_EVAL=\\DEVFIRM<>1; #MNUMAKCE=200705041441282166451696;;#SETMENUID_END;; #WORKSPACE_TITLE_BEGIN;Editor triggerů#WORKSPACE_TITLE_END;; #WORKSPACE_MODULE=ADMIN;; #WORKSPACE_MNID=200705041441282166451696;;;#SETMENUID=O/ADMIN/10/sd_triggers//200705041442128348864866/15/40/0; #TL_FUNKCE_SEZNAM; #DO_SEZ_SQL; #SEZ_SQL_ADD1=len(convert(#VARCHARMAX,sd_triggers.telo)) AS delka /*\\:Ssd_relations.alias:HVelikost*/; #SEZ_SQL_ADD2='dba.' + rtrim(sd_triggers.tabulka) + '_' + (case sd_triggers.typ when 'A' then 'i' when 'B' then 'u' when 'C' then 'd' when 'I' then 'i' when 'U' then 'u' when 'D' then 'd' when 'M' then 'i' when 'N' then 'u' when 'O' then 'd' when 'P' then 'i' when 'Q' then 'u' when 'R' then 'd' when 'X' then 'i' when 'Y' then 'u' when 'Z' then 'd' when '1' then 'i' when '2' then 'u' when '3' then 'd' else '?' end) AS obj_name /*\\:Ssd_procedures.proc_name:HJméno objektu v databázi*/; #SEZ_SQL_ADD3=(select replace(lower(o.type_desc), '_', ' ') from sys.objects o where o.object_id = object_id(obj_name)) AS obj_type /*\\:Ssd_procedures.proc_name:HTyp objektu*/; #SEZ_SQL_ADD4=(select o.create_date from sys.objects o where o.object_id = object_id(obj_name)) AS dbcrea /*\\:Ssd_procedures.ts:HVyvořeno v DB*/; #SEZ_SQL_ADD5=(select o.modify_date from sys.objects o where o.object_id = object_id(obj_name)) AS dbmodif /*\\:Ssd_procedures.ts:HZměněno v DB*/; #COMBO_BEGIN; #COMBO_ID=STANDARD; #POPISBEZ=Standard; #COLUMN=sd_triggers.standard; #ITEMS_COLUMN=sd_triggers.standard; #COMBO_END; #NOEDIT_EVAL=\\DEVFIRM<>1;#NOADD_EVAL=\\DEVFIRM<>1;;#SETMENUID_END;;#ALL_ADD_TYPES=SEZNAM_sd_triggers,; #STANDARDSORT;#HIDEBLANKREC;#ENAB_ADD_IN_VIEW;#ENAB_DELETE_IN_VIEW;#ENAB_FAST_PREV_IN_VIEW;#SEZ_SQL_SLOUPCEADD;#SEZ_SQL_COMPUTEADD; ;#IS_LIST_EDIT;;;#SETMENUID=O/ADMIN/10/sd_triggers//201610241043180845813796/15/40/0; #TL_FUNKCE_DETAIL;;#SETMENUID_END;;#ALL_ADD_TYPES=DETAIL_sd_triggers,; USER_END w_ift\tparametr/0 01ID_MENU=MNID/ADMIN/200705041442129371797009 01BUTTON_TITLE=Tabulka 01TYP=SEZNAM 01SEZ_TABULKA=sd_tables 01SEZ_VAZBA=TRUE 01SEZ_VAZBA_COLUMN1=tabulka 01USER=;#SETMENUID=O/ADMIN/0/sd_triggers//200705041442129371797009/20/40/0;;#SETMENUID_END; 02ID_MENU=MNID/ADMIN/201601121112138851689143 02BUTTON_TITLE=&Generace triggerů 02CLASS=w_update_db 02ID_SAVE=KARATUPD 02USER_BEGIN ;#SETMENUID=O/ADMIN/0/sd_triggers//201601121112138851689143/20/40/0; #PERCENT_OFF; #NOMULTIWARN; #.MULTI_BUTTON; #.BUTTON_COLOR=rgb(255,0,0); #USERSUB1_BEGIN;#DOTRLNG=if(GetGlobalPar('ADMIN_LNG_AUTO_TRAN')<>'0' and Lic_Modules('LNG')<>'', '#'+'TRAN;#'+'TRANMENU;', ''):NA#USERSUB1_END; #VYBER_BEGIN; #TRIGGEN; #DOTRLNG #CHECKS; #CHECKTRG; #CHECKTRGFIRE; #CHECKWARNERR; #VYBER_END; #MODULY_BEGIN;#FOREACH_TABMOD=if(isselected(),modul,''):we;@VALUE_TABMOD,#NEXT_TABMOD;#MODULY_END; #TABULKY_BEGIN;#FOREACH_TABS=if(isselected(),trim(tabulka),''):we;@VALUE_TABS,#NEXT_TABS;#TABULKY_END; #.R.UNWITHASKS;;#SETMENUID_END; 02USER_END 03ID_MENU=MNID/ADMIN/201611081734131415067005 03BUTTON_TITLE=Pracovní kopie 03TYP=SEZNAM 03SEZ_TABULKA=sd_triggers_work 03SEZ_TITLE=Systém - triggery - pracovní - {tabulka}_{typ}_{poradi} 03SEZ_VAZBA=TRUE 03SEZ_VAZBA_COLUMN1=tabulka 03SEZ_VAZBA_COLUMN2=standard 03SEZ_VAZBA_COLUMN3=typ 03SEZ_VAZBA_COLUMN4=poradi 03USER_BEGIN ;#SETMENUID=O/ADMIN/0/sd_triggers//201611081734131415067005/20/40/0; #PERCENT_OFF; #SETVAL1_BEGIN;telo,puvodni_telo=Substitute(%(Substitute(telo,char(37)+'|{{perc}}|:|{{dblq}}|#|{{hsh}}|$|{{dlr}}|;|{{scl}}|'))%,'{{perc}}|'+char(37)+'|{{dblq}}|:|{{hsh}}|#|{{dlr}}|$|{{scl}}|;|'):W\\APP=1#SETVAL1_END; #RETRIEVEREFRESHSOURCE;;#SETMENUID_END; 03USER_END 04ID_MENU=MNID/ADMIN/201804190945109725716428 04BUTTON_TITLE=Repository revize 04TYP=SEZNAM 04SEZ_TITLE=Revize {(tabulka+'_'+lower(typ)+'_'+string(poradi))} 04USER_BEGIN ;#SETMENUID=O/ADMIN/0/sd_triggers//201804190945109725716428/20/40/0;    #NO_MENU_TEST; #USERSUB1=#MODUL=lower(modul):NA; #USERSUB2=#XSTD=select (case when moduly.firemni = 1 then 30 else %standard% end) from dba.moduly moduly with(index(pk_moduly)) where moduly.id_modulu='#MODUL':NA; #USERSUB3=#VERSION=case(#XSTD when 30 then '_firm\\' + '\\LICREG' + '\\'+'termopan' when 31 then '_firm\\' + '\\LICREG' + '\\_all' else '\\KARAT_VERSION' + case(#XSTD when 36 then '\\_stat\\' + lower('\\VZOR_STAT') when 33 then '\\_part\\' + lower('\\VZOR_PART') else '')):NA; #USERSUB4=#PATCH=select coalesce(max(right(moduly_verze.verze, 3)), '000') from dba.moduly_verze moduly_verze where moduly_verze.standard=#XSTD and moduly_verze.id_modulu='#MODUL':NA; #USERSUB5=#FOLDER=#MODUL_sql\\triggers:C:NA; #USERSUB6=#NAME=(if(#XSTD<standard,case(standard when 33 then '__p__' when 36 then '__c__' when 40 then '__s__' else ''),'') + tabulka+'_'+lower(typ)+'_'+string(poradi))+'.sql':NA; #ADDTYP=SEZNAM,repository_revisions; #DWDATACLASS=c__uo_iftdata_supervisor; #SUPERVISION_PARAMS_BEGIN; #SOURCE=#VERSION\\#MODUL\\#PATCH\\#FOLDER\\#NAME; #SUPERVISION_PARAMS_END;;#SETMENUID_END; 04USER_END 05ID_MENU=MNID/ADMIN/201804190945424193786359 05BUTTON_TITLE=Repository viník 05TYP=SEZNAM 05SEZ_TITLE=Viník {(tabulka+'_'+lower(typ)+'_'+string(poradi))} 05USER_BEGIN ;#SETMENUID=O/ADMIN/0/sd_triggers//201804190945424193786359/20/40/0;    #NO_MENU_TEST; #USERSUB1=#MODUL=lower(modul):NA; #USERSUB2=#XSTD=select (case when moduly.firemni = 1 then 30 else %standard% end) from dba.moduly moduly with(index(pk_moduly)) where moduly.id_modulu='#MODUL':NA; #USERSUB3=#VERSION=case(#XSTD when 30 then '_firm\\' + '\\LICREG' + '\\'+'termopan' when 31 then '_firm\\' + '\\LICREG' + '\\_all' else '\\KARAT_VERSION' + case(#XSTD when 36 then '\\_stat\\' + lower('\\VZOR_STAT') when 33 then '\\_part\\' + lower('\\VZOR_PART') else '')):NA; #USERSUB4=#PATCH=select coalesce(max(right(moduly_verze.verze, 3)), '000') from dba.moduly_verze moduly_verze where moduly_verze.standard=#XSTD and moduly_verze.id_modulu='#MODUL':NA; #USERSUB5=#FOLDER=#MODUL_sql\\triggers:C:NA; #USERSUB6=#NAME=(if(#XSTD<standard,case(standard when 33 then '__p__' when 36 then '__c__' when 40 then '__s__' else ''),'') + tabulka+'_'+lower(typ)+'_'+string(poradi))+'.sql':NA; #ADDTYP=SEZNAM,repository_blame; #DWDATACLASS=c__uo_iftdata_supervisor; #SUPERVISION_PARAMS_BEGIN; #SOURCE=#VERSION\\#MODUL\\#PATCH\\#FOLDER\\#NAME; #SUPERVISION_PARAMS_END;;#SETMENUID_END; 05USER_END w_ift\tparametr/25 06ID_MENU=MNID/ADMIN/201701261507090910470427 06BUTTON_TITLE=Zdrojový kód v databázi 06TYP=DETAIL 06DET_TABULKA=sd_triggers 06USER_BEGIN ;#TYPP=25;;#SETMENUID=O/ADMIN/0/sd_triggers//201701261507090910470427/25/40/0;    #MULTIWARN; #PRAVO_DEF=10; #SQLBRD_SUB1=#TABULKA=tabulka; #SQLBRD_SUB2=#STANDARD=30; #SQLBRD_SUB3=#TYP=ReplaceChars(ReplaceChars(ReplaceChars(Upper(typ), 'AMPX1', 'I'), 'BNQY2', 'U'), 'CORZ3', 'D'); #SQLBRD_SUB4=#PORADI=-1; #SQLBRD_AFTER1_BEGIN; insert into dba.sd_triggers(tabulka, standard, typ, poradi, modul, lang, soubor, telo, autor, ts, xcmd) select #TABULKA, #STANDARD, #TYP, #PORADI, coalesce((select t.modul from dba.sd_tables t with(index(pk_sd_tables)) where t.tabulka = #TABULKA), ''), '', 'Database ' + db_name(), object_definition(object_id('dba.' + #TABULKA + '_' + #TYP)), user, GetDate(), 'T-I-' #SQLBRD_AFTER1_END; #NOEDIT_EVAL=1=1;;#SETMENUID_END; 06USER_END w_ift\tparametr/30 07ID_MENU=MNID/ADMIN/201604251759184473550259 07BUTTON_TITLE=&Generace triggerů 07CLASS=w_update_db 07ID_SAVE=KARATUPD 07USER_BEGIN ;#TYPP=30;;#SETMENUID=O/ADMIN/0/sd_triggers//201604251759184473550259/30/40/0; #SAVE_DETAIL; #SAVE_DETAIL_NO_QUESTION; #.NOEDIT_EVAL_LEFT=\\APP=1; #PERCENT_OFF; #.BUTTON_COLOR=rgb(255,0,0); #USERSUB1_BEGIN;#DOTRLNG=if(GetGlobalPar('ADMIN_LNG_AUTO_TRAN')<>'0' and Lic_Modules('LNG')<>'', '#'+'TRAN;#'+'TRANMENU;', ''):NA#USERSUB1_END; #VYBER_BEGIN; #TRIGGEN; #DOTRLNG #CHECKS; #CHECKTRG; #CHECKTRGFIRE; #CHECKWARNERR; #VYBER_END; #MODULY=%modul:NA%; #TABULKY=%tabulka:NA%; #RUNWITHASKS;;#SETMENUID_END; 07USER_END w_ift\tconn\tms_19216810247_karat_termopan 73 w_ift\tf11\tStandard AllDevices w_ift\tRefreshObjects\tDETAIL PARENT_LIST PARENT_FAST w_ift\tPercentOffDWs\tDETAIL\tdba.sd_triggers\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12372.12375.20976.20986.20987.20988 PARENT_LIST\tdba.sd_triggers\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12372.12375.12398 PARENT_FAST\tdba.sd_triggers\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.12372.12375.preview.fast.dw_fast_preview w_iftdetail\tlink\tkarat://termopan:@0/detail/sd_triggers?where=%28%20tabulka%20%3d%20%27user%5frozpad%5fdilcu%27%20and%20standard%20%3d%2030%20and%20typ%20%3d%20%27u%27%20and%20poradi%20%3d%203%20%29&menu=0 w_iftdetail\tdw.table\tsd_triggers w_iftdetail\tdw.oks\tOK modul    ColRefresh OK tabulka    ColRefresh OK standard OK typ    ColBeforeSave OK poradi    ColBeforeSave OK telo    ColBeforeSave OK lang    ColRefresh OK soubor    ColBeforeSave OK id OK platnost OK autor OK ts OK xattach OK xattach_bmp w_iftdetail\tdw.form\tStandard w_iftdetail\tdw.dirs\tStandard w_iftdetail\tdws ------------------------------- Workspace: Objednávky přijaté (O_OBJ/200705051639068503094766) Window: Seznam Objednávky přijaté (O_OBJ enabled visible c__w_iftseznam tab=op_zahlavi) w_ift\tclassname\tw_iftseznam w_ift\tclasses\t.object.karatbaseobject.karatobject.karatcontrol.karatwindow.c__w_ift.c__w_filter_parent.c__w_iftseznam w_ift\tlink\tkarat://termopan:@0/mnid/o_obj/200705051639068503094766?menu=0&nss=0 w_ift\tparametr ID_MENU=MNID/O_OBJ/200705051639068503094766 TYP=SEZNAM CLASS=w_iftseznam AKCE=op_zahlavi ID_SAVE=op_zahlavi SEZ_TABULKA=op_zahlavi SEZ_SQL=    #NOTAB=op_zahlavi;     select *+,             op_rady.op_denik_pop AS op_rady_8848_op_denik_pop /* \\:NV */,             op_rady.op_rada_pop AS op_rady_8848_op_rada_pop /* \\:NV */,             op_rady.op_denik_nab AS op_rady_8848_op_denik_nab /* \\:NV */,             op_rady.op_rada_nab AS op_rady_8848_op_rada_nab /* \\:NV */,             op_rady.op_denik_op AS op_rady_8848_op_denik_op /* \\:NV */,             op_rady.op_rada_op AS op_rady_8848_op_rada_op /* \\:NV */,             op_rady.op_denik_ov AS op_rady_8848_op_denik_ov /* \\:NV */,             op_rady.op_rada_ov AS op_rady_8848_op_rada_ov /* \\:NV */,             op_rady.op_denik_vl AS op_rady_8848_op_denik_vl /* \\:NV */,             op_rady.op_rada_vl AS op_rady_8848_op_rada_vl /* \\:NV */,             op_rady.op_denik_prev AS op_rady_8848_op_denik_prev /* \\:NV */,             op_rady.op_rada_prev AS op_rady_8848_op_rada_prev /* \\:NV */,             op_rady.denik_posty AS op_rady_8848_denik_posty /* \\:NV */,             op_rady.rada_posty AS op_rady_8848_rada_posty /* \\:NV */,             op_rady.vydej_neods AS op_rady_8848_vydej_neods /* \\:NV */,             op_rady.fv_denik_zal AS op_rady_8848_fv_denik_zal /* \\:NV */,             op_rady.fv_rada_zal AS op_rady_8848_fv_rada_zal /* \\:NV */,             op_rady.zal_fa_nast AS op_rady_8848_zal_fa_nast /* \\:NV */,             op_rady.zal_fa_pocet AS op_rady_8848_zal_fa_pocet /* \\:NV */,             op_rady.tpv_denik_kalk AS op_rady_8848_tpv_denik_kalk /* \\:NV */,             op_rady.tpv_rada_kalk AS op_rady_8848_tpv_rada_kalk /* \\:NV */,             op_rady.v_zak_denik AS op_rady_8848_v_zak_denik /* \\:NV */,             op_rady.v_zak_rada AS op_rady_8848_v_zak_rada /* \\:NV */,             op_rady.op_denik_parag AS op_rady_8848_op_denik_parag /* \\:NV */,             op_rady.op_rada_parag AS op_rady_8848_op_rada_parag /* \\:NV */,             op_rady.parag_zpusob AS op_rady_8848_parag_zpusob /* \\:NV */,             op_rady.imp_ordrsp_dkl_10 AS opr_imp_ordrsp_dkl_10 /* \\:NV */,             op_rady.imp_ordrsp_dkl_20 AS opr_imp_ordrsp_dkl_20 /* \\:NV */,             op_zahlavi.cena_bez_dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS cena_bez_dph_mu /* \\:Sop_zahlavi.cena_bez_dph:HCena bez DPH [MÚ] */,             op_zahlavi.dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS dph_mu /* \\:Sop_zahlavi.dph:HDPH [MÚ] */,             op_zahlavi.cena_celkem * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS cena_celkem_mu /* \\:Sop_zahlavi.cena_celkem:HCena celkem [MÚ] */,             op_zahlavi.castka_zal * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS castka_zal_mu /* \\:Sop_zahlavi.castka_zal:HČástka zálohy [MÚ] */,             #TO_DUAL_ROUND(op_zahlavi.cena_bez_dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS cena_bez_dph_dual /* \\:Sop_zahlavi.cena_bez_dph:HCena bez DPH [MD] */,             #TO_DUAL_ROUND(op_zahlavi.dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS dph_dual /* \\:Sop_zahlavi.dph:HDPH [MD] */,             #TO_DUAL_ROUND(op_zahlavi.cena_celkem * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS cena_celkem_dual /* \\:Sop_zahlavi.cena_celkem:HCena celkem [MD] */,             #TO_DUAL_ROUND(op_zahlavi.castka_zal * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS castka_zal_dual /* \\:Sop_zahlavi.castka_zal:HČástka zálohy [MD] */,             mistni.id_mistni AS id_mistni /* \\:Smenycis_mistni.id_mistni */,             mistni.id_dualni AS id_dualni /* \\:Smenycis_mistni.id_dualni */,             dba.op_zahlavi_vykr_skl_fce(op_zahlavi.doklad) AS vykr_skl /* \\:Sop_zahlavi.vykryto:HSkladem */,             coalesce((select count(1) from dba.op_zahlavi_ver ver with(index(pk_op_zahlavi_ver)) where ver.doklad = op_zahlavi.doklad), 0) + 1 AS pocet_ver /* \\:Sop_zahlavi_ver.ver_poradi:HVerze */,             case when exists(select 1 from dba.parcisudaje pu with(index(parcisudaje_typ)) where pu.typ = 'ORDRSP' and pu.id_partnera = op_zahlavi.id_partnera) then 1 else 0 end AS par_export /* \\:Sop_zahlavi.export:NV */         from dba.op_zahlavi op_zahlavi,             dba.op_rady op_rady with(index(pk_op_rady)),             dba.menycis_mistni mistni with(index(pk_menycis_mistni))         where op_rady.fiskalni_rok = op_zahlavi.fiskalni_rok             and op_rady.denik = op_zahlavi.denik             and op_rady.rada = op_zahlavi.rada             and mistni.fiskalni_rok = op_zahlavi.fiskalni_rok SEZ_CLASS=w_iftseznam_doklad SEZ_TITLE=Objednávky přijaté SEZ_MODIFY= datawindow.detail.color=\"255 \t if(vyrobeno=pol_k_vyr and pol_k_vyr > 0 and op_zahlavi.doklad_vl = '',16748574,if(storno = 1,8421504,if(vyrizeno = 1,32896,if(vykr_skl = 1,65280,if(vykryto = 1,32768,if(odsouhlaseno = 1,57343,if(potvrzeno = 1,8454143,if(potvrzeno = 0,16777215,1090519039))))))))\" SEZ_PODMINKA=op_zahlavi.druh = 30 USER_BEGIN ;#SETMENUID=A/O_OBJ/op_zahlavi/200705051639068503094766/10/40/0;    #XSUB=\\AKCE^OBJ; #MNUMAKCE=200705051639068503094766;;#SETMENUID_END;; #WORKSPACE_TITLE_BEGIN;Objednávky přijaté#WORKSPACE_TITLE_END;; #WORKSPACE_MODULE=O_OBJ;; #WORKSPACE_MNID=200705051639068503094766;;;#SETMENUID=O/O_OBJ/10/op_zahlavi//200705141135552301933414/15/40/0;    #ENAB_ADD_IN_VIEW; #HIDEBLANKREC; #STANDARDSORT; #TL_FUNKCE_SEZNAM; #COMBO_ID1=stav; #COLUMN1=-; #POLOZKY1=Nepřístupné\\1\\op_zahlavi.opr_prov = 0^Přístupné\\2\\op_zahlavi.opr_prov = 1^Vyřízeno\\3\\(op_zahlavi.vyrizeno = 1 or op_zahlavi.vyrizeno_kl = 1)^Odsouhlaseno\\4\\op_zahlavi.odsouhlaseno = 1^Nevyřízeno\\5\\(op_zahlavi.vyrizeno = 0 and op_zahlavi.vyrizeno_kl = 0)^Neodsouhlaseno\\6\\op_zahlavi.odsouhlaseno = 0; #POPISBEZ1=Stav; #COMBO_ID2=vykryto; #COLUMN2=; #POLOZKY2=Vůbec\\0\\op_zahlavi.vykryto = 0 and op_zahlavi.vyrizeno <> 1^Nevykryto\\4\\op_zahlavi.vykryto <> 1 and op_zahlavi.vyrizeno <> 1^Vykryto částečně\\2\\op_zahlavi.vykryto = 2 and op_zahlavi.vyrizeno <> 1^Vykryto\\1\\op_zahlavi.vykryto = 1 or op_zahlavi.vyrizeno = 1; #POPISBEZ2=Vykryto; #COMBO_ID3=dodano; #COLUMN3=-; #POLOZKY3=Vůbec\\0\\op_zahlavi.dodano = 0 and op_zahlavi.vyrizeno_kl <> 1^Částečně\\1\\op_zahlavi.dodano = 2 and op_zahlavi.vyrizeno_kl <> 1^Nedodané\\2\\op_zahlavi.dodano in (0, 2) and op_zahlavi.vyrizeno_kl <> 1^Zcela dodané\\3\\op_zahlavi.dodano = 1^Vyřízené ručně\\4\\op_zahlavi.vyrizeno_kl = 1; #POPISBEZ3=Dodáno; #COMBO_ID4=dodano_predb; #COLUMN4=coalesce(op_zahlavi.dodano_predb, 0); #POLOZKY4=Předběžně dodáno NE\\0^Předběžně dodáno ANO\\1^Předběžně dodáno ČÁSTEČNĚ\\2; #POPISBEZ4=Předběžně dodáno; #COMBO_ID5=storno; #COLUMN5=-; #POLOZKY5=Nestornované\\1\\op_zahlavi.storno <> 1^Stornované\\2\\op_zahlavi.storno = 1; #POPISBEZ5=Storno; #DEFAULT5=1; #COMBO_ID6=dopravce; #COLUMN6=-; #POLOZKY6=Bez dopravce\\1\\op_zahlavi.id_partnera_dop = ''^S dopravcem\\2\\op_zahlavi.id_partnera_dop <> ''; #POPISBEZ6=Dopravce; #COMBO_ID7=spz; #COLUMN7=-; #POLOZKY7=Bez SPZ\\1\\op_zahlavi.spz = ''^S SPZ\\2\\op_zahlavi.spz <> ''; #POPISBEZ7=SPZ; #COMBO_ID8=doklad_fv_zal; #COLUMN8=-; #POLOZKY8=Bez zálohové FV\\1\\op_zahlavi.doklad_fv_zal = ''^Se zálohovou FV\\2\\op_zahlavi.doklad_fv_zal <> ''; #POPISBEZ8=Zálohová FV; #COMBO_ID9=ramcovy; #COLUMN9=coalesce(op_zahlavi.ramcovy, 0); #POLOZKY9=Rámcový doklad\\1^Běžný doklad\\0; #POPISBEZ9=Rámcový doklad; #COMBO_ID10=expedovat; #COLUMN10=op_zahlavi.expedovat_z; #POLOZKY10=Expedovat\\1^Neexpedovat\\0; #POPISBEZ10=Expedovat; #COMBO_ID11=id_meny; #COLUMN11=op_zahlavi.id_meny; #POLOZKY11=select mena.id_meny, '', 'op_zahlavi.id_meny = ' + char(39) + mena.id_meny + char(39) from dba.menycis mena with(index(pk_menycis)) where mena.id_meny <> '' order by mena.id_meny; #POPISBEZ11=Měna; #COMBO_BEGIN; #COMBO_ID=export; #COLUMN=coalesce(op_zahlavi.export, 0); #POLOZKY=Ne\\0^Exportovat\\1^Exportováno\\2; #POPISBEZ=Exportovat potvrzení; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=neex_vpr; #COLUMN=-; #POLOZKY=Neexistuje výrobní pŕíkaz\\0\\op_rady.v_zak_denik <> '' and op_rady.v_zak_rada <> '' and op_zahlavi.storno = 0 and op_zahlavi.druh = 30 and ((op_zahlavi.potvrzeno = 1 and coalesce(op_rady.vydej_neods, 0) = 2) or (op_zahlavi.odsouhlaseno = 1 and coalesce(op_rady.vydej_neods, 0) = 0) or coalesce(op_rady.vydej_neods, 0) = 1) and exists(select 1 from dba.op_polozky opp with(index(pk_op_polozky)) where opp.doklad = op_zahlavi.doklad and opp.typ_polozky in (3, 7, 15) and opp.storno = 0 and opp.vyrizeno = 0 and opp.vykryto in (0, 2) and not exists(select 1 from dba.v_opv opv with(index(v_opv_objed)), dba.v_opvz opvz with(index(pk_v_opvz)) where opv.objednavka = opp.doklad and opv.polobj = opp.polozka and opvz.doklad = opv.doklad and opvz.storno = 0))^; #POPISBEZ=Existence výrobního příkazu; #COMBO_VISIBLE=islicmodul('V_ZAK'); #COMBO_END; #COMBO_BEGIN; #COMBO_ID=nedodano_dnes; #COLUMN=-; #POLOZKY=Vůbec, po termínu dodání\\0\\op_zahlavi.dodano = 0 and op_zahlavi.vyrizeno_kl <> 1 and op_zahlavi.dat_dodani < getdate()^Částečně, po termínu dodání\\1\\op_zahlavi.dodano = 2 and op_zahlavi.vyrizeno_kl <> 1 and op_zahlavi.dat_dodani < getdate()^Nedodané, po termínu dodání\\2\\op_zahlavi.dodano in (0, 2) and op_zahlavi.vyrizeno_kl <> 1 and op_zahlavi.dat_dodani < getdate(); #POPISBEZ=Nedodané po termínu dodání; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=nedodano_ods; #COLUMN=-; #POLOZKY=Vůbec, po původním termínu dodání\\0\\op_zahlavi.dodano = 0 and op_zahlavi.vyrizeno_kl <> 1 and coalesce(nullif(op_zahlavi.dat_dodani_ods, convert(#BY(datumy.datum), '1901-01-01')), op_zahlavi.dat_dodani) < getdate()^Částečně, po původním termínu dodání\\1\\op_zahlavi.dodano = 2 and op_zahlavi.vyrizeno_kl <> 1 and coalesce(nullif(op_zahlavi.dat_dodani_ods, convert(#BY(datumy.datum), '1901-01-01')), op_zahlavi.dat_dodani) < getdate()^Nedodané, po původním termínu dodání\\2\\op_zahlavi.dodano in (0, 2) and op_zahlavi.vyrizeno_kl <> 1 and coalesce(nullif(op_zahlavi.dat_dodani_ods, convert(#BY(datumy.datum), '1901-01-01')), op_zahlavi.dat_dodani) < getdate(); #POPISBEZ=Nedodané po původním termínu dodání; #COMBO_END; #NO_DOKLAD_LEGEND; #LEGEND=#DOKL_STORNO:Stornovaný doklad:Fstorno = 1; #LEGEND=#DOKL_UZAV:Vyřízený doklad:Fvyrizeno = 1; #LEGEND=#O_OBJ_VYKR_SKL:Doklad vykrytý skladem:Fvykr_skl = 1; #LEGEND=#DOKL_SCHVAL:Vykrytý doklad:Fvykryto = 1; #LEGEND=#O_OBJ_ODS:Odsouhlasený doklad:Fodsouhlaseno = 1; #LEGEND=#O_OBJ_POT:Potvrzený doklad:Fpotvrzeno = 1; #LEGEND=#O_OBJ_NEPOT:Nepotvrzený doklad:Fpotvrzeno = 0;;#SETMENUID_END;;;#SETMENUID=O/O_OBJ/10/op_zahlavi//202307031504083938379356/15/30/0;#DO_SEZ_SQL; #SEZ_SQL_ADD3000=(select count(op_polozky.user_vyrobeno) from dba.op_polozky op_polozky with(index(pk_op_polozky)) where op_polozky.doklad = op_zahlavi.doklad and op_polozky.user_vyrobeno=1 and left(op_polozky.karta,1)<>'S') AS vyrobeno /*\\:Sop_zahlavi.dodanych:HVyrobeno:NV*/; #SEZ_SQL_ADD3001=(select count(op_polozky.karta) from dba.op_polozky op_polozky with(index(pk_op_polozky)) where op_polozky.doklad = op_zahlavi.doklad and left(op_polozky.karta,1)<>'S') AS pol_k_vyr /*\\:Sop_zahlavi.dodanych:HPoložek k vyrobě:NV*/; #SEZ_SQL_ADD3002=(select parcis.nazev from dba.parcis parcis with(index(pk_parcis)) where parcis.id_partnera=op_zahlavi.id_investora) AS investor_nazev /*\\:Sparcis.nazev:HNázev partnera F*/; #SEZ_SQL_ADD3003=(select count(attach_store.poradi) from dba.attach_store attach_store with(index(pk_attach_store)) where attach_store.pk=op_zahlavi.doklad and attach_store.att_class='TPV') AS attpocetpdf/*\\:Sattach_access.id:HA-pdf:NV*/; #COMPUTEADD3000=opattpdf=bitmap(case(attpocetpdf when 0 then '' else 'path(PathAttachLevelStatus8),color(20),tooltip(PDF příloha OP)')):HA-OP pdf:F:NS; #LEGEND=rgb(30,144,255):Všechny položky vyrobeny:F1:vyrobeno=pol_k_vyr and pol_k_vyr > 0 and op_zahlavi.doklad_vl = '';;#SETMENUID_END;;#ALL_ADD_TYPES=SEZNAM_op_zahlavi,;;#SEZNAM_DOKLAD; #STANDARDSORT;#HIDEBLANKREC;#ENAB_ADD_IN_VIEW;#ENAB_DELETE_IN_VIEW;#ENAB_FAST_PREV_IN_VIEW;#SEZ_SQL_SLOUPCEADD;#SEZ_SQL_COMPUTEADD; USER_END w_ift\tparametr/25 01ID_MENU=MNID/O_OBJ/200705141135550577021154 01BUTTON_TITLE=Zdrojový doklad 01TYP=SEZNAM_DOKLAD 01USER_BEGIN ;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135550577021154/25/40/0;  #NOEDIT_EVAL_LEFT=doklad_gen = ''; #ID_MODULU=id_modulu_gen; #AGENDA=agenda_gen; #DOKLAD=doklad_gen; #NOFR; #NOSAVESORT; #DRUH_KONTACE=DK;;#SETMENUID_END; 01USER_END 02ID_MENU=MNID/O_OBJ/200705141135559069887642 02USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135559069887642/25/40/0;;#SETMENUID_END; 03ID_MENU=MNID/O_OBJ/200705141135559784608173 03BUTTON_TITLE=Stav rámcové objednávky 03TYP=SEZNAM 03AKCE=op_polozky_stav_ramc 03SEZ_TABULKA=op_polozky 03SEZ_VAZBA=TRUE 03SEZ_VAZBA_COLUMN1=doklad 03USER_BEGIN ;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135559784608173/25/40/0;    #NOEDIT_EVAL_LEFT=ramcovy = 0 or isnull(ramcovy); #NOADDTABMENU;;#SETMENUID_END; 03USER_END 04ID_MENU=MNID/O_OBJ/200705141135557425792829 04USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135557425792829/25/40/0;;#SETMENUID_END; 05ID_MENU=MNID/O_OBJ/200705141135552608077648 05BUTTON_TITLE=DPH dokladu 05TYP=SEZNAM 05SEZ_TABULKA=op_dph 05SEZ_VAZBA=TRUE 05SEZ_VAZBA_COLUMN1=doklad 05USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135552608077648/25/40/0;;#SETMENUID_END; 06ID_MENU=MNID/O_OBJ/200705141135556169550149 06BUTTON_TITLE=Přegeneruj DPH dokladu 06TYP=SQLCOMMAND 06USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135556169550149/25/40/0;    #PERCENT_OFF; #MULTI_BUTTON; #PROCESBAR; #PROCESTEXT=Přegenerování DPH dokladu...; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set xcmd = char(9) + 'SAVED', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 06USER_END 07ID_MENU=MNID/O_OBJ/200705141135557563410519 07USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135557563410519/25/40/0;;#SETMENUID_END; 08ID_MENU=MNID/O_OBJ/200705141135555001581489 08BUTTON_TITLE=Poplatky dokladu 08TYP=SEZNAM 08SEZ_TABULKA=op_popl 08SEZ_VAZBA=TRUE 08SEZ_VAZBA_COLUMN1=doklad 08NOEDIT=TRUE 08USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135555001581489/25/40/0;    #NOEDIT_EVAL_LEFT=elektroodpad <> 1;;#SETMENUID_END; 09ID_MENU=MNID/O_OBJ/200705141135554865375564 09BUTTON_TITLE=Přegeneruj Poplatky dokladu 09TYP=SQLCOMMAND 09USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135554865375564/25/40/0;    #NOEDIT_EVAL_LEFT=elektroodpad <> 1; #PERCENT_OFF; #MULTI_BUTTON; #PROCESBAR; #PROCESTEXT=Přegenerování Poplatků dokladu...; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set xcmd = '#ELOD;', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 09USER_END 10ID_MENU=MNID/O_OBJ/200811040743282641997736 10USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200811040743282641997736/25/40/0;;#SETMENUID_END; 11ID_MENU=MNID/O_OBJ/201506121445520219100280 11BUTTON_TITLE=Nastav Fixaci cen 11TYP=SQLCOMMAND 11USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=op_polozky;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201506121445520219100280/25/40/0;  #NOEDIT_EVAL_LEFT=opr_prov = 0 or storno = 1 or vyrizeno = 1; #PERCENT_OFF; #MULTI_BUTTON; #PROCESBAR; #PROCESTEXT=Nastavení Fixace cen...; #SQLCOMMAND1_BEGIN; update\tdba.op_polozky set\tcena_rucne = 1, autor = user, ts = getdate() from\tdba.op_polozky opp with(index(pk_op_polozky)) where\topp.doklad = %doklad% and\tcoalesce(opp.cena_rucne, 0) <> 1 #SQLCOMMAND1_END;;#SETMENUID_END; 11USER_END 12ID_MENU=MNID/O_OBJ/201506121449349322316690 12USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201506121449349322316690/25/40/0;;#SETMENUID_END; 13ID_MENU=MNID/O_OBJ/200811040743492516121147 13BUTTON_TITLE=Změna &měny operace dokladu 13TYP=MULTIDETAIL 13DET_TITLE=Změna měny operace dokladu 13USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200811040743492516121147/25/40/0;  #NOEDIT_EVAL_LEFT=doklad_fv <> ''; #NOMULTIWARN; #EDIT_COL_DISABLE=fiscis_0_obdobi,menycis_0_id_meny,op_polozky_0_cenik,kurzy2lis_0_kurz,kurzy2lis_0_mnozstvi,kurzy3lis_0_kurz,kurzy3lis_0_mnozstvi,menycis_0_koef_nav; #EDIT_GROUP1=Původní a nová měna; #EDIT_COL1=fiscis.obdobi; #EDIT_COL_DEFAULT1=fiscis_0_obdobi=fiskalni_rok; #EDIT_COL_DEFAULT_MULTI1=fiscis_0_obdobi=fiskalni_rok:U; #EDIT_COL2=menycis.id_meny; #EDIT_COL_DEFAULT2=menycis_0_id_meny=id_meny; #EDIT_COL_DEFAULT_MULTI2=menycis_0_id_meny=id_meny:U; #EDIT_COL2_TEXT=Původní měna; #EDIT_COL2_TAG_BEGIN; #F3TAB=menycis; #F3SAY=nazev; #EDIT_COL2_TAG_END; #EDIT_COL3=op_polozky.cenik; #EDIT_COL_DEFAULT3=op_polozky_0_cenik=cenik; #EDIT_COL_DEFAULT_MULTI3=op_polozky_0_cenik=cenik:U; #EDIT_COL3_TEXT=Původní ceník; #EDIT_COL3_TAG_BEGIN; #F3TAB=cn_cenik; #F3WHERE1=cn_cenik.poradi = (select max(cn.poradi) from dba.cn_cenik cn with(index(cn_cenik_cn_cenik_poradi)) where cn.cenik = cn_cenik.cenik and convert(#BY(datumy.datum), %menycis_0_platnost_do%) between cn.platnost_od and cn.platnost_do and cn.platnost = 1) and cn_cenik.typ_rady < 100; #F3SAY=nazev + ' (' + id_meny + ')'; #EDIT_COL3_TAG_END; #EDIT_COL4=menycis.id_meny_nav; #EDIT_COL_DEFAULT4=menycis_0_id_meny_nav=''; #EDIT_COL_DEFAULT_MULTI4=menycis_0_id_meny_nav='':U; #EDIT_COL4_TEXT=Nová měna; #EDIT_COL4_TAG_BEGIN; #F3TAB=menycis; #F3SAY=nazev; #; #SELECT1=menycis_0_koef_nav=select coalesce((select mena.koef_nav from dba.menycis mena with(index(pk_menycis)) where mena.id_meny = %menycis_0_id_meny% and mena.id_meny_nav = %menycis_0_id_meny_nav%), 0); #SELECT2=kurzycis_0_kod='':Wmenycis_0_koef_nav <> 0; #; #SELECT3=kurzy2lis_0_kurz=execute dba.prepocet_men_kurz '#RS,#KURZ', %fiscis_0_obdobi%, %menycis_0_id_meny%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny <> ''; #SELECT4=kurzy2lis_0_mnozstvi=execute dba.prepocet_men_kurz '#RS,#MNOZ', %fiscis_0_obdobi%, %menycis_0_id_meny%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny <> ''; #SELECT5=kurzy3lis_0_kurz=execute dba.prepocet_men_kurz '#RS,#KURZ', %fiscis_0_obdobi%, %menycis_0_id_meny_nav%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny_nav <> ''; #SELECT6=kurzy3lis_0_mnozstvi=execute dba.prepocet_men_kurz '#RS,#MNOZ', %fiscis_0_obdobi%, %menycis_0_id_meny_nav%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny_nav <> ''; #SELECT7=menycis_koef_0_koef=select case when mm.xkurz = 1 then round(round(%kurzy3lis_0_kurz% / %kurzy3lis_0_mnozstvi%, 8) / round(%kurzy2lis_0_kurz% / %kurzy2lis_0_mnozstvi%, 8), 8) else round(round(%kurzy2lis_0_kurz% / %kurzy2lis_0_mnozstvi%, 8) / round(%kurzy3lis_0_kurz% / %kurzy3lis_0_mnozstvi%, 8), 8) end from dba.menycis_mistni mm with(index(pk_menycis_mistni)) where mm.fiskalni_rok = %fiscis_0_obdobi%:Wkurzycis_0_kod <> '' and kurzy3lis_0_kurz <> 0 and kurzy3lis_0_mnozstvi <> 0 and kurzy2lis_0_kurz <> 0 and kurzy2lis_0_mnozstvi <> 0; #SELECT8=menycis_0_koef_nav=0:Wkurzycis_0_kod <> ''; #SELECT9=kurzy2lis_0_kurz=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod); #SELECT10=kurzy2lis_0_mnozstvi=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod); #SELECT11=kurzy3lis_0_kurz=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod) or menycis_0_id_meny_nav = '' or isnull(menycis_0_id_meny_nav); #SELECT12=kurzy3lis_0_mnozstvi=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod) or menycis_0_id_meny_nav = '' or isnull(menycis_0_id_meny_nav); #SELECT13=menycis_koef_0_koef=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod); #EDIT_COL4_TAG_END; #EDIT_COL5=op_zahlavi.cenik; #EDIT_COL_DEFAULT5=op_zahlavi_0_cenik=cenik; #EDIT_COL_DEFAULT_MULTI5=op_zahlavi_0_cenik=cenik:U; #EDIT_COL5_TEXT=Nový ceník; #EDIT_COL5_TAG_BEGIN; #F3TAB=cn_cenik; #F3WHERE1=cn_cenik.poradi = (select max(cn.poradi) from dba.cn_cenik cn with(index(cn_cenik_cn_cenik_poradi)) where cn.cenik = cn_cenik.cenik and convert(#BY(datumy.datum), %menycis_0_platnost_do%) between cn.platnost_od and cn.platnost_do and cn.platnost = 1) and cn_cenik.typ_rady < 100; #F3SAY=nazev + ' (' + id_meny + ')'; #EDIT_COL5_TAG_END; #EDIT_GROUP6=Konverzní kurz ukončení platnosti měny; #EDIT_COL6=menycis.koef_nav; #EDIT_COL_DEFAULT6=menycis_0_koef_nav=0; #EDIT_COL_DEFAULT_MULTI6=menycis_0_koef_nav=0:U; #EDIT_COL6_TEXT=Konverzní kurz přepočtu; #EDIT_GROUP7=Konverzního kurz podle kurzovního lístku; #EDIT_COL7=menycis.platnost_do; #EDIT_COL_DEFAULT7=menycis_0_platnost_do=select case when convert(#BY(datumy.datum), \\DATUM) > convert(#BY(datumy.datum), convert(varchar(10)/*BY*/, fis.ukonceno, 111)) then convert(#BY(datumy.datum), convert(varchar(10)/*BY*/, fis.ukonceno, 111)) else convert(#BY(datumy.datum), \\DATUM) end from dba.fiscis fis with(index(pk_fiscis)) where fis.obdobi = %fiskalni_rok%; #EDIT_COL_DEFAULT_MULTI7=menycis_0_platnost_do=\\DATUM; #EDIT_COL7_TEXT=Datum zjištění kurzů; #EDIT_COL7_TAG_BEGIN; #SELECT1=kurzy2lis_0_kurz=execute dba.prepocet_men_kurz '#RS,#KURZ', %fiscis_0_obdobi%, %menycis_0_id_meny%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny <> ''; #SELECT2=kurzy2lis_0_mnozstvi=execute dba.prepocet_men_kurz '#RS,#MNOZ', %fiscis_0_obdobi%, %menycis_0_id_meny%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny <> ''; #SELECT3=kurzy3lis_0_kurz=execute dba.prepocet_men_kurz '#RS,#KURZ', %fiscis_0_obdobi%, %menycis_0_id_meny_nav%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny_nav <> ''; #SELECT4=kurzy3lis_0_mnozstvi=execute dba.prepocet_men_kurz '#RS,#MNOZ', %fiscis_0_obdobi%, %menycis_0_id_meny_nav%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny_nav <> ''; #SELECT5=menycis_koef_0_koef=select case when mm.xkurz = 1 then round(round(%kurzy3lis_0_kurz% / %kurzy3lis_0_mnozstvi%, 8) / round(%kurzy2lis_0_kurz% / %kurzy2lis_0_mnozstvi%, 8), 8) else round(round(%kurzy2lis_0_kurz% / %kurzy2lis_0_mnozstvi%, 8) / round(%kurzy3lis_0_kurz% / %kurzy3lis_0_mnozstvi%, 8), 8) end from dba.menycis_mistni mm with(index(pk_menycis_mistni)) where mm.fiskalni_rok = %fiscis_0_obdobi%:Wkurzycis_0_kod <> '' and kurzy3lis_0_kurz <> 0 and kurzy3lis_0_mnozstvi <> 0 and kurzy2lis_0_kurz <> 0 and kurzy2lis_0_mnozstvi <> 0; #SELECT6=menycis_0_koef_nav=0:Wkurzycis_0_kod <> ''; #EDIT_COL7_TAG_END; #EDIT_COL8=kurzycis.kod; #EDIT_COL8_TEXT=Kód kurzovního lístku; #EDIT_COL_DEFAULT8=kurzycis_0_kod=kurzovni_listek; #EDIT_COL_DEFAULT_MULTI8=kurzycis_0_kod=kurzovni_listek:U; #EDIT_COL8_TAG_BEGIN; #F3TAB=kurzycis; #F3SAY=nazev; #; #SELECT1=kurzy2lis_0_kurz=execute dba.prepocet_men_kurz '#RS,#KURZ', %fiscis_0_obdobi%, %menycis_0_id_meny%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny <> ''; #SELECT2=kurzy2lis_0_mnozstvi=execute dba.prepocet_men_kurz '#RS,#MNOZ', %fiscis_0_obdobi%, %menycis_0_id_meny%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny <> ''; #SELECT3=kurzy3lis_0_kurz=execute dba.prepocet_men_kurz '#RS,#KURZ', %fiscis_0_obdobi%, %menycis_0_id_meny_nav%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny_nav <> ''; #SELECT4=kurzy3lis_0_mnozstvi=execute dba.prepocet_men_kurz '#RS,#MNOZ', %fiscis_0_obdobi%, %menycis_0_id_meny_nav%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny_nav <> ''; #SELECT5=menycis_koef_0_koef=select case when mm.xkurz = 1 then round(round(%kurzy3lis_0_kurz% / %kurzy3lis_0_mnozstvi%, 8) / round(%kurzy2lis_0_kurz% / %kurzy2lis_0_mnozstvi%, 8), 8) else round(round(%kurzy2lis_0_kurz% / %kurzy2lis_0_mnozstvi%, 8) / round(%kurzy3lis_0_kurz% / %kurzy3lis_0_mnozstvi%, 8), 8) end from dba.menycis_mistni mm with(index(pk_menycis_mistni)) where mm.fiskalni_rok = %fiscis_0_obdobi%:Wkurzycis_0_kod <> '' and kurzy3lis_0_kurz <> 0 and kurzy3lis_0_mnozstvi <> 0 and kurzy2lis_0_kurz <> 0 and kurzy2lis_0_mnozstvi <> 0; #SELECT6=menycis_0_koef_nav=0:Wkurzycis_0_kod <> ''; #SELECT7=kurzy2lis_0_kurz=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod); #SELECT8=kurzy2lis_0_mnozstvi=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod); #SELECT9=kurzy3lis_0_kurz=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod) or menycis_0_id_meny_nav = '' or isnull(menycis_0_id_meny_nav); #SELECT10=kurzy3lis_0_mnozstvi=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod) or menycis_0_id_meny_nav = '' or isnull(menycis_0_id_meny_nav); #SELECT11=menycis_koef_0_koef=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod); #EDIT_COL8_TAG_END; #EDIT_COL9=kurzy2lis.kurz; #EDIT_COL9_TEXT=Kurz původní měny/Množství; #EDIT_COL10=kurzy2lis.mnozstvi; #EDIT_COL10_TO_PREV; #EDIT_COL11=kurzy3lis.kurz; #EDIT_COL11_TEXT=Kurz nové měny/Množství; #EDIT_COL12=kurzy3lis.mnozstvi; #EDIT_COL12_TO_PREV; #EDIT_COL13=menycis_koef.koef; #EDIT_COL13_TEXT=Konverzní kurz přepočtu; #EDIT_COL13_TAG_BEGIN; #SELECT1=menycis_0_koef_nav=0:Wmenycis_koef_0_koef <> 0; #EDIT_COL13_TAG_END; #EDIT_COL_SQLAFTER1_BEGIN; if !fiscis_0_obdobi! = ''\tbegin raiserror 99999 'Není možné aktualizovat měnu operace pro doklady z různých fiskálních roků.' return end if !menycis_0_id_meny! = ''\tbegin raiserror 99999 'Není možné aktualizovat měnu operace pro doklady z různých měn.' return end if !menycis_0_koef_nav! = 0 and !menycis_koef_0_koef! = 0\tbegin raiserror 99999 'Není zadán žádný koeficient přepočtu.' return end update\tdba.op_zahlavi set\tid_meny = !menycis_0_id_meny_nav!, cenik = !op_zahlavi_0_cenik!, xcmd = '#MENA_CHANGED=' + ! string2(if(menycis_0_koef_nav <> 0, menycis_0_koef_nav, menycis_koef_0_koef)) ! + ';' + char(9) + 'SAVED', autor = user, ts = getdate() from\tdba.op_zahlavi opz with(index(pk_op_zahlavi)) where\topz.doklad = %doklad% #EDIT_COL_SQLAFTER1_END; #EDIT_COL_INFO=Byla provedena změna měny operace dokladů; #REFRESH;;#SETMENUID_END; 13USER_END 14ID_MENU=MNID/O_OBJ/201502251531240799441652 14USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201502251531240799441652/25/40/0;;#SETMENUID_END; 15ID_MENU=MNID/O_OBJ/201502251531367989939673 15BUTTON_TITLE=Zařazení do požadavků odeslané pošty 15TYP=SQLCOMMAND 15USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=odpost_kniha;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201502251531367989939673/25/40/0;    #NOEDIT_EVAL_LEFT=isnull(id_posty_poz, 0) > 0 or isnull(posta_doklad, '') <> '' or op_rady_8848_rada_posty = ''; #PERCENT_OFF; #MULTI_BUTTON; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set xcmd = char(9) + 'ODPM' from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 15USER_END 16ID_MENU=MNID/O_OBJ/201502251531596115213840 16BUTTON_TITLE=Požadavek odeslané pošty 16TYP=SEZNAM 16SEZ_TABULKA=odpost_doklady 16SEZ_VAZBA=TRUE 16SEZ_VAZBA_COLUMN1=id_posty_poz 16USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201502251531596115213840/25/40/0;  #NOEDIT_EVAL_LEFT=isnull(id_posty_poz) or id_posty_poz = 0;;#SETMENUID_END; 17ID_MENU=MNID/O_OBJ/201502251532113016580653 17BUTTON_TITLE=Doklad odesláné pošty 17TYP=SEZNAM 17SEZ_TABULKA=odpost_kniha 17SEZ_VAZBA=TRUE 17SEZ_VAZBA_COLUMN1=id_posty 17USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201502251532113016580653/25/40/0;  #NOEDIT_EVAL_LEFT=isnull(id_posty) or id_posty = '';;#SETMENUID_END; w_ift\tparametr/0 18ID_MENU=MNID/O_OBJ/200705141135559525303211 18BUTTON_TITLE=Po&ložky 18TYP=SEZNAM 18SEZ_TABULKA=op_polozky 18SEZ_TITLE=Seznam položek {case(druh when 30 then 'objednávky přijaté'/*TRAN*/ when 20 then 'nabídky vydané'/*TRAN*/ when 10 then 'poptávky přijaté'/*TRAN*/ else 'objednávky přijaté'/*TRAN*/)} č. {doklad} 18SEZ_VAZBA=TRUE 18SEZ_VAZBA_COLUMN1=doklad 18NOEDIT=TRUE 18USER=;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135559525303211/20/40/0;    #REFRESHSOURCE;;#SETMENUID_END; 18GEN_SORTS1=Doklad,Sestava,Díl,Položka^doklad,id_pol_vys,id_polozky,polozka 19ID_MENU=MNID/O_OBJ/202401231028295288644989 19BUTTON_TITLE=Po&ložky rozpadu 19TYP=SEZNAM 19SEZ_TABULKA=user_rozpad_dilcu 19SEZ_TITLE=Seznam položek rozpadu {doklad} 19SEZ_VAZBA=TRUE 19SEZ_VAZBA_COLUMN1=doklad 19USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//202401231028295288644989/20/30/0;    #REFRESHSOURCE; #DO_SEZ_SQL; #SEZ_SQL_ADD3000=(select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS dat_expedice /*\\:Sop_zahlavi.dat_expedice:HDatum expedice*/; #SEZ_SQL_ADD3001=(select op_zahlavi.zkraceny_nazev from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS zakaznik /*\\:Sop_zahlavi.zkraceny_nazev:HZákazník*/; #SEZ_SQL_ADD3002=(select op_zahlavi.misto_dp from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS misto_dod /*\\:Sop_zahlavi.misto_dp:HMísto dodání*/; #LEGEND=#DOKL_STORNO:Stornovaná položka:Fstorno = 1; #LEGEND=#O_OBJ_ODS:Vygenerována dávka:Fdavka<>'' and exportovano = 0; #LEGEND=#DOKL_SCHVAL:Exportováno:Fexportovano = 1;;#SETMENUID_END; 19USER_END 19GEN_SORTS1=Doklad^doklad 20ID_MENU=MNID/O_OBJ/200705141135551379178316 20BUTTON_TITLE=Obj.&Jádro 20TYP=SEZNAM 20SEZ_TABULKA=obj_prv_dkl 20SEZ_VAZBA=TRUE 20SEZ_VAZBA_COLUMN1=\\'O_OBJ' 20SEZ_VAZBA_COLUMN2=\\'OP' 20SEZ_VAZBA_COLUMN3=doklad 20USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135551379178316/20/40/0;  #NOEDIT_EVAL_LEFT=druh <> 30; #BUTTON_GROUP=Obj.&Jádro; #NOSAVESORT; #REFRESHSOURCE;;#SETMENUID_END; 20USER_END 21ID_MENU=MNID/O_OBJ/201408142123579137960343 21BUTTON_TITLE=Obj.Jádro - V&ykrytí 21TYP=SEZNAM 21SEZ_TABULKA=obj_prv_vykryti 21SEZ_VAZBA=TRUE 21SEZ_VAZBA_COLUMN1=\\'O_OBJ' 21SEZ_VAZBA_COLUMN2=\\'OP' 21SEZ_VAZBA_COLUMN3=doklad 21USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//201408142123579137960343/20/40/0;  #NOEDIT_EVAL_LEFT=druh <> 30 or pozadavky not in (30, 35, 36); #BUTTON_GROUP=Obj.&Jádro; #NOSAVESORT; #REFRESHSOURCE;;#SETMENUID_END; 21USER_END 22ID_MENU=MNID/O_OBJ/200705141135558993548665 22BUTTON_TITLE=Potvrzení 22TYP=SQLCOMMAND 22USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135558993548665/20/40/0;    #BUTTON_COLOR=rgb(0, 255, 0); #BUTTON_GROUP=Potvrzení; #NOEDIT_EVAL_LEFT=potvrzeno = 1 or storno = 1 or vyrizeno = 1; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako potvrzený?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako potvrzené?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set potvrzeno = 1, xcmd = '#POTVRD;', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% and opz.storno = 0 #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 22USER_END 23ID_MENU=MNID/O_OBJ/202302011420000250574661 23BUTTON_TITLE=Zpět Potvrzení 23TYP=SQLCOMMAND 23USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202302011420000250574661/20/40/0;    #BUTTON_COLOR=rgb(0, 255, 0); #BUTTON_GROUP=Potvrzení; #BUTTON_GROUP_RIGHT; /*#LEFT_MNID=200705141135558993548665;*/ #NOEDIT_EVAL_LEFT=potvrzeno = 0 or odsouhlaseno = 1 or storno = 1 or vyrizeno = 1; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako nepotvrzený?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako nepotvrzené?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set potvrzeno = 0, odsouhlaseno = 0, xcmd = '#ODPOTVRD;', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% and opz.storno = 0 #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 23USER_END 24ID_MENU=MNID/O_OBJ/200705141135553379131401 24BUTTON_TITLE=Odsouhlasení 24TYP=SQLCOMMAND 24USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135553379131401/20/40/0;    #BUTTON_COLOR=rgb(0, 255, 0); #BUTTON_GROUP=Odsouhlasení; #NOEDIT_EVAL_LEFT=odsouhlaseno = 1 or storno = 1 or vyrizeno = 1 or (op_rady_8848_zal_fa_nast = 10 and doklad_fv_zal <> '' and op_rady_8848_zal_fa_pocet <> 11); #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako odsouhlasený?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako odsouhlasené?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set potvrzeno = 1, odsouhlaseno = 1, xcmd = '#POTVRD;', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% and opz.storno = 0 #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 24USER_END 25ID_MENU=MNID/O_OBJ/202302011420016266813150 25BUTTON_TITLE=Zpět Odsouhlasení 25TYP=SQLCOMMAND 25USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202302011420016266813150/20/40/0;    #BUTTON_COLOR=rgb(0, 255, 0); #BUTTON_GROUP=Odsouhlasení; #BUTTON_GROUP_RIGHT; /*#LEFT_MNID=200705141135553379131401;*/ #NOEDIT_EVAL_LEFT=odsouhlaseno = 0 or storno = 1 or vyrizeno = 1 or (op_rady_8848_zal_fa_nast = 10 and doklad_fv_zal <> '' and op_rady_8848_zal_fa_pocet <> 11); #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako neodsouhlasený?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako neneodsouhlasené?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set odsouhlaseno = 0, xcmd = '#ODPOTVRD;', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% and opz.storno = 0 #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 25USER_END 26ID_MENU=MNID/O_OBJ/200705141135551392534218 26BUTTON_TITLE=Vyřízení 26TYP=SQLCOMMAND 26USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135551392534218/20/40/0;    #BUTTON_COLOR=rgb(0,255,0); #BUTTON_GROUP=Vyřízení; #NOEDIT_EVAL_LEFT=vyrizeno_kl = 1 or opr_prov = 0 or storno = 1; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako vyřízený?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako vyřízené?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set vyrizeno_kl = 1, xcmd = char(9) + 'VYRIZENO', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% and opz.vyrizeno_kl = 0 #SQLCOMMAND1_END; #SQLCOMMAND2_BEGIN; update dba.op_zahlavi set xcmd = char(9) + 'SAVED' from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND2_END; #W_SOURCE_REFRESH_ROW;;#SETMENUID_END; 26USER_END 27ID_MENU=MNID/O_OBJ/202302011420027040107874 27BUTTON_TITLE=Zpět Vyřízení 27TYP=SQLCOMMAND 27USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202302011420027040107874/20/40/0;    #BUTTON_COLOR=rgb(0,255,0); #BUTTON_GROUP=Vyřízení; #BUTTON_GROUP_RIGHT; /*#LEFT_MNID=200705141135551392534218;*/ #NOEDIT_EVAL_LEFT=vyrizeno_kl = 0 or opr_prov = 0 or storno = 1; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako nevyřízený?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako nevyřízené?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set vyrizeno_kl = 0, xcmd = char(9) + 'ODVYRIZENO', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% and opz.vyrizeno_kl <> 0 #SQLCOMMAND1_END; #SQLCOMMAND2_BEGIN; update dba.op_zahlavi set xcmd = char(9) + 'SAVED' from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND2_END; #W_SOURCE_REFRESH_ROW;;#SETMENUID_END; 27USER_END 28ID_MENU=MNID/O_OBJ/201601261324489781847785 28BUTTON_TITLE=Odesláno 28TYP=SQLCOMMAND 28USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201601261324489781847785/20/40/0;    #BUTTON_COLOR=rgb(0,255,0); #BUTTON_GROUP=Odesláno; #NOEDIT_EVAL_LEFT=druh <> 20 or isnull(odeslano, 0) = 1 or storno = 1; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako odeslaný?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako odeslané?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set odeslano = 1, autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 28USER_END 29ID_MENU=MNID/O_OBJ/202302011420034899451963 29BUTTON_TITLE=Zpět Odesláno 29TYP=SQLCOMMAND 29USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202302011420034899451963/20/40/0;    #BUTTON_COLOR=rgb(0,255,0); #BUTTON_GROUP=Odesláno; #BUTTON_GROUP_RIGHT; /*#LEFT_MNID=201601261324489781847785;*/ #NOEDIT_EVAL_LEFT=druh <> 20 or isnull(odeslano, 0) = 0 or storno = 1; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako neodeslaný?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako neodeslané?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set odeslano = 0, autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 29USER_END 30ID_MENU=MNID/O_OBJ/200705141135559788159105 30BUTTON_TITLE=Znepřístupni 30TYP=SQLCOMMAND 30USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135559788159105/20/40/0;    #BUTTON_COLOR=rgb(0,0,255); #BUTTON_GROUP=Znepřístupni; #NOEDIT_EVAL_LEFT=storno = 1 or opr_prov = 0; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako znepřístupněný?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako znepřístupněné?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set opr_prov = 0, xcmd = char(9) + 'OPR_PROV', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #W_SOURCE_REFRESH_ROW;;#SETMENUID_END; 30USER_END 31ID_MENU=MNID/O_OBJ/202302011420043873555096 31BUTTON_TITLE=Zpět Znepřístupni 31TYP=SQLCOMMAND 31USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202302011420043873555096/20/40/0;    #BUTTON_COLOR=rgb(0,0,255); #BUTTON_GROUP=Znepřístupni; #BUTTON_GROUP_RIGHT; /*#LEFT_MNID=200705141135559788159105;*/ #NOEDIT_EVAL_LEFT=storno = 1 or opr_prov = 1; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako neznepřístupněný?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako neznepřístupněné?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set opr_prov = 1, xcmd = char(9) + 'OPR_PROV', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #W_SOURCE_REFRESH_ROW;;#SETMENUID_END; 31USER_END 32ID_MENU=MNID/O_OBJ/201807090815549821080989 32BUTTON_TITLE=&Uprav položky 32TYP=SEZNAM 32ID_SAVE=op_uprav_pol 32SEZ_TABULKA=op_polozky 32SEZ_SQL_BEGIN select op_polozky.doklad AS doklad /* \\:NV */, op_polozky.polozka AS polozka, op_polozky.sklad AS sklad, op_polozky.id_karty AS id_karty /* \\:NV */, op_polozky.karta AS karta, op_polozky.nazev AS nazev, op_polozky.mnozstvi_obj AS mnozstvi_obj, op_polozky.id_mj_vyd AS id_mj_vyd /* \\:Sop_polozky.id_mj_vyd:HMJ vyd */, op_polozky.koef_mj_vyd AS koef_mj_vyd /* \\:NV */, op_polozky.cena_mj_cen AS cena_mj_cen, coalesce(op_polozky.cena_rucne, 0) AS cena_rucne /* \\:Sop_polozky.cena_rucne */, op_polozky.slevnit AS slevnit, op_polozky.sleva AS sleva, op_polozky.cena_mj_radek AS cena_mj_radek, op_polozky.storno AS storno, op_polozky.atribut_1 AS atribut_1, op_polozky.atribut_2 AS atribut_2, op_polozky.atribut_3 AS atribut_3, 0 AS zrus /* \\:Sop_polozky.storno:HZrušit položku */, op_polozky.vyrizeno AS vyrizeno /* \\:NV */, op_polozky.id_mj_evid AS id_mj_evid /* \\:NV */, op_polozky.id_pol_vys AS id_pol_vys /* \\:NV */, op_polozky.id_polozky AS id_polozky /* \\:NV */, op_polozky.id_mj_cen AS id_mj_cen /* \\:NV */, op_polozky.koef_mj_cen AS koef_mj_cen /* \\:NV */, op_polozky.mnozstvi_obj AS o_mnozstvi_obj /* \\:NV */, op_polozky.koef_mj_vyd AS o_koef_mj_vyd /* \\:NV */, op_polozky.storno AS o_storno /* \\:NV */, op_polozky.id_mj_vyd AS o_id_mj_vyd /* \\:NV */, op_polozky.cena_mj_cen AS o_cena_mj_cen /* \\:NV */, opz.cena_polozky AS cena_polozky /* \\:Sop_zahlavi.cena_polozky:NV */ from dba.op_polozky op_polozky with(index(pk_op_polozky)), dba.op_zahlavi opz with(index(pk_op_zahlavi)) where op_polozky.doklad = %doklad% and op_polozky.polozka < 29000 and #GETWRITEWHERE(op_polozky op_polozky) and opz.doklad = op_polozky.doklad 32SEZ_SQL_END 32SEZ_MODIFY_BEGIN mnozstvi_obj.protect='1~tif(storno = 1 or zrus = 1 or vyrizeno = 1, 1, 0)' cena_mj_cen.protect='1~tif(storno = 1 or zrus = 1 or vyrizeno = 1 or cena_polozky = 0, 1, 0)' cena_rucne.protect='1~tif(storno = 1 or zrus = 1 or vyrizeno = 1 or cena_polozky = 0, 1, 0)' id_mj_vyd.protect='1~tif(storno = 1 or zrus = 1 or vyrizeno = 1, 1, 0)' storno.protect='1~tif(zrus = 1 and storno = 0 or vyrizeno = 1, 1, 0)' zrus.protect='1~tif(storno = 1 and zrus = 0 or vyrizeno = 1, 1, 0)' 32SEZ_MODIFY_END 32SEZ_F3_TAG=    #F3DISADD; 32SEZ_POCET=-1 32USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_polozky;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201807090815549821080989/20/40/0;    #BUTTON_COLOR=rgb(0,0,255); #NOEDIT_EVAL_LEFT=storno = 1 or vyrizeno = 1 or opr_prov = 0; #SEZNAM_EDIT; #NOADDTABMENU; #NO_TABLE_HELPLINKS; #ADDTYP=SEZNAM,op_polozky_zrus; #EDITCOLS=mnozstvi_obj,id_mj_vyd,storno,zrus,cena_mj_cen,cena_rucne; #TAGCOLS=mnozstvi_obj,id_mj_vyd,storno,zrus,cena_mj_cen; #HIDESAVE; #SHOWFILTER=on; #CLOSEQUESTION=NOTSAVED; #MNOZSTVI_OBJ_TAG_BEGIN; #SELECT1=mnozstvi_obj_t.tag=string(id_pol_vys) + '^' + string(if(o_mnozstvi_obj = 0, 0, o_mnozstvi_obj) / if(mnozstvi_obj = 0, 1, mnozstvi_obj)) + '^' + id_karty + '^' + sklad; #SELECT2=GOTO99:Wid_polozky <> 0; #SELECT3=mnozstvi_obj=execute dba.odb_zaokr_dily_ @string2(round(if(dec2(item(describe('mnozstvi_obj_t.tag'), 2)) = 0, 0, o_mnozstvi_obj) / if(dec2(item(describe('mnozstvi_obj_t.tag'), 2)) = 0, 1, dec2(item(describe('mnozstvi_obj_t.tag'), 2))), 4)):NA@, @item(describe('mnozstvi_obj_t.tag'), 3)@, @item(describe('mnozstvi_obj_t.tag'), 4)@, @id_polozky@, @id_karty@:Wid_pol_vys = dec2(item(describe('mnozstvi_obj_t.tag'), 1)) and id_polozky <> 0:a; #MNOZSTVI_OBJ_TAG_END; #ID_MJ_VYD_TAG_BEGIN; #F3TAB=sklad_mj; #F3COL=id_karty,id_mj_evid,id_mj_vyd; #F3WHERE=sklad_mj.id_nomen = %id_karty% and sklad_mj.id_mj_evid = %id_mj_evid% and sklad_mj.vydej = 1; #F3NOFILTER=id_nomen,id_mj_evid; #SELECT1=koef_mj_vyd=select smj.koeficient from dba.sklad_mj smj with(index(pk_sklad_mj)) where smj.id_nomen = %id_karty% and smj.id_mj_evid = %id_mj_evid% and smj.id_mj = %id_mj_vyd%; #ID_MJ_VYD_TAG_END; #STORNO_TAG_BEGIN; #SELECT1=mnozstvi_obj=o_mnozstvi_obj:V; #SELECT2=id_mj_vyd=o_id_mj_vyd:V; #SELECT3=cena_mj_cen=o_cena_mj_cen; #SELECT4=koef_mj_vyd=o_koef_mj_vyd; #STORNO_TAG_END; #CENA_MJ_CEN_TAG_BEGIN; #SELECT1=cena_mj_radek=cena_mj_cen * if(slevnit = 0, 1, (1 - sleva / 100)) * if(id_mj_vyd = id_mj_cen or koef_mj_cen = 0, 1, round(koef_mj_vyd / koef_mj_cen, 6)); #SELECT2=cena_rucne=1; #CENA_MJ_CEN_TAG_END; #SQLTYPEEVAL=if(zrus = 1, 'del', 'upd'); #CHECKBEFOREEVAL1=select coalesce((select 'true' from dba.sklad_mj smj with(index(pk_sklad_mj)) where smj.id_nomen = @id_karty@ and smj.id_mj_evid = @id_mj_evid@ and smj.id_mj = @id_mj_vyd@), 'false'):MNa položce č. @polozka@ je nesprávně zadaná MJ výdeje.; #UPDATE1_BEGIN; update dba.op_polozky set mnozstvi_obj = case when @storno@ = 1 then @o_mnozstvi_obj@ else @mnozstvi_obj@ end, id_mj_vyd = case when @storno@ = 1 then @o_id_mj_vyd@ else @id_mj_vyd@ end, cena_mj_cen = case when @storno@ = 1 then @o_cena_mj_cen@ else @cena_mj_cen@ end, cena_rucne = @cena_rucne@, storno = @storno@, koef_mj_vyd = case when @storno@ = 1 then @o_koef_mj_vyd@ else @koef_mj_vyd@ end, xcmd = case when @storno@ = 1 then char(9) + 'STORNO' when @cena_rucne@ = 0 then char(9) + 'OPRAVA_CEN' end + '#SET_VALUES;', autor = user, ts = getdate() from dba.op_polozky opp with(index(pk_op_polozky)) where opp.doklad = @doklad@ and opp.polozka = @polozka@ #UPDATE1_END; #DELETE1_BEGIN; delete dba.op_polozky from dba.op_polozky opp with(index(pk_op_polozky)) where opp.doklad = @doklad@ and opp.polozka = @polozka@ #DELETE1_END; #SQLAFTEREVAL_BEGIN; update dba.op_zahlavi set xcmd = char(9) + 'SAVED' from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = !doklad! #SQLAFTEREVAL_END; #RESELECTROW; #LEGEND=#ODB_SES_NE:Běžná položka:Fid_pol_vys = 0 and id_polozky = 0 and storno <> 1; #LEGEND=#ODB_SESTAVA:Sestava:Fid_pol_vys <> 0 and id_polozky = 0 and storno <> 1; #LEGEND=#ODB_DILY:Díly sestavy:Fid_pol_vys <> 0 and id_polozky <> 0 and storno <> 1; #LEGEND=#DOKL_STORNO:Stornovaná položka:Fstorno = 1;;#SETMENUID_END; 32USER_END 33ID_MENU=MNID/O_OBJ/201907150925057809771941 33BUTTON_TITLE=Nastav stav Akceptováno 33TYP=SQLCOMMAND 33USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201907150925057809771941/20/40/0;    #BUTTON_GROUP=Akceptace importu; #NOEDIT_EVAL_LEFT=isnull(import, 0) = 0 or par_export = 0 or opr_imp_ordrsp_dkl_10 <> 0; #MULTI_BUTTON; #PERCENT_OFF; #PROCESBAR; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set exp_ordrsp_stav_akc = 10, autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 33USER_END 34ID_MENU=MNID/O_OBJ/201907151115364122328928 34BUTTON_TITLE=Nastav stav Neakceptováno 34TYP=SQLCOMMAND 34USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201907151115364122328928/20/40/0;    #BUTTON_GROUP=Akceptace importu; #NOEDIT_EVAL_LEFT=isnull(import, 0) = 0 or par_export = 0 or opr_imp_ordrsp_dkl_20 <> 0; #MULTI_BUTTON; #PERCENT_OFF; #PROCESBAR; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set exp_ordrsp_stav_akc = 20, autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 34USER_END 35ID_MENU=MNID/O_OBJ/201907151116166376593885 35BUTTON_TITLE=Nastav stav Změna 35TYP=SQLCOMMAND 35USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201907151116166376593885/20/40/0;    #BUTTON_GROUP=Akceptace importu; #NOEDIT_EVAL_LEFT=isnull(import, 0) = 0 or par_export = 0; #MULTI_BUTTON; #PERCENT_OFF; #PROCESBAR; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set exp_ordrsp_stav_akc = 30, autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 35USER_END 36ID_MENU=MNID/O_OBJ/201907121149310765884685 36BUTTON_TITLE=Zařadit k exportu potvrzení 36TYP=SQLCOMMAND 36USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201907121149310765884685/20/40/0;    #BUTTON_GROUP=Zařadit k exportu potvrzení; #NOEDIT_EVAL_LEFT=druh <> 30 or par_export <> 1 or isnull(export, 0) <> 0 or isnull(exp_ordrsp_stav_akc, 0) = 0; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set export = 1, xcmd = '#AKT_STAVY;', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROWS;;#SETMENUID_END; 36USER_END 37ID_MENU=MNID/O_OBJ/202302011420067203411831 37BUTTON_TITLE=Zpět Zařadit k exportu potvrzení 37TYP=SQLCOMMAND 37USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202302011420067203411831/20/40/0;    #BUTTON_GROUP=Zařadit k exportu potvrzení; #BUTTON_GROUP_RIGHT; /*#LEFT_MNID=201907121149310765884685;*/ #NOEDIT_EVAL_LEFT=druh <> 30 or par_export <> 1 or isnull(export, 0) <> 1 or isnull(exp_ordrsp_stav_akc, 0) = 0; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set export = 0, xcmd = '#AKT_STAVY;', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROWS;;#SETMENUID_END; 37USER_END 38ID_MENU=MNID/O_OBJ/200705141135558650635181 38BUTTON_TITLE=Generuj poptávku přijatou 38TYP=GROUP 38AKCE=op_gen_op 38USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135558650635181/20/40/0;    #BUTTON_GROUP=O&bjednávky; #SPACEBEFORE; #NOEDIT_EVAL_LEFT=storno = 1 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or op_rady_8848_op_rada_pop = ''; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 38USER_END 3801ID_MENU=MNID/O_OBJ/200705141135557213945120 3801BUTTON_TITLE=Generuj poptávku (substituce) 3801TYP=NOTHING 3801USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135557213945120/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_op_denik_pop; #GROUP_SUB2=#RD=op_rady_8848_op_rada_pop; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#AKCE='POP':NA;;#SETMENUID_END; 3801USER_END 39ID_MENU=MNID/O_OBJ/200705141135557853006739 39BUTTON_TITLE=Generuj nabídku vydanou 39TYP=GROUP 39AKCE=op_gen_op 39USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135557853006739/20/40/0;    #BUTTON_GROUP=O&bjednávky; #NOEDIT_EVAL_LEFT=storno = 1 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or op_rady_8848_op_rada_nab = ''; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 39USER_END 3901ID_MENU=MNID/O_OBJ/200705141135551547222645 3901BUTTON_TITLE=Generuj nabídku (substituce) 3901TYP=NOTHING 3901USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135551547222645/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_op_denik_nab; #GROUP_SUB2=#RD=op_rady_8848_op_rada_nab; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#AKCE='NAB':NA;;#SETMENUID_END; 3901USER_END 40ID_MENU=MNID/O_OBJ/200705141135550858076406 40BUTTON_TITLE=Generuj objednávku přijatou 40TYP=GROUP 40AKCE=op_gen_op 40USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135550858076406/20/40/0;    #BUTTON_GROUP=O&bjednávky; #NOEDIT_EVAL_LEFT=storno = 1 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or op_rady_8848_op_rada_op = ''; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 40USER_END 4001ID_MENU=MNID/O_OBJ/200705141135556000171528 4001BUTTON_TITLE=Generuj objednávku přijatou (substituce) 4001TYP=NOTHING 4001USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135556000171528/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_op_denik_op; #GROUP_SUB2=#RD=op_rady_8848_op_rada_op; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#AKCE='OBJ':NA;;#SETMENUID_END; 4001USER_END 41ID_MENU=MNID/O_OBJ/200705141135552823294874 41BUTTON_TITLE=Generuj objednávku vydanou 41TYP=GROUP 41AKCE=op_gen_ov 41USER_BEGIN ;#BUTTON_WRITE_RIGHT=ov_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135552823294874/20/40/0;    #BUTTON_GROUP=O&bjednávky; #NOEDIT_EVAL_LEFT=storno = 1 or druh <> 30 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or op_rady_8848_op_rada_ov = '' or doklad_ov <> '' or vyrizeno = 1 or dodano_predb = 1; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 41USER_END 4101ID_MENU=MNID/O_OBJ/200705141135553155354869 4101BUTTON_TITLE=Generuj objednávku vydanou (substituce) 4101TYP=NOTHING 4101USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135553155354869/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_op_denik_ov; #GROUP_SUB2=#RD=op_rady_8848_op_rada_ov; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#AKCE='OBJ':NA;;#SETMENUID_END; 4101USER_END 42ID_MENU=MNID/O_OBJ/201301251531191366684642 42BUTTON_TITLE=Generování OV na &dodavatele 42TYP=FILTERWHERE 42USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//201301251531191366684642/20/40/0;  #BUTTON_GROUP=O&bjednávky; #NOEDIT_EVAL_LEFT=druh <> 30 or storno = 1 or vyrizeno = 1 or dodano_predb = 1; #NOMULTIWARN; #ADDTYP=FILTER,gen_ov_dle_op; #ADDTYP=FILTER,gen_ov_dle_op_obj; #GEN_FILTER_OV_RADA_ADD_BEGIN; #EDIT_COL2_DEFAULT=op_rady_8848_op_denik_ov; #EDIT_COL3_DEFAULT=op_rady_8848_op_rada_ov; #GEN_FILTER_OV_RADA_ADD_END; #GEN_FILTER_OBJ_ADD_BEGIN; #PERCENT_OFF; #INIT_WHERE1_BEGIN; (#FOREACH_ID1=if(isselected() and druh = 30 and storno = 0 and vyrizeno = 0, doklad, ''):WE;(op_zahlavi.doklad = '@VALUE_ID1') or #NEXT_ID1; 1=0) #INIT_WHERE1_END; #GEN_FILTER_OBJ_ADD_END;;#SETMENUID_END; 42USER_END 43ID_MENU=MNID/O_OBJ/200705141135553417851268 43BUTTON_TITLE=Návazné generované PP / NV / OP 43TYP=SEZNAM 43SEZ_TABULKA=op_zahlavi 43SEZ_TITLE=Návazné doklady poptávek přijatých, nabídek vydaných a objednávek přijatých vygenerované z {doklad} 43SEZ_PODMINKA=op_zahlavi.doklad = tmp.doklad #OPT(#tmp_dkl tmp /ADD, dba.op_zahlavi op_zahlavi) #FORCEPLAN; 43SEZ_F3_TAG=    #F3DISADD; 43USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135553417851268/20/40/0;    #BUTTON_GROUP=O&bjednávky; #SPACEBEFORE; #NOEDIT_EVAL_LEFT='\\OV_ZAHLAVI_NAV_NOEDIT'='1'; #NOSAVESORT; #USERSUB1=\\OV_ZAHLAVI_NAV_NOEDIT=1:C:NA; #DO_PARENT_USERSUB; #COMBO_BEGIN; #COMBO_ID=primo_gen; #POLOZKY= Přímo generované doklady\\1\\tmp.uroven = 1^; #POPISBEZ=.Všechny generované doklady; #DEFAULT=1; #COMBO_END; #DBEXECUTE_BODY_BEGIN; CREATE_BEGIN begin CREATE TABLE #tmp_dkl(doklad #BY(op_zahlavi.doklad), uroven smallint/*BY*/) end CREATE_END EXECUTE_BEGIN begin declare @uroven smallint/*BY*/ select @uroven = 1 insert into #tmp_dkl(doklad, uroven) select opz.doklad, @uroven from dba.op_zahlavi opz with(index(op_zahlavi_doklad_gen), readuncommitted) where opz.id_modulu_gen = 'O_OBJ' and opz.agenda_gen = 'OP' and opz.doklad_gen = %doklad% while 1 = 1 begin select @uroven = @uroven + 1 insert into #tmp_dkl(doklad, uroven) select opz.doklad, @uroven from #tmp_dkl tmp, dba.op_zahlavi opz with(index(op_zahlavi_doklad_gen), readuncommitted) where tmp.uroven = @uroven - 1 and opz.id_modulu_gen = 'O_OBJ' and opz.agenda_gen = 'OP' and opz.doklad_gen = tmp.doklad if @@rowcount = 0 break end end EXECUTE_END DROP_BEGIN drop table #tmp_dkl DROP_END #DBEXECUTE_BODY_END;;#SETMENUID_END; 43USER_END 44ID_MENU=MNID/O_OBJ/200705141135556298935930 44BUTTON_TITLE=Návazné generované OV 44TYP=SEZNAM 44CLASS=w_iftseznam_doklad 44SEZ_TABULKA=ov_zahlavi 44SEZ_TITLE=Návazné doklady objednávek vygenerované z objednávky přijaté {doklad} 44SEZ_F3_TAG=  #F3DISADD; 44SEZ_VAZBA=TRUE 44SEZ_VAZBA_INDEX=ov_zahlavi_doklad_op 44SEZ_VAZBA_COLUMN1=\\'O_OBJ' 44SEZ_VAZBA_COLUMN2=\\'OP' 44SEZ_VAZBA_COLUMN3=doklad 44USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135556298935930/20/40/0;  #BUTTON_GROUP=O&bjednávky; #NOSAVESORT;;#SETMENUID_END; 44USER_END 45ID_MENU=MNID/O_OBJ/200903021018557149550277 45BUTTON_TITLE=Generuj kalkulaci TPV 45TYP=SQLCOMMAND 45USER_BEGIN ;#BUTTON_WRITE_RIGHT=v_kalk_dkl;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903021018557149550277/20/40/0;    #NOEDIT_EVAL_LEFT=op_rady_8848_tpv_denik_kalk = '' or op_rady_8848_tpv_rada_kalk = '' or storno = 1 or vyrizeno = 1 or dodano_predb = 1; #BUTTON_GROUP=Výroba; #BUTTON_QUESTION=Opravdu si přejete Generovat / Aktualizovat doklad kalkulace TPV?; #PERCENT_OFF; #MULTI_BUTTON; #PROCESBAR; #PROCESTEXT=Generování kalkulace TPV z dokladů OP; #PROCESMESS=Generuji kalkulaci TPV dokladu OP %doklad%...; #SQLCOMMAND1=execute dba.o_obj_gen_kalk_tpv %doklad%; #REFRESHROW;;#SETMENUID_END; 45USER_END 46ID_MENU=MNID/O_OBJ/200903021025040264075675 46BUTTON_TITLE=Položky kalkulace 46TYP=SEZNAM 46ID_SAVE=v_kalk_pol_z_op 46SEZ_TABULKA=v_kalk_pol 46SEZ_TITLE=Výrobní kalkulace - položky objednávky {doklad} 46SEZ_MODIFY_BEGIN cena.font.weight=700 cena_prod.font.weight=700 46SEZ_MODIFY_END 46SEZ_PODMINKA=op_polozky.doklad = v_kalk_dkl.objednavka and op_polozky.polozka = v_kalk_pol.polozka #OPT(dba.v_kalk_dkl v_kalk_dkl, dba.op_polozky op_polozky with(index(pk_op_polozky)) /ADD) 46SEZ_F3_TAG_BEGIN #F3DISADD; #F3DISDELETE; 46SEZ_F3_TAG_END 46SEZ_VAZBA=TRUE 46SEZ_VAZBA_COLUMN1=doklad_kalk 46USER_BEGIN ;#BUTTON_WRITE_RIGHT=v_kalk_pol;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903021025040264075675/20/40/0;    #BUTTON_GROUP=Výroba; #SEZNAM_EDIT; #SAVEFILE=o_obj; #SEZ_SQL_ADD1_BEGIN; op_polozky.id_karty, op_polozky.karta, op_polozky.sklad, op_polozky.nazev, op_polozky.atribut_1, op_polozky.atribut_2, op_polozky.atribut_3, op_polozky.baleni, op_polozky.mnozstvi_obj, op_polozky.id_mj_vyd, v_vyrobek.kj, v_kalk_dkl.datum #SEZ_SQL_ADD1_END; #NOADDCOMBO; #NOEDIT_EVAL_LEFT=doklad_kalk = ''; #SHOWFILTER=ON; #ENABLE_AUTO_SAVE_ROW; #DEFAULT_AUTO_SAVE=ROW; #FINDROWEVAL=doklad = %doklad% and polozka = %polozka%; #EDITCOLS=postup0; #TAGCOLS=postup0; #POSTUP0_TAG_BEGIN; #F3TAB=v_vyrobek; #F3COL=postup0,poradi0,polozka0; #F3WHERE=v_vyrobek.id_nomen = %op_polozky_id_karty% and v_vyrobek.platnost = 1 and v_vyrobek.baleni = %op_polozky_baleni% and v_vyrobek.atribut_1 = (case when %op_polozky_atribut_1% = '' then v_vyrobek.atribut_1 else %op_polozky_atribut_1% end) and v_vyrobek.atribut_2 = (case when %op_polozky_atribut_2% = '' then v_vyrobek.atribut_2 else %op_polozky_atribut_2% end) and v_vyrobek.atribut_3 = (case when %op_polozky_atribut_3% = '' then v_vyrobek.atribut_3 else %op_polozky_atribut_3% end) and v_zahlavi.postup <> '' and v_zahlavi.postup = v_vyrobek.postup and v_zahlavi.poradi = v_vyrobek.poradi and v_zahlavi.platnost = 1 and convert(#BY(datumy.datum), %v_kalk_dkl_datum%) between v_zahlavi.platnost_od and v_zahlavi.platnost_do #OPT(dba.v_vyrobek, dba.v_zahlavi v_zahlavi with(index(pk_v_zahlavi)) /ADD); #SELECT1=index_vyr0=select vyr.index_vyr from dba.v_vyrobek vyr with(index(pk_v_vyrobek)) where vyr.postup = %postup0% and vyr.poradi = %poradi0% and vyr.polozka = %polozka0%; #SELECT2=hospdavka0=select zah.hospdavka from dba.v_zahlavi zah with(index(pk_v_zahlavi)) where zah.postup = %postup0% and zah.poradi = %poradi0%; #POSTUP0_TAG_END; #SQLTYPEEVAL='upd'; #UPDATE1_BEGIN; update dba.v_kalk_pol set postup0 = @postup0@, poradi0 = @poradi0@, polozka0 = @polozka0@, xcmd = '#EASYINSERT;', autor = user, ts = getdate() from dba.v_kalk_pol pol with(index(pk_v_kalk_pol)) where doklad = @doklad@ and polozka = @polozka@ #UPDATE1_END; #REFRESHROW_COLUMNS=v_vyrobek_kj,cena0,cena,norminuty0,norminuty,rezminuty0,rezminuty,jedn_mzdy0,jedn_mzdy,rez_mzdy0,rez_mzdy,material0,material,kooper0,kooper,strnakl0,strnakl,rn10,rn1,rn20,rn2,rn30,rn3,rn40,rn4,rn50,rn5,rn60,rn6,rn70,rn7,rn80,rn8,rn90,rn9,rn00,rn0,datum,cena_prod,mj_prod,mena_prod,stat_dph,dph_anone; #REFRESHROW_SELECT_BEGIN; select v_vyrobek.kj, v_kalk_pol.cena0, v_kalk_pol.cena, v_kalk_pol.norminuty0, v_kalk_pol.norminuty, v_kalk_pol.rezminuty0, v_kalk_pol.rezminuty, v_kalk_pol.jedn_mzdy0, v_kalk_pol.jedn_mzdy, v_kalk_pol.rez_mzdy0, v_kalk_pol.rez_mzdy, v_kalk_pol.material0, v_kalk_pol.material, v_kalk_pol.kooper0, v_kalk_pol.kooper, v_kalk_pol.strnakl0, v_kalk_pol.strnakl, v_kalk_pol.rn10, v_kalk_pol.rn1, v_kalk_pol.rn20, v_kalk_pol.rn2, v_kalk_pol.rn30, v_kalk_pol.rn3, v_kalk_pol.rn40, v_kalk_pol.rn4, v_kalk_pol.rn50, v_kalk_pol.rn5, v_kalk_pol.rn60, v_kalk_pol.rn6, v_kalk_pol.rn70, v_kalk_pol.rn7, v_kalk_pol.rn80, v_kalk_pol.rn8, v_kalk_pol.rn90, v_kalk_pol.rn9, v_kalk_pol.rn00, v_kalk_pol.rn0, v_kalk_pol.datum, v_kalk_pol.cena_prod, v_kalk_pol.mj_prod, v_kalk_pol.mena_prod, v_kalk_pol.stat_dph, v_kalk_pol.dph_anone from dba.v_vyrobek v_vyrobek with(index(pk_v_vyrobek)), dba.v_kalk_pol v_kalk_pol with(index(pk_v_kalk_pol)) where v_vyrobek.postup = $postup0$ and v_vyrobek.poradi = $poradi0$ and v_vyrobek.polozka = $polozka0$ and v_kalk_pol.doklad = $doklad$ and v_kalk_pol.polozka = $polozka$ #REFRESHROW_SELECT_END; #REFRESHROW_WHERE=op_polozky.doklad = v_kalk_dkl.objednavka and op_polozky.polozka = v_kalk_pol.polozka #OPT(dba.v_kalk_dkl v_kalk_dkl, dba.op_polozky op_polozky with(index(pk_op_polozky)) /ADD); #REFRESHSOURCE;;#SETMENUID_END; 46USER_END 47ID_MENU=MNID/O_OBJ/200903021025536428721446 47BUTTON_TITLE=Doklad kalkulace 47TYP=SEZNAM 47SEZ_TABULKA=v_kalk_dkl 47SEZ_VAZBA=TRUE 47SEZ_VAZBA_COLUMN1=doklad_kalk 47USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903021025536428721446/20/40/0;    #BUTTON_GROUP=Výroba; #NOEDIT_EVAL_LEFT=doklad_kalk = '';;#SETMENUID_END; 47USER_END 48ID_MENU=MNID/O_OBJ/200903021027123736309291 48BUTTON_TITLE=Zjištění termínu dodání plánováním (Gantt diagram) 48USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903021027123736309291/20/40/0;    #BUTTON_GROUP=Výroba; #NOEDIT_EVAL_LEFT=doklad_kalk='' or ((not islicmodul('GANTT')) and (not islicmodul2('GANTT'))) or (not islicmodul('V_ZAK')); #SPACEBEFORE; #ADDTYP=GANTT,gantt_v_kalk; #XMESSAGE1=POZOR: Objednávka obsahuje výrobky z různých druhů plánování, Gantt diagram je třeba volat samostatně z položek kalkulace!:e:Wselect coalesce((select case when max(pol.xplan) <> min(pol.xplan) then 'true' else 'false' end from dba.v_kalk_pol pol with(index(pk_v_kalk_pol)) where pol.doklad = %doklad_kalk% and %doklad_kalk% <> ''), 'true'); #XMESSAGE2=POZOR: Z objednávky je již vygenerován výrobní příkaz, Gantt diagram je nutno volat ze Zakázkového postupu nebo z modulu Zdroje!:e:Wselect isnull((select Max('true') from dba.v_opv opv with(index(v_opv_objed)) where opv.objednavka = %doklad%), 'false'); #WSUBUSER; #PERCENT_OFF; #USERSUB1=#DEF_PLAN_XPLAN=select max(xplan) from dba.v_kalk_pol pol with(index(pk_v_kalk_pol)) where pol.doklad = %doklad_kalk%:NA; #USERSUB2=#DEF_DOKLAD=doklad_kalk:NA; #USERSUB3=#DEF_POLOZKA=0:C:NA; #USERSUB4=#GANTT_TITLE=select 'Objednávka ' + %doklad%:NA; #USERSUB5=#REZIM=2:C:NA; #USERSUB6=#AKTIVNI=1:C:NA; #USERSUB7=#TERMIN=1:NA; #USERSUB8=#UKLADANI=DIREKTIVY:C:NA;;#SETMENUID_END; 48USER_END 49ID_MENU=MNID/O_OBJ/200903021021508683342546 49BUTTON_TITLE=Generuj výrobní příkaz 49TYP=GROUP 49AKCE=op_gen_vp 49USER_BEGIN ;#BUTTON_WRITE_RIGHT=v_opvz;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903021021508683342546/20/40/0;    #BUTTON_GROUP=Výroba; #SPACEBEFORE; #NOEDIT_EVAL_LEFT=op_rady_8848_v_zak_denik = '' or op_rady_8848_v_zak_rada = '' or storno = 1 or druh <> 30 or vyrizeno = 1 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or dodano_predb = 1; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 49USER_END 4901ID_MENU=MNID/O_OBJ/200903021627418332263065 4901BUTTON_TITLE=Generuj VP (substituce) 4901TYP=NOTHING 4901USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903021627418332263065/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_v_zak_denik; #GROUP_SUB2=#RD=op_rady_8848_v_zak_rada;;#SETMENUID_END; 4901USER_END 50ID_MENU=MNID/O_OBJ/200903020947071123995764 50BUTTON_TITLE=Návazné výrobní příkazy 50TYP=SEZNAM 50SEZ_TABULKA=v_opvz 50SEZ_PODMINKA=exists(select 1 from dba.v_opv v_opv with(index(v_opv_objed)) where v_opv.objednavka = %doklad% and v_opv.doklad = v_opvz.doklad) 50SEZ_F3_TAG_BEGIN #F3DISADD; #F3DISDELETE; 50SEZ_F3_TAG_END 50USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903020947071123995764/20/40/0;    #BUTTON_GROUP=Výroba; #USE_INDEX=pk_v_opvz;;#SETMENUID_END; 50USER_END 51ID_MENU=MNID/O_OBJ/200903020952159849600579 51BUTTON_TITLE=Návazné položky výrobních příkazů 51TYP=SEZNAM 51SEZ_TABULKA=v_opv 51SEZ_VAZBA=TRUE 51SEZ_VAZBA_INDEX=v_opv_objed 51SEZ_VAZBA_COLUMN1=doklad 51NOEDIT=TRUE 51USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903020952159849600579/20/40/0;    #BUTTON_GROUP=Výroba; #NOSAVESORT;;#SETMENUID_END; 51USER_END 52ID_MENU=MNID/O_OBJ/200903021029254626498003 52BUTTON_TITLE=Návazné zakázkové postupy 52TYP=SEZNAM 52SEZ_TABULKA=v_opvvyrza 52SEZ_PODMINKA=exists(select 1 from dba.v_opv opv with(index(v_opv_objed)) where opv.objednavka = %doklad% and v_opvvyrza.opvfinal = opv.opv) 52USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903021029254626498003/20/40/0;    #BUTTON_GROUP=Výroba; #NOSAVESORT;;#SETMENUID_END; 52USER_END 53ID_MENU=MNID/O_OBJ/200705141135552428051672 53BUTTON_TITLE=Generuj zálohovou fakturu 53TYP=GROUP 53AKCE=op_gen_fv 53USER_BEGIN ;#BUTTON_WRITE_RIGHT=fv_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135552428051672/20/40/0;    #BUTTON_GROUP=Odb&yt; #NOEDIT_EVAL_LEFT=storno = 1 or druh <> 30 or (op_rady_8848_zal_fa_nast = 10 and odsouhlaseno = 1 and (doklad_fv_zal = '' or (op_rady_8848_zal_fa_pocet = 11 and doklad_fv_zal <> ''))) or (op_rady_8848_zal_fa_nast = 20 and expedovat_z = 1 and (doklad_fv_zal = '' or (op_rady_8848_zal_fa_pocet = 11 and doklad_fv_zal <> ''))) or vyrizeno = 1 or dodano_predb = 1 or (op_rady_8848_zal_fa_pocet = 1 and doklad_fv_zal <> '') or op_rady_8848_fv_rada_zal = '' or cena_bez_dph = 0 or cena_polozky = 0; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 53USER_END 5301ID_MENU=MNID/O_OBJ/200705141135552239350277 5301BUTTON_TITLE=Generuj zálohovou fakturu (substituce) 5301TYP=NOTHING 5301USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135552239350277/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_fv_denik_zal; #GROUP_SUB2=#RD=op_rady_8848_fv_rada_zal; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#TYP_DOKLADU=20:NA;;#SETMENUID_END; 5301USER_END 54ID_MENU=MNID/O_OBJ/200705141135553044795831 54BUTTON_TITLE=Generuj výdajový list 54TYP=GROUP 54AKCE=op_gen_vl 54USER_BEGIN ;#BUTTON_WRITE_RIGHT=vl_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135553044795831/20/40/0;    #BUTTON_GROUP=Odb&yt; #NOEDIT_EVAL_LEFT=storno = 1 or druh <> 30 or expedovat_z <> 1 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or vyrizeno = 1 or dodano_predb = 1 or op_rady_8848_op_denik_vl = ''; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 54USER_END 5401ID_MENU=MNID/O_OBJ/200705141135559844780483 5401BUTTON_TITLE=Generuj výdajový list (substituce) 5401TYP=NOTHING 5401USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135559844780483/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_op_denik_vl; #GROUP_SUB2=#RD=op_rady_8848_op_rada_vl; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#OBNOV=if(druh = 30, 1, 0):NA;;#SETMENUID_END; 5401USER_END 55ID_MENU=MNID/O_OBJ/200905190727002107850958 55BUTTON_TITLE=Generuj převáděcí list 55TYP=GROUP 55AKCE=op_gen_prev 55USER_BEGIN ;#BUTTON_WRITE_RIGHT=prev_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200905190727002107850958/20/40/0;    #BUTTON_GROUP=Odb&yt; #NOEDIT_EVAL_LEFT=storno = 1 or druh <> 30 or expedovat_z <> 1 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or vyrizeno = 1 or dodano_predb = 1 or op_rady_8848_op_rada_prev = ''; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 55USER_END 5501ID_MENU=MNID/O_OBJ/200905190728449186800574 5501BUTTON_TITLE=Generuj převádécí list (substituce) 5501TYP=NOTHING 5501USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200905190728449186800574/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_op_denik_prev; #GROUP_SUB2=#RD=op_rady_8848_op_rada_prev; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#OBNOV=if(druh = 30, 1, 0):NA;;#SETMENUID_END; 5501USER_END 56ID_MENU=MNID/O_OBJ/200705141135553055071090 56BUTTON_TITLE=Generuj fakturu na služby 56TYP=GROUP 56AKCE=op_gen_fv 56USER_BEGIN ;#BUTTON_WRITE_RIGHT=fv_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135553055071090/20/40/0;    #BUTTON_GROUP=Odb&yt; #NOEDIT_EVAL_LEFT=storno = 1 or druh <> 30 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or vyrizeno = 1 or dodano_predb = 1 or fv_rada = '' or cena_bez_dph = 0 or cena_polozky = 0; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 56USER_END 5601ID_MENU=MNID/O_OBJ/200705141135556654924894 5601BUTTON_TITLE=Generuj fakturu na služby (substituce) 5601TYP=NOTHING 5601USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135556654924894/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=fv_denik; #GROUP_SUB2=#RD=fv_rada; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#TYP_DOKLADU=10:NA;;#SETMENUID_END; 5601USER_END 57ID_MENU=MNID/O_OBJ/200705141135552393458900 57BUTTON_TITLE=Návazné generované zálohové faktury 57TYP=SEZNAM 57SEZ_TABULKA=fv_zahlavi 57SEZ_TITLE=Návazné zálohové FV vygenerované z objednávky {doklad} 57SEZ_PODMINKA=fv_zahlavi.objednavka = %doklad% and fv_zahlavi.typ_dokladu = 20 57SEZ_F3_TAG=    #F3DISADD; 57USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135552393458900/20/40/0;    #BUTTON_GROUP=Odb&yt; #SEZNAM_DOKLAD; #NOEDIT_EVAL_LEFT=druh <> 30; #SPACEBEFORE; #NOSAVESORT;;#SETMENUID_END; 57USER_END 58ID_MENU=MNID/O_OBJ/200705141135553907858789 58BUTTON_TITLE=Návazné generované výdajové listy 58TYP=SEZNAM 58SEZ_TABULKA=vl_zahlavi 58SEZ_TITLE=Návazné VL vygenerované z objednávky {doklad} 58SEZ_F3_TAG=    #F3DISADD; 58SEZ_VAZBA=TRUE 58SEZ_VAZBA_INDEX=vl_zahlavi_vl_z_objednavka 58SEZ_VAZBA_COLUMN1=doklad 58USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135553907858789/20/40/0;    #BUTTON_GROUP=Odb&yt; #SEZNAM_DOKLAD; #NOEDIT_EVAL_LEFT=druh <> 30; #NOSAVESORT; #REFRESHSOURCE;;#SETMENUID_END; 58USER_END 59ID_MENU=MNID/O_OBJ/200705301057309095861433 59BUTTON_TITLE=Návazné generované položky VL 59TYP=SEZNAM 59SEZ_TABULKA=vl_polozky 59SEZ_TITLE=Návazné položky VL vygenerované z objednávky {doklad} 59SEZ_PODMINKA=opp.doklad = %doklad% and vl_polozky.obj_doklad = opp.doklad and vl_polozky.obj_polozka = opp.polozka #OPT(dba.op_polozky opp with(index(pk_op_polozky)) /ADD, dba.vl_polozky vl_polozky with(index(vl_polozky_vl_p_objednavka))) 59USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705301057309095861433/20/40/0;    #BUTTON_GROUP=Odb&yt; #NOEDIT_EVAL_LEFT=druh <> 30; #NOSAVESORT;;#SETMENUID_END; 59USER_END 60ID_MENU=MNID/O_OBJ/200905190733510852502820 60BUTTON_TITLE=Návazné generované převáděcí listy 60TYP=SEZNAM 60SEZ_TABULKA=prev_zahlavi 60SEZ_TITLE=Návazné převáděcí listy vygenerované z objednávky {doklad} 60SEZ_F3_TAG=    #F3DISADD; 60SEZ_VAZBA=TRUE 60SEZ_VAZBA_INDEX=prev_zahlavi_objednavka 60SEZ_VAZBA_COLUMN1=doklad 60USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200905190733510852502820/20/40/0;    #BUTTON_GROUP=Odb&yt; #NOEDIT_EVAL_LEFT=druh <> 30; #SEZNAM_DOKLAD; #NOSAVESORT; #REFRESHSOURCE;;#SETMENUID_END; 60USER_END 61ID_MENU=MNID/O_OBJ/200705141135556860869751 61BUTTON_TITLE=Návazné generované faktury vydané na služby 61TYP=SEZNAM 61CLASS=w_iftseznam_doklad 61SEZ_TABULKA=fv_zahlavi 61SEZ_TITLE=Návazné FV na služby vygenerované z objednávky {doklad} 61SEZ_PODMINKA=fv_zahlavi.objednavka = %doklad% and fv_zahlavi.typ_dokladu = 10 and exists(select 1 from dba.fv_polozky fvp with(index(pk_fv_polozky)) where fvp.doklad = fv_zahlavi.doklad and fvp.vl_modul = 'O_OBJ' and fvp.vl_agenda = 'OP') 61SEZ_F3_TAG=    #F3DISADD; 61USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135556860869751/20/40/0;    #BUTTON_GROUP=Odb&yt; #NOEDIT_EVAL_LEFT=druh <> 30; #NOSAVESORT;;#SETMENUID_END; 61USER_END 62ID_MENU=MNID/O_OBJ/200802211606575700974131 62BUTTON_TITLE=Platby &záloh k partnerovi a zakázce 62TYP=SEZNAM 62SEZ_TABULKA=ev_zal 62SEZ_PODMINKA=ev_zal.id_partnera = %id_investora% and ev_zal.stav_devizy in (0, 1) and u_saldo_prv_dkl.zakazka_typ = %typ_zakazky% and u_saldo_prv_dkl.zakazka = %zakazka% and %typ_zakazky% <> '' and %zakazka% <> '' and u_saldo_prv_dkl.druh_dokladu = 1 and u_saldo_prv_dkl.povaha in (1, 2) and u_saldo_prv_dkl.saldokonto = 2 62USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200802211606575700974131/20/40/0;  #BUTTON_GROUP=Odb&yt; #USE_INDEX=ev_zal_id_partnera; #SPACEBEFORE;;#SETMENUID_END; 62USER_END 63ID_MENU=MNID/O_OBJ/200705141135556881067815 63BUTTON_TITLE=Storno 63USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135556881067815/20/40/0;    #NOEDIT_EVAL_LEFT=storno = 1 or dodano <> 0 or doklad_fv_zal <> ''; #NOEDIT_EVAL_RIGHT=storno <> 1 or doklad_fv_zal <> ''; #BUTTON_CLASS=uo_button_doklad; #STAV=STORNO; #BUTTON_COLOR=rgb(255,0,0); #RESELECTROW;;#SETMENUID_END; 63USER_END 64ID_MENU=MNID/O_OBJ/200705141135554335269357 64BUTTON_TITLE=Word/Excel 64USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135554335269357/20/40/0;  #BUTTON_CLASS=uo_button_attachment; #ATT_CLASS=ST_NABID; #ATT_TAB=op_zahlavi; #POZNAMKA=Formulář nabídky;;#SETMENUID_END; 64USER_END 65ID_MENU=MNID/O_OBJ/200807180937378114971602 65BUTTON_TITLE=Odešli odpovědné osobě &partnera 65TYP=DOKLTISK 65USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200807180937378114971602/20/40/0;    #BUTTON_GROUP=O&dešli PDF; #NOEDIT_EVAL_LEFT=id_par_oso = 0; #TISKTABULKA=op_zahlavi; #PERCENT_OFF_BUTTON; #TISKSUBST=\\OP_EXPORT_EMAIL|PAR; #DOKLTISK_NOMULTI; #DOKLTISK_USER_BEGIN; #DKLT_PRINT_DEV=3; #DKLT_PRINT_E_MAIL; #DKLT_PRINT_DOC_INFO1_BEGIN; select coalesce(oso.e_mail, ''), '', dba.substitute_fce(mtl.subject, '#vs#' + char(4) + %objednavka% + char(4) + %getrowvaluessubst(-1, 1=0, \"#\", \"#\" + char(4), char(4))%, char(4)), case when left(convert(varchar/*BY*/, mtl.body), 1) = '<' then '<html>' else '' end + dba.substitute_fce(mtl.body, '#vs#' + char(4) + %objednavka% + char(4) + %getrowvaluessubst(-1, 1=0, \"#\", \"#\" + char(4), char(4))%, char(4)) + case when left(convert(varchar/*BY*/, mtl.body), 1) = '<' then '</html>' else '' end from dba.op_zahlavi op_zahlavi_0 with(index(pk_op_zahlavi)), dba.op_rady opr with(index(pk_op_rady)), dba.paroso oso with(index(pk_paroso)), dba.kom_mail_templ_lang mtl with(index(pk_kom_mail_templ_lang)) where op_zahlavi_0.doklad > '' and opr.fiskalni_rok = op_zahlavi_0.fiskalni_rok and opr.denik = op_zahlavi_0.denik and opr.rada = op_zahlavi_0.rada and oso.id_partnera = op_zahlavi_0.id_partnera and oso.poradi = op_zahlavi_0.id_par_oso and mtl.kod = opr.kom_mail_templ and mtl.jazyk = dba.kom_mail_templ_lang_fce(mtl.kod, op_zahlavi_0.id_partnera, op_zahlavi_0.id_par_oso) #DKLT_PRINT_DOC_INFO1_END; #DKLT_PRINT_MAIL_NO_EXT_INFO; #DKLT_START_TISK; #DKLT_CLOSE_AFTER_TISK; #DOKLTISK_USER_END;;#SETMENUID_END; 65USER_END 66ID_MENU=MNID/O_OBJ/200807180952380791441576 66BUTTON_TITLE=Odešli odpovědné osobě &fakturačního partnera 66TYP=DOKLTISK 66USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200807180952380791441576/20/40/0;    #BUTTON_GROUP=O&dešli PDF; #NOEDIT_EVAL_LEFT=id_inv_oso = 0; #TISKTABULKA=op_zahlavi; #PERCENT_OFF_BUTTON; #TISKSUBST=\\OP_EXPORT_EMAIL|INV; #DOKLTISK_NOMULTI; #DOKLTISK_USER_BEGIN; #DKLT_PRINT_DEV=3; #DKLT_PRINT_E_MAIL; #DKLT_PRINT_DOC_INFO1_BEGIN; select coalesce(oso.e_mail, ''), '', dba.substitute_fce(mtl.subject, '#vs#' + char(4) + %objednavka% + char(4) + %getrowvaluessubst(-1, 1=0, \"#\", \"#\" + char(4), char(4))%, char(4)), case when left(convert(varchar/*BY*/, mtl.body), 1) = '<' then '<html>' else '' end + dba.substitute_fce(mtl.body, '#vs#' + char(4) + %objednavka% + char(4) + %getrowvaluessubst(-1, 1=0, \"#\", \"#\" + char(4), char(4))%, char(4)) + case when left(convert(varchar/*BY*/, mtl.body), 1) = '<' then '</html>' else '' end from dba.op_zahlavi op_zahlavi_0 with(index(pk_op_zahlavi)), dba.op_rady opr with(index(pk_op_rady)), dba.paroso oso with(index(pk_paroso)), dba.kom_mail_templ_lang mtl with(index(pk_kom_mail_templ_lang)) where op_zahlavi_0.doklad > '' and opr.fiskalni_rok = op_zahlavi_0.fiskalni_rok and opr.denik = op_zahlavi_0.denik and opr.rada = op_zahlavi_0.rada and oso.id_partnera = op_zahlavi_0.id_investora and oso.poradi = op_zahlavi_0.id_inv_oso and mtl.kod = opr.kom_mail_templ and mtl.jazyk = dba.kom_mail_templ_lang_fce(mtl.kod, op_zahlavi_0.id_investora, op_zahlavi_0.id_inv_oso) #DKLT_PRINT_DOC_INFO1_END; #DKLT_PRINT_MAIL_NO_EXT_INFO; #DKLT_START_TISK; #DKLT_CLOSE_AFTER_TISK; #DOKLTISK_USER_END;;#SETMENUID_END; 66USER_END 67ID_MENU=MNID/O_OBJ/201011301056154703421871 67BUTTON_TITLE=&Vytvoř verzi 67TYP=SQLCOMMAND 67USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201011301056154703421871/20/40/0;  #BUTTON_GROUP=Ver&ze; #BUTTON_QUESTION=Chcete opravdu vytvořit novou verzi dokladu?; #PERCENT_OFF; #SQLCOMMAND1=execute dba.o_obj_op_verze %doklad%; #REFRESHROW;;#SETMENUID_END; 67USER_END 68ID_MENU=MNID/O_OBJ/201011301056395689086387 68BUTTON_TITLE=Ver&ze 68TYP=SEZNAM 68SEZ_TABULKA=op_zahlavi_ver 68SEZ_TITLE=Verze {case(druh when 30 then 'objednávky přijaté'/*TRAN*/ when 20 then 'nabídky vydané'/*TRAN*/ when 10 then 'poptávky přijaté'/*TRAN*/ else 'objednávky přijaté'/*TRAN*/)} č. {doklad} 68SEZ_VAZBA=TRUE 68SEZ_VAZBA_COLUMN1=doklad 68USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//201011301056395689086387/20/40/0;    #SPACEBEFORE; #BUTTON_GROUP=Ver&ze; #REFRESHROW_ON_CLOSE;;#SETMENUID_END; 68USER_END 69ID_MENU=MNID/O_OBJ/202005061150465411080112 69BUTTON_TITLE=Kopie dokladu 69TYP=GROUP 69USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//202005061150465411080112/20/40/0;    #BUTTON_COLOR=rgb(255,255,255); #NOEDIT_EVAL_LEFT=storno = 1; #SETWSOURCE;;#SETMENUID_END; 69USER_END 6901ID_MENU=MNID/O_OBJ/202005061151455635001913 6901BUTTON_TITLE=Parametry 6901TYP=MULTIDETAIL 6901AKCE=kopie_op 6901DET_TITLE=Kopie dokladu 6901USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202005061151455635001913/45/40/0;    #GROUP_WAIT; #EDIT_COL_NOTAB; #ALL_EDIT_COL_ENABLE; #EDIT_COL_ALL_MODIFIED; #EDIT_COL1=op_zahlavi.fiskalni_rok; #EDIT_COL_DEFAULT1=fiskalni_rok='\\FR_O_OBJ'; #EDIT_COL1_TAG_BEGIN; #F3TAB=fiscis; #F3COL=fiskalni_rok; #F3SAY=nazev; #EDIT_COL1_TAG_END; #EDIT_COL1_TESTSQL1=Nový fiskální rok musí nemůže být nižší než fiskální rok kopírovaného dokladu.|select case when (select fis.poradi from dba.fiscis fis with(index(pk_fiscis)) where fis.obdobi = %fiskalni_rok%) <= (select fis.poradi from dba.fiscis fis with(index(pk_fiscis)) where fis.obdobi = !fiskalni_rok!) then 1 else 0 end; #EDIT_COL1_SUB=#KOPIE_OP_FR; #EDIT_COL2=op_zahlavi.dat_vyst; #EDIT_COL_DEFAULT2=dat_vyst=\\DATUM; #EDIT_COL2_SUB=#KOPIE_OP_DAT_VYST; #EDIT_COL3=op_zahlavi.dat_pri; #EDIT_COL_DEFAULT3=dat_pri=\\DATUM; #EDIT_COL3_SUB=#KOPIE_OP_DAT_PRI; #EDIT_COL4=op_zahlavi.dat_dodani; #EDIT_COL_DEFAULT4=dat_dodani=relativedate(date(\\DATUM), daysafter(dat_expedice, dat_dodani)); #EDIT_COL4_SUB=#KOPIE_OP_DAT_DODANI; #EDIT_COL5=op_zahlavi.dat_expedice; #EDIT_COL_DEFAULT5=dat_expedice=\\DATUM; #EDIT_COL5_TAG_BEGIN; #SELECT1=dat_dodani=relativedate(dat_expedice, delka_dodani); #EDIT_COL5_TAG_END; #EDIT_COL5_SUB=#KOPIE_OP_DAT_EXPEDICE; #EDIT_COL6=karty.delka_dodani; #EDIT_COL_DEFAULT6=delka_dodani=daysafter(dat_expedice, dat_dodani); #EDIT_COL6_VIS=1=0; #EDIT_COL_NOQUESTION; #EDIT_COL_NOINFO;;#SETMENUID_END; 6901USER_END 6902ID_MENU=MNID/O_OBJ/202005061152126344387860 6902BUTTON_TITLE=Kopie dokladu (náhled) 6902TYP=DETAIL 6902ID_SAVE=op_zahlavi 6902DET_TABULKA=op_zahlavi 6902USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202005061152126344387860/45/40/0;    #GROUP_WHEN='#MULTIDETAIL_KOPIE_OP' = 'ALLOK'; #GROUP_WAIT; #PERCENT_OFF; #SQLBRD_SUB1=#X1=update dba.op_rady set xcmd = null from dba.op_rady opr with(index(pk_op_rady)) where opr.fiskalni_rok = %fiskalni_rok% and opr.denik = %denik% and opr.rada = %rada%:HIST:EXEC; #SQLBRD_SUB2=#DOKLAD=execute dba.o_obj_get_op_doklad #KOPIE_OP_FR, %denik%, %rada%, '\\IDI', \\DATUM, %fiskalni_rok%; #SQLBRD_COMMAND1=execute dba.o_obj_op_kopie %doklad%, #DOKLAD, #KOPIE_OP_DAT_VYST, #KOPIE_OP_DAT_PRI, #KOPIE_OP_DAT_DODANI, #KOPIE_OP_DAT_EXPEDICE; #CLOSE_AFTER_SAVE;;#SETMENUID_END; 6902USER_END 70ID_MENU=MNID/O_OBJ/202209261423471893894612 70BUTTON_TITLE=Import OP KARAT 70TYP=EXIMP 70USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//202209261423471893894612/20/30/0; #BUTTON_COLOR=rgb(241,132,61); #NOMULTIWARN; #PERCENT_OFF; #AKCE=FULLIMPORT; #ID_EI=IMPORT_VBH; #RIGHTBUTTON; #BUTTON_CLASS_RIGHT=m_eximp_import; #SEZNOROW; #REFRESHROWS;;#SETMENUID_END; 70USER_END 71ID_MENU=MNID/O_OBJ/202306201248564755483132 71BUTTON_TITLE=Štítky 71TYP=SESTAVA 71SEZ_SQL_BEGIN SELECT S.poradi AS poradi\\:Sop_polozky.polozka, S.karta AS karta\\:Sop_polozky.karta, S.nazev AS nazev\\:Snomenklatura.nazev, S.user_mnozstvi_vyr AS user_mnozstvi_vyr\\:Sop_polozky.user_mnozstvi_vyr, S.doklad AS doklad\\:Sop_polozky.doklad, S.zkraceny_nazev AS firma\\:Sop_zahlavi.zkraceny_nazev, isnull(S.user_zakvy,'') AS user_zakvy\\:Sop_polozky.user_zakvy, S.user_dat_dodani_zd AS user_dat_dodani_zd\\:Sop_polozky.user_dat_dodani_zd, S.user_obj_nakup AS user_obj_nakup\\:Sop_zahlavi.user_obj_nakup, isnull(S.user_pol_poz,'') AS user_pol_poz\\:Sop_polozky.user_pol_poz, isnull(S.user_vrtani_met,'') AS user_vrtani_met\\:Sop_polozky.user_vrtani_met, S.user_polozka_zd AS user_polozka_zd\\:Sop_polozky.user_polozka_zd, S.user_typ_profil AS user_typ_profil\\:Sop_polozky.user_typ_profil, S.user_profil_zak AS user_profil_zak\\:Sop_polozky.user_profil_zak, S.user_carkod AS user_carkod\\:Sop_polozky.user_carkod, S.user_ean AS user_ean\\:Sop_polozky.user_ean, S.user_delka AS user_delka\\:Sop_polozky.user_delka, S.user_vyska AS user_vyska\\:Sop_polozky.user_vyska, S.user_hloubka AS user_hloubka\\:Sop_polozky.user_hloubka, S.user_kodkz AS user_kodkz\\:Sop_zahlavi.user_kodkz, S.storno AS storno\\:Sop_polozky.storno, S.polozka AS polozka\\:Sop_polozky.polozka, S.user_skup_n_op AS user_skup_n_op\\:Sop_polozky.user_skup_n_op, S.citac_stitku AS citac_stitku, S.ean16 AS ean16 FROM #op_stitky1 S WHERE 1=1 71SEZ_SQL_END 71USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//202306201248564755483132/20/30/0; #PERCENT_OFF; #NOADDADDMENU; #BUTTON_COLOR=rgb(255,128,128); #SPACEBEFORE; #SPACEAFTER; #DBEXEC_SUBST=#BE_DOKLAD|%doklad:NA%; #DBEXECUTE=op_exe_stitky1; #DEFAULT_PROFILE=STITKY;;#SETMENUID_END; 71USER_END 71GEN_REPORT=stitky_25_100_wh 71GEN_TAB=cisla 71GEN_TABFULL=cisla 71GEN_GROUP1= poradi;poradi;S.poradi 71GEN_PBL0=O_OBJ 71GEN_TITLE=Štítky 71GEN_WHERE=storno=0 72ID_MENU=MNID/O_OBJ/202308231103543718225879 72BUTTON_TITLE=Odešli odpovědné osobě &partnera - s csv 72TYP=GROUP 72USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//202308231103543718225879/20/30/0; #BUTTON_GROUP=O&dešli PDF; #NOEDIT_EVAL_LEFT=id_par_oso = 0; #SETWSOURCE; #PERCENT_OFF; #USERSUB1=#DOKLAD=%doklad%:NA; #USERSUB2=#GENERUJ_CSV=select parcis.user_csv_potvrz from dba.parcis parcis with(index(pk_parcis)) where parcis.id_partnera = %id_partnera%:NA; ;#SETMENUID_END; 72USER_END 7201ID_MENU=MNID/O_OBJ/202309071522329412031159 7201TYP=NOTHING 7201USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202309071522329412031159/45/30/0; #DO_PARENT_USERSUB; #GROUP_WHEN=#GENERUJ_CSV=1; #PERCENT_OFF; #NOMULTIWARN; #USERSUB1=#CSV_FILENAME=select top 1 'c:\\export\\' + user_csv.user_obj_nakup + '_POTV.csv' from dba.user_csv user_csv with(index(user_csv_doklad)), dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where user_csv.doklad = op_zahlavi.doklad and user_csv.doklad = '#DOKLAD':NA; #USERSUB2_BEGIN;#CSV_TEXT=#DO_LIST_BEGIN;| select 'KODKZ'+';'+'CIPOKZ'+';'+'KODZD'+';'+'CIPOZD'+';'+'KODVY'+';'+'CIPOVY'+';'+'M'+';'+'MNSUM'+';'+'MJ'+';'+'POCKS'+';'+'HL'+';'+'DELKA'+';'+'VYSKA'+';'+'R4'+';'+'PROF'+';'+'PROVED'+';'+'VERZE'+';'+'NAZUPR'+';'+'TYP'+';'+'CARKOD0'+';'+'COBJKZ'+';'+'COBJKZJM'+';'+'KADDO'+';'+'DATOBKZ'+';'+'TDKZ'+';'+'POZ'+';'+'COBJZDP'+';'+'COBJZDN'+';'+'KOOBJ'+';'+'KADOB'+';'+'DATZOZD'+';'+'TDZD'+';'+'CARKOD'+';'+'C'+';'+'ZAKVY'+';'+'C-ZD'+';'+'C-VY'+';'+'HMOTN'+';'+'PTDZD'+';'+'PRIP'+';'+'SERIE'+';'+'ZAKADE'+';'+'POZDE'+';'+'GUID'+';'+'VER_SOFT'+ char(13)+char(10) union all select convert(varchar,op_zahlavi.user_kodkz)/*KODKZ*/+';'+ convert(varchar,op_polozky.user_interni_c_p)/*CIPOKZ*/+';'+ convert(varchar,op_zahlavi.ico)/*KODZD*/+';'+ convert(varchar,op_polozky.user_polozka_zd)/*CIPOZD*/+';'+ convert(varchar,op_zahlavi.user_kod_vyr)/*KODVY*/+';'+ convert(varchar,op_polozky.karta)/*CIPOVY*/+';'+ ''/*M*/+';'+ convert(varchar,replace(op_polozky.mnozstvi_obj,'.',','))/*MNSUM*/+';'+ convert(varchar,op_polozky.id_mj_vyd)/*MJ*/+';'+ convert(varchar,replace(op_polozky.user_mnozstvi_vyr,'.',','))/*POCKS*/+';'+ convert(varchar,op_polozky.user_hloubka)/*HL*/+';'+ convert(varchar,op_polozky.user_delka)/*DELKA*/+';'+ convert(varchar,op_polozky.user_vyska)/*VYSKA*/+';'+ convert(varchar,op_polozky.user_sirka1)+'/'+convert(varchar,op_polozky.user_sirka2)+'/'+convert(varchar,op_polozky.user_sirka3)+'/'+convert(varchar,op_polozky.user_sirka4)+'/'+convert(varchar,op_polozky.user_sirka5)/*R4*/+';'+ convert(varchar,op_polozky.user_profil_zak)/*PROF*/+';'+ convert(varchar,op_polozky.user_vrtani_met)/*PROVED*/+';'+ convert(varchar,op_polozky.user_verze)/*VERZE*/+';'+ convert(varchar,op_polozky.user_nazupr)/*NAZUPR*/+';'+ convert(varchar,op_polozky.user_typ_produktu)/*TYP*/+';'+ convert(varchar,op_polozky.user_ean)/*CARKOD0*/+';'+ convert(varchar,op_polozky.user_zakvy)/*COBJKZ*/+';'+ convert(varchar,op_zahlavi.user_kod_vysobj)/*COBJKZJM*/+';'+ convert(varchar,op_zahlavi.user_kod_dodadr)/*KADDO*/+';'+ convert(varchar,op_zahlavi.dat_vyst,104)/*DATOBKZ*/+';'+ convert(varchar,op_polozky.dat_dodani,104)/*TDKZ*/+';'+ convert(varchar,op_polozky.user_pol_poz)/*POZ*/+';'+ convert(varchar,op_zahlavi.user_obj_nakup)/*COBJZDP*/+';'+ convert(varchar,op_zahlavi.objednavka)/*COBJZDN*/+';'+ convert(varchar,op_zahlavi.user_obj_vyst)/*KOOBJ*/+';'+ convert(varchar,op_zahlavi.user_dod_adr)/*KADOB*/+';'+ convert(varchar,op_zahlavi.user_dat_vyst_zd,104)/*DATZOZD*/+';'+ convert(varchar,op_polozky.user_dat_dodani_zd,104)/*TDZD*/+';'+ convert(varchar,op_polozky.user_carkod)/*CARKOD*/+';'+ convert(varchar,op_polozky.user_sirka1)+'/'+convert(varchar,op_polozky.user_sirka2)+'/'+convert(varchar,op_polozky.user_sirka3)+'/'+convert(varchar,op_polozky.user_sirka4)+'/'+convert(varchar,op_polozky.user_sirka5)/*C*/+';'+ convert(varchar,op_polozky.doklad)/*ZAKVY*/+';'+ convert(varchar,replace(op_polozky.user_czd,'.',','))/*C-ZD*/+';'+ convert(varchar,replace(op_polozky.cena_mj_cen,'.',','))/*C-VY*/+';'+ convert(varchar,replace(op_polozky.hmotnost,'.',','))/*HMOTN*/+';'+ convert(varchar,op_polozky.dat_dodani_ods,104)/*PTDZD*/+';'+ convert(varchar,op_polozky.user_prip)/*PRIP*/+';'+ convert(varchar,op_polozky.user_serie)/*SERIE*/+';'+ convert(varchar,op_polozky.user_zakade)/*ZAKADE*/+';'+ convert(varchar,op_polozky.user_pozde)/*POZDE*/+';'+ convert(varchar,op_polozky.user_guid)/*GUID*/+';'+ ''/*VER_SOFT*/+';'+ char(13)+char(10) from  dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)), dba.op_polozky op_polozky with(index(pk_op_polozky)) where op_polozky.doklad = op_zahlavi.doklad and op_polozky.doklad = '#DOKLAD' --select convert(varchar,user_csv.user_kodkz)/*KODKZ*/+';'+ --       convert(varchar,user_csv.user_interni_c_p)/*CIPOKZ*/+';'+ --       convert(varchar,user_csv.ico)/*KODZD*/+';'+ --       convert(varchar,user_csv.user_polozka_zd)/*CIPOZD*/+';'+ --       convert(varchar,user_csv.user_kod_vyr)/*KODVY*/+';'+ --       convert(varchar,op_polozky.karta)/*CIPOVY*/+';'+ --       ''/*M*/+';'+ --       convert(varchar,user_csv.mnozstvi_obj)/*MNSUM*/+';'+ --       convert(varchar,user_csv.id_mj_vyd)/*MJ*/+';'+ --       convert(varchar,user_csv.user_mnozstvi_vyr)/*POCKS*/+';'+ --       convert(varchar,user_csv.user_hloubka)/*HL*/+';'+ --       convert(varchar,user_csv.user_delka)/*DELKA*/+';'+ --       convert(varchar,user_csv.user_vyska)/*VYSKA*/+';'+ --       convert(varchar,user_csv.user_sirka1)+'/'+convert(varchar,user_csv.user_sirka2)+'/'+convert(varchar,user_csv.user_sirka3)+'/'+convert(varchar,user_csv.user_sirka4)+'/'+convert(varchar,user_csv.user_sirka5)/*R4*/+';'+ --       convert(varchar,user_csv.user_typ_profil)/*PROF*/+';'+ --       convert(varchar,user_csv.user_prof_popis)/*PROVED*/+';'+ --       convert(varchar,user_csv.user_verze)/*VERZE*/+';'+ --       convert(varchar,user_csv.user_nazupr)/*NAZUPR*/+';'+ --       convert(varchar,user_csv.user_typ_produktu)/*TYP*/+';'+ --       convert(varchar,user_csv.user_ean)/*CARKOD0*/+';'+ --       convert(varchar,user_csv.user_zakvy)/*COBJKZ*/+';'+ --       convert(varchar,user_csv.user_kod_vysobj)/*COBJKZJM*/+';'+ --       convert(varchar,user_csv.user_kod_dodadr)/*KADDO*/+';'+ --       convert(varchar,user_csv.dat_vyst,104)/*DATOBKZ*/+';'+ --       convert(varchar,user_csv.dat_dodani,104)/*TDKZ*/+';'+ --       convert(varchar,user_csv.user_pol_poz)/*POZ*/+';'+ --       convert(varchar,user_csv.user_obj_nakup)/*COBJZDP*/+';'+ --       convert(varchar,user_csv.objednavka)/*COBJZDN*/+';'+ --       convert(varchar,user_csv.user_obj_vyst)/*KOOBJ*/+';'+ --       convert(varchar,user_csv.user_dod_adr)/*KADOB*/+';'+ --       convert(varchar,user_csv.user_dat_vyst_zd,104)/*DATZOZD*/+';'+ --       convert(varchar,user_csv.user_dat_dodani_zd,104)/*TDZD*/+';'+ --       convert(varchar,user_csv.user_carkod)/*CARKOD*/+';'+ --       ''/*C*/+';'+ --       convert(varchar,op_polozky.doklad)/*ZAKVY*/+';'+ --       convert(varchar,user_csv.user_czd)/*C-ZD*/+';'+ --       convert(varchar,op_polozky.cena_cel_kon)/*C-VY*/+';'+ --       convert(varchar,op_polozky.hmotnost)/*HMOTN*/+';'+ --       convert(varchar,op_polozky.dat_dodani_ods,104)/*PTDZD*/+';'+ --       convert(varchar,user_csv.user_prip)/*PRIP*/+';'+ --       convert(varchar,user_csv.user_serie)/*SERIE*/+';'+ --       convert(varchar,user_csv.user_zakade)/*ZAKADE*/+';'+ --       convert(varchar,user_csv.user_pozde)/*POZDE*/+';'+ --       convert(varchar,user_csv.user_guid)/*GUID*/+';'+ --       ''/*VER_SOFT*/+';'+ char(13)+char(10) -- --from dba.user_csv user_csv with(index(user_csv_doklad)), dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)), dba.op_polozky op_polozky with(index(pk_op_polozky)) --where user_csv.doklad = op_zahlavi.doklad and user_csv.doklad = '#DOKLAD' and user_csv.polozka = op_polozky.polozka and op_zahlavi.doklad = op_polozky.doklad #DO_LIST_END;:NA#USERSUB2_END; #FILEWRITE_AFTER1=#CSV_FILENAME; #FILEWRITE_BODY1_BEGIN;#CSV_TEXT#FILEWRITE_BODY1_END; #GROUP_WAIT; ;#SETMENUID_END; 7201USER_END 7202ID_MENU=MNID/O_OBJ/202309071619146016179564 7202TYP=ATTADD 7202USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202309071619146016179564/45/30/0;    #DO_PARENT_USERSUB; #GROUP_WHEN=#GENERUJ_CSV=1; #FILE_FROM_CLIENT; #USERSUB1=#CSV_FILENAME=select top 1 'c:\\export\\' + user_csv.user_obj_nakup + '_POTV.csv' from dba.user_csv user_csv with(index(user_csv_doklad)), dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where user_csv.doklad = op_zahlavi.doklad and user_csv.doklad = '#DOKLAD':NA; #ATT_TABULKA=op_zahlavi; #ATT_PK=#DOKLAD; #ATT_CLASS=CSV_FILE; #ATT_TAB=op_zahlavi; #ATT_POZN=NEODESLANO; #FILE=#CSV_FILENAME; ;#SETMENUID_END; 7202USER_END 7203ID_MENU=MNID/O_OBJ/202309080945023119316514 7203TYP=DOKLTISK 7203USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202309080945023119316514/45/30/0;    #TISKSUBST=\\OP_EXPORT_EMAIL|PAR; #TISKTABULKA=op_zahlavi; #PERCENT_OFF; #DOKLTISK_NOMULTI; #DO_PARENT_USERSUB; #DOKLTISK_USER_BEGIN; #DKLT_PRINT_DEV=3; #DKLT_PRINT_E_MAIL; #--PRINT_E_MAIL_PARMS_BEGIN; #--MAIL_BODY_HTML_BEGIN; <html> <body> <font face=\"calibri\" size=\"3\">Dobrý den,<br> <br> zasíláme vám potvrzení objednávky. Prosíme o kontrolu správnosti u položek objednávky<br> <br> S pozdravem<br> Termopan<br> <br> </font> </html> #--MAIL_BODY_HTML_END; #MAIL_HTML; #--PRINT_E_MAIL_PARMS_END; #DKLT_PRINT_DOC_INFO1_BEGIN; select coalesce(oso.e_mail, ''), '', (mtl.subject + ' ' + %objednavka%), case when left(convert(varchar/*BY*/, mtl.body), 1) = '<' then '<html>' else '' end + dba.substitute_fce(mtl.body, '#vs#' + char(4) + %objednavka% + char(4) + %getrowvaluessubst(-1, 1=0, \"#\", \"#\" + char(4), char(4))%, char(4)) + case when left(convert(varchar/*BY*/, mtl.body), 1) = '<' then '</html>' else '' end from dba.op_zahlavi op_zahlavi_0 with(index(pk_op_zahlavi)), dba.op_rady opr with(index(pk_op_rady)), dba.paroso oso with(index(pk_paroso)), dba.kom_mail_templ_lang mtl with(index(pk_kom_mail_templ_lang)) where op_zahlavi_0.doklad > '' and opr.fiskalni_rok = op_zahlavi_0.fiskalni_rok and opr.denik = op_zahlavi_0.denik and opr.rada = op_zahlavi_0.rada and oso.id_partnera = op_zahlavi_0.id_partnera and oso.poradi = op_zahlavi_0.id_par_oso and mtl.kod = opr.kom_mail_templ and mtl.jazyk = dba.kom_mail_templ_lang_fce(mtl.kod, op_zahlavi_0.id_partnera, op_zahlavi_0.id_par_oso) #DKLT_PRINT_DOC_INFO1_END; #PRINT_DOC_ATT1_BEGIN;select tabulka, pk,poradi,pozn,file_name from dba.attach_store, dba.op_zahlavi op_zahlavi_0 with(index(pk_op_zahlavi)) where op_zahlavi_0.doklad = attach_store.pk and attach_store.pk=%doklad% and attach_store.att_class in ('CSV_FILE') and attach_store.tabulka = 'op_zahlavi' and attach_store.pozn = 'NEODESLANO'#PRINT_DOC_ATT1_END; #DKLT_PRINT_MAIL_NO_EXT_INFO; #DKLT_START_TISK; #DKLT_CLOSE_AFTER_TISK; #DOKLTISK_USER_END;;#SETMENUID_END; 7203USER_END 7204ID_MENU=MNID/O_OBJ/202309081105145299701219 7204TYP=SQLCOMMAND 7204USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202309081105145299701219/45/30/0;    #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update  dba.attach_store set pozn = '' from dba.attach_store attach_store with(index(attach_store_pk)),  dba.op_zahlavi op_zahlavi_0 with(index(pk_op_zahlavi)) where op_zahlavi_0.doklad = attach_store.pk and attach_store.tabulka = 'op_zahlavi' and attach_store.pk=%doklad% and attach_store.att_class in ('CSV_FILE') and attach_store.pozn = 'NEODESLANO' #SQLCOMMAND1_END;;#SETMENUID_END; 7204USER_END 73ID_MENU=MNID/O_OBJ/202310241617144140226159 73BUTTON_TITLE=Otevři PDF Výkresy 73TYP=ATTOPEN 73USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//202310241617144140226159/20/30/0;#NOEDIT_EVAL_LEFT=attpocetpdf=0; #BUTTON_COLOR=rgb(141,141,141); #USERSUB1=#XPK=select max(attach_store.link_pk) from dba.attach_store attach_store with(index(pk_attach_store)) where attach_store.pk=%doklad%:NA; #USERSUB2=#XPORPDF=select max(attach_store.poradi) from dba.attach_store attach_store with(index(pk_attach_store)) where attach_store.pk=%doklad% and attach_store.att_class='TPV':NA; #ATT_TABULKA=op_zahlavi; #ATT_PK=#XPK; #ATT_PORADI=#XPORPDF;;#SETMENUID_END; 73USER_END w_ift\tconn\tms_19216810247_karat_termopan 73 w_ift\tf11\tUzivatel/kswpvka AllDevices w_ift\tRefreshObjects\tLIST 200705141135559525303211 w_ift\tPercentOffDWs\tLIST\tdba.op_zahlavi\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.21139.21142.21165 200705141135559525303211\tdba.op_polozky\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.21139.21142.preview.200705141135559525303211.dw w_ift\tpreview1\tPoložky ---Id: 200705141135559525303211 ---UserParam: #TYPE=Button;#ID=200705141135559525303211;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=0;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1; ---Directives: #TYPE=Button;#ID=200705141135559525303211;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=0;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1;#PREVIEW_SEZNAM;#PREVIEW_TABLE=op_polozky;#PREVIEW_SQL_BEGIN;    #NOTAB=op_polozky; select *+^(nazev), op_polozky.nazev AS nazev /* \\:Sop_polozky.nazev:HNázev (položky) */, coalesce(nomenklatura_57444.konfig_typ, '') AS nom_konfig_typ /* \\:Snomenklatura.konfig_typ:NV */, op_zahlavi_45638.id_meny AS op_zahlavi_45638_id_meny /* \\:Sop_zahlavi.id_meny */, op_zahlavi_45638.storno AS op_zahlavi_45638_storno /* \\:Sop_zahlavi.storno:NV */, op_zahlavi_45638.odsouhlaseno AS op_zahlavi_45638_odsouhlaseno /* \\:Sop_zahlavi.odsouhlaseno:NV */, op_zahlavi_45638.id_partnera AS op_zahlavi_45638_id_partnera /* \\:Sop_zahlavi.id_partnera */, op_zahlavi_45638.zkraceny_nazev AS opz_zkracen_nazev /* \\:Sop_zahlavi.zkraceny_nazev */, obj.doklad AS obj_doklad /* \\:Sobj_prv_dkl.doklad:NV */, obj.potvrzeno AS obj_potvrzeno /* \\:Sobj_prv_dkl.potvrzeno:NV */, obj.rezervovat AS obj_rezervovat /* \\:Sobj_prv_dkl.rezervovat:NV */, round(obj.vykr_skl / op_polozky.koef_mj_vyd, 4) AS obj_vykr_skl /* \\:Sobj_prv_dkl.vykr_skl:HVykryto skladem [MJ oper] */, round(obj.vykr_vpr / op_polozky.koef_mj_vyd, 4) AS obj_vykr_vpr /* \\:Sobj_prv_dkl.vykr_vpr:NV */, round(obj.vykr_ov / op_polozky.koef_mj_vyd, 4) AS obj_vykr_ov /* \\:Sobj_prv_dkl.vykr_ov:NV */, round(obj.vykr_nev / op_polozky.koef_mj_vyd, 4) AS obj_vykr_nev /* \\:Sobj_prv_dkl.vykr_nev:NV */, opr.v_zak_denik AS op_rady_8848_v_zak_denik /* \\:Sop_rady.v_zak_denik:NV */, opr.v_zak_rada AS op_rady_8848_v_zak_rada /* \\:Sop_rady.v_zak_rada:NV */, opr.o_kal_denik AS op_rady_8848_o_kal_denik /* \\:Sop_rady.o_kal_denik:NV */, opr.o_kal_rada AS op_rady_8848_o_kal_rada /* \\:Sop_rady.o_kal_rada:NV */, opr.vydej_neods AS op_rady_8848_vydej_neods /* \\:Sop_rady.vydej_neods:NV */, coalesce(op_zahlavi_45638.import, 0) AS opz_import /* \\:Sop_zahlavi.import:NV */, opr.imp_ordrsp_pol_20 AS opr_imp_ordrsp_pol_20 /* \\:Sop_rady.imp_ordrsp_pol_20:NV */, case when exists(select 1 from dba.parcisudaje pu with(index(parcisudaje_typ)) where pu.typ = 'ORDRSP' and pu.id_partnera = op_zahlavi_45638.id_partnera) then 1 else 0 end AS par_export /* \\:Sop_zahlavi.export:NV */ ,op_zahlavi_45638.druh AS op_zahlavi_45638_druh\\:Sop_zahlavi.druh,nomenklatura_57444.nazev AS nomenklatura_57444_nazev\\:Snomenklatura.nazev:HNázev (nomenklatury) from dba.op_polozky op_polozky, dba.op_zahlavi op_zahlavi_45638 with(index(pk_op_zahlavi)), dba.op_rady opr with(index(pk_op_rady)), dba.nomenklatura nomenklatura_57444 with(index(pk_nomenklatura)), dba.obj_prv_dkl obj with(index(pk_obj_prv_dkl)) where op_zahlavi_45638.doklad = op_polozky.doklad and opr.fiskalni_rok = op_zahlavi_45638.fiskalni_rok and opr.denik = op_zahlavi_45638.denik and opr.rada = op_zahlavi_45638.rada and nomenklatura_57444.id_nomen = op_polozky.id_karty and obj.id_modulu = (case when op_polozky.polozka < 29000 and opr.obj_prv_dkl = 1 then 'O_OBJ' else '' end) and obj.agenda = (case when op_polozky.polozka < 29000 and opr.obj_prv_dkl = 1 then 'OP' else '' end) and obj.doklad = (case when op_polozky.polozka < 29000 and opr.obj_prv_dkl = 1 then op_polozky.doklad else '' end) and obj.polozka = (case when op_polozky.polozka < 29000 and opr.obj_prv_dkl = 1 then op_polozky.polozka else 1 end) ORDER BY op_polozky.doklad, op_polozky.id_pol_vys, op_polozky.id_polozky, op_polozky.polozka#PREVIEW_SQL_END;#PREVIEW_WHERE=op_polozky.doklad=%doklad% and ((op_polozky.storno=0 /* storno - nestornované položky */ )) and ((op_zahlavi_45638.storno=0 /* storno_dkl - nestornovaný doklad */ ));#PREVIEW_USER_BEGIN;#PREVIEW_LEGEND=#DOKL_STORNO:Stornovaná položka nebo záhlaví:Fstorno = 1 or op_zahlavi_45638_storno = 1; #PREVIEW_LEGEND=#ODB_SES_NE:Běžné položky:Fid_polozky = 0 and id_pol_vys = 0; #PREVIEW_LEGEND=#ODB_SESTAVA:Sestava:Fid_polozky = 0 and id_pol_vys > 0; #PREVIEW_LEGEND=#ODB_DILY:Díl sestavy:Fid_polozky > 0 and id_pol_vys > 0; #PREVIEW_USER_SEZ_SQL_ADD3000=(select parcis.nazev from dba.parcis parcis with(index(pk_parcis)) where parcis.id_partnera=id_investora) AS investor_nazev /*\\:Sparcis.nazev:HNázev partnera F*/; #PREVIEW_USER_END;#PREVIEW_ID_SAVE=op_polozky;#PREVIEW_SAVE_FILE=O_OBJ;#PREVIEW_NODOLAR;#PREVIEW_TREE=200705141135559525303211;#PREVIEW_ACTION_BEGIN;#PREVIEW_ACTION_NOROW;#PREVIEW_ACTION_TYPE=BUTTON;#PREVIEW_ACTION_BUTTON_MNID=200705141135559525303211;#PREVIEW_ACTION_END;#PREVIEW_NOREFRESH_EVAL=; w_ift\tCurrentPreviewUserParam\t#USR_PREVIEW;#PREVIEW_GRID_ROWS=1;#PREVIEW_GRID_COLS=1;#PREVIEW_VIEW_TAB=0;#PREVIEW_CAN_ADD=1; #USR_PREVIEW1_BEGIN;#TYPE=Button;#ID=200705141135559525303211;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=0;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1;#USR_PREVIEW1_END; w_iftseznam\tsez_tabulka\top_zahlavi w_iftseznam\tlink\tkarat://termopan:@0/mnid/o_obj/200705051639068503094766?where=%28%20op%5fzahlavi%2edoklad%20%3d%20%2724op010100000305%27%20%29&menu=0 w_iftseznam\tsez_sql\t    #NOTAB=op_zahlavi;     select *+,             op_rady.op_denik_pop AS op_rady_8848_op_denik_pop /* \\:NV */,             op_rady.op_rada_pop AS op_rady_8848_op_rada_pop /* \\:NV */,             op_rady.op_denik_nab AS op_rady_8848_op_denik_nab /* \\:NV */,             op_rady.op_rada_nab AS op_rady_8848_op_rada_nab /* \\:NV */,             op_rady.op_denik_op AS op_rady_8848_op_denik_op /* \\:NV */,             op_rady.op_rada_op AS op_rady_8848_op_rada_op /* \\:NV */,             op_rady.op_denik_ov AS op_rady_8848_op_denik_ov /* \\:NV */,             op_rady.op_rada_ov AS op_rady_8848_op_rada_ov /* \\:NV */,             op_rady.op_denik_vl AS op_rady_8848_op_denik_vl /* \\:NV */,             op_rady.op_rada_vl AS op_rady_8848_op_rada_vl /* \\:NV */,             op_rady.op_denik_prev AS op_rady_8848_op_denik_prev /* \\:NV */,             op_rady.op_rada_prev AS op_rady_8848_op_rada_prev /* \\:NV */,             op_rady.denik_posty AS op_rady_8848_denik_posty /* \\:NV */,             op_rady.rada_posty AS op_rady_8848_rada_posty /* \\:NV */,             op_rady.vydej_neods AS op_rady_8848_vydej_neods /* \\:NV */,             op_rady.fv_denik_zal AS op_rady_8848_fv_denik_zal /* \\:NV */,             op_rady.fv_rada_zal AS op_rady_8848_fv_rada_zal /* \\:NV */,             op_rady.zal_fa_nast AS op_rady_8848_zal_fa_nast /* \\:NV */,             op_rady.zal_fa_pocet AS op_rady_8848_zal_fa_pocet /* \\:NV */,             op_rady.tpv_denik_kalk AS op_rady_8848_tpv_denik_kalk /* \\:NV */,             op_rady.tpv_rada_kalk AS op_rady_8848_tpv_rada_kalk /* \\:NV */,             op_rady.v_zak_denik AS op_rady_8848_v_zak_denik /* \\:NV */,             op_rady.v_zak_rada AS op_rady_8848_v_zak_rada /* \\:NV */,             op_rady.op_denik_parag AS op_rady_8848_op_denik_parag /* \\:NV */,             op_rady.op_rada_parag AS op_rady_8848_op_rada_parag /* \\:NV */,             op_rady.parag_zpusob AS op_rady_8848_parag_zpusob /* \\:NV */,             op_rady.imp_ordrsp_dkl_10 AS opr_imp_ordrsp_dkl_10 /* \\:NV */,             op_rady.imp_ordrsp_dkl_20 AS opr_imp_ordrsp_dkl_20 /* \\:NV */,             op_zahlavi.cena_bez_dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS cena_bez_dph_mu /* \\:Sop_zahlavi.cena_bez_dph:HCena bez DPH [MÚ] */,             op_zahlavi.dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS dph_mu /* \\:Sop_zahlavi.dph:HDPH [MÚ] */,             op_zahlavi.cena_celkem * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS cena_celkem_mu /* \\:Sop_zahlavi.cena_celkem:HCena celkem [MÚ] */,             op_zahlavi.castka_zal * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS castka_zal_mu /* \\:Sop_zahlavi.castka_zal:HČástka zálohy [MÚ] */,             #TO_DUAL_ROUND(op_zahlavi.cena_bez_dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS cena_bez_dph_dual /* \\:Sop_zahlavi.cena_bez_dph:HCena bez DPH [MD] */,             #TO_DUAL_ROUND(op_zahlavi.dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS dph_dual /* \\:Sop_zahlavi.dph:HDPH [MD] */,             #TO_DUAL_ROUND(op_zahlavi.cena_celkem * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS cena_celkem_dual /* \\:Sop_zahlavi.cena_celkem:HCena celkem [MD] */,             #TO_DUAL_ROUND(op_zahlavi.castka_zal * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS castka_zal_dual /* \\:Sop_zahlavi.castka_zal:HČástka zálohy [MD] */,             mistni.id_mistni AS id_mistni /* \\:Smenycis_mistni.id_mistni */,             mistni.id_dualni AS id_dualni /* \\:Smenycis_mistni.id_dualni */,             dba.op_zahlavi_vykr_skl_fce(op_zahlavi.doklad) AS vykr_skl /* \\:Sop_zahlavi.vykryto:HSkladem */,             coalesce((select count(1) from dba.op_zahlavi_ver ver with(index(pk_op_zahlavi_ver)) where ver.doklad = op_zahlavi.doklad), 0) + 1 AS pocet_ver /* \\:Sop_zahlavi_ver.ver_poradi:HVerze */,             case when exists(select 1 from dba.parcisudaje pu with(index(parcisudaje_typ)) where pu.typ = 'ORDRSP' and pu.id_partnera = op_zahlavi.id_partnera) then 1 else 0 end AS par_export /* \\:Sop_zahlavi.export:NV */         from dba.op_zahlavi op_zahlavi,             dba.op_rady op_rady with(index(pk_op_rady)),             dba.menycis_mistni mistni with(index(pk_menycis_mistni))         where op_rady.fiskalni_rok = op_zahlavi.fiskalni_rok             and op_rady.denik = op_zahlavi.denik             and op_rady.rada = op_zahlavi.rada             and mistni.fiskalni_rok = op_zahlavi.fiskalni_rok w_iftseznam\tdetail.color\t255 w_iftseznam\tdwselect\tSELECT TOP 351  op_zahlavi.doklad,op_zahlavi.fiskalni_rok,op_zahlavi.denik,op_zahlavi.rada,op_zahlavi.aktualizace,op_zahlavi.druh,op_zahlavi.typ_obj,op_zahlavi.nulove_mnozstvi,op_zahlavi.pravo,op_zahlavi.citac,op_zahlavi.objednavka,op_zahlavi.var_symbol,op_zahlavi.kod_procesu,op_zahlavi.dat_por,op_zahlavi.dat_vyst,op_zahlavi.dat_pri,op_zahlavi.dat_dodani,op_zahlavi.dat_dodani_ods,op_zahlavi.dat_expedice,op_zahlavi.dat_odberu_od,op_zahlavi.dat_odberu_do,op_zahlavi.datum_obj,op_zahlavi.smena,op_zahlavi.dat_vyrizeni,op_zahlavi.fv_denik,op_zahlavi.fv_rada,op_zahlavi.posta_doklad,op_zahlavi.id_partnera,op_zahlavi.kod_partnera,op_zahlavi.ico,op_zahlavi.zkraceny_nazev,op_zahlavi.id_par_oso,op_zahlavi.id_firmy_crm,op_zahlavi.pril_crm,op_zahlavi.stat_urceni,op_zahlavi.id_adresy,op_zahlavi.id_investora,op_zahlavi.id_inv_oso,op_zahlavi.stredisko,op_zahlavi.typ_zakazky,op_zahlavi.zakazka,op_zahlavi.cinnost,op_zahlavi.dealer,op_zahlavi.smlouva,op_zahlavi.polozky_vl,op_zahlavi.pozadavky,op_zahlavi.rez_nahr,op_zahlavi.cena_polozky,op_zahlavi.celni_rezim,op_zahlavi.dph_povaha,op_zahlavi.dan_rezim,op_zahlavi.stat_dph,op_zahlavi.dph_polozky,op_zahlavi.dph_pov_limity,op_zahlavi.kurzovni_listek,op_zahlavi.id_meny,op_zahlavi.mnozstvi,op_zahlavi.kurz,op_zahlavi.typ_uhrady,op_zahlavi.splatnost,op_zahlavi.ds,op_zahlavi.penale_kod,op_zahlavi.penale_proc,op_zahlavi.penale,op_zahlavi.skonto,op_zahlavi.kod_skonta,op_zahlavi.zpusob_dopravy,op_zahlavi.kod_dd,op_zahlavi.kod_dp,op_zahlavi.kod_pt,op_zahlavi.misto_dp,op_zahlavi.cenik,op_zahlavi.rozpad_ob,op_zahlavi.cena_bez_dph,op_zahlavi.dph,op_zahlavi.cena_celkem,op_zahlavi.expedovat_z,op_zahlavi.storno,op_zahlavi.vykryto,op_zahlavi.dodano,op_zahlavi.dodano_predb,op_zahlavi.vyrizeno,op_zahlavi.vyrizeno_kl,op_zahlavi.odeslano,op_zahlavi.moje_id,op_zahlavi.dodanych,op_zahlavi.vyrizenych,op_zahlavi.dod_or_vyr,op_zahlavi.vsech,op_zahlavi.poznamka,op_zahlavi.kod_t_uvod,op_zahlavi.t_uvod,op_zahlavi.kod_t_zaver,op_zahlavi.t_zaver,op_zahlavi.kod_t_uvod_op,op_zahlavi.t_uvod_op,op_zahlavi.kod_t_zaver_op,op_zahlavi.t_zaver_op,op_zahlavi.id_partnera_dop,op_zahlavi.zkraceny_nazev_dop,op_zahlavi.kod_partnera_dop,op_zahlavi.ico_dop,op_zahlavi.id_adresy_dop,op_zahlavi.spz,op_zahlavi.expedice_misto,op_zahlavi.osoba,op_zahlavi.opr_prov,op_zahlavi.id_posty_poz,op_zahlavi.id_posty,op_zahlavi.id_posty_dor,op_zahlavi.id_modulu_gen,op_zahlavi.agenda_gen,op_zahlavi.doklad_gen,op_zahlavi.doklad_obj,op_zahlavi.doklad_fv_zal,op_zahlavi.doklad_vl,op_zahlavi.doklad_prev,op_zahlavi.doklad_fv,op_zahlavi.doklad_zak,op_zahlavi.doklad_kalk,op_zahlavi.doklad_ramc,op_zahlavi.id_partnera_ov,op_zahlavi.doklad_ov,op_zahlavi.cen_spln,op_zahlavi.mat_pozadavky,op_zahlavi.odsouhlaseno,op_zahlavi.plat_podminky,op_zahlavi.tech_provedeni,op_zahlavi.term_spln,op_zahlavi.vyr_kapacita,op_zahlavi.potvrzeno,op_zahlavi.rozvezeno,op_zahlavi.stav,op_zahlavi.storno_autor,op_zahlavi.storno_datum,op_zahlavi.procento_zal,op_zahlavi.castka_zal,op_zahlavi.zal_s_dph,op_zahlavi.elektroodpad,op_zahlavi.ramcovy,op_zahlavi.i_web_id_osoby,op_zahlavi.stav0_autor,op_zahlavi.stav1_autor,op_zahlavi.stav11_autor,op_zahlavi.stav0_datum,op_zahlavi.stav1_datum,op_zahlavi.stav11_datum,op_zahlavi.import,op_zahlavi.export,op_zahlavi.exp_ordrsp_stav_akc,op_zahlavi.zshop_e_mail,op_zahlavi.zshop_dod_adresa,op_zahlavi.zshop_fak_adresa,op_zahlavi.zshop_komplet,op_zahlavi.zshop_objednal,op_zahlavi.zshop_zpusob_odberu,op_zahlavi.zshop_zpusob_platby,op_zahlavi.zshop_e_mail_nad,op_zahlavi.zshop_id_shop,op_zahlavi.zshop_jazyk,op_zahlavi.zshop_http_referer,op_zahlavi.zshop_elp_id,op_zahlavi.zshop_elp_status,op_zahlavi.zshop_vs,op_zahlavi.zshop_uz_id,op_zahlavi.zshop_uz_name,op_zahlavi.zshop_uz_country,op_zahlavi.autor,op_zahlavi.ts,op_zahlavi.user_kod_vyr,op_zahlavi.user_kod_vysobj,op_zahlavi.user_kod_dodadr,op_zahlavi.user_obj_nakup,op_zahlavi.user_obj_vyst,op_zahlavi.user_dod_adr,op_zahlavi.user_dat_vyst_zd,op_zahlavi.user_kodkz,op_zahlavi.user_vyr_poznamka,op_zahlavi.user_sleva_odb,op_zahlavi.user_hmotnost_dkl,op_zahlavi.user_objem_dkl,op_zahlavi.user_cena_mat,isnull(op_zahlavi.xattach,0) xattach,             op_rady.op_denik_pop op_rady_8848_op_denik_pop ,             op_rady.op_rada_pop op_rady_8848_op_rada_pop ,             op_rady.op_denik_nab op_rady_8848_op_denik_nab ,             op_rady.op_rada_nab op_rady_8848_op_rada_nab ,             op_rady.op_denik_op op_rady_8848_op_denik_op ,             op_rady.op_rada_op op_rady_8848_op_rada_op ,             op_rady.op_denik_ov op_rady_8848_op_denik_ov ,             op_rady.op_rada_ov op_rady_8848_op_rada_ov ,             op_rady.op_denik_vl op_rady_8848_op_denik_vl ,             op_rady.op_rada_vl op_rady_8848_op_rada_vl ,             op_rady.op_denik_prev op_rady_8848_op_denik_prev ,             op_rady.op_rada_prev op_rady_8848_op_rada_prev ,             op_rady.denik_posty op_rady_8848_denik_posty ,             op_rady.rada_posty op_rady_8848_rada_posty ,             op_rady.vydej_neods op_rady_8848_vydej_neods ,             op_rady.fv_denik_zal op_rady_8848_fv_denik_zal ,             op_rady.fv_rada_zal op_rady_8848_fv_rada_zal ,             op_rady.zal_fa_nast op_rady_8848_zal_fa_nast ,             op_rady.zal_fa_pocet op_rady_8848_zal_fa_pocet ,             op_rady.tpv_denik_kalk op_rady_8848_tpv_denik_kalk ,             op_rady.tpv_rada_kalk op_rady_8848_tpv_rada_kalk ,             op_rady.v_zak_denik op_rady_8848_v_zak_denik ,             op_rady.v_zak_rada op_rady_8848_v_zak_rada ,             op_rady.op_denik_parag op_rady_8848_op_denik_parag ,             op_rady.op_rada_parag op_rady_8848_op_rada_parag ,             op_rady.parag_zpusob op_rady_8848_parag_zpusob ,             op_rady.imp_ordrsp_dkl_10 opr_imp_ordrsp_dkl_10 ,             op_rady.imp_ordrsp_dkl_20 opr_imp_ordrsp_dkl_20 ,             op_zahlavi.cena_bez_dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) cena_bez_dph_mu ,             op_zahlavi.dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) dph_mu ,             op_zahlavi.cena_celkem * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) cena_celkem_mu ,             op_zahlavi.castka_zal * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) castka_zal_mu ,             convert(decimal(18, 2)/*BY*/, round( case when  mistni.koef_na_dual > 0 then (op_zahlavi.cena_bez_dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) *  mistni.koef_na_dual when  mistni.koef_na_mistni > 0 then (op_zahlavi.cena_bez_dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) / (case when  mistni.koef_na_mistni <> 0 then  mistni.koef_na_mistni else 1 end) else 0 end,  2)) cena_bez_dph_dual ,             convert(decimal(18, 2)/*BY*/, round( case when  mistni.koef_na_dual > 0 then (op_zahlavi.dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) *  mistni.koef_na_dual when  mistni.koef_na_mistni > 0 then (op_zahlavi.dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) / (case when  mistni.koef_na_mistni <> 0 then  mistni.koef_na_mistni else 1 end) else 0 end,  2)) dph_dual ,             convert(decimal(18, 2)/*BY*/, round( case when  mistni.koef_na_dual > 0 then (op_zahlavi.cena_celkem * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) *  mistni.koef_na_dual when  mistni.koef_na_mistni > 0 then (op_zahlavi.cena_celkem * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) / (case when  mistni.koef_na_mistni <> 0 then  mistni.koef_na_mistni else 1 end) else 0 end,  2)) cena_celkem_dual ,             convert(decimal(18, 2)/*BY*/, round( case when  mistni.koef_na_dual > 0 then (op_zahlavi.castka_zal * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) *  mistni.koef_na_dual when  mistni.koef_na_mistni > 0 then (op_zahlavi.castka_zal * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) / (case when  mistni.koef_na_mistni <> 0 then  mistni.koef_na_mistni else 1 end) else 0 end,  2)) castka_zal_dual ,             mistni.id_mistni id_mistni ,             mistni.id_dualni id_dualni ,             dba.op_zahlavi_vykr_skl_fce(op_zahlavi.doklad) vykr_skl ,             isnull((select count(1) from dba.op_zahlavi_ver ver with(index(pk_op_zahlavi_ver)) where ver.doklad = op_zahlavi.doklad), 0) + 1 pocet_ver ,             case when 1 in(select 1 from dba.parcisudaje pu with(index(parcisudaje_typ)) where pu.typ = 'ORDRSP' and pu.id_partnera = op_zahlavi.id_partnera) then 1 else 0 end par_export          ,(select count(op_polozky.user_vyrobeno) from dba.op_polozky op_polozky with(index(pk_op_polozky)) where op_polozky.doklad = op_zahlavi.doklad and op_polozky.user_vyrobeno=1 and left(op_polozky.karta,1)<>'S') vyrobeno  ,(select count(op_polozky.karta) from dba.op_polozky op_polozky with(index(pk_op_polozky)) where op_polozky.doklad = op_zahlavi.doklad and left(op_polozky.karta,1)<>'S') pol_k_vyr  ,(select parcis.nazev from dba.parcis parcis with(index(pk_parcis)) where parcis.id_partnera=op_zahlavi.id_investora) investor_nazev  ,(select count(attach_store.poradi) from dba.attach_store attach_store with(index(pk_attach_store)) where attach_store.pk=op_zahlavi.doklad and attach_store.att_class='TPV') attpocetpdf from dba.op_zahlavi op_zahlavi with(index(op_zahlavi_fr)) , dba.op_rady op_rady with(index(pk_op_rady)) , dba.menycis_mistni mistni with(index(pk_menycis_mistni)) where op_rady.fiskalni_rok = op_zahlavi.fiskalni_rok             and op_rady.denik = op_zahlavi.denik             and op_rady.rada = op_zahlavi.rada             and mistni.fiskalni_rok = op_zahlavi.fiskalni_rok  AND (op_zahlavi.druh = 30 /* sez_podm */) AND ( op_zahlavi.fiskalni_rok=/*apb863*/'24'/*ape863*/ AND (op_zahlavi.doklad + '') <> '' /* blankrec */) AND (((op_zahlavi.storno <> 1 /* storno - nestornované */ )) /* combo5 */ )    ORDER BY op_zahlavi.fiskalni_rok DESC,op_zahlavi.denik DESC,op_zahlavi.rada DESC,op_zahlavi.citac DESC,op_zahlavi.doklad DESC,op_zahlavi.dodano DESC,op_zahlavi.vyrizeno DESC,op_zahlavi.storno DESC OPTION(fast 350) /* seznam op_zahlavi A/O_OBJ/op_zahlavi/200705051639068503094766/10/40/0 */ w_iftseznam\tdwcolumns\tdoklad,fiskalni_rok,denik,rada,aktualizace,druh,typ_obj,nulove_mnozstvi,pravo,citac,objednavka,var_symbol,kod_procesu,dat_por,dat_vyst,dat_pri,dat_dodani,dat_dodani_ods,dat_expedice,dat_odberu_od,dat_odberu_do,datum_obj,smena,dat_vyrizeni,fv_denik,fv_rada,posta_doklad,id_partnera,kod_partnera,ico,zkraceny_nazev,id_par_oso,id_firmy_crm,pril_crm,stat_urceni,id_adresy,id_investora,id_inv_oso,stredisko,typ_zakazky,zakazka,cinnost,dealer,smlouva,polozky_vl,pozadavky,rez_nahr,cena_polozky,celni_rezim,dph_povaha,dan_rezim,stat_dph,dph_polozky,dph_pov_limity,kurzovni_listek,id_meny,mnozstvi,kurz,typ_uhrady,splatnost,ds,penale_kod,penale_proc,penale,skonto,kod_skonta,zpusob_dopravy,kod_dd,kod_dp,kod_pt,misto_dp,cenik,rozpad_ob,cena_bez_dph,dph,cena_celkem,expedovat_z,storno,vykryto,dodano,dodano_predb,vyrizeno,vyrizeno_kl,odeslano,moje_id,dodanych,vyrizenych,dod_or_vyr,vsech,poznamka,kod_t_uvod,t_uvod,kod_t_zaver,t_zaver,kod_t_uvod_op,t_uvod_op,kod_t_zaver_op,t_zaver_op,id_partnera_dop,zkraceny_nazev_dop,kod_partnera_dop,ico_dop,id_adresy_dop,spz,expedice_misto,osoba,opr_prov,id_posty_poz,id_posty,id_posty_dor,id_modulu_gen,agenda_gen,doklad_gen,doklad_obj,doklad_fv_zal,doklad_vl,doklad_prev,doklad_fv,doklad_zak,doklad_kalk,doklad_ramc,id_partnera_ov,doklad_ov,cen_spln,mat_pozadavky,odsouhlaseno,plat_podminky,tech_provedeni,term_spln,vyr_kapacita,potvrzeno,rozvezeno,stav,storno_autor,storno_datum,procento_zal,castka_zal,zal_s_dph,elektroodpad,ramcovy,i_web_id_osoby,stav0_autor,stav1_autor,stav11_autor,stav0_datum,stav1_datum,stav11_datum,import,export,exp_ordrsp_stav_akc,zshop_e_mail,zshop_dod_adresa,zshop_fak_adresa,zshop_komplet,zshop_objednal,zshop_zpusob_odberu,zshop_zpusob_platby,zshop_e_mail_nad,zshop_id_shop,zshop_jazyk,zshop_http_referer,zshop_elp_id,zshop_elp_status,zshop_vs,zshop_uz_id,zshop_uz_name,zshop_uz_country,autor,ts,user_kod_vyr,user_kod_vysobj,user_kod_dodadr,user_obj_nakup,user_obj_vyst,user_dod_adr,user_dat_vyst_zd,user_kodkz,user_vyr_poznamka,user_sleva_odb,user_hmotnost_dkl,user_objem_dkl,user_cena_mat,xattach,op_rady_8848_op_denik_pop,op_rady_8848_op_rada_pop,op_rady_8848_op_denik_nab,op_rady_8848_op_rada_nab,op_rady_8848_op_denik_op,op_rady_8848_op_rada_op,op_rady_8848_op_denik_ov,op_rady_8848_op_rada_ov,op_rady_8848_op_denik_vl,op_rady_8848_op_rada_vl,op_rady_8848_op_denik_prev,op_rady_8848_op_rada_prev,op_rady_8848_denik_posty,op_rady_8848_rada_posty,op_rady_8848_vydej_neods,op_rady_8848_fv_denik_zal,op_rady_8848_fv_rada_zal,op_rady_8848_zal_fa_nast,op_rady_8848_zal_fa_pocet,op_rady_8848_tpv_denik_kalk,op_rady_8848_tpv_rada_kalk,op_rady_8848_v_zak_denik,op_rady_8848_v_zak_rada,op_rady_8848_op_denik_parag,op_rady_8848_op_rada_parag,op_rady_8848_parag_zpusob,opr_imp_ordrsp_dkl_10,opr_imp_ordrsp_dkl_20,cena_bez_dph_mu,dph_mu,cena_celkem_mu,castka_zal_mu,cena_bez_dph_dual,dph_dual,cena_celkem_dual,castka_zal_dual,id_mistni,id_dualni,vykr_skl,pocet_ver,par_export,vyrobeno,pol_k_vyr,investor_nazev,attpocetpdf,xremind w_iftseznam\tdwcolumns_visible\tstav0_autor,xattach_bmp,doklad,potvrzeno,objednavka,user_obj_nakup,odsouhlaseno,vykryto,vykr_skl,dodano,dodano_predb,vyrizeno,vyrizeno_kl,storno,dat_pri,dat_dodani,dat_expedice,zkraceny_nazev,user_kodkz,cena_bez_dph,dph,cena_celkem,castka_zal,id_meny,kod_procesu,dat_vyrizeni,druh,pocet_ver,ramcovy,dat_odberu_od,dat_odberu_do,cenik,posta_doklad,id_partnera,kod_partnera,ico,id_adresy,id_par_oso,id_investora,id_inv_oso,id_firmy_crm,pril_crm,smlouva,zpusob_dopravy,id_partnera_dop,stat_urceni,zkraceny_nazev_dop,ico_dop,kod_partnera_dop,id_adresy_dop,spz,kod_dp,misto_dp,dan_rezim,stredisko,typ_zakazky,zakazka,cinnost,dealer,celni_rezim,kurzovni_listek,mnozstvi,dph_povaha,stat_dph,kurz,typ_uhrady,splatnost,ds,penale,penale_kod,penale_proc,dodanych,vyrizenych,dod_or_vyr,kod_dd,poznamka,kod_pt,osoba,id_modulu_gen,agenda_gen,doklad_gen,doklad_prev,doklad_obj,doklad_zak,doklad_kalk,kod_t_uvod,t_uvod,kod_t_zaver,t_zaver,cen_spln,mat_pozadavky,plat_podminky,tech_provedeni,term_spln,vyr_kapacita,smena,typ_obj,dph_polozky,pozadavky,rez_nahr,cena_polozky,polozky_vl,aktualizace,nulove_mnozstvi,rozpad_ob,elektroodpad,expedice_misto,expedovat_z,id_partnera_ov,opr_prov,dat_por,storno_autor,storno_datum,id_mistni,cena_bez_dph_mu,dph_mu,cena_celkem_mu,castka_zal_mu,id_dualni,cena_bez_dph_dual,dph_dual,cena_celkem_dual,castka_zal_dual,autor,ts,var_symbol,dat_vyst,dat_dodani_ods,datum_obj,dph_pov_limity,skonto,kod_skonta,odeslano,kod_t_uvod_op,t_uvod_op,kod_t_zaver_op,t_zaver_op,id_posty_poz,id_posty,id_posty_dor,doklad_ramc,i_web_id_osoby,stav1_autor,stav11_autor,stav0_datum,stav1_datum,stav11_datum,import,export,exp_ordrsp_stav_akc,zshop_e_mail,zshop_dod_adresa,zshop_fak_adresa,zshop_komplet,zshop_objednal,zshop_zpusob_odberu,zshop_zpusob_platby,zshop_e_mail_nad,zshop_id_shop,zshop_jazyk,zshop_http_referer,zshop_elp_id,zshop_elp_status,zshop_vs,zshop_uz_id,zshop_uz_name,zshop_uz_country,user_kod_vyr,user_kod_vysobj,user_kod_dodadr,user_obj_vyst,user_dod_adr,user_dat_vyst_zd,xremind_bmp,user_vyr_poznamka,user_sleva_odb,investor_nazev,user_hmotnost_dkl,user_objem_dkl,opattpdf,user_cena_mat 0\tstav0_autor\t56 1\txattach_bmp\t18 2\tdoklad\t110 3\tpotvrzeno\t28 4\tobjednavka\t110 5\tuser_obj_nakup\t166 6\todsouhlaseno\t28 7\tvykryto\t28 8\tvykr_skl\t28 9\tdodano\t28 10\tdodano_predb\t31 11\tvyrizeno\t28 12\tvyrizeno_kl\t28 13\tstorno\t28 14\tdat_pri\t69 15\tdat_dodani\t69 16\tdat_expedice\t69 17\tzkraceny_nazev\t161 18\tuser_kodkz\t153 19\tcena_bez_dph\t116 20\tdph\t92 21\tcena_celkem\t99 22\tcastka_zal\t100 23\tid_meny\t46 24\tkod_procesu\t69 25\tdat_vyrizeni\t83 26\tdruh\t69 27\tpocet_ver\t71 28\tramcovy\t57 29\tdat_odberu_od\t69 30\tdat_odberu_do\t69 31\tcenik\t110 32\tposta_doklad\t110 33\tid_partnera\t70 34\tkod_partnera\t77 35\tico\t69 36\tid_adresy\t56 37\tid_par_oso\t156 38\tid_investora\t100 39\tid_inv_oso\t175 40\tid_firmy_crm\t105 41\tpril_crm\t80 42\tsmlouva\t133 43\tzpusob_dopravy\t115 44\tid_partnera_dop\t94 45\tstat_urceni\t132 46\tzkraceny_nazev_dop\t171 47\tico_dop\t100 48\tkod_partnera_dop\t99 49\tid_adresy_dop\t139 50\tspz\t133 51\tkod_dp\t81 52\tmisto_dp\t167 53\tdan_rezim\t170 54\tstredisko\t65 55\ttyp_zakazky\t71 56\tzakazka\t185 57\tcinnost\t85 58\tdealer\t85 59\tcelni_rezim\t222 60\tkurzovni_listek\t87 61\tmnozstvi\t158 62\tdph_povaha\t152 63\tstat_dph\t132 64\tkurz\t101 65\ttyp_uhrady\t49 66\tsplatnost\t81 67\tds\t207 68\tpenale\t69 69\tpenale_kod\t66 70\tpenale_proc\t100 71\tdodanych\t125 72\tvyrizenych\t150 73\tdod_or_vyr\t192 74\tkod_dd\t132 75\tpoznamka\t253 76\tkod_pt\t152 77\tosoba\t69 78\tid_modulu_gen\t82 79\tagenda_gen\t90 80\tdoklad_gen\t146 81\tdoklad_prev\t117 82\tdoklad_obj\t155 83\tdoklad_zak\t105 84\tdoklad_kalk\t156 85\tkod_t_uvod\t140 86\tt_uvod\t257 87\tkod_t_zaver\t158 88\tt_zaver\t257 89\tcen_spln\t121 90\tmat_pozadavky\t131 91\tplat_podminky\t109 92\ttech_provedeni\t124 93\tterm_spln\t140 94\tvyr_kapacita\t101 95\tsmena\t91 96\ttyp_obj\t90 97\tdph_polozky\t120 98\tpozadavky\t66 99\trez_nahr\t99 100\tcena_polozky\t61 101\tpolozky_vl\t72 102\taktualizace\t104 103\tnulove_mnozstvi\t108 104\trozpad_ob\t100 105\telektroodpad\t107 106\texpedice_misto\t114 107\texpedovat_z\t42 108\tid_partnera_ov\t113 109\topr_prov\t92 110\tdat_por\t90 111\tstorno_autor\t70 112\tstorno_datum\t133 113\tid_mistni\t82 114\tcena_bez_dph_mu\t109 115\tdph_mu\t87 116\tcena_celkem_mu\t99 117\tcastka_zal_mu\t104 118\tid_dualni\t82 119\tcena_bez_dph_dual\t109 120\tdph_dual\t87 121\tcena_celkem_dual\t99 122\tcastka_zal_dual\t104 123\tautor\t55 124\tts\t126 125\tvar_symbol\t84 126\tdat_vyst\t97 127\tdat_dodani_ods\t161 128\tdatum_obj\t160 129\tdph_pov_limity\t240 130\tskonto\t46 131\tkod_skonta\t153 132\todeslano\t60 133\tkod_t_uvod_op\t152 134\tt_uvod_op\t454 135\tkod_t_zaver_op\t169 136\tt_zaver_op\t454 137\tid_posty_poz\t150 138\tid_posty\t131 139\tid_posty_dor\t141 140\tdoklad_ramc\t123 141\ti_web_id_osoby\t98 142\tstav1_autor\t56 143\tstav11_autor\t71 144\tstav0_datum\t147 145\tstav1_datum\t147 146\tstav11_datum\t147 147\timport\t92 148\texport\t97 149\texp_ordrsp_stav_akc\t92 150\tzshop_e_mail\t454 151\tzshop_dod_adresa\t85 152\tzshop_fak_adresa\t103 153\tzshop_komplet\t61 154\tzshop_objednal\t454 155\tzshop_zpusob_odberu\t90 156\tzshop_zpusob_platby\t84 157\tzshop_e_mail_nad\t454 158\tzshop_id_shop\t79 159\tzshop_jazyk\t37 160\tzshop_http_referer\t454 161\tzshop_elp_id\t454 162\tzshop_elp_status\t100 163\tzshop_vs\t100 164\tzshop_uz_id\t304 165\tzshop_uz_name\t454 166\tzshop_uz_country\t454 167\tuser_kod_vyr\t123 168\tuser_kod_vysobj\t153 169\tuser_kod_dodadr\t169 170\tuser_obj_vyst\t153 171\tuser_dod_adr\t379 172\tuser_dat_vyst_zd\t161 173\txremind_bmp\t18 174\tuser_vyr_poznamka\t454 175\tuser_sleva_odb\t90 176\tinvestor_nazev\t454 177\tuser_hmotnost_dkl\t161 178\tuser_objem_dkl\t143 179\topattpdf\t53 180\tuser_cena_mat\t127 w_iftseznam\tdwcolumns_invisible\tfiskalni_rok,denik,rada,pravo,citac,fv_denik,fv_rada,id_par_oso_sum,pril_crm_sum,id_adresy_sum,id_inv_oso_sum,mnozstvi_sum,kurz_sum,splatnost_sum,penale_proc_sum,cena_bez_dph_sum,dph_sum,cena_celkem_sum,moje_id,moje_id_sum,dodanych_sum,vyrizenych_sum,dod_or_vyr_sum,vsech,vsech_sum,id_adresy_dop_sum,id_posty_poz_sum,doklad_fv_zal,doklad_vl,doklad_fv,doklad_ov,rozvezeno,stav,procento_zal,procento_zal_sum,castka_zal_sum,zal_s_dph,user_hmotnost_dkl_sum,user_objem_dkl_sum,user_cena_mat_sum,xattach,op_rady_8848_op_denik_pop,op_rady_8848_op_rada_pop,op_rady_8848_op_denik_nab,op_rady_8848_op_rada_nab,op_rady_8848_op_denik_op,op_rady_8848_op_rada_op,op_rady_8848_op_denik_ov,op_rady_8848_op_rada_ov,op_rady_8848_op_denik_vl,op_rady_8848_op_rada_vl,op_rady_8848_op_denik_prev,op_rady_8848_op_rada_prev,op_rady_8848_denik_posty,op_rady_8848_rada_posty,op_rady_8848_vydej_neods,op_rady_8848_fv_denik_zal,op_rady_8848_fv_rada_zal,op_rady_8848_zal_fa_nast,op_rady_8848_zal_fa_pocet,op_rady_8848_tpv_denik_kalk,op_rady_8848_tpv_rada_kalk,op_rady_8848_v_zak_denik,op_rady_8848_v_zak_rada,op_rady_8848_op_denik_parag,op_rady_8848_op_rada_parag,op_rady_8848_parag_zpusob,opr_imp_ordrsp_dkl_10,opr_imp_ordrsp_dkl_20,cena_bez_dph_mu_sum,dph_mu_sum,cena_celkem_mu_sum,castka_zal_mu_sum,cena_bez_dph_dual_sum,dph_dual_sum,cena_celkem_dual_sum,castka_zal_dual_sum,par_export,vyrobeno,vyrobeno_sum,pol_k_vyr,pol_k_vyr_sum,attpocetpdf,attpocetpdf_sum,xremind w_iftseznam\tid_save\to_obj/op_zahlavi w_iftseznam\tfirstuser\t;#SETMENUID=A/O_OBJ/op_zahlavi/200705051639068503094766/10/40/0;    #XSUB=\\AKCE^OBJ; #MNUMAKCE=200705051639068503094766;;#SETMENUID_END;; #WORKSPACE_TITLE_BEGIN;Objednávky přijaté#WORKSPACE_TITLE_END;; #WORKSPACE_MODULE=O_OBJ;; #WORKSPACE_MNID=200705051639068503094766;;;#SETMENUID=O/O_OBJ/10/op_zahlavi//200705141135552301933414/15/40/0;    #ENAB_ADD_IN_VIEW; #HIDEBLANKREC; #STANDARDSORT; #TL_FUNKCE_SEZNAM; #COMBO_ID1=stav; #COLUMN1=-; #POLOZKY1=Nepřístupné\\1\\op_zahlavi.opr_prov = 0^Přístupné\\2\\op_zahlavi.opr_prov = 1^Vyřízeno\\3\\(op_zahlavi.vyrizeno = 1 or op_zahlavi.vyrizeno_kl = 1)^Odsouhlaseno\\4\\op_zahlavi.odsouhlaseno = 1^Nevyřízeno\\5\\(op_zahlavi.vyrizeno = 0 and op_zahlavi.vyrizeno_kl = 0)^Neodsouhlaseno\\6\\op_zahlavi.odsouhlaseno = 0; #POPISBEZ1=Stav; #COMBO_ID2=vykryto; #COLUMN2=; #POLOZKY2=Vůbec\\0\\op_zahlavi.vykryto = 0 and op_zahlavi.vyrizeno <> 1^Nevykryto\\4\\op_zahlavi.vykryto <> 1 and op_zahlavi.vyrizeno <> 1^Vykryto částečně\\2\\op_zahlavi.vykryto = 2 and op_zahlavi.vyrizeno <> 1^Vykryto\\1\\op_zahlavi.vykryto = 1 or op_zahlavi.vyrizeno = 1; #POPISBEZ2=Vykryto; #COMBO_ID3=dodano; #COLUMN3=-; #POLOZKY3=Vůbec\\0\\op_zahlavi.dodano = 0 and op_zahlavi.vyrizeno_kl <> 1^Částečně\\1\\op_zahlavi.dodano = 2 and op_zahlavi.vyrizeno_kl <> 1^Nedodané\\2\\op_zahlavi.dodano in (0, 2) and op_zahlavi.vyrizeno_kl <> 1^Zcela dodané\\3\\op_zahlavi.dodano = 1^Vyřízené ručně\\4\\op_zahlavi.vyrizeno_kl = 1; #POPISBEZ3=Dodáno; #COMBO_ID4=dodano_predb; #COLUMN4=coalesce(op_zahlavi.dodano_predb, 0); #POLOZKY4=Předběžně dodáno NE\\0^Předběžně dodáno ANO\\1^Předběžně dodáno ČÁSTEČNĚ\\2; #POPISBEZ4=Předběžně dodáno; #COMBO_ID5=storno; #COLUMN5=-; #POLOZKY5=Nestornované\\1\\op_zahlavi.storno <> 1^Stornované\\2\\op_zahlavi.storno = 1; #POPISBEZ5=Storno; #DEFAULT5=1; #COMBO_ID6=dopravce; #COLUMN6=-; #POLOZKY6=Bez dopravce\\1\\op_zahlavi.id_partnera_dop = ''^S dopravcem\\2\\op_zahlavi.id_partnera_dop <> ''; #POPISBEZ6=Dopravce; #COMBO_ID7=spz; #COLUMN7=-; #POLOZKY7=Bez SPZ\\1\\op_zahlavi.spz = ''^S SPZ\\2\\op_zahlavi.spz <> ''; #POPISBEZ7=SPZ; #COMBO_ID8=doklad_fv_zal; #COLUMN8=-; #POLOZKY8=Bez zálohové FV\\1\\op_zahlavi.doklad_fv_zal = ''^Se zálohovou FV\\2\\op_zahlavi.doklad_fv_zal <> ''; #POPISBEZ8=Zálohová FV; #COMBO_ID9=ramcovy; #COLUMN9=coalesce(op_zahlavi.ramcovy, 0); #POLOZKY9=Rámcový doklad\\1^Běžný doklad\\0; #POPISBEZ9=Rámcový doklad; #COMBO_ID10=expedovat; #COLUMN10=op_zahlavi.expedovat_z; #POLOZKY10=Expedovat\\1^Neexpedovat\\0; #POPISBEZ10=Expedovat; #COMBO_ID11=id_meny; #COLUMN11=op_zahlavi.id_meny; #POLOZKY11=select mena.id_meny, '', 'op_zahlavi.id_meny = ' + char(39) + mena.id_meny + char(39) from dba.menycis mena with(index(pk_menycis)) where mena.id_meny <> '' order by mena.id_meny; #POPISBEZ11=Měna; #COMBO_BEGIN; #COMBO_ID=export; #COLUMN=coalesce(op_zahlavi.export, 0); #POLOZKY=Ne\\0^Exportovat\\1^Exportováno\\2; #POPISBEZ=Exportovat potvrzení; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=neex_vpr; #COLUMN=-; #POLOZKY=Neexistuje výrobní pŕíkaz\\0\\op_rady.v_zak_denik <> '' and op_rady.v_zak_rada <> '' and op_zahlavi.storno = 0 and op_zahlavi.druh = 30 and ((op_zahlavi.potvrzeno = 1 and coalesce(op_rady.vydej_neods, 0) = 2) or (op_zahlavi.odsouhlaseno = 1 and coalesce(op_rady.vydej_neods, 0) = 0) or coalesce(op_rady.vydej_neods, 0) = 1) and exists(select 1 from dba.op_polozky opp with(index(pk_op_polozky)) where opp.doklad = op_zahlavi.doklad and opp.typ_polozky in (3, 7, 15) and opp.storno = 0 and opp.vyrizeno = 0 and opp.vykryto in (0, 2) and not exists(select 1 from dba.v_opv opv with(index(v_opv_objed)), dba.v_opvz opvz with(index(pk_v_opvz)) where opv.objednavka = opp.doklad and opv.polobj = opp.polozka and opvz.doklad = opv.doklad and opvz.storno = 0))^; #POPISBEZ=Existence výrobního příkazu; #COMBO_VISIBLE=islicmodul('V_ZAK'); #COMBO_END; #COMBO_BEGIN; #COMBO_ID=nedodano_dnes; #COLUMN=-; #POLOZKY=Vůbec, po termínu dodání\\0\\op_zahlavi.dodano = 0 and op_zahlavi.vyrizeno_kl <> 1 and op_zahlavi.dat_dodani < getdate()^Částečně, po termínu dodání\\1\\op_zahlavi.dodano = 2 and op_zahlavi.vyrizeno_kl <> 1 and op_zahlavi.dat_dodani < getdate()^Nedodané, po termínu dodání\\2\\op_zahlavi.dodano in (0, 2) and op_zahlavi.vyrizeno_kl <> 1 and op_zahlavi.dat_dodani < getdate(); #POPISBEZ=Nedodané po termínu dodání; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=nedodano_ods; #COLUMN=-; #POLOZKY=Vůbec, po původním termínu dodání\\0\\op_zahlavi.dodano = 0 and op_zahlavi.vyrizeno_kl <> 1 and coalesce(nullif(op_zahlavi.dat_dodani_ods, convert(#BY(datumy.datum), '1901-01-01')), op_zahlavi.dat_dodani) < getdate()^Částečně, po původním termínu dodání\\1\\op_zahlavi.dodano = 2 and op_zahlavi.vyrizeno_kl <> 1 and coalesce(nullif(op_zahlavi.dat_dodani_ods, convert(#BY(datumy.datum), '1901-01-01')), op_zahlavi.dat_dodani) < getdate()^Nedodané, po původním termínu dodání\\2\\op_zahlavi.dodano in (0, 2) and op_zahlavi.vyrizeno_kl <> 1 and coalesce(nullif(op_zahlavi.dat_dodani_ods, convert(#BY(datumy.datum), '1901-01-01')), op_zahlavi.dat_dodani) < getdate(); #POPISBEZ=Nedodané po původním termínu dodání; #COMBO_END; #NO_DOKLAD_LEGEND; #LEGEND=#DOKL_STORNO:Stornovaný doklad:Fstorno = 1; #LEGEND=#DOKL_UZAV:Vyřízený doklad:Fvyrizeno = 1; #LEGEND=#O_OBJ_VYKR_SKL:Doklad vykrytý skladem:Fvykr_skl = 1; #LEGEND=#DOKL_SCHVAL:Vykrytý doklad:Fvykryto = 1; #LEGEND=#O_OBJ_ODS:Odsouhlasený doklad:Fodsouhlaseno = 1; #LEGEND=#O_OBJ_POT:Potvrzený doklad:Fpotvrzeno = 1; #LEGEND=#O_OBJ_NEPOT:Nepotvrzený doklad:Fpotvrzeno = 0;;#SETMENUID_END;;;#SETMENUID=O/O_OBJ/10/op_zahlavi//202307031504083938379356/15/30/0;#DO_SEZ_SQL; #SEZ_SQL_ADD3000=(select count(op_polozky.user_vyrobeno) from dba.op_polozky op_polozky with(index(pk_op_polozky)) where op_polozky.doklad = op_zahlavi.doklad and op_polozky.user_vyrobeno=1 and left(op_polozky.karta,1)<>'S') AS vyrobeno /*\\:Sop_zahlavi.dodanych:HVyrobeno:NV*/; #SEZ_SQL_ADD3001=(select count(op_polozky.karta) from dba.op_polozky op_polozky with(index(pk_op_polozky)) where op_polozky.doklad = op_zahlavi.doklad and left(op_polozky.karta,1)<>'S') AS pol_k_vyr /*\\:Sop_zahlavi.dodanych:HPoložek k vyrobě:NV*/; #SEZ_SQL_ADD3002=(select parcis.nazev from dba.parcis parcis with(index(pk_parcis)) where parcis.id_partnera=op_zahlavi.id_investora) AS investor_nazev /*\\:Sparcis.nazev:HNázev partnera F*/; #SEZ_SQL_ADD3003=(select count(attach_store.poradi) from dba.attach_store attach_store with(index(pk_attach_store)) where attach_store.pk=op_zahlavi.doklad and attach_store.att_class='TPV') AS attpocetpdf/*\\:Sattach_access.id:HA-pdf:NV*/; #COMPUTEADD3000=opattpdf=bitmap(case(attpocetpdf when 0 then '' else 'path(PathAttachLevelStatus8),color(20),tooltip(PDF příloha OP)')):HA-OP pdf:F:NS; #LEGEND=rgb(30,144,255):Všechny položky vyrobeny:F1:vyrobeno=pol_k_vyr and pol_k_vyr > 0 and op_zahlavi.doklad_vl = '';;#SETMENUID_END;;#ALL_ADD_TYPES=SEZNAM_op_zahlavi,;;#SEZNAM_DOKLAD; #STANDARDSORT;#HIDEBLANKREC;#ENAB_ADD_IN_VIEW;#ENAB_DELETE_IN_VIEW;#ENAB_FAST_PREV_IN_VIEW;#SEZ_SQL_SLOUPCEADD;#SEZ_SQL_COMPUTEADD; w_iftseznam\tmaxrows\t350 w_iftseznam\tstorage\t293 074 w_iftseznam\tsorting w_iftseznam\tadd_sorting\tfiskalni_rok A,denik A,rada A,citac A,doklad A,dodano A,vyrizeno A,storno A, ------------------------------- Workspace: Rozpad dílců (V_TPV/202311150958528994779223) Window: Seznam Rozpad dílců (V_TPV enabled visible c__w_iftseznam tab=user_rozpad_dilcu) w_ift\tclassname\tw_iftseznam w_ift\tclasses\t.object.karatbaseobject.karatobject.karatcontrol.karatwindow.c__w_ift.c__w_filter_parent.c__w_iftseznam w_ift\tlink\tkarat://termopan:@0/mnid/v_tpv/202311150958528994779223?menu=0&nss=0 w_ift\tparametr ID_MENU=MNID/V_TPV/202311150958528994779223 TYP=SEZNAM CLASS=w_iftseznam AKCE=user_rozpad_dilcu ID_SAVE=user_rozpad_dilcu SEZ_TABULKA=user_rozpad_dilcu SEZ_SQL=#NOTAB=user_rozpad_dilcu;SELECT *- FROM dba.user_rozpad_dilcu SEZ_CLASS=w_iftseznam SEZ_MODIFY= datawindow.detail.color=\"255 \t if(storno = 1,8421504,if(davka<>'' and exportovano = 0,57343,if(exportovano = 1,32768,1090519039)))\" NOEDIT=IFT USER_BEGIN ;#SETMENUID=A/V_TPV/user_rozpad_dilcu/202311150958528994779223/10/30/0;#--CALENDAR_TO_BOX; #COMBO_ID1=exportovano; #COLUMN1=user_rozpad_dilcu.exportovano; #POLOZKY1=Exportované dílce\\1^Neexportované dílce\\0; #POPISBEZ1=Exportováno; #DEFAULT1='NUM:0'; #CALENDAR_FILTER_BEGIN; #CF_LABEL1=Datum expedice; #CF_COLUMN1=(select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad); #CALENDAR_FILTER_END; #DO_SEZ_SQL; #SEZ_SQL_ADD3000=(select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS dat_expedice /*\\:Sop_zahlavi.dat_expedice:HDatum expedice*/; #SEZ_SQL_ADD3001=(select op_zahlavi.zkraceny_nazev from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS zakaznik /*\\:Sop_zahlavi.zkraceny_nazev:HZákazník*/; #SEZ_SQL_ADD3002=(select op_zahlavi.misto_dp from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS misto_dod /*\\:Sop_zahlavi.misto_dp:HMísto dodání*/; #LEGEND=#DOKL_STORNO:Stornovaná položka:Fstorno = 1; #LEGEND=#O_OBJ_ODS:Vygenerována dávka:Fdavka<>'' and exportovano = 0; #LEGEND=#DOKL_SCHVAL:Exportováno:Fexportovano = 1; #MNUMAKCE=202311150958528994779223;;#SETMENUID_END;; #WORKSPACE_TITLE_BEGIN;Rozpad dílců#WORKSPACE_TITLE_END;; #WORKSPACE_MODULE=V_TPV;; #WORKSPACE_MNID=202311150958528994779223;;#ALL_ADD_TYPES=SEZNAM_user_rozpad_dilcu,; #STANDARDSORT;#HIDEBLANKREC;#ENAB_ADD_IN_VIEW;#ENAB_DELETE_IN_VIEW;#ENAB_FAST_PREV_IN_VIEW;#SEZ_SQL_SLOUPCEADD;#SEZ_SQL_COMPUTEADD; USER_END w_ift\tparametr/0 01ID_MENU=MNID/V_TPV/202311191846439310651865 01BUTTON_TITLE=Exportuj do pily 01TYP=GROUP 01USER_BEGIN ;#SETMENUID=O/V_TPV/0/user_rozpad_dilcu//202311191846439310651865/20/30/0;  #BUTTON_COLOR=rgb(0,255,0); #PERCENT_OFF; #--N--OEDIT_EVAL_LEFT=exportovano = 1 or davka=''; #NOEDIT_EVAL_LEFT=davka=''; #BUTTON_QUESTION1=Opravdu chcete exportovat již exportovanou dávku %davka%?:Wexportovano = 1; #SETWSOURCE; #USERSUB1=#DAVKA=%davka%:NA; #USERSUB2=#GENERUJ_EXPORT=1:NA; #REFRESHROWS;;#SETMENUID_END; 01USER_END 0101ID_MENU=MNID/V_TPV/202311162114515813595763 0101TYP=NOTHING 0101USER_BEGIN ;#TYPP=45;;#SETMENUID=O/V_TPV/0/user_rozpad_dilcu//202311162114515813595763/45/30/0; #DO_PARENT_USERSUB; #GROUP_WHEN=#GENERUJ_EXPORT=1; #PERCENT_OFF; #NOMULTIWARN; #USERSUB1=#EXPORT_FILENAME=select top 1 'c:\\export_pila\\' + user_rozpad_dilcu.davka + '.CSV' from dba.user_rozpad_dilcu where user_rozpad_dilcu.davka ='#DAVKA':NA; #USERSUB2_BEGIN;#EXPORT_TEXT=#DO_LIST_BEGIN;| SELECT 'CSVAZEK1'+';'+'DAVKA2'+';'+'DOKLAD3'+';'+'POLOZKA4'+';'+'QR5'+';'+'PORADI6'+';'+'DILEC7'+';'+'CAST8'+';'+'PCROZP9'+';'+'DELKA10'+';'+'VYSKA11'+';'+'TYP_DESKY12'+';'+'TL_DESKY13'+';'+'POCET_KS_ROZPADU14'+';'+'TISK15'+';'+'ZKRACENY_NAZEV16'+';'+'KODKZ17'+';'+'OBJEDNAVKA18'+';'+'NAZEV_DOPRAVCE19'+';'+'ZPUSOB_DOPRAVY20'+';'+'DAT_EXPEDICE21'+';'+'KARTA22'+';'+'NAZEV_PRODUKTU23'+';'+'MNOZSTVI_VYR24'+';'+'OP_DELKA25'+';'+'OP_VYSKA26'+';'+'OP_HLOUBKA27'+';'+'CLENENI28'+';'+'USER_ZAKVY29'+';'+'USER_POLOZKA_ZD30'+';'+'USER_PRIP31'+';'+'KCOP32'+';'+'USER_POL_POZ33'+';'+'USER_PROFIL_ZAK34'+';'+'USER_TYP_PROFIL35'+';'+'USER_VRTANI_MET36'+';'+'USER_EAN37'+';'+'ADR_DOD38'+char(13)+char(10) union all select  '1'/*CSVAZEK1*/+';'+ convert(varchar,user_rozpad_dilcu.davka)/*DAVKA2*/+';'+ convert(varchar,user_rozpad_dilcu.doklad)/*DOKLAD3*/+';'+ right('000' + convert(varchar,user_rozpad_dilcu.polozka), 3)/*POLOZKA4*/+';'+ convert(varchar,user_rozpad_dilcu.doklad)+(right('000' + convert(varchar,user_rozpad_dilcu.polozka), 3))+convert(varchar,user_rozpad_dilcu.cast)+(right('00' + convert(varchar,user_rozpad_dilcu.dilec), 2))+(right('000' + convert(varchar,user_rozpad_dilcu.poradi), 3))+(right('00' + convert(varchar,user_rozpad_dilcu.por_pol), 2))/*QR5*/+';'+ convert(varchar,user_rozpad_dilcu.poradi)/*PORADI6*/+';'+ convert(varchar,user_rozpad_dilcu.dilec)/*DILEC7*/+';'+ convert(varchar,user_rozpad_dilcu.cast)/*CAST8*/+';'+ convert(varchar,user_rozpad_dilcu.por_pol)/*PCROZP9*/+';'+ convert(varchar,user_rozpad_dilcu.delka)/*DELKA10*/+';'+ convert(varchar,user_rozpad_dilcu.sirka)/*VYSKA11 - změněno z vyska na sirka*/+';'+ convert(varchar,user_rozpad_dilcu.material_typ)/*TYP_DESKY12*/+';'+ convert(varchar,user_rozpad_dilcu.material_tl)/*TL_DESKY13*/+';'+ convert(varchar,user_rozpad_dilcu.mnozstvi)/*POCET_KS_ROZPADU14*/+';'+ '1'/*TISK15*/+';'+ convert(varchar,op_zahlavi.zkraceny_nazev)/*ZKRACENY_NAZEV16*/+';'+ convert(varchar,op_zahlavi.user_kodkz)/*KODKZ17*/+';'+ convert(varchar,op_zahlavi.objednavka)/*OBJEDNAVKA18*/+';'+ convert(varchar,op_zahlavi.zkraceny_nazev_dop)/*NAZEV_DOPRAVCE19*/+';'+ convert(varchar,case when op_zahlavi.zpusob_dopravy = 1 then 'Vlastní' when op_zahlavi.zpusob_dopravy = 2 then 'Cizí' else 'Nezadáno' end)/*ZPUSOB_DOPRAVY20*/+';'+ convert(varchar,op_zahlavi.dat_expedice,104)/*DAT_EXPEDICE21*/+';'+ convert(varchar,op_polozky.karta)/*KARTA22*/+';'+ convert(varchar,op_polozky.nazev)/*NAZEV_PRODUKTU23*/+';'+ convert(varchar,op_polozky.user_mnozstvi_vyr)/*MNOZSTVI_VYR24*/+';'+ convert(varchar,op_polozky.user_delka)/*OP_DELKA25*/+';'+ convert(varchar,op_polozky.user_vyska)/*OP_VYSKA26*/+';'+ convert(varchar,op_polozky.user_hloubka)/*OP_HLOUBKA27*/+';'+ convert(varchar,op_polozky.user_sirka1)+'/'+convert(varchar,op_polozky.user_sirka2)+'/'+convert(varchar,op_polozky.user_sirka3)+'/'+convert(varchar,op_polozky.user_sirka4)+'/'+convert(varchar,op_polozky.user_sirka5)/*CLENENI28*/+';'+ convert(varchar,op_polozky.user_zakvy)/*USER_ZAKVY29*/+';'+ convert(varchar,op_polozky.user_polozka_zd)/*USER_POLOZKA_ZD30*/+';'+ convert(varchar,op_polozky.user_prip)/*USER_PRIP31*/+';'+ right(convert(varchar,user_rozpad_dilcu.doklad),3)/*KCOP32*/+';'+ convert(varchar,op_polozky.user_pol_poz)/*USER_POL_POZ33*/+';'+ convert(varchar,op_polozky.user_profil_zak)/*USER_PROFIL_ZAK34*/+';'+ convert(varchar,op_polozky.user_typ_profil)/*USER_TYP_PROFIL35*/+';'+ convert(varchar,op_polozky.user_vrtani_met)/*USER_VRTANI_MET36*/+';'+ dba.user_o_obj_gen_ean16_1_fce (user_rozpad_dilcu.doklad,user_rozpad_dilcu.polozka,user_rozpad_dilcu.poradi)/*USER_EAN37*/+';'+ convert(varchar,op_zahlavi.misto_dp)/*ADR_DOD38*/+char(13)+char(10) from  dba.user_rozpad_dilcu user_rozpad_dilcu with(index(user_rozpad_dilcu_davka)), dba.op_polozky op_polozky with(index(pk_op_polozky)), dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)), dba.nomenklatura nomenklatura with(index(nomenklatura_cislo_nomen)) where user_rozpad_dilcu.davka = '#DAVKA' and user_rozpad_dilcu.doklad=op_polozky.doklad and user_rozpad_dilcu.polozka=op_polozky.polozka and op_polozky.doklad=op_zahlavi.doklad and nomenklatura.cislo_nomenklatury=user_rozpad_dilcu.material and user_rozpad_dilcu.exportovat = 1 #DO_LIST_END;:NA#USERSUB2_END; #FILEWRITE_AFTER1=#EXPORT_FILENAME; #FILEWRITE_BODY1_BEGIN;#EXPORT_TEXT#FILEWRITE_BODY1_END; #GROUP_WAIT; ;#SETMENUID_END; 0101USER_END 0102ID_MENU=MNID/V_TPV/202311191856023193910946 0102TYP=SQLCOMMAND 0102USER_BEGIN ;#TYPP=45;;#SETMENUID=O/V_TPV/0/user_rozpad_dilcu//202311191856023193910946/45/30/0;    #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.user_rozpad_dilcu set exportovano = 1, autor_exp=user, dat_exp=getdate() from dba.user_rozpad_dilcu urd with(index(pk_user_rozpad_dilcu)) where urd.davka=%davka% #SQLCOMMAND1_END; #SQLCOMMAND2_BEGIN; update dba.user_davky set autor_exp=user, dat_exp=getdate() from dba.user_davky user_davky with(index(pk_user_davky)) where user_davky.davka=%davka% #SQLCOMMAND2_END;;#SETMENUID_END; 0102USER_END 0103ID_MENU=MNID/V_TPV/202311192036412925514925 0103TYP=ATTADD 0103USER_BEGIN ;#TYPP=45;;#SETMENUID=O/V_TPV/0/user_rozpad_dilcu//202311192036412925514925/45/30/0; #DO_PARENT_USERSUB; #GROUP_WHEN=#GENERUJ_EXPORT=1; #FILE_FROM_CLIENT; #USERSUB1=#EXPORT_FILENAME=select top 1 'c:\\export_pila\\' + user_rozpad_dilcu.davka + '.CSV' from dba.user_rozpad_dilcu where user_rozpad_dilcu.davka ='#DAVKA':NA; #ATT_TABULKA=user_davky; #ATT_PK=#DAVKA; #ATT_CLASS=EXPORT_FILE; #ATT_TAB=user_davky; #ATT_POZN=EXPORTOVANO; #FILE=#EXPORT_FILENAME; ;#SETMENUID_END; 0103USER_END 02ID_MENU=MNID/V_TPV/202311192042136607116962 02BUTTON_TITLE=Dávka 02TYP=SEZNAM 02SEZ_TABULKA=user_davky 02SEZ_TITLE=Dávka: {davka} 02SEZ_VAZBA=TRUE 02SEZ_VAZBA_COLUMN1=davka 02USER=;#SETMENUID=O/V_TPV/0///202311192042136607116962/20/30/0;;#SETMENUID_END; 03ID_MENU=MNID/V_TPV/202311281516584940055182 03BUTTON_TITLE=Generuj dávku pro export 03TYP=MULTIDETAIL 03USER_BEGIN ;#BUTTON_WRITE_RIGHT=user_rozpad_dilcu;;#SETMENUID=O/V_TPV/0///202311281516584940055182/20/30/0;    #NOMULTIWARN; #NOEDIT_EVAL_LEFT=davka<>''; #EDIT_COL_NOTAB; #EDIT_COL_ALL_MODIFIED; #EDIT_GROUP1=Dávka pro export; #EDIT_COL1=user_rozpad_dilcu.davka; #EDIT_COL_DEFAULT1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL_DEFAULT_MULTI1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL1_EMPTY; #EDIT_COL1_SQL1_BEGIN; update dba.user_rozpad_dilcu set davka = #VAL, autor = user, ts = getdate() from dba.user_rozpad_dilcu user_rozpad_dilcu with(index(pk_user_rozpad_dilcu)) where user_rozpad_dilcu.doklad = %doklad% and user_rozpad_dilcu.polozka=%polozka% and user_rozpad_dilcu.cast=%cast% and user_rozpad_dilcu.dilec=%dilec% #EDIT_COL1_SQL1_END; #REFRESHROWSAFTER; ;#SETMENUID_END; 03USER_END 04ID_MENU=MNID/V_TPV/202312201241247088534145 04BUTTON_TITLE=Generuj dávku pro export pro celou OBJ 04TYP=MULTIDETAIL 04USER_BEGIN ;#BUTTON_WRITE_RIGHT=user_rozpad_dilcu;;#SETMENUID=O/V_TPV/0///202312201241247088534145/20/30/0;    #NOMULTIWARN; #NOEDIT_EVAL_LEFT=davka<>''; #EDIT_COL_NOTAB; #EDIT_COL_ALL_MODIFIED; #EDIT_GROUP1=Dávka pro export; #EDIT_COL1=user_rozpad_dilcu.davka; #EDIT_COL_DEFAULT1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL_DEFAULT_MULTI1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL1_EMPTY; #EDIT_COL1_SQL1_BEGIN; update dba.user_rozpad_dilcu set davka = #VAL, autor = user, ts = getdate() from dba.user_rozpad_dilcu user_rozpad_dilcu with(index(pk_user_rozpad_dilcu)) where user_rozpad_dilcu.doklad = %doklad% #EDIT_COL1_SQL1_END; #REFRESHROWSAFTER; ;#SETMENUID_END; 04USER_END 05ID_MENU=MNID/V_TPV/202401011237088621624371 05BUTTON_TITLE=Generuj dávku pro export za položku OBJ 05TYP=MULTIDETAIL 05USER_BEGIN ;#BUTTON_WRITE_RIGHT=user_rozpad_dilcu;;#SETMENUID=O/V_TPV/0///202401011237088621624371/20/30/0;    #NOMULTIWARN; #NOEDIT_EVAL_LEFT=davka<>''; #EDIT_COL_NOTAB; #EDIT_COL_ALL_MODIFIED; #EDIT_GROUP1=Dávka pro export; #EDIT_COL1=user_rozpad_dilcu.davka; #EDIT_COL_DEFAULT1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL_DEFAULT_MULTI1=davka=select dba.user_v_tpv_generuj_davku_fce (); #EDIT_COL1_EMPTY; #EDIT_COL1_SQL1_BEGIN; update dba.user_rozpad_dilcu set davka = #VAL, autor = user, ts = getdate() from dba.user_rozpad_dilcu user_rozpad_dilcu with(index(pk_user_rozpad_dilcu)) where user_rozpad_dilcu.doklad = %doklad% and user_rozpad_dilcu.polozka=%polozka% #EDIT_COL1_SQL1_END; #REFRESHROWSAFTER; ;#SETMENUID_END; 05USER_END 06ID_MENU=MNID/V_TPV/202401101317041814512620 06BUTTON_TITLE=Položka objednávky 06TYP=SEZNAM 06SEZ_TABULKA=op_polozky 06SEZ_TITLE=Položka objednávky: {doklad}{polozka} 06SEZ_VAZBA=TRUE 06SEZ_VAZBA_COLUMN1=doklad 06SEZ_VAZBA_COLUMN2=polozka 06USER=;#SETMENUID=O/V_TPV/0///202401101317041814512620/20/30/0;;#SETMENUID_END; w_ift\tconn\tms_19216810247_karat_termopan 73 w_ift\tf11\tStandard AllDevices w_ift\tRefreshObjects\tLIST FAST w_ift\tPercentOffDWs\tLIST\tdba.user_rozpad_dilcu\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.21684.21687.21710 FAST\tdba.user_rozpad_dilcu\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.21684.21687.preview.fast.dw_fast_preview w_ift\tpreview1\tRychlý náhled ---Id: FAST ---UserParam: #TYPE=Fast;#ID=FAST;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=1;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1; ---Directives: #TYPE=Fast;#ID=FAST;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=1;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1;#PREVIEW_FAST;#FAST_PREV_TAB=user_rozpad_dilcu;#FAST_PREV_DW=;#ENAB_FAST_PREV_IN_VIEW=;#FAST_PREVIEW_SUBS=; w_ift\tCurrentPreviewUserParam\t#USR_PREVIEW;#PREVIEW_GRID_ROWS=1;#PREVIEW_GRID_COLS=1;#PREVIEW_VIEW_TAB=0;#PREVIEW_CAN_ADD=0;#GENERATED_PREVIEW; #USR_PREVIEW1_BEGIN;#TYPE=Fast;#ID=FAST;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=1;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1;#USR_PREVIEW1_END; w_iftseznam\tsez_tabulka\tuser_rozpad_dilcu w_iftseznam\tlink\tkarat://termopan:@0/mnid/v_tpv/202311150958528994779223?where=%28%20user%5frozpad%5fdilcu%2edoklad%20%3d%20%2724op010100000302%27%20and%20user%5frozpad%5fdilcu%2epolozka%20%3d%204%20and%20user%5frozpad%5fdilcu%2eporadi%20%3d%201%20and%20user%5frozpad%5fdilcu%2ecast%20%3d%201%20and%20user%5frozpad%5fdilcu%2edilec%20%3d%201%20and%20user%5frozpad%5fdilcu%2epor%5fpol%20%3d%201%20%29&menu=0 w_iftseznam\tsez_sql\t#NOTAB=user_rozpad_dilcu;SELECT *- FROM dba.user_rozpad_dilcu w_iftseznam\tdetail.color\t255 w_iftseznam\tdwselect\tSELECT TOP 100001  user_rozpad_dilcu.doklad,user_rozpad_dilcu.polozka,user_rozpad_dilcu.poradi,user_rozpad_dilcu.delka,user_rozpad_dilcu.vyska,user_rozpad_dilcu.sirka,user_rozpad_dilcu.cast,user_rozpad_dilcu.dilec,user_rozpad_dilcu.mnozstvi,user_rozpad_dilcu.material,user_rozpad_dilcu.exportovano,user_rozpad_dilcu.davka,user_rozpad_dilcu.por_pol,user_rozpad_dilcu.nomenklatura,user_rozpad_dilcu.material_typ,user_rozpad_dilcu.material_tl,user_rozpad_dilcu.spotreba_mat,user_rozpad_dilcu.cena_mat,user_rozpad_dilcu.storno,user_rozpad_dilcu.produkt,user_rozpad_dilcu.exportovat,user_rozpad_dilcu.qr,user_rozpad_dilcu.autor,user_rozpad_dilcu.ts,isnull(user_rozpad_dilcu.xattach,0) xattach ,(select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) dat_expedice  ,(select op_zahlavi.zkraceny_nazev from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) zakaznik  ,(select op_zahlavi.misto_dp from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) misto_dod  FROM dba.user_rozpad_dilcu user_rozpad_dilcu with(index(pk_user_rozpad_dilcu)) WHERE 1=1  AND ( ((1=1) AND ((select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad)>=convert(datetime,'2024-01-01') and (select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad)<convert(datetime,'2025-01-01'))) AND (user_rozpad_dilcu.doklad + '') <> '' /* blankrec */)    ORDER BY user_rozpad_dilcu.doklad,user_rozpad_dilcu.polozka,user_rozpad_dilcu.poradi,user_rozpad_dilcu.cast,user_rozpad_dilcu.dilec,user_rozpad_dilcu.por_pol OPTION(fast 100000) /* seznam user_rozpad_dilcu A/V_TPV/user_rozpad_dilcu/202311150958528994779223/10/30/0 */ w_iftseznam\tdwcolumns\tdoklad,polozka,poradi,delka,vyska,sirka,cast,dilec,mnozstvi,material,exportovano,davka,por_pol,nomenklatura,material_typ,material_tl,spotreba_mat,cena_mat,storno,produkt,exportovat,qr,autor,ts,xattach,dat_expedice,zakaznik,misto_dod,xremind w_iftseznam\tdwcolumns_visible\tdat_expedice,zakaznik,misto_dod,davka,xattach_bmp,xremind_bmp,doklad,polozka,cast,dilec,poradi,por_pol,delka,vyska,sirka,mnozstvi,material,exportovano,nomenklatura,autor,ts,material_typ,material_tl,spotreba_mat,cena_mat,storno,produkt,exportovat,qr 0\tdat_expedice\t96 1\tzakaznik\t99 2\tmisto_dod\t213 3\tdavka\t158 4\txattach_bmp\t18 5\txremind_bmp\t18 6\tdoklad\t127 7\tpolozka\t79 8\tcast\t64 9\tdilec\t66 10\tporadi\t234 11\tpor_pol\t200 12\tdelka\t40 13\tvyska\t40 14\tsirka\t40 15\tmnozstvi\t58 16\tmaterial\t158 17\texportovano\t77 18\tnomenklatura\t158 19\tautor\t57 20\tts\t146 21\tmaterial_typ\t158 22\tmaterial_tl\t103 23\tspotreba_mat\t111 24\tcena_mat\t127 25\tstorno\t45 26\tprodukt\t80 27\texportovat\t95 28\tqr\t235 w_iftseznam\tdwcolumns_invisible\tporadi_sum,delka_sum,vyska_sum,sirka_sum,mnozstvi_sum,por_pol_sum,material_tl_sum,spotreba_mat_sum,cena_mat_sum,xattach,xremind w_iftseznam\tid_save\tv_tpv/user_rozpad_dilcu w_iftseznam\tfirstuser\t;#SETMENUID=A/V_TPV/user_rozpad_dilcu/202311150958528994779223/10/30/0;#--CALENDAR_TO_BOX; #COMBO_ID1=exportovano; #COLUMN1=user_rozpad_dilcu.exportovano; #POLOZKY1=Exportované dílce\\1^Neexportované dílce\\0; #POPISBEZ1=Exportováno; #DEFAULT1='NUM:0'; #CALENDAR_FILTER_BEGIN; #CF_LABEL1=Datum expedice; #CF_COLUMN1=(select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad); #CALENDAR_FILTER_END; #DO_SEZ_SQL; #SEZ_SQL_ADD3000=(select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS dat_expedice /*\\:Sop_zahlavi.dat_expedice:HDatum expedice*/; #SEZ_SQL_ADD3001=(select op_zahlavi.zkraceny_nazev from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS zakaznik /*\\:Sop_zahlavi.zkraceny_nazev:HZákazník*/; #SEZ_SQL_ADD3002=(select op_zahlavi.misto_dp from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS misto_dod /*\\:Sop_zahlavi.misto_dp:HMísto dodání*/; #LEGEND=#DOKL_STORNO:Stornovaná položka:Fstorno = 1; #LEGEND=#O_OBJ_ODS:Vygenerována dávka:Fdavka<>'' and exportovano = 0; #LEGEND=#DOKL_SCHVAL:Exportováno:Fexportovano = 1; #MNUMAKCE=202311150958528994779223;;#SETMENUID_END;; #WORKSPACE_TITLE_BEGIN;Rozpad dílců#WORKSPACE_TITLE_END;; #WORKSPACE_MODULE=V_TPV;; #WORKSPACE_MNID=202311150958528994779223;;#ALL_ADD_TYPES=SEZNAM_user_rozpad_dilcu,; #STANDARDSORT;#HIDEBLANKREC;#ENAB_ADD_IN_VIEW;#ENAB_DELETE_IN_VIEW;#ENAB_FAST_PREV_IN_VIEW;#SEZ_SQL_SLOUPCEADD;#SEZ_SQL_COMPUTEADD; w_iftseznam\tmaxrows\t0 w_iftseznam\tstorage\t498 042 w_iftseznam\tsorting w_iftseznam\tadd_sorting\tdoklad A,polozka A,poradi A,cast A,dilec A,por_pol A, ------------------------------- Workspace: Objednávky přijaté (O_OBJ/200705051639068503094766) Window: Seznam Objednávky přijaté (O_OBJ disabled visible c__w_iftseznam tab=op_zahlavi) w_ift\tclassname\tw_iftseznam w_ift\tclasses\t.object.karatbaseobject.karatobject.karatcontrol.karatwindow.c__w_ift.c__w_filter_parent.c__w_iftseznam w_ift\tlink\tkarat://termopan:@0/mnid/o_obj/200705051639068503094766?menu=0&nss=0 w_ift\tparametr ID_MENU=MNID/O_OBJ/200705051639068503094766 TYP=SEZNAM CLASS=w_iftseznam AKCE=op_zahlavi ID_SAVE=op_zahlavi SEZ_TABULKA=op_zahlavi SEZ_SQL=    #NOTAB=op_zahlavi;     select *+,             op_rady.op_denik_pop AS op_rady_8848_op_denik_pop /* \\:NV */,             op_rady.op_rada_pop AS op_rady_8848_op_rada_pop /* \\:NV */,             op_rady.op_denik_nab AS op_rady_8848_op_denik_nab /* \\:NV */,             op_rady.op_rada_nab AS op_rady_8848_op_rada_nab /* \\:NV */,             op_rady.op_denik_op AS op_rady_8848_op_denik_op /* \\:NV */,             op_rady.op_rada_op AS op_rady_8848_op_rada_op /* \\:NV */,             op_rady.op_denik_ov AS op_rady_8848_op_denik_ov /* \\:NV */,             op_rady.op_rada_ov AS op_rady_8848_op_rada_ov /* \\:NV */,             op_rady.op_denik_vl AS op_rady_8848_op_denik_vl /* \\:NV */,             op_rady.op_rada_vl AS op_rady_8848_op_rada_vl /* \\:NV */,             op_rady.op_denik_prev AS op_rady_8848_op_denik_prev /* \\:NV */,             op_rady.op_rada_prev AS op_rady_8848_op_rada_prev /* \\:NV */,             op_rady.denik_posty AS op_rady_8848_denik_posty /* \\:NV */,             op_rady.rada_posty AS op_rady_8848_rada_posty /* \\:NV */,             op_rady.vydej_neods AS op_rady_8848_vydej_neods /* \\:NV */,             op_rady.fv_denik_zal AS op_rady_8848_fv_denik_zal /* \\:NV */,             op_rady.fv_rada_zal AS op_rady_8848_fv_rada_zal /* \\:NV */,             op_rady.zal_fa_nast AS op_rady_8848_zal_fa_nast /* \\:NV */,             op_rady.zal_fa_pocet AS op_rady_8848_zal_fa_pocet /* \\:NV */,             op_rady.tpv_denik_kalk AS op_rady_8848_tpv_denik_kalk /* \\:NV */,             op_rady.tpv_rada_kalk AS op_rady_8848_tpv_rada_kalk /* \\:NV */,             op_rady.v_zak_denik AS op_rady_8848_v_zak_denik /* \\:NV */,             op_rady.v_zak_rada AS op_rady_8848_v_zak_rada /* \\:NV */,             op_rady.op_denik_parag AS op_rady_8848_op_denik_parag /* \\:NV */,             op_rady.op_rada_parag AS op_rady_8848_op_rada_parag /* \\:NV */,             op_rady.parag_zpusob AS op_rady_8848_parag_zpusob /* \\:NV */,             op_rady.imp_ordrsp_dkl_10 AS opr_imp_ordrsp_dkl_10 /* \\:NV */,             op_rady.imp_ordrsp_dkl_20 AS opr_imp_ordrsp_dkl_20 /* \\:NV */,             op_zahlavi.cena_bez_dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS cena_bez_dph_mu /* \\:Sop_zahlavi.cena_bez_dph:HCena bez DPH [MÚ] */,             op_zahlavi.dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS dph_mu /* \\:Sop_zahlavi.dph:HDPH [MÚ] */,             op_zahlavi.cena_celkem * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS cena_celkem_mu /* \\:Sop_zahlavi.cena_celkem:HCena celkem [MÚ] */,             op_zahlavi.castka_zal * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS castka_zal_mu /* \\:Sop_zahlavi.castka_zal:HČástka zálohy [MÚ] */,             #TO_DUAL_ROUND(op_zahlavi.cena_bez_dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS cena_bez_dph_dual /* \\:Sop_zahlavi.cena_bez_dph:HCena bez DPH [MD] */,             #TO_DUAL_ROUND(op_zahlavi.dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS dph_dual /* \\:Sop_zahlavi.dph:HDPH [MD] */,             #TO_DUAL_ROUND(op_zahlavi.cena_celkem * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS cena_celkem_dual /* \\:Sop_zahlavi.cena_celkem:HCena celkem [MD] */,             #TO_DUAL_ROUND(op_zahlavi.castka_zal * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS castka_zal_dual /* \\:Sop_zahlavi.castka_zal:HČástka zálohy [MD] */,             mistni.id_mistni AS id_mistni /* \\:Smenycis_mistni.id_mistni */,             mistni.id_dualni AS id_dualni /* \\:Smenycis_mistni.id_dualni */,             dba.op_zahlavi_vykr_skl_fce(op_zahlavi.doklad) AS vykr_skl /* \\:Sop_zahlavi.vykryto:HSkladem */,             coalesce((select count(1) from dba.op_zahlavi_ver ver with(index(pk_op_zahlavi_ver)) where ver.doklad = op_zahlavi.doklad), 0) + 1 AS pocet_ver /* \\:Sop_zahlavi_ver.ver_poradi:HVerze */,             case when exists(select 1 from dba.parcisudaje pu with(index(parcisudaje_typ)) where pu.typ = 'ORDRSP' and pu.id_partnera = op_zahlavi.id_partnera) then 1 else 0 end AS par_export /* \\:Sop_zahlavi.export:NV */         from dba.op_zahlavi op_zahlavi,             dba.op_rady op_rady with(index(pk_op_rady)),             dba.menycis_mistni mistni with(index(pk_menycis_mistni))         where op_rady.fiskalni_rok = op_zahlavi.fiskalni_rok             and op_rady.denik = op_zahlavi.denik             and op_rady.rada = op_zahlavi.rada             and mistni.fiskalni_rok = op_zahlavi.fiskalni_rok SEZ_CLASS=w_iftseznam_doklad SEZ_TITLE=Objednávky přijaté SEZ_MODIFY= datawindow.detail.color=\"255 \t if(vyrobeno=pol_k_vyr and pol_k_vyr > 0 and op_zahlavi.doklad_vl = '',16748574,if(storno = 1,8421504,if(vyrizeno = 1,32896,if(vykr_skl = 1,65280,if(vykryto = 1,32768,if(odsouhlaseno = 1,57343,if(potvrzeno = 1,8454143,if(potvrzeno = 0,16777215,1090519039))))))))\" SEZ_PODMINKA=op_zahlavi.druh = 30 USER_BEGIN ;#SETMENUID=A/O_OBJ/op_zahlavi/200705051639068503094766/10/40/0;    #XSUB=\\AKCE^OBJ; #MNUMAKCE=200705051639068503094766;;#SETMENUID_END;; #WORKSPACE_TITLE_BEGIN;Objednávky přijaté#WORKSPACE_TITLE_END;; #WORKSPACE_MODULE=O_OBJ;; #WORKSPACE_MNID=200705051639068503094766;;;#SETMENUID=O/O_OBJ/10/op_zahlavi//200705141135552301933414/15/40/0;    #ENAB_ADD_IN_VIEW; #HIDEBLANKREC; #STANDARDSORT; #TL_FUNKCE_SEZNAM; #COMBO_ID1=stav; #COLUMN1=-; #POLOZKY1=Nepřístupné\\1\\op_zahlavi.opr_prov = 0^Přístupné\\2\\op_zahlavi.opr_prov = 1^Vyřízeno\\3\\(op_zahlavi.vyrizeno = 1 or op_zahlavi.vyrizeno_kl = 1)^Odsouhlaseno\\4\\op_zahlavi.odsouhlaseno = 1^Nevyřízeno\\5\\(op_zahlavi.vyrizeno = 0 and op_zahlavi.vyrizeno_kl = 0)^Neodsouhlaseno\\6\\op_zahlavi.odsouhlaseno = 0; #POPISBEZ1=Stav; #COMBO_ID2=vykryto; #COLUMN2=; #POLOZKY2=Vůbec\\0\\op_zahlavi.vykryto = 0 and op_zahlavi.vyrizeno <> 1^Nevykryto\\4\\op_zahlavi.vykryto <> 1 and op_zahlavi.vyrizeno <> 1^Vykryto částečně\\2\\op_zahlavi.vykryto = 2 and op_zahlavi.vyrizeno <> 1^Vykryto\\1\\op_zahlavi.vykryto = 1 or op_zahlavi.vyrizeno = 1; #POPISBEZ2=Vykryto; #COMBO_ID3=dodano; #COLUMN3=-; #POLOZKY3=Vůbec\\0\\op_zahlavi.dodano = 0 and op_zahlavi.vyrizeno_kl <> 1^Částečně\\1\\op_zahlavi.dodano = 2 and op_zahlavi.vyrizeno_kl <> 1^Nedodané\\2\\op_zahlavi.dodano in (0, 2) and op_zahlavi.vyrizeno_kl <> 1^Zcela dodané\\3\\op_zahlavi.dodano = 1^Vyřízené ručně\\4\\op_zahlavi.vyrizeno_kl = 1; #POPISBEZ3=Dodáno; #COMBO_ID4=dodano_predb; #COLUMN4=coalesce(op_zahlavi.dodano_predb, 0); #POLOZKY4=Předběžně dodáno NE\\0^Předběžně dodáno ANO\\1^Předběžně dodáno ČÁSTEČNĚ\\2; #POPISBEZ4=Předběžně dodáno; #COMBO_ID5=storno; #COLUMN5=-; #POLOZKY5=Nestornované\\1\\op_zahlavi.storno <> 1^Stornované\\2\\op_zahlavi.storno = 1; #POPISBEZ5=Storno; #DEFAULT5=1; #COMBO_ID6=dopravce; #COLUMN6=-; #POLOZKY6=Bez dopravce\\1\\op_zahlavi.id_partnera_dop = ''^S dopravcem\\2\\op_zahlavi.id_partnera_dop <> ''; #POPISBEZ6=Dopravce; #COMBO_ID7=spz; #COLUMN7=-; #POLOZKY7=Bez SPZ\\1\\op_zahlavi.spz = ''^S SPZ\\2\\op_zahlavi.spz <> ''; #POPISBEZ7=SPZ; #COMBO_ID8=doklad_fv_zal; #COLUMN8=-; #POLOZKY8=Bez zálohové FV\\1\\op_zahlavi.doklad_fv_zal = ''^Se zálohovou FV\\2\\op_zahlavi.doklad_fv_zal <> ''; #POPISBEZ8=Zálohová FV; #COMBO_ID9=ramcovy; #COLUMN9=coalesce(op_zahlavi.ramcovy, 0); #POLOZKY9=Rámcový doklad\\1^Běžný doklad\\0; #POPISBEZ9=Rámcový doklad; #COMBO_ID10=expedovat; #COLUMN10=op_zahlavi.expedovat_z; #POLOZKY10=Expedovat\\1^Neexpedovat\\0; #POPISBEZ10=Expedovat; #COMBO_ID11=id_meny; #COLUMN11=op_zahlavi.id_meny; #POLOZKY11=select mena.id_meny, '', 'op_zahlavi.id_meny = ' + char(39) + mena.id_meny + char(39) from dba.menycis mena with(index(pk_menycis)) where mena.id_meny <> '' order by mena.id_meny; #POPISBEZ11=Měna; #COMBO_BEGIN; #COMBO_ID=export; #COLUMN=coalesce(op_zahlavi.export, 0); #POLOZKY=Ne\\0^Exportovat\\1^Exportováno\\2; #POPISBEZ=Exportovat potvrzení; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=neex_vpr; #COLUMN=-; #POLOZKY=Neexistuje výrobní pŕíkaz\\0\\op_rady.v_zak_denik <> '' and op_rady.v_zak_rada <> '' and op_zahlavi.storno = 0 and op_zahlavi.druh = 30 and ((op_zahlavi.potvrzeno = 1 and coalesce(op_rady.vydej_neods, 0) = 2) or (op_zahlavi.odsouhlaseno = 1 and coalesce(op_rady.vydej_neods, 0) = 0) or coalesce(op_rady.vydej_neods, 0) = 1) and exists(select 1 from dba.op_polozky opp with(index(pk_op_polozky)) where opp.doklad = op_zahlavi.doklad and opp.typ_polozky in (3, 7, 15) and opp.storno = 0 and opp.vyrizeno = 0 and opp.vykryto in (0, 2) and not exists(select 1 from dba.v_opv opv with(index(v_opv_objed)), dba.v_opvz opvz with(index(pk_v_opvz)) where opv.objednavka = opp.doklad and opv.polobj = opp.polozka and opvz.doklad = opv.doklad and opvz.storno = 0))^; #POPISBEZ=Existence výrobního příkazu; #COMBO_VISIBLE=islicmodul('V_ZAK'); #COMBO_END; #COMBO_BEGIN; #COMBO_ID=nedodano_dnes; #COLUMN=-; #POLOZKY=Vůbec, po termínu dodání\\0\\op_zahlavi.dodano = 0 and op_zahlavi.vyrizeno_kl <> 1 and op_zahlavi.dat_dodani < getdate()^Částečně, po termínu dodání\\1\\op_zahlavi.dodano = 2 and op_zahlavi.vyrizeno_kl <> 1 and op_zahlavi.dat_dodani < getdate()^Nedodané, po termínu dodání\\2\\op_zahlavi.dodano in (0, 2) and op_zahlavi.vyrizeno_kl <> 1 and op_zahlavi.dat_dodani < getdate(); #POPISBEZ=Nedodané po termínu dodání; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=nedodano_ods; #COLUMN=-; #POLOZKY=Vůbec, po původním termínu dodání\\0\\op_zahlavi.dodano = 0 and op_zahlavi.vyrizeno_kl <> 1 and coalesce(nullif(op_zahlavi.dat_dodani_ods, convert(#BY(datumy.datum), '1901-01-01')), op_zahlavi.dat_dodani) < getdate()^Částečně, po původním termínu dodání\\1\\op_zahlavi.dodano = 2 and op_zahlavi.vyrizeno_kl <> 1 and coalesce(nullif(op_zahlavi.dat_dodani_ods, convert(#BY(datumy.datum), '1901-01-01')), op_zahlavi.dat_dodani) < getdate()^Nedodané, po původním termínu dodání\\2\\op_zahlavi.dodano in (0, 2) and op_zahlavi.vyrizeno_kl <> 1 and coalesce(nullif(op_zahlavi.dat_dodani_ods, convert(#BY(datumy.datum), '1901-01-01')), op_zahlavi.dat_dodani) < getdate(); #POPISBEZ=Nedodané po původním termínu dodání; #COMBO_END; #NO_DOKLAD_LEGEND; #LEGEND=#DOKL_STORNO:Stornovaný doklad:Fstorno = 1; #LEGEND=#DOKL_UZAV:Vyřízený doklad:Fvyrizeno = 1; #LEGEND=#O_OBJ_VYKR_SKL:Doklad vykrytý skladem:Fvykr_skl = 1; #LEGEND=#DOKL_SCHVAL:Vykrytý doklad:Fvykryto = 1; #LEGEND=#O_OBJ_ODS:Odsouhlasený doklad:Fodsouhlaseno = 1; #LEGEND=#O_OBJ_POT:Potvrzený doklad:Fpotvrzeno = 1; #LEGEND=#O_OBJ_NEPOT:Nepotvrzený doklad:Fpotvrzeno = 0;;#SETMENUID_END;;;#SETMENUID=O/O_OBJ/10/op_zahlavi//202307031504083938379356/15/30/0;#DO_SEZ_SQL; #SEZ_SQL_ADD3000=(select count(op_polozky.user_vyrobeno) from dba.op_polozky op_polozky with(index(pk_op_polozky)) where op_polozky.doklad = op_zahlavi.doklad and op_polozky.user_vyrobeno=1 and left(op_polozky.karta,1)<>'S') AS vyrobeno /*\\:Sop_zahlavi.dodanych:HVyrobeno:NV*/; #SEZ_SQL_ADD3001=(select count(op_polozky.karta) from dba.op_polozky op_polozky with(index(pk_op_polozky)) where op_polozky.doklad = op_zahlavi.doklad and left(op_polozky.karta,1)<>'S') AS pol_k_vyr /*\\:Sop_zahlavi.dodanych:HPoložek k vyrobě:NV*/; #SEZ_SQL_ADD3002=(select parcis.nazev from dba.parcis parcis with(index(pk_parcis)) where parcis.id_partnera=op_zahlavi.id_investora) AS investor_nazev /*\\:Sparcis.nazev:HNázev partnera F*/; #SEZ_SQL_ADD3003=(select count(attach_store.poradi) from dba.attach_store attach_store with(index(pk_attach_store)) where attach_store.pk=op_zahlavi.doklad and attach_store.att_class='TPV') AS attpocetpdf/*\\:Sattach_access.id:HA-pdf:NV*/; #COMPUTEADD3000=opattpdf=bitmap(case(attpocetpdf when 0 then '' else 'path(PathAttachLevelStatus8),color(20),tooltip(PDF příloha OP)')):HA-OP pdf:F:NS; #LEGEND=rgb(30,144,255):Všechny položky vyrobeny:F1:vyrobeno=pol_k_vyr and pol_k_vyr > 0 and op_zahlavi.doklad_vl = '';;#SETMENUID_END;;#ALL_ADD_TYPES=SEZNAM_op_zahlavi,;;#SEZNAM_DOKLAD; #STANDARDSORT;#HIDEBLANKREC;#ENAB_ADD_IN_VIEW;#ENAB_DELETE_IN_VIEW;#ENAB_FAST_PREV_IN_VIEW;#SEZ_SQL_SLOUPCEADD;#SEZ_SQL_COMPUTEADD; USER_END w_ift\tparametr/25 01ID_MENU=MNID/O_OBJ/200705141135550577021154 01BUTTON_TITLE=Zdrojový doklad 01TYP=SEZNAM_DOKLAD 01USER_BEGIN ;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135550577021154/25/40/0;  #NOEDIT_EVAL_LEFT=doklad_gen = ''; #ID_MODULU=id_modulu_gen; #AGENDA=agenda_gen; #DOKLAD=doklad_gen; #NOFR; #NOSAVESORT; #DRUH_KONTACE=DK;;#SETMENUID_END; 01USER_END 02ID_MENU=MNID/O_OBJ/200705141135559069887642 02USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135559069887642/25/40/0;;#SETMENUID_END; 03ID_MENU=MNID/O_OBJ/200705141135559784608173 03BUTTON_TITLE=Stav rámcové objednávky 03TYP=SEZNAM 03AKCE=op_polozky_stav_ramc 03SEZ_TABULKA=op_polozky 03SEZ_VAZBA=TRUE 03SEZ_VAZBA_COLUMN1=doklad 03USER_BEGIN ;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135559784608173/25/40/0;    #NOEDIT_EVAL_LEFT=ramcovy = 0 or isnull(ramcovy); #NOADDTABMENU;;#SETMENUID_END; 03USER_END 04ID_MENU=MNID/O_OBJ/200705141135557425792829 04USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135557425792829/25/40/0;;#SETMENUID_END; 05ID_MENU=MNID/O_OBJ/200705141135552608077648 05BUTTON_TITLE=DPH dokladu 05TYP=SEZNAM 05SEZ_TABULKA=op_dph 05SEZ_VAZBA=TRUE 05SEZ_VAZBA_COLUMN1=doklad 05USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135552608077648/25/40/0;;#SETMENUID_END; 06ID_MENU=MNID/O_OBJ/200705141135556169550149 06BUTTON_TITLE=Přegeneruj DPH dokladu 06TYP=SQLCOMMAND 06USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135556169550149/25/40/0;    #PERCENT_OFF; #MULTI_BUTTON; #PROCESBAR; #PROCESTEXT=Přegenerování DPH dokladu...; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set xcmd = char(9) + 'SAVED', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 06USER_END 07ID_MENU=MNID/O_OBJ/200705141135557563410519 07USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135557563410519/25/40/0;;#SETMENUID_END; 08ID_MENU=MNID/O_OBJ/200705141135555001581489 08BUTTON_TITLE=Poplatky dokladu 08TYP=SEZNAM 08SEZ_TABULKA=op_popl 08SEZ_VAZBA=TRUE 08SEZ_VAZBA_COLUMN1=doklad 08NOEDIT=TRUE 08USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135555001581489/25/40/0;    #NOEDIT_EVAL_LEFT=elektroodpad <> 1;;#SETMENUID_END; 09ID_MENU=MNID/O_OBJ/200705141135554865375564 09BUTTON_TITLE=Přegeneruj Poplatky dokladu 09TYP=SQLCOMMAND 09USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135554865375564/25/40/0;    #NOEDIT_EVAL_LEFT=elektroodpad <> 1; #PERCENT_OFF; #MULTI_BUTTON; #PROCESBAR; #PROCESTEXT=Přegenerování Poplatků dokladu...; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set xcmd = '#ELOD;', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 09USER_END 10ID_MENU=MNID/O_OBJ/200811040743282641997736 10USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200811040743282641997736/25/40/0;;#SETMENUID_END; 11ID_MENU=MNID/O_OBJ/201506121445520219100280 11BUTTON_TITLE=Nastav Fixaci cen 11TYP=SQLCOMMAND 11USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=op_polozky;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201506121445520219100280/25/40/0;  #NOEDIT_EVAL_LEFT=opr_prov = 0 or storno = 1 or vyrizeno = 1; #PERCENT_OFF; #MULTI_BUTTON; #PROCESBAR; #PROCESTEXT=Nastavení Fixace cen...; #SQLCOMMAND1_BEGIN; update\tdba.op_polozky set\tcena_rucne = 1, autor = user, ts = getdate() from\tdba.op_polozky opp with(index(pk_op_polozky)) where\topp.doklad = %doklad% and\tcoalesce(opp.cena_rucne, 0) <> 1 #SQLCOMMAND1_END;;#SETMENUID_END; 11USER_END 12ID_MENU=MNID/O_OBJ/201506121449349322316690 12USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201506121449349322316690/25/40/0;;#SETMENUID_END; 13ID_MENU=MNID/O_OBJ/200811040743492516121147 13BUTTON_TITLE=Změna &měny operace dokladu 13TYP=MULTIDETAIL 13DET_TITLE=Změna měny operace dokladu 13USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200811040743492516121147/25/40/0;  #NOEDIT_EVAL_LEFT=doklad_fv <> ''; #NOMULTIWARN; #EDIT_COL_DISABLE=fiscis_0_obdobi,menycis_0_id_meny,op_polozky_0_cenik,kurzy2lis_0_kurz,kurzy2lis_0_mnozstvi,kurzy3lis_0_kurz,kurzy3lis_0_mnozstvi,menycis_0_koef_nav; #EDIT_GROUP1=Původní a nová měna; #EDIT_COL1=fiscis.obdobi; #EDIT_COL_DEFAULT1=fiscis_0_obdobi=fiskalni_rok; #EDIT_COL_DEFAULT_MULTI1=fiscis_0_obdobi=fiskalni_rok:U; #EDIT_COL2=menycis.id_meny; #EDIT_COL_DEFAULT2=menycis_0_id_meny=id_meny; #EDIT_COL_DEFAULT_MULTI2=menycis_0_id_meny=id_meny:U; #EDIT_COL2_TEXT=Původní měna; #EDIT_COL2_TAG_BEGIN; #F3TAB=menycis; #F3SAY=nazev; #EDIT_COL2_TAG_END; #EDIT_COL3=op_polozky.cenik; #EDIT_COL_DEFAULT3=op_polozky_0_cenik=cenik; #EDIT_COL_DEFAULT_MULTI3=op_polozky_0_cenik=cenik:U; #EDIT_COL3_TEXT=Původní ceník; #EDIT_COL3_TAG_BEGIN; #F3TAB=cn_cenik; #F3WHERE1=cn_cenik.poradi = (select max(cn.poradi) from dba.cn_cenik cn with(index(cn_cenik_cn_cenik_poradi)) where cn.cenik = cn_cenik.cenik and convert(#BY(datumy.datum), %menycis_0_platnost_do%) between cn.platnost_od and cn.platnost_do and cn.platnost = 1) and cn_cenik.typ_rady < 100; #F3SAY=nazev + ' (' + id_meny + ')'; #EDIT_COL3_TAG_END; #EDIT_COL4=menycis.id_meny_nav; #EDIT_COL_DEFAULT4=menycis_0_id_meny_nav=''; #EDIT_COL_DEFAULT_MULTI4=menycis_0_id_meny_nav='':U; #EDIT_COL4_TEXT=Nová měna; #EDIT_COL4_TAG_BEGIN; #F3TAB=menycis; #F3SAY=nazev; #; #SELECT1=menycis_0_koef_nav=select coalesce((select mena.koef_nav from dba.menycis mena with(index(pk_menycis)) where mena.id_meny = %menycis_0_id_meny% and mena.id_meny_nav = %menycis_0_id_meny_nav%), 0); #SELECT2=kurzycis_0_kod='':Wmenycis_0_koef_nav <> 0; #; #SELECT3=kurzy2lis_0_kurz=execute dba.prepocet_men_kurz '#RS,#KURZ', %fiscis_0_obdobi%, %menycis_0_id_meny%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny <> ''; #SELECT4=kurzy2lis_0_mnozstvi=execute dba.prepocet_men_kurz '#RS,#MNOZ', %fiscis_0_obdobi%, %menycis_0_id_meny%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny <> ''; #SELECT5=kurzy3lis_0_kurz=execute dba.prepocet_men_kurz '#RS,#KURZ', %fiscis_0_obdobi%, %menycis_0_id_meny_nav%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny_nav <> ''; #SELECT6=kurzy3lis_0_mnozstvi=execute dba.prepocet_men_kurz '#RS,#MNOZ', %fiscis_0_obdobi%, %menycis_0_id_meny_nav%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny_nav <> ''; #SELECT7=menycis_koef_0_koef=select case when mm.xkurz = 1 then round(round(%kurzy3lis_0_kurz% / %kurzy3lis_0_mnozstvi%, 8) / round(%kurzy2lis_0_kurz% / %kurzy2lis_0_mnozstvi%, 8), 8) else round(round(%kurzy2lis_0_kurz% / %kurzy2lis_0_mnozstvi%, 8) / round(%kurzy3lis_0_kurz% / %kurzy3lis_0_mnozstvi%, 8), 8) end from dba.menycis_mistni mm with(index(pk_menycis_mistni)) where mm.fiskalni_rok = %fiscis_0_obdobi%:Wkurzycis_0_kod <> '' and kurzy3lis_0_kurz <> 0 and kurzy3lis_0_mnozstvi <> 0 and kurzy2lis_0_kurz <> 0 and kurzy2lis_0_mnozstvi <> 0; #SELECT8=menycis_0_koef_nav=0:Wkurzycis_0_kod <> ''; #SELECT9=kurzy2lis_0_kurz=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod); #SELECT10=kurzy2lis_0_mnozstvi=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod); #SELECT11=kurzy3lis_0_kurz=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod) or menycis_0_id_meny_nav = '' or isnull(menycis_0_id_meny_nav); #SELECT12=kurzy3lis_0_mnozstvi=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod) or menycis_0_id_meny_nav = '' or isnull(menycis_0_id_meny_nav); #SELECT13=menycis_koef_0_koef=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod); #EDIT_COL4_TAG_END; #EDIT_COL5=op_zahlavi.cenik; #EDIT_COL_DEFAULT5=op_zahlavi_0_cenik=cenik; #EDIT_COL_DEFAULT_MULTI5=op_zahlavi_0_cenik=cenik:U; #EDIT_COL5_TEXT=Nový ceník; #EDIT_COL5_TAG_BEGIN; #F3TAB=cn_cenik; #F3WHERE1=cn_cenik.poradi = (select max(cn.poradi) from dba.cn_cenik cn with(index(cn_cenik_cn_cenik_poradi)) where cn.cenik = cn_cenik.cenik and convert(#BY(datumy.datum), %menycis_0_platnost_do%) between cn.platnost_od and cn.platnost_do and cn.platnost = 1) and cn_cenik.typ_rady < 100; #F3SAY=nazev + ' (' + id_meny + ')'; #EDIT_COL5_TAG_END; #EDIT_GROUP6=Konverzní kurz ukončení platnosti měny; #EDIT_COL6=menycis.koef_nav; #EDIT_COL_DEFAULT6=menycis_0_koef_nav=0; #EDIT_COL_DEFAULT_MULTI6=menycis_0_koef_nav=0:U; #EDIT_COL6_TEXT=Konverzní kurz přepočtu; #EDIT_GROUP7=Konverzního kurz podle kurzovního lístku; #EDIT_COL7=menycis.platnost_do; #EDIT_COL_DEFAULT7=menycis_0_platnost_do=select case when convert(#BY(datumy.datum), \\DATUM) > convert(#BY(datumy.datum), convert(varchar(10)/*BY*/, fis.ukonceno, 111)) then convert(#BY(datumy.datum), convert(varchar(10)/*BY*/, fis.ukonceno, 111)) else convert(#BY(datumy.datum), \\DATUM) end from dba.fiscis fis with(index(pk_fiscis)) where fis.obdobi = %fiskalni_rok%; #EDIT_COL_DEFAULT_MULTI7=menycis_0_platnost_do=\\DATUM; #EDIT_COL7_TEXT=Datum zjištění kurzů; #EDIT_COL7_TAG_BEGIN; #SELECT1=kurzy2lis_0_kurz=execute dba.prepocet_men_kurz '#RS,#KURZ', %fiscis_0_obdobi%, %menycis_0_id_meny%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny <> ''; #SELECT2=kurzy2lis_0_mnozstvi=execute dba.prepocet_men_kurz '#RS,#MNOZ', %fiscis_0_obdobi%, %menycis_0_id_meny%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny <> ''; #SELECT3=kurzy3lis_0_kurz=execute dba.prepocet_men_kurz '#RS,#KURZ', %fiscis_0_obdobi%, %menycis_0_id_meny_nav%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny_nav <> ''; #SELECT4=kurzy3lis_0_mnozstvi=execute dba.prepocet_men_kurz '#RS,#MNOZ', %fiscis_0_obdobi%, %menycis_0_id_meny_nav%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny_nav <> ''; #SELECT5=menycis_koef_0_koef=select case when mm.xkurz = 1 then round(round(%kurzy3lis_0_kurz% / %kurzy3lis_0_mnozstvi%, 8) / round(%kurzy2lis_0_kurz% / %kurzy2lis_0_mnozstvi%, 8), 8) else round(round(%kurzy2lis_0_kurz% / %kurzy2lis_0_mnozstvi%, 8) / round(%kurzy3lis_0_kurz% / %kurzy3lis_0_mnozstvi%, 8), 8) end from dba.menycis_mistni mm with(index(pk_menycis_mistni)) where mm.fiskalni_rok = %fiscis_0_obdobi%:Wkurzycis_0_kod <> '' and kurzy3lis_0_kurz <> 0 and kurzy3lis_0_mnozstvi <> 0 and kurzy2lis_0_kurz <> 0 and kurzy2lis_0_mnozstvi <> 0; #SELECT6=menycis_0_koef_nav=0:Wkurzycis_0_kod <> ''; #EDIT_COL7_TAG_END; #EDIT_COL8=kurzycis.kod; #EDIT_COL8_TEXT=Kód kurzovního lístku; #EDIT_COL_DEFAULT8=kurzycis_0_kod=kurzovni_listek; #EDIT_COL_DEFAULT_MULTI8=kurzycis_0_kod=kurzovni_listek:U; #EDIT_COL8_TAG_BEGIN; #F3TAB=kurzycis; #F3SAY=nazev; #; #SELECT1=kurzy2lis_0_kurz=execute dba.prepocet_men_kurz '#RS,#KURZ', %fiscis_0_obdobi%, %menycis_0_id_meny%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny <> ''; #SELECT2=kurzy2lis_0_mnozstvi=execute dba.prepocet_men_kurz '#RS,#MNOZ', %fiscis_0_obdobi%, %menycis_0_id_meny%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny <> ''; #SELECT3=kurzy3lis_0_kurz=execute dba.prepocet_men_kurz '#RS,#KURZ', %fiscis_0_obdobi%, %menycis_0_id_meny_nav%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny_nav <> ''; #SELECT4=kurzy3lis_0_mnozstvi=execute dba.prepocet_men_kurz '#RS,#MNOZ', %fiscis_0_obdobi%, %menycis_0_id_meny_nav%, %menycis_0_platnost_do%, %kurzycis_0_kod%:Wkurzycis_0_kod <> '' and menycis_0_id_meny_nav <> ''; #SELECT5=menycis_koef_0_koef=select case when mm.xkurz = 1 then round(round(%kurzy3lis_0_kurz% / %kurzy3lis_0_mnozstvi%, 8) / round(%kurzy2lis_0_kurz% / %kurzy2lis_0_mnozstvi%, 8), 8) else round(round(%kurzy2lis_0_kurz% / %kurzy2lis_0_mnozstvi%, 8) / round(%kurzy3lis_0_kurz% / %kurzy3lis_0_mnozstvi%, 8), 8) end from dba.menycis_mistni mm with(index(pk_menycis_mistni)) where mm.fiskalni_rok = %fiscis_0_obdobi%:Wkurzycis_0_kod <> '' and kurzy3lis_0_kurz <> 0 and kurzy3lis_0_mnozstvi <> 0 and kurzy2lis_0_kurz <> 0 and kurzy2lis_0_mnozstvi <> 0; #SELECT6=menycis_0_koef_nav=0:Wkurzycis_0_kod <> ''; #SELECT7=kurzy2lis_0_kurz=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod); #SELECT8=kurzy2lis_0_mnozstvi=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod); #SELECT9=kurzy3lis_0_kurz=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod) or menycis_0_id_meny_nav = '' or isnull(menycis_0_id_meny_nav); #SELECT10=kurzy3lis_0_mnozstvi=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod) or menycis_0_id_meny_nav = '' or isnull(menycis_0_id_meny_nav); #SELECT11=menycis_koef_0_koef=0:Wkurzycis_0_kod = '' or isnull(kurzycis_0_kod); #EDIT_COL8_TAG_END; #EDIT_COL9=kurzy2lis.kurz; #EDIT_COL9_TEXT=Kurz původní měny/Množství; #EDIT_COL10=kurzy2lis.mnozstvi; #EDIT_COL10_TO_PREV; #EDIT_COL11=kurzy3lis.kurz; #EDIT_COL11_TEXT=Kurz nové měny/Množství; #EDIT_COL12=kurzy3lis.mnozstvi; #EDIT_COL12_TO_PREV; #EDIT_COL13=menycis_koef.koef; #EDIT_COL13_TEXT=Konverzní kurz přepočtu; #EDIT_COL13_TAG_BEGIN; #SELECT1=menycis_0_koef_nav=0:Wmenycis_koef_0_koef <> 0; #EDIT_COL13_TAG_END; #EDIT_COL_SQLAFTER1_BEGIN; if !fiscis_0_obdobi! = ''\tbegin raiserror 99999 'Není možné aktualizovat měnu operace pro doklady z různých fiskálních roků.' return end if !menycis_0_id_meny! = ''\tbegin raiserror 99999 'Není možné aktualizovat měnu operace pro doklady z různých měn.' return end if !menycis_0_koef_nav! = 0 and !menycis_koef_0_koef! = 0\tbegin raiserror 99999 'Není zadán žádný koeficient přepočtu.' return end update\tdba.op_zahlavi set\tid_meny = !menycis_0_id_meny_nav!, cenik = !op_zahlavi_0_cenik!, xcmd = '#MENA_CHANGED=' + ! string2(if(menycis_0_koef_nav <> 0, menycis_0_koef_nav, menycis_koef_0_koef)) ! + ';' + char(9) + 'SAVED', autor = user, ts = getdate() from\tdba.op_zahlavi opz with(index(pk_op_zahlavi)) where\topz.doklad = %doklad% #EDIT_COL_SQLAFTER1_END; #EDIT_COL_INFO=Byla provedena změna měny operace dokladů; #REFRESH;;#SETMENUID_END; 13USER_END 14ID_MENU=MNID/O_OBJ/201502251531240799441652 14USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201502251531240799441652/25/40/0;;#SETMENUID_END; 15ID_MENU=MNID/O_OBJ/201502251531367989939673 15BUTTON_TITLE=Zařazení do požadavků odeslané pošty 15TYP=SQLCOMMAND 15USER_BEGIN ;#TYPP=25;;#BUTTON_WRITE_RIGHT=odpost_kniha;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201502251531367989939673/25/40/0;    #NOEDIT_EVAL_LEFT=isnull(id_posty_poz, 0) > 0 or isnull(posta_doklad, '') <> '' or op_rady_8848_rada_posty = ''; #PERCENT_OFF; #MULTI_BUTTON; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set xcmd = char(9) + 'ODPM' from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 15USER_END 16ID_MENU=MNID/O_OBJ/201502251531596115213840 16BUTTON_TITLE=Požadavek odeslané pošty 16TYP=SEZNAM 16SEZ_TABULKA=odpost_doklady 16SEZ_VAZBA=TRUE 16SEZ_VAZBA_COLUMN1=id_posty_poz 16USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201502251531596115213840/25/40/0;  #NOEDIT_EVAL_LEFT=isnull(id_posty_poz) or id_posty_poz = 0;;#SETMENUID_END; 17ID_MENU=MNID/O_OBJ/201502251532113016580653 17BUTTON_TITLE=Doklad odesláné pošty 17TYP=SEZNAM 17SEZ_TABULKA=odpost_kniha 17SEZ_VAZBA=TRUE 17SEZ_VAZBA_COLUMN1=id_posty 17USER=;#TYPP=25;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201502251532113016580653/25/40/0;  #NOEDIT_EVAL_LEFT=isnull(id_posty) or id_posty = '';;#SETMENUID_END; w_ift\tparametr/0 18ID_MENU=MNID/O_OBJ/200705141135559525303211 18BUTTON_TITLE=Po&ložky 18TYP=SEZNAM 18SEZ_TABULKA=op_polozky 18SEZ_TITLE=Seznam položek {case(druh when 30 then 'objednávky přijaté'/*TRAN*/ when 20 then 'nabídky vydané'/*TRAN*/ when 10 then 'poptávky přijaté'/*TRAN*/ else 'objednávky přijaté'/*TRAN*/)} č. {doklad} 18SEZ_VAZBA=TRUE 18SEZ_VAZBA_COLUMN1=doklad 18NOEDIT=TRUE 18USER=;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135559525303211/20/40/0;    #REFRESHSOURCE;;#SETMENUID_END; 18GEN_SORTS1=Doklad,Sestava,Díl,Položka^doklad,id_pol_vys,id_polozky,polozka 19ID_MENU=MNID/O_OBJ/202401231028295288644989 19BUTTON_TITLE=Po&ložky rozpadu 19TYP=SEZNAM 19SEZ_TABULKA=user_rozpad_dilcu 19SEZ_TITLE=Seznam položek rozpadu {doklad} 19SEZ_VAZBA=TRUE 19SEZ_VAZBA_COLUMN1=doklad 19USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//202401231028295288644989/20/30/0;    #REFRESHSOURCE; #DO_SEZ_SQL; #SEZ_SQL_ADD3000=(select op_zahlavi.dat_expedice from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS dat_expedice /*\\:Sop_zahlavi.dat_expedice:HDatum expedice*/; #SEZ_SQL_ADD3001=(select op_zahlavi.zkraceny_nazev from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS zakaznik /*\\:Sop_zahlavi.zkraceny_nazev:HZákazník*/; #SEZ_SQL_ADD3002=(select op_zahlavi.misto_dp from dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where  op_zahlavi.doklad=user_rozpad_dilcu.doklad) AS misto_dod /*\\:Sop_zahlavi.misto_dp:HMísto dodání*/; #LEGEND=#DOKL_STORNO:Stornovaná položka:Fstorno = 1; #LEGEND=#O_OBJ_ODS:Vygenerována dávka:Fdavka<>'' and exportovano = 0; #LEGEND=#DOKL_SCHVAL:Exportováno:Fexportovano = 1;;#SETMENUID_END; 19USER_END 19GEN_SORTS1=Doklad^doklad 20ID_MENU=MNID/O_OBJ/200705141135551379178316 20BUTTON_TITLE=Obj.&Jádro 20TYP=SEZNAM 20SEZ_TABULKA=obj_prv_dkl 20SEZ_VAZBA=TRUE 20SEZ_VAZBA_COLUMN1=\\'O_OBJ' 20SEZ_VAZBA_COLUMN2=\\'OP' 20SEZ_VAZBA_COLUMN3=doklad 20USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135551379178316/20/40/0;  #NOEDIT_EVAL_LEFT=druh <> 30; #BUTTON_GROUP=Obj.&Jádro; #NOSAVESORT; #REFRESHSOURCE;;#SETMENUID_END; 20USER_END 21ID_MENU=MNID/O_OBJ/201408142123579137960343 21BUTTON_TITLE=Obj.Jádro - V&ykrytí 21TYP=SEZNAM 21SEZ_TABULKA=obj_prv_vykryti 21SEZ_VAZBA=TRUE 21SEZ_VAZBA_COLUMN1=\\'O_OBJ' 21SEZ_VAZBA_COLUMN2=\\'OP' 21SEZ_VAZBA_COLUMN3=doklad 21USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//201408142123579137960343/20/40/0;  #NOEDIT_EVAL_LEFT=druh <> 30 or pozadavky not in (30, 35, 36); #BUTTON_GROUP=Obj.&Jádro; #NOSAVESORT; #REFRESHSOURCE;;#SETMENUID_END; 21USER_END 22ID_MENU=MNID/O_OBJ/200705141135558993548665 22BUTTON_TITLE=Potvrzení 22TYP=SQLCOMMAND 22USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135558993548665/20/40/0;    #BUTTON_COLOR=rgb(0, 255, 0); #BUTTON_GROUP=Potvrzení; #NOEDIT_EVAL_LEFT=potvrzeno = 1 or storno = 1 or vyrizeno = 1; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako potvrzený?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako potvrzené?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set potvrzeno = 1, xcmd = '#POTVRD;', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% and opz.storno = 0 #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 22USER_END 23ID_MENU=MNID/O_OBJ/202302011420000250574661 23BUTTON_TITLE=Zpět Potvrzení 23TYP=SQLCOMMAND 23USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202302011420000250574661/20/40/0;    #BUTTON_COLOR=rgb(0, 255, 0); #BUTTON_GROUP=Potvrzení; #BUTTON_GROUP_RIGHT; /*#LEFT_MNID=200705141135558993548665;*/ #NOEDIT_EVAL_LEFT=potvrzeno = 0 or odsouhlaseno = 1 or storno = 1 or vyrizeno = 1; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako nepotvrzený?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako nepotvrzené?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set potvrzeno = 0, odsouhlaseno = 0, xcmd = '#ODPOTVRD;', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% and opz.storno = 0 #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 23USER_END 24ID_MENU=MNID/O_OBJ/200705141135553379131401 24BUTTON_TITLE=Odsouhlasení 24TYP=SQLCOMMAND 24USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135553379131401/20/40/0;    #BUTTON_COLOR=rgb(0, 255, 0); #BUTTON_GROUP=Odsouhlasení; #NOEDIT_EVAL_LEFT=odsouhlaseno = 1 or storno = 1 or vyrizeno = 1 or (op_rady_8848_zal_fa_nast = 10 and doklad_fv_zal <> '' and op_rady_8848_zal_fa_pocet <> 11); #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako odsouhlasený?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako odsouhlasené?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set potvrzeno = 1, odsouhlaseno = 1, xcmd = '#POTVRD;', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% and opz.storno = 0 #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 24USER_END 25ID_MENU=MNID/O_OBJ/202302011420016266813150 25BUTTON_TITLE=Zpět Odsouhlasení 25TYP=SQLCOMMAND 25USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202302011420016266813150/20/40/0;    #BUTTON_COLOR=rgb(0, 255, 0); #BUTTON_GROUP=Odsouhlasení; #BUTTON_GROUP_RIGHT; /*#LEFT_MNID=200705141135553379131401;*/ #NOEDIT_EVAL_LEFT=odsouhlaseno = 0 or storno = 1 or vyrizeno = 1 or (op_rady_8848_zal_fa_nast = 10 and doklad_fv_zal <> '' and op_rady_8848_zal_fa_pocet <> 11); #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako neodsouhlasený?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako neneodsouhlasené?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set odsouhlaseno = 0, xcmd = '#ODPOTVRD;', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% and opz.storno = 0 #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 25USER_END 26ID_MENU=MNID/O_OBJ/200705141135551392534218 26BUTTON_TITLE=Vyřízení 26TYP=SQLCOMMAND 26USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135551392534218/20/40/0;    #BUTTON_COLOR=rgb(0,255,0); #BUTTON_GROUP=Vyřízení; #NOEDIT_EVAL_LEFT=vyrizeno_kl = 1 or opr_prov = 0 or storno = 1; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako vyřízený?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako vyřízené?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set vyrizeno_kl = 1, xcmd = char(9) + 'VYRIZENO', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% and opz.vyrizeno_kl = 0 #SQLCOMMAND1_END; #SQLCOMMAND2_BEGIN; update dba.op_zahlavi set xcmd = char(9) + 'SAVED' from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND2_END; #W_SOURCE_REFRESH_ROW;;#SETMENUID_END; 26USER_END 27ID_MENU=MNID/O_OBJ/202302011420027040107874 27BUTTON_TITLE=Zpět Vyřízení 27TYP=SQLCOMMAND 27USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202302011420027040107874/20/40/0;    #BUTTON_COLOR=rgb(0,255,0); #BUTTON_GROUP=Vyřízení; #BUTTON_GROUP_RIGHT; /*#LEFT_MNID=200705141135551392534218;*/ #NOEDIT_EVAL_LEFT=vyrizeno_kl = 0 or opr_prov = 0 or storno = 1; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako nevyřízený?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako nevyřízené?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set vyrizeno_kl = 0, xcmd = char(9) + 'ODVYRIZENO', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% and opz.vyrizeno_kl <> 0 #SQLCOMMAND1_END; #SQLCOMMAND2_BEGIN; update dba.op_zahlavi set xcmd = char(9) + 'SAVED' from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND2_END; #W_SOURCE_REFRESH_ROW;;#SETMENUID_END; 27USER_END 28ID_MENU=MNID/O_OBJ/201601261324489781847785 28BUTTON_TITLE=Odesláno 28TYP=SQLCOMMAND 28USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201601261324489781847785/20/40/0;    #BUTTON_COLOR=rgb(0,255,0); #BUTTON_GROUP=Odesláno; #NOEDIT_EVAL_LEFT=druh <> 20 or isnull(odeslano, 0) = 1 or storno = 1; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako odeslaný?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako odeslané?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set odeslano = 1, autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 28USER_END 29ID_MENU=MNID/O_OBJ/202302011420034899451963 29BUTTON_TITLE=Zpět Odesláno 29TYP=SQLCOMMAND 29USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202302011420034899451963/20/40/0;    #BUTTON_COLOR=rgb(0,255,0); #BUTTON_GROUP=Odesláno; #BUTTON_GROUP_RIGHT; /*#LEFT_MNID=201601261324489781847785;*/ #NOEDIT_EVAL_LEFT=druh <> 20 or isnull(odeslano, 0) = 0 or storno = 1; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako neodeslaný?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako neodeslané?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set odeslano = 0, autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 29USER_END 30ID_MENU=MNID/O_OBJ/200705141135559788159105 30BUTTON_TITLE=Znepřístupni 30TYP=SQLCOMMAND 30USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135559788159105/20/40/0;    #BUTTON_COLOR=rgb(0,0,255); #BUTTON_GROUP=Znepřístupni; #NOEDIT_EVAL_LEFT=storno = 1 or opr_prov = 0; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako znepřístupněný?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako znepřístupněné?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set opr_prov = 0, xcmd = char(9) + 'OPR_PROV', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #W_SOURCE_REFRESH_ROW;;#SETMENUID_END; 30USER_END 31ID_MENU=MNID/O_OBJ/202302011420043873555096 31BUTTON_TITLE=Zpět Znepřístupni 31TYP=SQLCOMMAND 31USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202302011420043873555096/20/40/0;    #BUTTON_COLOR=rgb(0,0,255); #BUTTON_GROUP=Znepřístupni; #BUTTON_GROUP_RIGHT; /*#LEFT_MNID=200705141135559788159105;*/ #NOEDIT_EVAL_LEFT=storno = 1 or opr_prov = 1; #BUTTON_QUESTION1=Chcete opravdu vybraný doklad označit jako neznepřístupněný?:Wsum(if(isselected(), 1, 0)) = 1; #BUTTON_QUESTION2=Chcete opravdu vybrané doklady označit jako neznepřístupněné?:Wsum(if(isselected(), 1, 0)) > 1; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set opr_prov = 1, xcmd = char(9) + 'OPR_PROV', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #W_SOURCE_REFRESH_ROW;;#SETMENUID_END; 31USER_END 32ID_MENU=MNID/O_OBJ/201807090815549821080989 32BUTTON_TITLE=&Uprav položky 32TYP=SEZNAM 32ID_SAVE=op_uprav_pol 32SEZ_TABULKA=op_polozky 32SEZ_SQL_BEGIN select op_polozky.doklad AS doklad /* \\:NV */, op_polozky.polozka AS polozka, op_polozky.sklad AS sklad, op_polozky.id_karty AS id_karty /* \\:NV */, op_polozky.karta AS karta, op_polozky.nazev AS nazev, op_polozky.mnozstvi_obj AS mnozstvi_obj, op_polozky.id_mj_vyd AS id_mj_vyd /* \\:Sop_polozky.id_mj_vyd:HMJ vyd */, op_polozky.koef_mj_vyd AS koef_mj_vyd /* \\:NV */, op_polozky.cena_mj_cen AS cena_mj_cen, coalesce(op_polozky.cena_rucne, 0) AS cena_rucne /* \\:Sop_polozky.cena_rucne */, op_polozky.slevnit AS slevnit, op_polozky.sleva AS sleva, op_polozky.cena_mj_radek AS cena_mj_radek, op_polozky.storno AS storno, op_polozky.atribut_1 AS atribut_1, op_polozky.atribut_2 AS atribut_2, op_polozky.atribut_3 AS atribut_3, 0 AS zrus /* \\:Sop_polozky.storno:HZrušit položku */, op_polozky.vyrizeno AS vyrizeno /* \\:NV */, op_polozky.id_mj_evid AS id_mj_evid /* \\:NV */, op_polozky.id_pol_vys AS id_pol_vys /* \\:NV */, op_polozky.id_polozky AS id_polozky /* \\:NV */, op_polozky.id_mj_cen AS id_mj_cen /* \\:NV */, op_polozky.koef_mj_cen AS koef_mj_cen /* \\:NV */, op_polozky.mnozstvi_obj AS o_mnozstvi_obj /* \\:NV */, op_polozky.koef_mj_vyd AS o_koef_mj_vyd /* \\:NV */, op_polozky.storno AS o_storno /* \\:NV */, op_polozky.id_mj_vyd AS o_id_mj_vyd /* \\:NV */, op_polozky.cena_mj_cen AS o_cena_mj_cen /* \\:NV */, opz.cena_polozky AS cena_polozky /* \\:Sop_zahlavi.cena_polozky:NV */ from dba.op_polozky op_polozky with(index(pk_op_polozky)), dba.op_zahlavi opz with(index(pk_op_zahlavi)) where op_polozky.doklad = %doklad% and op_polozky.polozka < 29000 and #GETWRITEWHERE(op_polozky op_polozky) and opz.doklad = op_polozky.doklad 32SEZ_SQL_END 32SEZ_MODIFY_BEGIN mnozstvi_obj.protect='1~tif(storno = 1 or zrus = 1 or vyrizeno = 1, 1, 0)' cena_mj_cen.protect='1~tif(storno = 1 or zrus = 1 or vyrizeno = 1 or cena_polozky = 0, 1, 0)' cena_rucne.protect='1~tif(storno = 1 or zrus = 1 or vyrizeno = 1 or cena_polozky = 0, 1, 0)' id_mj_vyd.protect='1~tif(storno = 1 or zrus = 1 or vyrizeno = 1, 1, 0)' storno.protect='1~tif(zrus = 1 and storno = 0 or vyrizeno = 1, 1, 0)' zrus.protect='1~tif(storno = 1 and zrus = 0 or vyrizeno = 1, 1, 0)' 32SEZ_MODIFY_END 32SEZ_F3_TAG=    #F3DISADD; 32SEZ_POCET=-1 32USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_polozky;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201807090815549821080989/20/40/0;    #BUTTON_COLOR=rgb(0,0,255); #NOEDIT_EVAL_LEFT=storno = 1 or vyrizeno = 1 or opr_prov = 0; #SEZNAM_EDIT; #NOADDTABMENU; #NO_TABLE_HELPLINKS; #ADDTYP=SEZNAM,op_polozky_zrus; #EDITCOLS=mnozstvi_obj,id_mj_vyd,storno,zrus,cena_mj_cen,cena_rucne; #TAGCOLS=mnozstvi_obj,id_mj_vyd,storno,zrus,cena_mj_cen; #HIDESAVE; #SHOWFILTER=on; #CLOSEQUESTION=NOTSAVED; #MNOZSTVI_OBJ_TAG_BEGIN; #SELECT1=mnozstvi_obj_t.tag=string(id_pol_vys) + '^' + string(if(o_mnozstvi_obj = 0, 0, o_mnozstvi_obj) / if(mnozstvi_obj = 0, 1, mnozstvi_obj)) + '^' + id_karty + '^' + sklad; #SELECT2=GOTO99:Wid_polozky <> 0; #SELECT3=mnozstvi_obj=execute dba.odb_zaokr_dily_ @string2(round(if(dec2(item(describe('mnozstvi_obj_t.tag'), 2)) = 0, 0, o_mnozstvi_obj) / if(dec2(item(describe('mnozstvi_obj_t.tag'), 2)) = 0, 1, dec2(item(describe('mnozstvi_obj_t.tag'), 2))), 4)):NA@, @item(describe('mnozstvi_obj_t.tag'), 3)@, @item(describe('mnozstvi_obj_t.tag'), 4)@, @id_polozky@, @id_karty@:Wid_pol_vys = dec2(item(describe('mnozstvi_obj_t.tag'), 1)) and id_polozky <> 0:a; #MNOZSTVI_OBJ_TAG_END; #ID_MJ_VYD_TAG_BEGIN; #F3TAB=sklad_mj; #F3COL=id_karty,id_mj_evid,id_mj_vyd; #F3WHERE=sklad_mj.id_nomen = %id_karty% and sklad_mj.id_mj_evid = %id_mj_evid% and sklad_mj.vydej = 1; #F3NOFILTER=id_nomen,id_mj_evid; #SELECT1=koef_mj_vyd=select smj.koeficient from dba.sklad_mj smj with(index(pk_sklad_mj)) where smj.id_nomen = %id_karty% and smj.id_mj_evid = %id_mj_evid% and smj.id_mj = %id_mj_vyd%; #ID_MJ_VYD_TAG_END; #STORNO_TAG_BEGIN; #SELECT1=mnozstvi_obj=o_mnozstvi_obj:V; #SELECT2=id_mj_vyd=o_id_mj_vyd:V; #SELECT3=cena_mj_cen=o_cena_mj_cen; #SELECT4=koef_mj_vyd=o_koef_mj_vyd; #STORNO_TAG_END; #CENA_MJ_CEN_TAG_BEGIN; #SELECT1=cena_mj_radek=cena_mj_cen * if(slevnit = 0, 1, (1 - sleva / 100)) * if(id_mj_vyd = id_mj_cen or koef_mj_cen = 0, 1, round(koef_mj_vyd / koef_mj_cen, 6)); #SELECT2=cena_rucne=1; #CENA_MJ_CEN_TAG_END; #SQLTYPEEVAL=if(zrus = 1, 'del', 'upd'); #CHECKBEFOREEVAL1=select coalesce((select 'true' from dba.sklad_mj smj with(index(pk_sklad_mj)) where smj.id_nomen = @id_karty@ and smj.id_mj_evid = @id_mj_evid@ and smj.id_mj = @id_mj_vyd@), 'false'):MNa položce č. @polozka@ je nesprávně zadaná MJ výdeje.; #UPDATE1_BEGIN; update dba.op_polozky set mnozstvi_obj = case when @storno@ = 1 then @o_mnozstvi_obj@ else @mnozstvi_obj@ end, id_mj_vyd = case when @storno@ = 1 then @o_id_mj_vyd@ else @id_mj_vyd@ end, cena_mj_cen = case when @storno@ = 1 then @o_cena_mj_cen@ else @cena_mj_cen@ end, cena_rucne = @cena_rucne@, storno = @storno@, koef_mj_vyd = case when @storno@ = 1 then @o_koef_mj_vyd@ else @koef_mj_vyd@ end, xcmd = case when @storno@ = 1 then char(9) + 'STORNO' when @cena_rucne@ = 0 then char(9) + 'OPRAVA_CEN' end + '#SET_VALUES;', autor = user, ts = getdate() from dba.op_polozky opp with(index(pk_op_polozky)) where opp.doklad = @doklad@ and opp.polozka = @polozka@ #UPDATE1_END; #DELETE1_BEGIN; delete dba.op_polozky from dba.op_polozky opp with(index(pk_op_polozky)) where opp.doklad = @doklad@ and opp.polozka = @polozka@ #DELETE1_END; #SQLAFTEREVAL_BEGIN; update dba.op_zahlavi set xcmd = char(9) + 'SAVED' from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = !doklad! #SQLAFTEREVAL_END; #RESELECTROW; #LEGEND=#ODB_SES_NE:Běžná položka:Fid_pol_vys = 0 and id_polozky = 0 and storno <> 1; #LEGEND=#ODB_SESTAVA:Sestava:Fid_pol_vys <> 0 and id_polozky = 0 and storno <> 1; #LEGEND=#ODB_DILY:Díly sestavy:Fid_pol_vys <> 0 and id_polozky <> 0 and storno <> 1; #LEGEND=#DOKL_STORNO:Stornovaná položka:Fstorno = 1;;#SETMENUID_END; 32USER_END 33ID_MENU=MNID/O_OBJ/201907150925057809771941 33BUTTON_TITLE=Nastav stav Akceptováno 33TYP=SQLCOMMAND 33USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201907150925057809771941/20/40/0;    #BUTTON_GROUP=Akceptace importu; #NOEDIT_EVAL_LEFT=isnull(import, 0) = 0 or par_export = 0 or opr_imp_ordrsp_dkl_10 <> 0; #MULTI_BUTTON; #PERCENT_OFF; #PROCESBAR; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set exp_ordrsp_stav_akc = 10, autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 33USER_END 34ID_MENU=MNID/O_OBJ/201907151115364122328928 34BUTTON_TITLE=Nastav stav Neakceptováno 34TYP=SQLCOMMAND 34USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201907151115364122328928/20/40/0;    #BUTTON_GROUP=Akceptace importu; #NOEDIT_EVAL_LEFT=isnull(import, 0) = 0 or par_export = 0 or opr_imp_ordrsp_dkl_20 <> 0; #MULTI_BUTTON; #PERCENT_OFF; #PROCESBAR; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set exp_ordrsp_stav_akc = 20, autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 34USER_END 35ID_MENU=MNID/O_OBJ/201907151116166376593885 35BUTTON_TITLE=Nastav stav Změna 35TYP=SQLCOMMAND 35USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201907151116166376593885/20/40/0;    #BUTTON_GROUP=Akceptace importu; #NOEDIT_EVAL_LEFT=isnull(import, 0) = 0 or par_export = 0; #MULTI_BUTTON; #PERCENT_OFF; #PROCESBAR; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set exp_ordrsp_stav_akc = 30, autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROW;;#SETMENUID_END; 35USER_END 36ID_MENU=MNID/O_OBJ/201907121149310765884685 36BUTTON_TITLE=Zařadit k exportu potvrzení 36TYP=SQLCOMMAND 36USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201907121149310765884685/20/40/0;    #BUTTON_GROUP=Zařadit k exportu potvrzení; #NOEDIT_EVAL_LEFT=druh <> 30 or par_export <> 1 or isnull(export, 0) <> 0 or isnull(exp_ordrsp_stav_akc, 0) = 0; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set export = 1, xcmd = '#AKT_STAVY;', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROWS;;#SETMENUID_END; 36USER_END 37ID_MENU=MNID/O_OBJ/202302011420067203411831 37BUTTON_TITLE=Zpět Zařadit k exportu potvrzení 37TYP=SQLCOMMAND 37USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202302011420067203411831/20/40/0;    #BUTTON_GROUP=Zařadit k exportu potvrzení; #BUTTON_GROUP_RIGHT; /*#LEFT_MNID=201907121149310765884685;*/ #NOEDIT_EVAL_LEFT=druh <> 30 or par_export <> 1 or isnull(export, 0) <> 1 or isnull(exp_ordrsp_stav_akc, 0) = 0; #MULTI_BUTTON; #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update dba.op_zahlavi set export = 0, xcmd = '#AKT_STAVY;', autor = user, ts = getdate() from dba.op_zahlavi opz with(index(pk_op_zahlavi)) where opz.doklad = %doklad% #SQLCOMMAND1_END; #REFRESHROWS;;#SETMENUID_END; 37USER_END 38ID_MENU=MNID/O_OBJ/200705141135558650635181 38BUTTON_TITLE=Generuj poptávku přijatou 38TYP=GROUP 38AKCE=op_gen_op 38USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135558650635181/20/40/0;    #BUTTON_GROUP=O&bjednávky; #SPACEBEFORE; #NOEDIT_EVAL_LEFT=storno = 1 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or op_rady_8848_op_rada_pop = ''; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 38USER_END 3801ID_MENU=MNID/O_OBJ/200705141135557213945120 3801BUTTON_TITLE=Generuj poptávku (substituce) 3801TYP=NOTHING 3801USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135557213945120/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_op_denik_pop; #GROUP_SUB2=#RD=op_rady_8848_op_rada_pop; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#AKCE='POP':NA;;#SETMENUID_END; 3801USER_END 39ID_MENU=MNID/O_OBJ/200705141135557853006739 39BUTTON_TITLE=Generuj nabídku vydanou 39TYP=GROUP 39AKCE=op_gen_op 39USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135557853006739/20/40/0;    #BUTTON_GROUP=O&bjednávky; #NOEDIT_EVAL_LEFT=storno = 1 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or op_rady_8848_op_rada_nab = ''; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 39USER_END 3901ID_MENU=MNID/O_OBJ/200705141135551547222645 3901BUTTON_TITLE=Generuj nabídku (substituce) 3901TYP=NOTHING 3901USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135551547222645/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_op_denik_nab; #GROUP_SUB2=#RD=op_rady_8848_op_rada_nab; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#AKCE='NAB':NA;;#SETMENUID_END; 3901USER_END 40ID_MENU=MNID/O_OBJ/200705141135550858076406 40BUTTON_TITLE=Generuj objednávku přijatou 40TYP=GROUP 40AKCE=op_gen_op 40USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135550858076406/20/40/0;    #BUTTON_GROUP=O&bjednávky; #NOEDIT_EVAL_LEFT=storno = 1 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or op_rady_8848_op_rada_op = ''; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 40USER_END 4001ID_MENU=MNID/O_OBJ/200705141135556000171528 4001BUTTON_TITLE=Generuj objednávku přijatou (substituce) 4001TYP=NOTHING 4001USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135556000171528/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_op_denik_op; #GROUP_SUB2=#RD=op_rady_8848_op_rada_op; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#AKCE='OBJ':NA;;#SETMENUID_END; 4001USER_END 41ID_MENU=MNID/O_OBJ/200705141135552823294874 41BUTTON_TITLE=Generuj objednávku vydanou 41TYP=GROUP 41AKCE=op_gen_ov 41USER_BEGIN ;#BUTTON_WRITE_RIGHT=ov_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135552823294874/20/40/0;    #BUTTON_GROUP=O&bjednávky; #NOEDIT_EVAL_LEFT=storno = 1 or druh <> 30 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or op_rady_8848_op_rada_ov = '' or doklad_ov <> '' or vyrizeno = 1 or dodano_predb = 1; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 41USER_END 4101ID_MENU=MNID/O_OBJ/200705141135553155354869 4101BUTTON_TITLE=Generuj objednávku vydanou (substituce) 4101TYP=NOTHING 4101USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135553155354869/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_op_denik_ov; #GROUP_SUB2=#RD=op_rady_8848_op_rada_ov; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#AKCE='OBJ':NA;;#SETMENUID_END; 4101USER_END 42ID_MENU=MNID/O_OBJ/201301251531191366684642 42BUTTON_TITLE=Generování OV na &dodavatele 42TYP=FILTERWHERE 42USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//201301251531191366684642/20/40/0;  #BUTTON_GROUP=O&bjednávky; #NOEDIT_EVAL_LEFT=druh <> 30 or storno = 1 or vyrizeno = 1 or dodano_predb = 1; #NOMULTIWARN; #ADDTYP=FILTER,gen_ov_dle_op; #ADDTYP=FILTER,gen_ov_dle_op_obj; #GEN_FILTER_OV_RADA_ADD_BEGIN; #EDIT_COL2_DEFAULT=op_rady_8848_op_denik_ov; #EDIT_COL3_DEFAULT=op_rady_8848_op_rada_ov; #GEN_FILTER_OV_RADA_ADD_END; #GEN_FILTER_OBJ_ADD_BEGIN; #PERCENT_OFF; #INIT_WHERE1_BEGIN; (#FOREACH_ID1=if(isselected() and druh = 30 and storno = 0 and vyrizeno = 0, doklad, ''):WE;(op_zahlavi.doklad = '@VALUE_ID1') or #NEXT_ID1; 1=0) #INIT_WHERE1_END; #GEN_FILTER_OBJ_ADD_END;;#SETMENUID_END; 42USER_END 43ID_MENU=MNID/O_OBJ/200705141135553417851268 43BUTTON_TITLE=Návazné generované PP / NV / OP 43TYP=SEZNAM 43SEZ_TABULKA=op_zahlavi 43SEZ_TITLE=Návazné doklady poptávek přijatých, nabídek vydaných a objednávek přijatých vygenerované z {doklad} 43SEZ_PODMINKA=op_zahlavi.doklad = tmp.doklad #OPT(#tmp_dkl tmp /ADD, dba.op_zahlavi op_zahlavi) #FORCEPLAN; 43SEZ_F3_TAG=    #F3DISADD; 43USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135553417851268/20/40/0;    #BUTTON_GROUP=O&bjednávky; #SPACEBEFORE; #NOEDIT_EVAL_LEFT='\\OV_ZAHLAVI_NAV_NOEDIT'='1'; #NOSAVESORT; #USERSUB1=\\OV_ZAHLAVI_NAV_NOEDIT=1:C:NA; #DO_PARENT_USERSUB; #COMBO_BEGIN; #COMBO_ID=primo_gen; #POLOZKY= Přímo generované doklady\\1\\tmp.uroven = 1^; #POPISBEZ=.Všechny generované doklady; #DEFAULT=1; #COMBO_END; #DBEXECUTE_BODY_BEGIN; CREATE_BEGIN begin CREATE TABLE #tmp_dkl(doklad #BY(op_zahlavi.doklad), uroven smallint/*BY*/) end CREATE_END EXECUTE_BEGIN begin declare @uroven smallint/*BY*/ select @uroven = 1 insert into #tmp_dkl(doklad, uroven) select opz.doklad, @uroven from dba.op_zahlavi opz with(index(op_zahlavi_doklad_gen), readuncommitted) where opz.id_modulu_gen = 'O_OBJ' and opz.agenda_gen = 'OP' and opz.doklad_gen = %doklad% while 1 = 1 begin select @uroven = @uroven + 1 insert into #tmp_dkl(doklad, uroven) select opz.doklad, @uroven from #tmp_dkl tmp, dba.op_zahlavi opz with(index(op_zahlavi_doklad_gen), readuncommitted) where tmp.uroven = @uroven - 1 and opz.id_modulu_gen = 'O_OBJ' and opz.agenda_gen = 'OP' and opz.doklad_gen = tmp.doklad if @@rowcount = 0 break end end EXECUTE_END DROP_BEGIN drop table #tmp_dkl DROP_END #DBEXECUTE_BODY_END;;#SETMENUID_END; 43USER_END 44ID_MENU=MNID/O_OBJ/200705141135556298935930 44BUTTON_TITLE=Návazné generované OV 44TYP=SEZNAM 44CLASS=w_iftseznam_doklad 44SEZ_TABULKA=ov_zahlavi 44SEZ_TITLE=Návazné doklady objednávek vygenerované z objednávky přijaté {doklad} 44SEZ_F3_TAG=  #F3DISADD; 44SEZ_VAZBA=TRUE 44SEZ_VAZBA_INDEX=ov_zahlavi_doklad_op 44SEZ_VAZBA_COLUMN1=\\'O_OBJ' 44SEZ_VAZBA_COLUMN2=\\'OP' 44SEZ_VAZBA_COLUMN3=doklad 44USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135556298935930/20/40/0;  #BUTTON_GROUP=O&bjednávky; #NOSAVESORT;;#SETMENUID_END; 44USER_END 45ID_MENU=MNID/O_OBJ/200903021018557149550277 45BUTTON_TITLE=Generuj kalkulaci TPV 45TYP=SQLCOMMAND 45USER_BEGIN ;#BUTTON_WRITE_RIGHT=v_kalk_dkl;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903021018557149550277/20/40/0;    #NOEDIT_EVAL_LEFT=op_rady_8848_tpv_denik_kalk = '' or op_rady_8848_tpv_rada_kalk = '' or storno = 1 or vyrizeno = 1 or dodano_predb = 1; #BUTTON_GROUP=Výroba; #BUTTON_QUESTION=Opravdu si přejete Generovat / Aktualizovat doklad kalkulace TPV?; #PERCENT_OFF; #MULTI_BUTTON; #PROCESBAR; #PROCESTEXT=Generování kalkulace TPV z dokladů OP; #PROCESMESS=Generuji kalkulaci TPV dokladu OP %doklad%...; #SQLCOMMAND1=execute dba.o_obj_gen_kalk_tpv %doklad%; #REFRESHROW;;#SETMENUID_END; 45USER_END 46ID_MENU=MNID/O_OBJ/200903021025040264075675 46BUTTON_TITLE=Položky kalkulace 46TYP=SEZNAM 46ID_SAVE=v_kalk_pol_z_op 46SEZ_TABULKA=v_kalk_pol 46SEZ_TITLE=Výrobní kalkulace - položky objednávky {doklad} 46SEZ_MODIFY_BEGIN cena.font.weight=700 cena_prod.font.weight=700 46SEZ_MODIFY_END 46SEZ_PODMINKA=op_polozky.doklad = v_kalk_dkl.objednavka and op_polozky.polozka = v_kalk_pol.polozka #OPT(dba.v_kalk_dkl v_kalk_dkl, dba.op_polozky op_polozky with(index(pk_op_polozky)) /ADD) 46SEZ_F3_TAG_BEGIN #F3DISADD; #F3DISDELETE; 46SEZ_F3_TAG_END 46SEZ_VAZBA=TRUE 46SEZ_VAZBA_COLUMN1=doklad_kalk 46USER_BEGIN ;#BUTTON_WRITE_RIGHT=v_kalk_pol;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903021025040264075675/20/40/0;    #BUTTON_GROUP=Výroba; #SEZNAM_EDIT; #SAVEFILE=o_obj; #SEZ_SQL_ADD1_BEGIN; op_polozky.id_karty, op_polozky.karta, op_polozky.sklad, op_polozky.nazev, op_polozky.atribut_1, op_polozky.atribut_2, op_polozky.atribut_3, op_polozky.baleni, op_polozky.mnozstvi_obj, op_polozky.id_mj_vyd, v_vyrobek.kj, v_kalk_dkl.datum #SEZ_SQL_ADD1_END; #NOADDCOMBO; #NOEDIT_EVAL_LEFT=doklad_kalk = ''; #SHOWFILTER=ON; #ENABLE_AUTO_SAVE_ROW; #DEFAULT_AUTO_SAVE=ROW; #FINDROWEVAL=doklad = %doklad% and polozka = %polozka%; #EDITCOLS=postup0; #TAGCOLS=postup0; #POSTUP0_TAG_BEGIN; #F3TAB=v_vyrobek; #F3COL=postup0,poradi0,polozka0; #F3WHERE=v_vyrobek.id_nomen = %op_polozky_id_karty% and v_vyrobek.platnost = 1 and v_vyrobek.baleni = %op_polozky_baleni% and v_vyrobek.atribut_1 = (case when %op_polozky_atribut_1% = '' then v_vyrobek.atribut_1 else %op_polozky_atribut_1% end) and v_vyrobek.atribut_2 = (case when %op_polozky_atribut_2% = '' then v_vyrobek.atribut_2 else %op_polozky_atribut_2% end) and v_vyrobek.atribut_3 = (case when %op_polozky_atribut_3% = '' then v_vyrobek.atribut_3 else %op_polozky_atribut_3% end) and v_zahlavi.postup <> '' and v_zahlavi.postup = v_vyrobek.postup and v_zahlavi.poradi = v_vyrobek.poradi and v_zahlavi.platnost = 1 and convert(#BY(datumy.datum), %v_kalk_dkl_datum%) between v_zahlavi.platnost_od and v_zahlavi.platnost_do #OPT(dba.v_vyrobek, dba.v_zahlavi v_zahlavi with(index(pk_v_zahlavi)) /ADD); #SELECT1=index_vyr0=select vyr.index_vyr from dba.v_vyrobek vyr with(index(pk_v_vyrobek)) where vyr.postup = %postup0% and vyr.poradi = %poradi0% and vyr.polozka = %polozka0%; #SELECT2=hospdavka0=select zah.hospdavka from dba.v_zahlavi zah with(index(pk_v_zahlavi)) where zah.postup = %postup0% and zah.poradi = %poradi0%; #POSTUP0_TAG_END; #SQLTYPEEVAL='upd'; #UPDATE1_BEGIN; update dba.v_kalk_pol set postup0 = @postup0@, poradi0 = @poradi0@, polozka0 = @polozka0@, xcmd = '#EASYINSERT;', autor = user, ts = getdate() from dba.v_kalk_pol pol with(index(pk_v_kalk_pol)) where doklad = @doklad@ and polozka = @polozka@ #UPDATE1_END; #REFRESHROW_COLUMNS=v_vyrobek_kj,cena0,cena,norminuty0,norminuty,rezminuty0,rezminuty,jedn_mzdy0,jedn_mzdy,rez_mzdy0,rez_mzdy,material0,material,kooper0,kooper,strnakl0,strnakl,rn10,rn1,rn20,rn2,rn30,rn3,rn40,rn4,rn50,rn5,rn60,rn6,rn70,rn7,rn80,rn8,rn90,rn9,rn00,rn0,datum,cena_prod,mj_prod,mena_prod,stat_dph,dph_anone; #REFRESHROW_SELECT_BEGIN; select v_vyrobek.kj, v_kalk_pol.cena0, v_kalk_pol.cena, v_kalk_pol.norminuty0, v_kalk_pol.norminuty, v_kalk_pol.rezminuty0, v_kalk_pol.rezminuty, v_kalk_pol.jedn_mzdy0, v_kalk_pol.jedn_mzdy, v_kalk_pol.rez_mzdy0, v_kalk_pol.rez_mzdy, v_kalk_pol.material0, v_kalk_pol.material, v_kalk_pol.kooper0, v_kalk_pol.kooper, v_kalk_pol.strnakl0, v_kalk_pol.strnakl, v_kalk_pol.rn10, v_kalk_pol.rn1, v_kalk_pol.rn20, v_kalk_pol.rn2, v_kalk_pol.rn30, v_kalk_pol.rn3, v_kalk_pol.rn40, v_kalk_pol.rn4, v_kalk_pol.rn50, v_kalk_pol.rn5, v_kalk_pol.rn60, v_kalk_pol.rn6, v_kalk_pol.rn70, v_kalk_pol.rn7, v_kalk_pol.rn80, v_kalk_pol.rn8, v_kalk_pol.rn90, v_kalk_pol.rn9, v_kalk_pol.rn00, v_kalk_pol.rn0, v_kalk_pol.datum, v_kalk_pol.cena_prod, v_kalk_pol.mj_prod, v_kalk_pol.mena_prod, v_kalk_pol.stat_dph, v_kalk_pol.dph_anone from dba.v_vyrobek v_vyrobek with(index(pk_v_vyrobek)), dba.v_kalk_pol v_kalk_pol with(index(pk_v_kalk_pol)) where v_vyrobek.postup = $postup0$ and v_vyrobek.poradi = $poradi0$ and v_vyrobek.polozka = $polozka0$ and v_kalk_pol.doklad = $doklad$ and v_kalk_pol.polozka = $polozka$ #REFRESHROW_SELECT_END; #REFRESHROW_WHERE=op_polozky.doklad = v_kalk_dkl.objednavka and op_polozky.polozka = v_kalk_pol.polozka #OPT(dba.v_kalk_dkl v_kalk_dkl, dba.op_polozky op_polozky with(index(pk_op_polozky)) /ADD); #REFRESHSOURCE;;#SETMENUID_END; 46USER_END 47ID_MENU=MNID/O_OBJ/200903021025536428721446 47BUTTON_TITLE=Doklad kalkulace 47TYP=SEZNAM 47SEZ_TABULKA=v_kalk_dkl 47SEZ_VAZBA=TRUE 47SEZ_VAZBA_COLUMN1=doklad_kalk 47USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903021025536428721446/20/40/0;    #BUTTON_GROUP=Výroba; #NOEDIT_EVAL_LEFT=doklad_kalk = '';;#SETMENUID_END; 47USER_END 48ID_MENU=MNID/O_OBJ/200903021027123736309291 48BUTTON_TITLE=Zjištění termínu dodání plánováním (Gantt diagram) 48USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903021027123736309291/20/40/0;    #BUTTON_GROUP=Výroba; #NOEDIT_EVAL_LEFT=doklad_kalk='' or ((not islicmodul('GANTT')) and (not islicmodul2('GANTT'))) or (not islicmodul('V_ZAK')); #SPACEBEFORE; #ADDTYP=GANTT,gantt_v_kalk; #XMESSAGE1=POZOR: Objednávka obsahuje výrobky z různých druhů plánování, Gantt diagram je třeba volat samostatně z položek kalkulace!:e:Wselect coalesce((select case when max(pol.xplan) <> min(pol.xplan) then 'true' else 'false' end from dba.v_kalk_pol pol with(index(pk_v_kalk_pol)) where pol.doklad = %doklad_kalk% and %doklad_kalk% <> ''), 'true'); #XMESSAGE2=POZOR: Z objednávky je již vygenerován výrobní příkaz, Gantt diagram je nutno volat ze Zakázkového postupu nebo z modulu Zdroje!:e:Wselect isnull((select Max('true') from dba.v_opv opv with(index(v_opv_objed)) where opv.objednavka = %doklad%), 'false'); #WSUBUSER; #PERCENT_OFF; #USERSUB1=#DEF_PLAN_XPLAN=select max(xplan) from dba.v_kalk_pol pol with(index(pk_v_kalk_pol)) where pol.doklad = %doklad_kalk%:NA; #USERSUB2=#DEF_DOKLAD=doklad_kalk:NA; #USERSUB3=#DEF_POLOZKA=0:C:NA; #USERSUB4=#GANTT_TITLE=select 'Objednávka ' + %doklad%:NA; #USERSUB5=#REZIM=2:C:NA; #USERSUB6=#AKTIVNI=1:C:NA; #USERSUB7=#TERMIN=1:NA; #USERSUB8=#UKLADANI=DIREKTIVY:C:NA;;#SETMENUID_END; 48USER_END 49ID_MENU=MNID/O_OBJ/200903021021508683342546 49BUTTON_TITLE=Generuj výrobní příkaz 49TYP=GROUP 49AKCE=op_gen_vp 49USER_BEGIN ;#BUTTON_WRITE_RIGHT=v_opvz;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903021021508683342546/20/40/0;    #BUTTON_GROUP=Výroba; #SPACEBEFORE; #NOEDIT_EVAL_LEFT=op_rady_8848_v_zak_denik = '' or op_rady_8848_v_zak_rada = '' or storno = 1 or druh <> 30 or vyrizeno = 1 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or dodano_predb = 1; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 49USER_END 4901ID_MENU=MNID/O_OBJ/200903021627418332263065 4901BUTTON_TITLE=Generuj VP (substituce) 4901TYP=NOTHING 4901USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903021627418332263065/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_v_zak_denik; #GROUP_SUB2=#RD=op_rady_8848_v_zak_rada;;#SETMENUID_END; 4901USER_END 50ID_MENU=MNID/O_OBJ/200903020947071123995764 50BUTTON_TITLE=Návazné výrobní příkazy 50TYP=SEZNAM 50SEZ_TABULKA=v_opvz 50SEZ_PODMINKA=exists(select 1 from dba.v_opv v_opv with(index(v_opv_objed)) where v_opv.objednavka = %doklad% and v_opv.doklad = v_opvz.doklad) 50SEZ_F3_TAG_BEGIN #F3DISADD; #F3DISDELETE; 50SEZ_F3_TAG_END 50USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903020947071123995764/20/40/0;    #BUTTON_GROUP=Výroba; #USE_INDEX=pk_v_opvz;;#SETMENUID_END; 50USER_END 51ID_MENU=MNID/O_OBJ/200903020952159849600579 51BUTTON_TITLE=Návazné položky výrobních příkazů 51TYP=SEZNAM 51SEZ_TABULKA=v_opv 51SEZ_VAZBA=TRUE 51SEZ_VAZBA_INDEX=v_opv_objed 51SEZ_VAZBA_COLUMN1=doklad 51NOEDIT=TRUE 51USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903020952159849600579/20/40/0;    #BUTTON_GROUP=Výroba; #NOSAVESORT;;#SETMENUID_END; 51USER_END 52ID_MENU=MNID/O_OBJ/200903021029254626498003 52BUTTON_TITLE=Návazné zakázkové postupy 52TYP=SEZNAM 52SEZ_TABULKA=v_opvvyrza 52SEZ_PODMINKA=exists(select 1 from dba.v_opv opv with(index(v_opv_objed)) where opv.objednavka = %doklad% and v_opvvyrza.opvfinal = opv.opv) 52USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200903021029254626498003/20/40/0;    #BUTTON_GROUP=Výroba; #NOSAVESORT;;#SETMENUID_END; 52USER_END 53ID_MENU=MNID/O_OBJ/200705141135552428051672 53BUTTON_TITLE=Generuj zálohovou fakturu 53TYP=GROUP 53AKCE=op_gen_fv 53USER_BEGIN ;#BUTTON_WRITE_RIGHT=fv_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135552428051672/20/40/0;    #BUTTON_GROUP=Odb&yt; #NOEDIT_EVAL_LEFT=storno = 1 or druh <> 30 or (op_rady_8848_zal_fa_nast = 10 and odsouhlaseno = 1 and (doklad_fv_zal = '' or (op_rady_8848_zal_fa_pocet = 11 and doklad_fv_zal <> ''))) or (op_rady_8848_zal_fa_nast = 20 and expedovat_z = 1 and (doklad_fv_zal = '' or (op_rady_8848_zal_fa_pocet = 11 and doklad_fv_zal <> ''))) or vyrizeno = 1 or dodano_predb = 1 or (op_rady_8848_zal_fa_pocet = 1 and doklad_fv_zal <> '') or op_rady_8848_fv_rada_zal = '' or cena_bez_dph = 0 or cena_polozky = 0; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 53USER_END 5301ID_MENU=MNID/O_OBJ/200705141135552239350277 5301BUTTON_TITLE=Generuj zálohovou fakturu (substituce) 5301TYP=NOTHING 5301USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135552239350277/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_fv_denik_zal; #GROUP_SUB2=#RD=op_rady_8848_fv_rada_zal; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#TYP_DOKLADU=20:NA;;#SETMENUID_END; 5301USER_END 54ID_MENU=MNID/O_OBJ/200705141135553044795831 54BUTTON_TITLE=Generuj výdajový list 54TYP=GROUP 54AKCE=op_gen_vl 54USER_BEGIN ;#BUTTON_WRITE_RIGHT=vl_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135553044795831/20/40/0;    #BUTTON_GROUP=Odb&yt; #NOEDIT_EVAL_LEFT=storno = 1 or druh <> 30 or expedovat_z <> 1 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or vyrizeno = 1 or dodano_predb = 1 or op_rady_8848_op_denik_vl = ''; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 54USER_END 5401ID_MENU=MNID/O_OBJ/200705141135559844780483 5401BUTTON_TITLE=Generuj výdajový list (substituce) 5401TYP=NOTHING 5401USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135559844780483/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_op_denik_vl; #GROUP_SUB2=#RD=op_rady_8848_op_rada_vl; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#OBNOV=if(druh = 30, 1, 0):NA;;#SETMENUID_END; 5401USER_END 55ID_MENU=MNID/O_OBJ/200905190727002107850958 55BUTTON_TITLE=Generuj převáděcí list 55TYP=GROUP 55AKCE=op_gen_prev 55USER_BEGIN ;#BUTTON_WRITE_RIGHT=prev_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200905190727002107850958/20/40/0;    #BUTTON_GROUP=Odb&yt; #NOEDIT_EVAL_LEFT=storno = 1 or druh <> 30 or expedovat_z <> 1 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or vyrizeno = 1 or dodano_predb = 1 or op_rady_8848_op_rada_prev = ''; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 55USER_END 5501ID_MENU=MNID/O_OBJ/200905190728449186800574 5501BUTTON_TITLE=Generuj převádécí list (substituce) 5501TYP=NOTHING 5501USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200905190728449186800574/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=op_rady_8848_op_denik_prev; #GROUP_SUB2=#RD=op_rady_8848_op_rada_prev; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#OBNOV=if(druh = 30, 1, 0):NA;;#SETMENUID_END; 5501USER_END 56ID_MENU=MNID/O_OBJ/200705141135553055071090 56BUTTON_TITLE=Generuj fakturu na služby 56TYP=GROUP 56AKCE=op_gen_fv 56USER_BEGIN ;#BUTTON_WRITE_RIGHT=fv_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135553055071090/20/40/0;    #BUTTON_GROUP=Odb&yt; #NOEDIT_EVAL_LEFT=storno = 1 or druh <> 30 or (potvrzeno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 2) or (odsouhlaseno = 0 and if(isnull(op_rady_8848_vydej_neods), 0, op_rady_8848_vydej_neods) = 0) or vyrizeno = 1 or dodano_predb = 1 or fv_rada = '' or cena_bez_dph = 0 or cena_polozky = 0; #MULTI_BUTTON; #BUTTON_QUESTION1=Opravdu generovat doklady z označených záznamů?:Wsum(if(isselected(), 1, 0) for all) > 1; #BUTTON_QUESTION_SUB1=#TISKNOUT=Generovat doklady s tiskem?:Wsum(if(isselected(), 1, 0) for all) > 1; #PRAVO_DEF=30;;#SETMENUID_END; 56USER_END 5601ID_MENU=MNID/O_OBJ/200705141135556654924894 5601BUTTON_TITLE=Generuj fakturu na služby (substituce) 5601TYP=NOTHING 5601USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135556654924894/45/40/0;    #MULTI_BUTTON; #GROUP_SUB1=#DN=fv_denik; #GROUP_SUB2=#RD=fv_rada; #GROUP_SUB3=#S_TISKEM='#TISKNOUT':NA; #GROUP_SUB4=#TYP_DOKLADU=10:NA;;#SETMENUID_END; 5601USER_END 57ID_MENU=MNID/O_OBJ/200705141135552393458900 57BUTTON_TITLE=Návazné generované zálohové faktury 57TYP=SEZNAM 57SEZ_TABULKA=fv_zahlavi 57SEZ_TITLE=Návazné zálohové FV vygenerované z objednávky {doklad} 57SEZ_PODMINKA=fv_zahlavi.objednavka = %doklad% and fv_zahlavi.typ_dokladu = 20 57SEZ_F3_TAG=    #F3DISADD; 57USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135552393458900/20/40/0;    #BUTTON_GROUP=Odb&yt; #SEZNAM_DOKLAD; #NOEDIT_EVAL_LEFT=druh <> 30; #SPACEBEFORE; #NOSAVESORT;;#SETMENUID_END; 57USER_END 58ID_MENU=MNID/O_OBJ/200705141135553907858789 58BUTTON_TITLE=Návazné generované výdajové listy 58TYP=SEZNAM 58SEZ_TABULKA=vl_zahlavi 58SEZ_TITLE=Návazné VL vygenerované z objednávky {doklad} 58SEZ_F3_TAG=    #F3DISADD; 58SEZ_VAZBA=TRUE 58SEZ_VAZBA_INDEX=vl_zahlavi_vl_z_objednavka 58SEZ_VAZBA_COLUMN1=doklad 58USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135553907858789/20/40/0;    #BUTTON_GROUP=Odb&yt; #SEZNAM_DOKLAD; #NOEDIT_EVAL_LEFT=druh <> 30; #NOSAVESORT; #REFRESHSOURCE;;#SETMENUID_END; 58USER_END 59ID_MENU=MNID/O_OBJ/200705301057309095861433 59BUTTON_TITLE=Návazné generované položky VL 59TYP=SEZNAM 59SEZ_TABULKA=vl_polozky 59SEZ_TITLE=Návazné položky VL vygenerované z objednávky {doklad} 59SEZ_PODMINKA=opp.doklad = %doklad% and vl_polozky.obj_doklad = opp.doklad and vl_polozky.obj_polozka = opp.polozka #OPT(dba.op_polozky opp with(index(pk_op_polozky)) /ADD, dba.vl_polozky vl_polozky with(index(vl_polozky_vl_p_objednavka))) 59USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705301057309095861433/20/40/0;    #BUTTON_GROUP=Odb&yt; #NOEDIT_EVAL_LEFT=druh <> 30; #NOSAVESORT;;#SETMENUID_END; 59USER_END 60ID_MENU=MNID/O_OBJ/200905190733510852502820 60BUTTON_TITLE=Návazné generované převáděcí listy 60TYP=SEZNAM 60SEZ_TABULKA=prev_zahlavi 60SEZ_TITLE=Návazné převáděcí listy vygenerované z objednávky {doklad} 60SEZ_F3_TAG=    #F3DISADD; 60SEZ_VAZBA=TRUE 60SEZ_VAZBA_INDEX=prev_zahlavi_objednavka 60SEZ_VAZBA_COLUMN1=doklad 60USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200905190733510852502820/20/40/0;    #BUTTON_GROUP=Odb&yt; #NOEDIT_EVAL_LEFT=druh <> 30; #SEZNAM_DOKLAD; #NOSAVESORT; #REFRESHSOURCE;;#SETMENUID_END; 60USER_END 61ID_MENU=MNID/O_OBJ/200705141135556860869751 61BUTTON_TITLE=Návazné generované faktury vydané na služby 61TYP=SEZNAM 61CLASS=w_iftseznam_doklad 61SEZ_TABULKA=fv_zahlavi 61SEZ_TITLE=Návazné FV na služby vygenerované z objednávky {doklad} 61SEZ_PODMINKA=fv_zahlavi.objednavka = %doklad% and fv_zahlavi.typ_dokladu = 10 and exists(select 1 from dba.fv_polozky fvp with(index(pk_fv_polozky)) where fvp.doklad = fv_zahlavi.doklad and fvp.vl_modul = 'O_OBJ' and fvp.vl_agenda = 'OP') 61SEZ_F3_TAG=    #F3DISADD; 61USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135556860869751/20/40/0;    #BUTTON_GROUP=Odb&yt; #NOEDIT_EVAL_LEFT=druh <> 30; #NOSAVESORT;;#SETMENUID_END; 61USER_END 62ID_MENU=MNID/O_OBJ/200802211606575700974131 62BUTTON_TITLE=Platby &záloh k partnerovi a zakázce 62TYP=SEZNAM 62SEZ_TABULKA=ev_zal 62SEZ_PODMINKA=ev_zal.id_partnera = %id_investora% and ev_zal.stav_devizy in (0, 1) and u_saldo_prv_dkl.zakazka_typ = %typ_zakazky% and u_saldo_prv_dkl.zakazka = %zakazka% and %typ_zakazky% <> '' and %zakazka% <> '' and u_saldo_prv_dkl.druh_dokladu = 1 and u_saldo_prv_dkl.povaha in (1, 2) and u_saldo_prv_dkl.saldokonto = 2 62USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200802211606575700974131/20/40/0;  #BUTTON_GROUP=Odb&yt; #USE_INDEX=ev_zal_id_partnera; #SPACEBEFORE;;#SETMENUID_END; 62USER_END 63ID_MENU=MNID/O_OBJ/200705141135556881067815 63BUTTON_TITLE=Storno 63USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135556881067815/20/40/0;    #NOEDIT_EVAL_LEFT=storno = 1 or dodano <> 0 or doklad_fv_zal <> ''; #NOEDIT_EVAL_RIGHT=storno <> 1 or doklad_fv_zal <> ''; #BUTTON_CLASS=uo_button_doklad; #STAV=STORNO; #BUTTON_COLOR=rgb(255,0,0); #RESELECTROW;;#SETMENUID_END; 63USER_END 64ID_MENU=MNID/O_OBJ/200705141135554335269357 64BUTTON_TITLE=Word/Excel 64USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200705141135554335269357/20/40/0;  #BUTTON_CLASS=uo_button_attachment; #ATT_CLASS=ST_NABID; #ATT_TAB=op_zahlavi; #POZNAMKA=Formulář nabídky;;#SETMENUID_END; 64USER_END 65ID_MENU=MNID/O_OBJ/200807180937378114971602 65BUTTON_TITLE=Odešli odpovědné osobě &partnera 65TYP=DOKLTISK 65USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200807180937378114971602/20/40/0;    #BUTTON_GROUP=O&dešli PDF; #NOEDIT_EVAL_LEFT=id_par_oso = 0; #TISKTABULKA=op_zahlavi; #PERCENT_OFF_BUTTON; #TISKSUBST=\\OP_EXPORT_EMAIL|PAR; #DOKLTISK_NOMULTI; #DOKLTISK_USER_BEGIN; #DKLT_PRINT_DEV=3; #DKLT_PRINT_E_MAIL; #DKLT_PRINT_DOC_INFO1_BEGIN; select coalesce(oso.e_mail, ''), '', dba.substitute_fce(mtl.subject, '#vs#' + char(4) + %objednavka% + char(4) + %getrowvaluessubst(-1, 1=0, \"#\", \"#\" + char(4), char(4))%, char(4)), case when left(convert(varchar/*BY*/, mtl.body), 1) = '<' then '<html>' else '' end + dba.substitute_fce(mtl.body, '#vs#' + char(4) + %objednavka% + char(4) + %getrowvaluessubst(-1, 1=0, \"#\", \"#\" + char(4), char(4))%, char(4)) + case when left(convert(varchar/*BY*/, mtl.body), 1) = '<' then '</html>' else '' end from dba.op_zahlavi op_zahlavi_0 with(index(pk_op_zahlavi)), dba.op_rady opr with(index(pk_op_rady)), dba.paroso oso with(index(pk_paroso)), dba.kom_mail_templ_lang mtl with(index(pk_kom_mail_templ_lang)) where op_zahlavi_0.doklad > '' and opr.fiskalni_rok = op_zahlavi_0.fiskalni_rok and opr.denik = op_zahlavi_0.denik and opr.rada = op_zahlavi_0.rada and oso.id_partnera = op_zahlavi_0.id_partnera and oso.poradi = op_zahlavi_0.id_par_oso and mtl.kod = opr.kom_mail_templ and mtl.jazyk = dba.kom_mail_templ_lang_fce(mtl.kod, op_zahlavi_0.id_partnera, op_zahlavi_0.id_par_oso) #DKLT_PRINT_DOC_INFO1_END; #DKLT_PRINT_MAIL_NO_EXT_INFO; #DKLT_START_TISK; #DKLT_CLOSE_AFTER_TISK; #DOKLTISK_USER_END;;#SETMENUID_END; 65USER_END 66ID_MENU=MNID/O_OBJ/200807180952380791441576 66BUTTON_TITLE=Odešli odpovědné osobě &fakturačního partnera 66TYP=DOKLTISK 66USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//200807180952380791441576/20/40/0;    #BUTTON_GROUP=O&dešli PDF; #NOEDIT_EVAL_LEFT=id_inv_oso = 0; #TISKTABULKA=op_zahlavi; #PERCENT_OFF_BUTTON; #TISKSUBST=\\OP_EXPORT_EMAIL|INV; #DOKLTISK_NOMULTI; #DOKLTISK_USER_BEGIN; #DKLT_PRINT_DEV=3; #DKLT_PRINT_E_MAIL; #DKLT_PRINT_DOC_INFO1_BEGIN; select coalesce(oso.e_mail, ''), '', dba.substitute_fce(mtl.subject, '#vs#' + char(4) + %objednavka% + char(4) + %getrowvaluessubst(-1, 1=0, \"#\", \"#\" + char(4), char(4))%, char(4)), case when left(convert(varchar/*BY*/, mtl.body), 1) = '<' then '<html>' else '' end + dba.substitute_fce(mtl.body, '#vs#' + char(4) + %objednavka% + char(4) + %getrowvaluessubst(-1, 1=0, \"#\", \"#\" + char(4), char(4))%, char(4)) + case when left(convert(varchar/*BY*/, mtl.body), 1) = '<' then '</html>' else '' end from dba.op_zahlavi op_zahlavi_0 with(index(pk_op_zahlavi)), dba.op_rady opr with(index(pk_op_rady)), dba.paroso oso with(index(pk_paroso)), dba.kom_mail_templ_lang mtl with(index(pk_kom_mail_templ_lang)) where op_zahlavi_0.doklad > '' and opr.fiskalni_rok = op_zahlavi_0.fiskalni_rok and opr.denik = op_zahlavi_0.denik and opr.rada = op_zahlavi_0.rada and oso.id_partnera = op_zahlavi_0.id_investora and oso.poradi = op_zahlavi_0.id_inv_oso and mtl.kod = opr.kom_mail_templ and mtl.jazyk = dba.kom_mail_templ_lang_fce(mtl.kod, op_zahlavi_0.id_investora, op_zahlavi_0.id_inv_oso) #DKLT_PRINT_DOC_INFO1_END; #DKLT_PRINT_MAIL_NO_EXT_INFO; #DKLT_START_TISK; #DKLT_CLOSE_AFTER_TISK; #DOKLTISK_USER_END;;#SETMENUID_END; 66USER_END 67ID_MENU=MNID/O_OBJ/201011301056154703421871 67BUTTON_TITLE=&Vytvoř verzi 67TYP=SQLCOMMAND 67USER_BEGIN ;#BUTTON_WRITE_RIGHT=op_zahlavi;;#SETMENUID=O/O_OBJ/0/op_zahlavi//201011301056154703421871/20/40/0;  #BUTTON_GROUP=Ver&ze; #BUTTON_QUESTION=Chcete opravdu vytvořit novou verzi dokladu?; #PERCENT_OFF; #SQLCOMMAND1=execute dba.o_obj_op_verze %doklad%; #REFRESHROW;;#SETMENUID_END; 67USER_END 68ID_MENU=MNID/O_OBJ/201011301056395689086387 68BUTTON_TITLE=Ver&ze 68TYP=SEZNAM 68SEZ_TABULKA=op_zahlavi_ver 68SEZ_TITLE=Verze {case(druh when 30 then 'objednávky přijaté'/*TRAN*/ when 20 then 'nabídky vydané'/*TRAN*/ when 10 then 'poptávky přijaté'/*TRAN*/ else 'objednávky přijaté'/*TRAN*/)} č. {doklad} 68SEZ_VAZBA=TRUE 68SEZ_VAZBA_COLUMN1=doklad 68USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//201011301056395689086387/20/40/0;    #SPACEBEFORE; #BUTTON_GROUP=Ver&ze; #REFRESHROW_ON_CLOSE;;#SETMENUID_END; 68USER_END 69ID_MENU=MNID/O_OBJ/202005061150465411080112 69BUTTON_TITLE=Kopie dokladu 69TYP=GROUP 69USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//202005061150465411080112/20/40/0;    #BUTTON_COLOR=rgb(255,255,255); #NOEDIT_EVAL_LEFT=storno = 1; #SETWSOURCE;;#SETMENUID_END; 69USER_END 6901ID_MENU=MNID/O_OBJ/202005061151455635001913 6901BUTTON_TITLE=Parametry 6901TYP=MULTIDETAIL 6901AKCE=kopie_op 6901DET_TITLE=Kopie dokladu 6901USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202005061151455635001913/45/40/0;    #GROUP_WAIT; #EDIT_COL_NOTAB; #ALL_EDIT_COL_ENABLE; #EDIT_COL_ALL_MODIFIED; #EDIT_COL1=op_zahlavi.fiskalni_rok; #EDIT_COL_DEFAULT1=fiskalni_rok='\\FR_O_OBJ'; #EDIT_COL1_TAG_BEGIN; #F3TAB=fiscis; #F3COL=fiskalni_rok; #F3SAY=nazev; #EDIT_COL1_TAG_END; #EDIT_COL1_TESTSQL1=Nový fiskální rok musí nemůže být nižší než fiskální rok kopírovaného dokladu.|select case when (select fis.poradi from dba.fiscis fis with(index(pk_fiscis)) where fis.obdobi = %fiskalni_rok%) <= (select fis.poradi from dba.fiscis fis with(index(pk_fiscis)) where fis.obdobi = !fiskalni_rok!) then 1 else 0 end; #EDIT_COL1_SUB=#KOPIE_OP_FR; #EDIT_COL2=op_zahlavi.dat_vyst; #EDIT_COL_DEFAULT2=dat_vyst=\\DATUM; #EDIT_COL2_SUB=#KOPIE_OP_DAT_VYST; #EDIT_COL3=op_zahlavi.dat_pri; #EDIT_COL_DEFAULT3=dat_pri=\\DATUM; #EDIT_COL3_SUB=#KOPIE_OP_DAT_PRI; #EDIT_COL4=op_zahlavi.dat_dodani; #EDIT_COL_DEFAULT4=dat_dodani=relativedate(date(\\DATUM), daysafter(dat_expedice, dat_dodani)); #EDIT_COL4_SUB=#KOPIE_OP_DAT_DODANI; #EDIT_COL5=op_zahlavi.dat_expedice; #EDIT_COL_DEFAULT5=dat_expedice=\\DATUM; #EDIT_COL5_TAG_BEGIN; #SELECT1=dat_dodani=relativedate(dat_expedice, delka_dodani); #EDIT_COL5_TAG_END; #EDIT_COL5_SUB=#KOPIE_OP_DAT_EXPEDICE; #EDIT_COL6=karty.delka_dodani; #EDIT_COL_DEFAULT6=delka_dodani=daysafter(dat_expedice, dat_dodani); #EDIT_COL6_VIS=1=0; #EDIT_COL_NOQUESTION; #EDIT_COL_NOINFO;;#SETMENUID_END; 6901USER_END 6902ID_MENU=MNID/O_OBJ/202005061152126344387860 6902BUTTON_TITLE=Kopie dokladu (náhled) 6902TYP=DETAIL 6902ID_SAVE=op_zahlavi 6902DET_TABULKA=op_zahlavi 6902USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202005061152126344387860/45/40/0;    #GROUP_WHEN='#MULTIDETAIL_KOPIE_OP' = 'ALLOK'; #GROUP_WAIT; #PERCENT_OFF; #SQLBRD_SUB1=#X1=update dba.op_rady set xcmd = null from dba.op_rady opr with(index(pk_op_rady)) where opr.fiskalni_rok = %fiskalni_rok% and opr.denik = %denik% and opr.rada = %rada%:HIST:EXEC; #SQLBRD_SUB2=#DOKLAD=execute dba.o_obj_get_op_doklad #KOPIE_OP_FR, %denik%, %rada%, '\\IDI', \\DATUM, %fiskalni_rok%; #SQLBRD_COMMAND1=execute dba.o_obj_op_kopie %doklad%, #DOKLAD, #KOPIE_OP_DAT_VYST, #KOPIE_OP_DAT_PRI, #KOPIE_OP_DAT_DODANI, #KOPIE_OP_DAT_EXPEDICE; #CLOSE_AFTER_SAVE;;#SETMENUID_END; 6902USER_END 70ID_MENU=MNID/O_OBJ/202209261423471893894612 70BUTTON_TITLE=Import OP KARAT 70TYP=EXIMP 70USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//202209261423471893894612/20/30/0; #BUTTON_COLOR=rgb(241,132,61); #NOMULTIWARN; #PERCENT_OFF; #AKCE=FULLIMPORT; #ID_EI=IMPORT_VBH; #RIGHTBUTTON; #BUTTON_CLASS_RIGHT=m_eximp_import; #SEZNOROW; #REFRESHROWS;;#SETMENUID_END; 70USER_END 71ID_MENU=MNID/O_OBJ/202306201248564755483132 71BUTTON_TITLE=Štítky 71TYP=SESTAVA 71SEZ_SQL_BEGIN SELECT S.poradi AS poradi\\:Sop_polozky.polozka, S.karta AS karta\\:Sop_polozky.karta, S.nazev AS nazev\\:Snomenklatura.nazev, S.user_mnozstvi_vyr AS user_mnozstvi_vyr\\:Sop_polozky.user_mnozstvi_vyr, S.doklad AS doklad\\:Sop_polozky.doklad, S.zkraceny_nazev AS firma\\:Sop_zahlavi.zkraceny_nazev, isnull(S.user_zakvy,'') AS user_zakvy\\:Sop_polozky.user_zakvy, S.user_dat_dodani_zd AS user_dat_dodani_zd\\:Sop_polozky.user_dat_dodani_zd, S.user_obj_nakup AS user_obj_nakup\\:Sop_zahlavi.user_obj_nakup, isnull(S.user_pol_poz,'') AS user_pol_poz\\:Sop_polozky.user_pol_poz, isnull(S.user_vrtani_met,'') AS user_vrtani_met\\:Sop_polozky.user_vrtani_met, S.user_polozka_zd AS user_polozka_zd\\:Sop_polozky.user_polozka_zd, S.user_typ_profil AS user_typ_profil\\:Sop_polozky.user_typ_profil, S.user_profil_zak AS user_profil_zak\\:Sop_polozky.user_profil_zak, S.user_carkod AS user_carkod\\:Sop_polozky.user_carkod, S.user_ean AS user_ean\\:Sop_polozky.user_ean, S.user_delka AS user_delka\\:Sop_polozky.user_delka, S.user_vyska AS user_vyska\\:Sop_polozky.user_vyska, S.user_hloubka AS user_hloubka\\:Sop_polozky.user_hloubka, S.user_kodkz AS user_kodkz\\:Sop_zahlavi.user_kodkz, S.storno AS storno\\:Sop_polozky.storno, S.polozka AS polozka\\:Sop_polozky.polozka, S.user_skup_n_op AS user_skup_n_op\\:Sop_polozky.user_skup_n_op, S.citac_stitku AS citac_stitku, S.ean16 AS ean16 FROM #op_stitky1 S WHERE 1=1 71SEZ_SQL_END 71USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//202306201248564755483132/20/30/0; #PERCENT_OFF; #NOADDADDMENU; #BUTTON_COLOR=rgb(255,128,128); #SPACEBEFORE; #SPACEAFTER; #DBEXEC_SUBST=#BE_DOKLAD|%doklad:NA%; #DBEXECUTE=op_exe_stitky1; #DEFAULT_PROFILE=STITKY;;#SETMENUID_END; 71USER_END 71GEN_REPORT=stitky_25_100_wh 71GEN_TAB=cisla 71GEN_TABFULL=cisla 71GEN_GROUP1= poradi;poradi;S.poradi 71GEN_PBL0=O_OBJ 71GEN_TITLE=Štítky 71GEN_WHERE=storno=0 72ID_MENU=MNID/O_OBJ/202308231103543718225879 72BUTTON_TITLE=Odešli odpovědné osobě &partnera - s csv 72TYP=GROUP 72USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//202308231103543718225879/20/30/0; #BUTTON_GROUP=O&dešli PDF; #NOEDIT_EVAL_LEFT=id_par_oso = 0; #SETWSOURCE; #PERCENT_OFF; #USERSUB1=#DOKLAD=%doklad%:NA; #USERSUB2=#GENERUJ_CSV=select parcis.user_csv_potvrz from dba.parcis parcis with(index(pk_parcis)) where parcis.id_partnera = %id_partnera%:NA; ;#SETMENUID_END; 72USER_END 7201ID_MENU=MNID/O_OBJ/202309071522329412031159 7201TYP=NOTHING 7201USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202309071522329412031159/45/30/0; #DO_PARENT_USERSUB; #GROUP_WHEN=#GENERUJ_CSV=1; #PERCENT_OFF; #NOMULTIWARN; #USERSUB1=#CSV_FILENAME=select top 1 'c:\\export\\' + user_csv.user_obj_nakup + '_POTV.csv' from dba.user_csv user_csv with(index(user_csv_doklad)), dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where user_csv.doklad = op_zahlavi.doklad and user_csv.doklad = '#DOKLAD':NA; #USERSUB2_BEGIN;#CSV_TEXT=#DO_LIST_BEGIN;| select 'KODKZ'+';'+'CIPOKZ'+';'+'KODZD'+';'+'CIPOZD'+';'+'KODVY'+';'+'CIPOVY'+';'+'M'+';'+'MNSUM'+';'+'MJ'+';'+'POCKS'+';'+'HL'+';'+'DELKA'+';'+'VYSKA'+';'+'R4'+';'+'PROF'+';'+'PROVED'+';'+'VERZE'+';'+'NAZUPR'+';'+'TYP'+';'+'CARKOD0'+';'+'COBJKZ'+';'+'COBJKZJM'+';'+'KADDO'+';'+'DATOBKZ'+';'+'TDKZ'+';'+'POZ'+';'+'COBJZDP'+';'+'COBJZDN'+';'+'KOOBJ'+';'+'KADOB'+';'+'DATZOZD'+';'+'TDZD'+';'+'CARKOD'+';'+'C'+';'+'ZAKVY'+';'+'C-ZD'+';'+'C-VY'+';'+'HMOTN'+';'+'PTDZD'+';'+'PRIP'+';'+'SERIE'+';'+'ZAKADE'+';'+'POZDE'+';'+'GUID'+';'+'VER_SOFT'+ char(13)+char(10) union all select convert(varchar,op_zahlavi.user_kodkz)/*KODKZ*/+';'+ convert(varchar,op_polozky.user_interni_c_p)/*CIPOKZ*/+';'+ convert(varchar,op_zahlavi.ico)/*KODZD*/+';'+ convert(varchar,op_polozky.user_polozka_zd)/*CIPOZD*/+';'+ convert(varchar,op_zahlavi.user_kod_vyr)/*KODVY*/+';'+ convert(varchar,op_polozky.karta)/*CIPOVY*/+';'+ ''/*M*/+';'+ convert(varchar,replace(op_polozky.mnozstvi_obj,'.',','))/*MNSUM*/+';'+ convert(varchar,op_polozky.id_mj_vyd)/*MJ*/+';'+ convert(varchar,replace(op_polozky.user_mnozstvi_vyr,'.',','))/*POCKS*/+';'+ convert(varchar,op_polozky.user_hloubka)/*HL*/+';'+ convert(varchar,op_polozky.user_delka)/*DELKA*/+';'+ convert(varchar,op_polozky.user_vyska)/*VYSKA*/+';'+ convert(varchar,op_polozky.user_sirka1)+'/'+convert(varchar,op_polozky.user_sirka2)+'/'+convert(varchar,op_polozky.user_sirka3)+'/'+convert(varchar,op_polozky.user_sirka4)+'/'+convert(varchar,op_polozky.user_sirka5)/*R4*/+';'+ convert(varchar,op_polozky.user_profil_zak)/*PROF*/+';'+ convert(varchar,op_polozky.user_vrtani_met)/*PROVED*/+';'+ convert(varchar,op_polozky.user_verze)/*VERZE*/+';'+ convert(varchar,op_polozky.user_nazupr)/*NAZUPR*/+';'+ convert(varchar,op_polozky.user_typ_produktu)/*TYP*/+';'+ convert(varchar,op_polozky.user_ean)/*CARKOD0*/+';'+ convert(varchar,op_polozky.user_zakvy)/*COBJKZ*/+';'+ convert(varchar,op_zahlavi.user_kod_vysobj)/*COBJKZJM*/+';'+ convert(varchar,op_zahlavi.user_kod_dodadr)/*KADDO*/+';'+ convert(varchar,op_zahlavi.dat_vyst,104)/*DATOBKZ*/+';'+ convert(varchar,op_polozky.dat_dodani,104)/*TDKZ*/+';'+ convert(varchar,op_polozky.user_pol_poz)/*POZ*/+';'+ convert(varchar,op_zahlavi.user_obj_nakup)/*COBJZDP*/+';'+ convert(varchar,op_zahlavi.objednavka)/*COBJZDN*/+';'+ convert(varchar,op_zahlavi.user_obj_vyst)/*KOOBJ*/+';'+ convert(varchar,op_zahlavi.user_dod_adr)/*KADOB*/+';'+ convert(varchar,op_zahlavi.user_dat_vyst_zd,104)/*DATZOZD*/+';'+ convert(varchar,op_polozky.user_dat_dodani_zd,104)/*TDZD*/+';'+ convert(varchar,op_polozky.user_carkod)/*CARKOD*/+';'+ convert(varchar,op_polozky.user_sirka1)+'/'+convert(varchar,op_polozky.user_sirka2)+'/'+convert(varchar,op_polozky.user_sirka3)+'/'+convert(varchar,op_polozky.user_sirka4)+'/'+convert(varchar,op_polozky.user_sirka5)/*C*/+';'+ convert(varchar,op_polozky.doklad)/*ZAKVY*/+';'+ convert(varchar,replace(op_polozky.user_czd,'.',','))/*C-ZD*/+';'+ convert(varchar,replace(op_polozky.cena_mj_cen,'.',','))/*C-VY*/+';'+ convert(varchar,replace(op_polozky.hmotnost,'.',','))/*HMOTN*/+';'+ convert(varchar,op_polozky.dat_dodani_ods,104)/*PTDZD*/+';'+ convert(varchar,op_polozky.user_prip)/*PRIP*/+';'+ convert(varchar,op_polozky.user_serie)/*SERIE*/+';'+ convert(varchar,op_polozky.user_zakade)/*ZAKADE*/+';'+ convert(varchar,op_polozky.user_pozde)/*POZDE*/+';'+ convert(varchar,op_polozky.user_guid)/*GUID*/+';'+ ''/*VER_SOFT*/+';'+ char(13)+char(10) from  dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)), dba.op_polozky op_polozky with(index(pk_op_polozky)) where op_polozky.doklad = op_zahlavi.doklad and op_polozky.doklad = '#DOKLAD' --select convert(varchar,user_csv.user_kodkz)/*KODKZ*/+';'+ --       convert(varchar,user_csv.user_interni_c_p)/*CIPOKZ*/+';'+ --       convert(varchar,user_csv.ico)/*KODZD*/+';'+ --       convert(varchar,user_csv.user_polozka_zd)/*CIPOZD*/+';'+ --       convert(varchar,user_csv.user_kod_vyr)/*KODVY*/+';'+ --       convert(varchar,op_polozky.karta)/*CIPOVY*/+';'+ --       ''/*M*/+';'+ --       convert(varchar,user_csv.mnozstvi_obj)/*MNSUM*/+';'+ --       convert(varchar,user_csv.id_mj_vyd)/*MJ*/+';'+ --       convert(varchar,user_csv.user_mnozstvi_vyr)/*POCKS*/+';'+ --       convert(varchar,user_csv.user_hloubka)/*HL*/+';'+ --       convert(varchar,user_csv.user_delka)/*DELKA*/+';'+ --       convert(varchar,user_csv.user_vyska)/*VYSKA*/+';'+ --       convert(varchar,user_csv.user_sirka1)+'/'+convert(varchar,user_csv.user_sirka2)+'/'+convert(varchar,user_csv.user_sirka3)+'/'+convert(varchar,user_csv.user_sirka4)+'/'+convert(varchar,user_csv.user_sirka5)/*R4*/+';'+ --       convert(varchar,user_csv.user_typ_profil)/*PROF*/+';'+ --       convert(varchar,user_csv.user_prof_popis)/*PROVED*/+';'+ --       convert(varchar,user_csv.user_verze)/*VERZE*/+';'+ --       convert(varchar,user_csv.user_nazupr)/*NAZUPR*/+';'+ --       convert(varchar,user_csv.user_typ_produktu)/*TYP*/+';'+ --       convert(varchar,user_csv.user_ean)/*CARKOD0*/+';'+ --       convert(varchar,user_csv.user_zakvy)/*COBJKZ*/+';'+ --       convert(varchar,user_csv.user_kod_vysobj)/*COBJKZJM*/+';'+ --       convert(varchar,user_csv.user_kod_dodadr)/*KADDO*/+';'+ --       convert(varchar,user_csv.dat_vyst,104)/*DATOBKZ*/+';'+ --       convert(varchar,user_csv.dat_dodani,104)/*TDKZ*/+';'+ --       convert(varchar,user_csv.user_pol_poz)/*POZ*/+';'+ --       convert(varchar,user_csv.user_obj_nakup)/*COBJZDP*/+';'+ --       convert(varchar,user_csv.objednavka)/*COBJZDN*/+';'+ --       convert(varchar,user_csv.user_obj_vyst)/*KOOBJ*/+';'+ --       convert(varchar,user_csv.user_dod_adr)/*KADOB*/+';'+ --       convert(varchar,user_csv.user_dat_vyst_zd,104)/*DATZOZD*/+';'+ --       convert(varchar,user_csv.user_dat_dodani_zd,104)/*TDZD*/+';'+ --       convert(varchar,user_csv.user_carkod)/*CARKOD*/+';'+ --       ''/*C*/+';'+ --       convert(varchar,op_polozky.doklad)/*ZAKVY*/+';'+ --       convert(varchar,user_csv.user_czd)/*C-ZD*/+';'+ --       convert(varchar,op_polozky.cena_cel_kon)/*C-VY*/+';'+ --       convert(varchar,op_polozky.hmotnost)/*HMOTN*/+';'+ --       convert(varchar,op_polozky.dat_dodani_ods,104)/*PTDZD*/+';'+ --       convert(varchar,user_csv.user_prip)/*PRIP*/+';'+ --       convert(varchar,user_csv.user_serie)/*SERIE*/+';'+ --       convert(varchar,user_csv.user_zakade)/*ZAKADE*/+';'+ --       convert(varchar,user_csv.user_pozde)/*POZDE*/+';'+ --       convert(varchar,user_csv.user_guid)/*GUID*/+';'+ --       ''/*VER_SOFT*/+';'+ char(13)+char(10) -- --from dba.user_csv user_csv with(index(user_csv_doklad)), dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)), dba.op_polozky op_polozky with(index(pk_op_polozky)) --where user_csv.doklad = op_zahlavi.doklad and user_csv.doklad = '#DOKLAD' and user_csv.polozka = op_polozky.polozka and op_zahlavi.doklad = op_polozky.doklad #DO_LIST_END;:NA#USERSUB2_END; #FILEWRITE_AFTER1=#CSV_FILENAME; #FILEWRITE_BODY1_BEGIN;#CSV_TEXT#FILEWRITE_BODY1_END; #GROUP_WAIT; ;#SETMENUID_END; 7201USER_END 7202ID_MENU=MNID/O_OBJ/202309071619146016179564 7202TYP=ATTADD 7202USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202309071619146016179564/45/30/0;    #DO_PARENT_USERSUB; #GROUP_WHEN=#GENERUJ_CSV=1; #FILE_FROM_CLIENT; #USERSUB1=#CSV_FILENAME=select top 1 'c:\\export\\' + user_csv.user_obj_nakup + '_POTV.csv' from dba.user_csv user_csv with(index(user_csv_doklad)), dba.op_zahlavi op_zahlavi with(index(pk_op_zahlavi)) where user_csv.doklad = op_zahlavi.doklad and user_csv.doklad = '#DOKLAD':NA; #ATT_TABULKA=op_zahlavi; #ATT_PK=#DOKLAD; #ATT_CLASS=CSV_FILE; #ATT_TAB=op_zahlavi; #ATT_POZN=NEODESLANO; #FILE=#CSV_FILENAME; ;#SETMENUID_END; 7202USER_END 7203ID_MENU=MNID/O_OBJ/202309080945023119316514 7203TYP=DOKLTISK 7203USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202309080945023119316514/45/30/0;    #TISKSUBST=\\OP_EXPORT_EMAIL|PAR; #TISKTABULKA=op_zahlavi; #PERCENT_OFF; #DOKLTISK_NOMULTI; #DO_PARENT_USERSUB; #DOKLTISK_USER_BEGIN; #DKLT_PRINT_DEV=3; #DKLT_PRINT_E_MAIL; #--PRINT_E_MAIL_PARMS_BEGIN; #--MAIL_BODY_HTML_BEGIN; <html> <body> <font face=\"calibri\" size=\"3\">Dobrý den,<br> <br> zasíláme vám potvrzení objednávky. Prosíme o kontrolu správnosti u položek objednávky<br> <br> S pozdravem<br> Termopan<br> <br> </font> </html> #--MAIL_BODY_HTML_END; #MAIL_HTML; #--PRINT_E_MAIL_PARMS_END; #DKLT_PRINT_DOC_INFO1_BEGIN; select coalesce(oso.e_mail, ''), '', (mtl.subject + ' ' + %objednavka%), case when left(convert(varchar/*BY*/, mtl.body), 1) = '<' then '<html>' else '' end + dba.substitute_fce(mtl.body, '#vs#' + char(4) + %objednavka% + char(4) + %getrowvaluessubst(-1, 1=0, \"#\", \"#\" + char(4), char(4))%, char(4)) + case when left(convert(varchar/*BY*/, mtl.body), 1) = '<' then '</html>' else '' end from dba.op_zahlavi op_zahlavi_0 with(index(pk_op_zahlavi)), dba.op_rady opr with(index(pk_op_rady)), dba.paroso oso with(index(pk_paroso)), dba.kom_mail_templ_lang mtl with(index(pk_kom_mail_templ_lang)) where op_zahlavi_0.doklad > '' and opr.fiskalni_rok = op_zahlavi_0.fiskalni_rok and opr.denik = op_zahlavi_0.denik and opr.rada = op_zahlavi_0.rada and oso.id_partnera = op_zahlavi_0.id_partnera and oso.poradi = op_zahlavi_0.id_par_oso and mtl.kod = opr.kom_mail_templ and mtl.jazyk = dba.kom_mail_templ_lang_fce(mtl.kod, op_zahlavi_0.id_partnera, op_zahlavi_0.id_par_oso) #DKLT_PRINT_DOC_INFO1_END; #PRINT_DOC_ATT1_BEGIN;select tabulka, pk,poradi,pozn,file_name from dba.attach_store, dba.op_zahlavi op_zahlavi_0 with(index(pk_op_zahlavi)) where op_zahlavi_0.doklad = attach_store.pk and attach_store.pk=%doklad% and attach_store.att_class in ('CSV_FILE') and attach_store.tabulka = 'op_zahlavi' and attach_store.pozn = 'NEODESLANO'#PRINT_DOC_ATT1_END; #DKLT_PRINT_MAIL_NO_EXT_INFO; #DKLT_START_TISK; #DKLT_CLOSE_AFTER_TISK; #DOKLTISK_USER_END;;#SETMENUID_END; 7203USER_END 7204ID_MENU=MNID/O_OBJ/202309081105145299701219 7204TYP=SQLCOMMAND 7204USER_BEGIN ;#TYPP=45;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202309081105145299701219/45/30/0;    #PERCENT_OFF; #SQLCOMMAND1_BEGIN; update  dba.attach_store set pozn = '' from dba.attach_store attach_store with(index(attach_store_pk)),  dba.op_zahlavi op_zahlavi_0 with(index(pk_op_zahlavi)) where op_zahlavi_0.doklad = attach_store.pk and attach_store.tabulka = 'op_zahlavi' and attach_store.pk=%doklad% and attach_store.att_class in ('CSV_FILE') and attach_store.pozn = 'NEODESLANO' #SQLCOMMAND1_END;;#SETMENUID_END; 7204USER_END 73ID_MENU=MNID/O_OBJ/202310241617144140226159 73BUTTON_TITLE=Otevři PDF Výkresy 73TYP=ATTOPEN 73USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//202310241617144140226159/20/30/0;#NOEDIT_EVAL_LEFT=attpocetpdf=0; #BUTTON_COLOR=rgb(141,141,141); #USERSUB1=#XPK=select max(attach_store.link_pk) from dba.attach_store attach_store with(index(pk_attach_store)) where attach_store.pk=%doklad%:NA; #USERSUB2=#XPORPDF=select max(attach_store.poradi) from dba.attach_store attach_store with(index(pk_attach_store)) where attach_store.pk=%doklad% and attach_store.att_class='TPV':NA; #ATT_TABULKA=op_zahlavi; #ATT_PK=#XPK; #ATT_PORADI=#XPORPDF;;#SETMENUID_END; 73USER_END w_ift\tconn\tms_19216810247_karat_termopan 73 w_ift\tf11\tUzivatel/kswpvka AllDevices w_ift\tRefreshObjects\tLIST 200705141135559525303211 w_ift\tPercentOffDWs\tLIST\tdba.op_zahlavi\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.22697.22700.22723 200705141135559525303211\tdba.op_polozky\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.22697.22700.preview.200705141135559525303211.dw w_ift\tpreview1\tPoložky ---Id: 200705141135559525303211 ---UserParam: #TYPE=Button;#ID=200705141135559525303211;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=0;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1; ---Directives: #TYPE=Button;#ID=200705141135559525303211;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=0;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1;#PREVIEW_SEZNAM;#PREVIEW_TABLE=op_polozky;#PREVIEW_SQL_BEGIN;    #NOTAB=op_polozky; select *+^(nazev), op_polozky.nazev AS nazev /* \\:Sop_polozky.nazev:HNázev (položky) */, coalesce(nomenklatura_57444.konfig_typ, '') AS nom_konfig_typ /* \\:Snomenklatura.konfig_typ:NV */, op_zahlavi_45638.id_meny AS op_zahlavi_45638_id_meny /* \\:Sop_zahlavi.id_meny */, op_zahlavi_45638.storno AS op_zahlavi_45638_storno /* \\:Sop_zahlavi.storno:NV */, op_zahlavi_45638.odsouhlaseno AS op_zahlavi_45638_odsouhlaseno /* \\:Sop_zahlavi.odsouhlaseno:NV */, op_zahlavi_45638.id_partnera AS op_zahlavi_45638_id_partnera /* \\:Sop_zahlavi.id_partnera */, op_zahlavi_45638.zkraceny_nazev AS opz_zkracen_nazev /* \\:Sop_zahlavi.zkraceny_nazev */, obj.doklad AS obj_doklad /* \\:Sobj_prv_dkl.doklad:NV */, obj.potvrzeno AS obj_potvrzeno /* \\:Sobj_prv_dkl.potvrzeno:NV */, obj.rezervovat AS obj_rezervovat /* \\:Sobj_prv_dkl.rezervovat:NV */, round(obj.vykr_skl / op_polozky.koef_mj_vyd, 4) AS obj_vykr_skl /* \\:Sobj_prv_dkl.vykr_skl:HVykryto skladem [MJ oper] */, round(obj.vykr_vpr / op_polozky.koef_mj_vyd, 4) AS obj_vykr_vpr /* \\:Sobj_prv_dkl.vykr_vpr:NV */, round(obj.vykr_ov / op_polozky.koef_mj_vyd, 4) AS obj_vykr_ov /* \\:Sobj_prv_dkl.vykr_ov:NV */, round(obj.vykr_nev / op_polozky.koef_mj_vyd, 4) AS obj_vykr_nev /* \\:Sobj_prv_dkl.vykr_nev:NV */, opr.v_zak_denik AS op_rady_8848_v_zak_denik /* \\:Sop_rady.v_zak_denik:NV */, opr.v_zak_rada AS op_rady_8848_v_zak_rada /* \\:Sop_rady.v_zak_rada:NV */, opr.o_kal_denik AS op_rady_8848_o_kal_denik /* \\:Sop_rady.o_kal_denik:NV */, opr.o_kal_rada AS op_rady_8848_o_kal_rada /* \\:Sop_rady.o_kal_rada:NV */, opr.vydej_neods AS op_rady_8848_vydej_neods /* \\:Sop_rady.vydej_neods:NV */, coalesce(op_zahlavi_45638.import, 0) AS opz_import /* \\:Sop_zahlavi.import:NV */, opr.imp_ordrsp_pol_20 AS opr_imp_ordrsp_pol_20 /* \\:Sop_rady.imp_ordrsp_pol_20:NV */, case when exists(select 1 from dba.parcisudaje pu with(index(parcisudaje_typ)) where pu.typ = 'ORDRSP' and pu.id_partnera = op_zahlavi_45638.id_partnera) then 1 else 0 end AS par_export /* \\:Sop_zahlavi.export:NV */ ,op_zahlavi_45638.druh AS op_zahlavi_45638_druh\\:Sop_zahlavi.druh,nomenklatura_57444.nazev AS nomenklatura_57444_nazev\\:Snomenklatura.nazev:HNázev (nomenklatury) from dba.op_polozky op_polozky, dba.op_zahlavi op_zahlavi_45638 with(index(pk_op_zahlavi)), dba.op_rady opr with(index(pk_op_rady)), dba.nomenklatura nomenklatura_57444 with(index(pk_nomenklatura)), dba.obj_prv_dkl obj with(index(pk_obj_prv_dkl)) where op_zahlavi_45638.doklad = op_polozky.doklad and opr.fiskalni_rok = op_zahlavi_45638.fiskalni_rok and opr.denik = op_zahlavi_45638.denik and opr.rada = op_zahlavi_45638.rada and nomenklatura_57444.id_nomen = op_polozky.id_karty and obj.id_modulu = (case when op_polozky.polozka < 29000 and opr.obj_prv_dkl = 1 then 'O_OBJ' else '' end) and obj.agenda = (case when op_polozky.polozka < 29000 and opr.obj_prv_dkl = 1 then 'OP' else '' end) and obj.doklad = (case when op_polozky.polozka < 29000 and opr.obj_prv_dkl = 1 then op_polozky.doklad else '' end) and obj.polozka = (case when op_polozky.polozka < 29000 and opr.obj_prv_dkl = 1 then op_polozky.polozka else 1 end) ORDER BY op_polozky.doklad, op_polozky.id_pol_vys, op_polozky.id_polozky, op_polozky.polozka#PREVIEW_SQL_END;#PREVIEW_WHERE=op_polozky.doklad=%doklad% and ((op_polozky.storno=0 /* storno - nestornované položky */ )) and ((op_zahlavi_45638.storno=0 /* storno_dkl - nestornovaný doklad */ ));#PREVIEW_USER_BEGIN;#PREVIEW_LEGEND=#DOKL_STORNO:Stornovaná položka nebo záhlaví:Fstorno = 1 or op_zahlavi_45638_storno = 1; #PREVIEW_LEGEND=#ODB_SES_NE:Běžné položky:Fid_polozky = 0 and id_pol_vys = 0; #PREVIEW_LEGEND=#ODB_SESTAVA:Sestava:Fid_polozky = 0 and id_pol_vys > 0; #PREVIEW_LEGEND=#ODB_DILY:Díl sestavy:Fid_polozky > 0 and id_pol_vys > 0; #PREVIEW_USER_SEZ_SQL_ADD3000=(select parcis.nazev from dba.parcis parcis with(index(pk_parcis)) where parcis.id_partnera=id_investora) AS investor_nazev /*\\:Sparcis.nazev:HNázev partnera F*/; #PREVIEW_USER_END;#PREVIEW_ID_SAVE=op_polozky;#PREVIEW_SAVE_FILE=O_OBJ;#PREVIEW_NODOLAR;#PREVIEW_TREE=200705141135559525303211;#PREVIEW_ACTION_BEGIN;#PREVIEW_ACTION_NOROW;#PREVIEW_ACTION_TYPE=BUTTON;#PREVIEW_ACTION_BUTTON_MNID=200705141135559525303211;#PREVIEW_ACTION_END;#PREVIEW_NOREFRESH_EVAL=; w_ift\tCurrentPreviewUserParam\t#USR_PREVIEW;#PREVIEW_GRID_ROWS=1;#PREVIEW_GRID_COLS=1;#PREVIEW_VIEW_TAB=0;#PREVIEW_CAN_ADD=1; #USR_PREVIEW1_BEGIN;#TYPE=Button;#ID=200705141135559525303211;#PREVIEW_GRID_ROW=1;#PREVIEW_GRID_COL=1;#PREVIEW_GRID_ROWS_SPAN=1;#PREVIEW_GRID_COLS_SPAN=1;#PREVIEW_SUM=0;#PREVIEW_AVG=0;#HIDDEN_HEADER=0;#PREVIEW_REFRESH_AUTO=0;#PREVIEW_ATT_GALLERY_AUTO=0;#PREVIEW_IS_ACTIVE=1;#USR_PREVIEW1_END; w_iftseznam\tsez_tabulka\top_zahlavi w_iftseznam\tlink\tkarat://termopan:@0/mnid/o_obj/200705051639068503094766?where=%28%20op%5fzahlavi%2edoklad%20%3d%20%2724op010100000305%27%20%29&menu=0 w_iftseznam\tsez_sql\t    #NOTAB=op_zahlavi;     select *+,             op_rady.op_denik_pop AS op_rady_8848_op_denik_pop /* \\:NV */,             op_rady.op_rada_pop AS op_rady_8848_op_rada_pop /* \\:NV */,             op_rady.op_denik_nab AS op_rady_8848_op_denik_nab /* \\:NV */,             op_rady.op_rada_nab AS op_rady_8848_op_rada_nab /* \\:NV */,             op_rady.op_denik_op AS op_rady_8848_op_denik_op /* \\:NV */,             op_rady.op_rada_op AS op_rady_8848_op_rada_op /* \\:NV */,             op_rady.op_denik_ov AS op_rady_8848_op_denik_ov /* \\:NV */,             op_rady.op_rada_ov AS op_rady_8848_op_rada_ov /* \\:NV */,             op_rady.op_denik_vl AS op_rady_8848_op_denik_vl /* \\:NV */,             op_rady.op_rada_vl AS op_rady_8848_op_rada_vl /* \\:NV */,             op_rady.op_denik_prev AS op_rady_8848_op_denik_prev /* \\:NV */,             op_rady.op_rada_prev AS op_rady_8848_op_rada_prev /* \\:NV */,             op_rady.denik_posty AS op_rady_8848_denik_posty /* \\:NV */,             op_rady.rada_posty AS op_rady_8848_rada_posty /* \\:NV */,             op_rady.vydej_neods AS op_rady_8848_vydej_neods /* \\:NV */,             op_rady.fv_denik_zal AS op_rady_8848_fv_denik_zal /* \\:NV */,             op_rady.fv_rada_zal AS op_rady_8848_fv_rada_zal /* \\:NV */,             op_rady.zal_fa_nast AS op_rady_8848_zal_fa_nast /* \\:NV */,             op_rady.zal_fa_pocet AS op_rady_8848_zal_fa_pocet /* \\:NV */,             op_rady.tpv_denik_kalk AS op_rady_8848_tpv_denik_kalk /* \\:NV */,             op_rady.tpv_rada_kalk AS op_rady_8848_tpv_rada_kalk /* \\:NV */,             op_rady.v_zak_denik AS op_rady_8848_v_zak_denik /* \\:NV */,             op_rady.v_zak_rada AS op_rady_8848_v_zak_rada /* \\:NV */,             op_rady.op_denik_parag AS op_rady_8848_op_denik_parag /* \\:NV */,             op_rady.op_rada_parag AS op_rady_8848_op_rada_parag /* \\:NV */,             op_rady.parag_zpusob AS op_rady_8848_parag_zpusob /* \\:NV */,             op_rady.imp_ordrsp_dkl_10 AS opr_imp_ordrsp_dkl_10 /* \\:NV */,             op_rady.imp_ordrsp_dkl_20 AS opr_imp_ordrsp_dkl_20 /* \\:NV */,             op_zahlavi.cena_bez_dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS cena_bez_dph_mu /* \\:Sop_zahlavi.cena_bez_dph:HCena bez DPH [MÚ] */,             op_zahlavi.dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS dph_mu /* \\:Sop_zahlavi.dph:HDPH [MÚ] */,             op_zahlavi.cena_celkem * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS cena_celkem_mu /* \\:Sop_zahlavi.cena_celkem:HCena celkem [MÚ] */,             op_zahlavi.castka_zal * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) AS castka_zal_mu /* \\:Sop_zahlavi.castka_zal:HČástka zálohy [MÚ] */,             #TO_DUAL_ROUND(op_zahlavi.cena_bez_dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS cena_bez_dph_dual /* \\:Sop_zahlavi.cena_bez_dph:HCena bez DPH [MD] */,             #TO_DUAL_ROUND(op_zahlavi.dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS dph_dual /* \\:Sop_zahlavi.dph:HDPH [MD] */,             #TO_DUAL_ROUND(op_zahlavi.cena_celkem * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS cena_celkem_dual /* \\:Sop_zahlavi.cena_celkem:HCena celkem [MD] */,             #TO_DUAL_ROUND(op_zahlavi.castka_zal * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end), mistni, 2) AS castka_zal_dual /* \\:Sop_zahlavi.castka_zal:HČástka zálohy [MD] */,             mistni.id_mistni AS id_mistni /* \\:Smenycis_mistni.id_mistni */,             mistni.id_dualni AS id_dualni /* \\:Smenycis_mistni.id_dualni */,             dba.op_zahlavi_vykr_skl_fce(op_zahlavi.doklad) AS vykr_skl /* \\:Sop_zahlavi.vykryto:HSkladem */,             coalesce((select count(1) from dba.op_zahlavi_ver ver with(index(pk_op_zahlavi_ver)) where ver.doklad = op_zahlavi.doklad), 0) + 1 AS pocet_ver /* \\:Sop_zahlavi_ver.ver_poradi:HVerze */,             case when exists(select 1 from dba.parcisudaje pu with(index(parcisudaje_typ)) where pu.typ = 'ORDRSP' and pu.id_partnera = op_zahlavi.id_partnera) then 1 else 0 end AS par_export /* \\:Sop_zahlavi.export:NV */         from dba.op_zahlavi op_zahlavi,             dba.op_rady op_rady with(index(pk_op_rady)),             dba.menycis_mistni mistni with(index(pk_menycis_mistni))         where op_rady.fiskalni_rok = op_zahlavi.fiskalni_rok             and op_rady.denik = op_zahlavi.denik             and op_rady.rada = op_zahlavi.rada             and mistni.fiskalni_rok = op_zahlavi.fiskalni_rok w_iftseznam\tdetail.color\t255 w_iftseznam\tdwselect\tSELECT TOP 351  op_zahlavi.doklad,op_zahlavi.fiskalni_rok,op_zahlavi.denik,op_zahlavi.rada,op_zahlavi.aktualizace,op_zahlavi.druh,op_zahlavi.typ_obj,op_zahlavi.nulove_mnozstvi,op_zahlavi.pravo,op_zahlavi.citac,op_zahlavi.objednavka,op_zahlavi.var_symbol,op_zahlavi.kod_procesu,op_zahlavi.dat_por,op_zahlavi.dat_vyst,op_zahlavi.dat_pri,op_zahlavi.dat_dodani,op_zahlavi.dat_dodani_ods,op_zahlavi.dat_expedice,op_zahlavi.dat_odberu_od,op_zahlavi.dat_odberu_do,op_zahlavi.datum_obj,op_zahlavi.smena,op_zahlavi.dat_vyrizeni,op_zahlavi.fv_denik,op_zahlavi.fv_rada,op_zahlavi.posta_doklad,op_zahlavi.id_partnera,op_zahlavi.kod_partnera,op_zahlavi.ico,op_zahlavi.zkraceny_nazev,op_zahlavi.id_par_oso,op_zahlavi.id_firmy_crm,op_zahlavi.pril_crm,op_zahlavi.stat_urceni,op_zahlavi.id_adresy,op_zahlavi.id_investora,op_zahlavi.id_inv_oso,op_zahlavi.stredisko,op_zahlavi.typ_zakazky,op_zahlavi.zakazka,op_zahlavi.cinnost,op_zahlavi.dealer,op_zahlavi.smlouva,op_zahlavi.polozky_vl,op_zahlavi.pozadavky,op_zahlavi.rez_nahr,op_zahlavi.cena_polozky,op_zahlavi.celni_rezim,op_zahlavi.dph_povaha,op_zahlavi.dan_rezim,op_zahlavi.stat_dph,op_zahlavi.dph_polozky,op_zahlavi.dph_pov_limity,op_zahlavi.kurzovni_listek,op_zahlavi.id_meny,op_zahlavi.mnozstvi,op_zahlavi.kurz,op_zahlavi.typ_uhrady,op_zahlavi.splatnost,op_zahlavi.ds,op_zahlavi.penale_kod,op_zahlavi.penale_proc,op_zahlavi.penale,op_zahlavi.skonto,op_zahlavi.kod_skonta,op_zahlavi.zpusob_dopravy,op_zahlavi.kod_dd,op_zahlavi.kod_dp,op_zahlavi.kod_pt,op_zahlavi.misto_dp,op_zahlavi.cenik,op_zahlavi.rozpad_ob,op_zahlavi.cena_bez_dph,op_zahlavi.dph,op_zahlavi.cena_celkem,op_zahlavi.expedovat_z,op_zahlavi.storno,op_zahlavi.vykryto,op_zahlavi.dodano,op_zahlavi.dodano_predb,op_zahlavi.vyrizeno,op_zahlavi.vyrizeno_kl,op_zahlavi.odeslano,op_zahlavi.moje_id,op_zahlavi.dodanych,op_zahlavi.vyrizenych,op_zahlavi.dod_or_vyr,op_zahlavi.vsech,op_zahlavi.poznamka,op_zahlavi.kod_t_uvod,op_zahlavi.t_uvod,op_zahlavi.kod_t_zaver,op_zahlavi.t_zaver,op_zahlavi.kod_t_uvod_op,op_zahlavi.t_uvod_op,op_zahlavi.kod_t_zaver_op,op_zahlavi.t_zaver_op,op_zahlavi.id_partnera_dop,op_zahlavi.zkraceny_nazev_dop,op_zahlavi.kod_partnera_dop,op_zahlavi.ico_dop,op_zahlavi.id_adresy_dop,op_zahlavi.spz,op_zahlavi.expedice_misto,op_zahlavi.osoba,op_zahlavi.opr_prov,op_zahlavi.id_posty_poz,op_zahlavi.id_posty,op_zahlavi.id_posty_dor,op_zahlavi.id_modulu_gen,op_zahlavi.agenda_gen,op_zahlavi.doklad_gen,op_zahlavi.doklad_obj,op_zahlavi.doklad_fv_zal,op_zahlavi.doklad_vl,op_zahlavi.doklad_prev,op_zahlavi.doklad_fv,op_zahlavi.doklad_zak,op_zahlavi.doklad_kalk,op_zahlavi.doklad_ramc,op_zahlavi.id_partnera_ov,op_zahlavi.doklad_ov,op_zahlavi.cen_spln,op_zahlavi.mat_pozadavky,op_zahlavi.odsouhlaseno,op_zahlavi.plat_podminky,op_zahlavi.tech_provedeni,op_zahlavi.term_spln,op_zahlavi.vyr_kapacita,op_zahlavi.potvrzeno,op_zahlavi.rozvezeno,op_zahlavi.stav,op_zahlavi.storno_autor,op_zahlavi.storno_datum,op_zahlavi.procento_zal,op_zahlavi.castka_zal,op_zahlavi.zal_s_dph,op_zahlavi.elektroodpad,op_zahlavi.ramcovy,op_zahlavi.i_web_id_osoby,op_zahlavi.stav0_autor,op_zahlavi.stav1_autor,op_zahlavi.stav11_autor,op_zahlavi.stav0_datum,op_zahlavi.stav1_datum,op_zahlavi.stav11_datum,op_zahlavi.import,op_zahlavi.export,op_zahlavi.exp_ordrsp_stav_akc,op_zahlavi.zshop_e_mail,op_zahlavi.zshop_dod_adresa,op_zahlavi.zshop_fak_adresa,op_zahlavi.zshop_komplet,op_zahlavi.zshop_objednal,op_zahlavi.zshop_zpusob_odberu,op_zahlavi.zshop_zpusob_platby,op_zahlavi.zshop_e_mail_nad,op_zahlavi.zshop_id_shop,op_zahlavi.zshop_jazyk,op_zahlavi.zshop_http_referer,op_zahlavi.zshop_elp_id,op_zahlavi.zshop_elp_status,op_zahlavi.zshop_vs,op_zahlavi.zshop_uz_id,op_zahlavi.zshop_uz_name,op_zahlavi.zshop_uz_country,op_zahlavi.autor,op_zahlavi.ts,op_zahlavi.user_kod_vyr,op_zahlavi.user_kod_vysobj,op_zahlavi.user_kod_dodadr,op_zahlavi.user_obj_nakup,op_zahlavi.user_obj_vyst,op_zahlavi.user_dod_adr,op_zahlavi.user_dat_vyst_zd,op_zahlavi.user_kodkz,op_zahlavi.user_vyr_poznamka,op_zahlavi.user_sleva_odb,op_zahlavi.user_hmotnost_dkl,op_zahlavi.user_objem_dkl,op_zahlavi.user_cena_mat,isnull(op_zahlavi.xattach,0) xattach,             op_rady.op_denik_pop op_rady_8848_op_denik_pop ,             op_rady.op_rada_pop op_rady_8848_op_rada_pop ,             op_rady.op_denik_nab op_rady_8848_op_denik_nab ,             op_rady.op_rada_nab op_rady_8848_op_rada_nab ,             op_rady.op_denik_op op_rady_8848_op_denik_op ,             op_rady.op_rada_op op_rady_8848_op_rada_op ,             op_rady.op_denik_ov op_rady_8848_op_denik_ov ,             op_rady.op_rada_ov op_rady_8848_op_rada_ov ,             op_rady.op_denik_vl op_rady_8848_op_denik_vl ,             op_rady.op_rada_vl op_rady_8848_op_rada_vl ,             op_rady.op_denik_prev op_rady_8848_op_denik_prev ,             op_rady.op_rada_prev op_rady_8848_op_rada_prev ,             op_rady.denik_posty op_rady_8848_denik_posty ,             op_rady.rada_posty op_rady_8848_rada_posty ,             op_rady.vydej_neods op_rady_8848_vydej_neods ,             op_rady.fv_denik_zal op_rady_8848_fv_denik_zal ,             op_rady.fv_rada_zal op_rady_8848_fv_rada_zal ,             op_rady.zal_fa_nast op_rady_8848_zal_fa_nast ,             op_rady.zal_fa_pocet op_rady_8848_zal_fa_pocet ,             op_rady.tpv_denik_kalk op_rady_8848_tpv_denik_kalk ,             op_rady.tpv_rada_kalk op_rady_8848_tpv_rada_kalk ,             op_rady.v_zak_denik op_rady_8848_v_zak_denik ,             op_rady.v_zak_rada op_rady_8848_v_zak_rada ,             op_rady.op_denik_parag op_rady_8848_op_denik_parag ,             op_rady.op_rada_parag op_rady_8848_op_rada_parag ,             op_rady.parag_zpusob op_rady_8848_parag_zpusob ,             op_rady.imp_ordrsp_dkl_10 opr_imp_ordrsp_dkl_10 ,             op_rady.imp_ordrsp_dkl_20 opr_imp_ordrsp_dkl_20 ,             op_zahlavi.cena_bez_dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) cena_bez_dph_mu ,             op_zahlavi.dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) dph_mu ,             op_zahlavi.cena_celkem * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) cena_celkem_mu ,             op_zahlavi.castka_zal * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end) castka_zal_mu ,             convert(decimal(18, 2)/*BY*/, round( case when  mistni.koef_na_dual > 0 then (op_zahlavi.cena_bez_dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) *  mistni.koef_na_dual when  mistni.koef_na_mistni > 0 then (op_zahlavi.cena_bez_dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) / (case when  mistni.koef_na_mistni <> 0 then  mistni.koef_na_mistni else 1 end) else 0 end,  2)) cena_bez_dph_dual ,             convert(decimal(18, 2)/*BY*/, round( case when  mistni.koef_na_dual > 0 then (op_zahlavi.dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) *  mistni.koef_na_dual when  mistni.koef_na_mistni > 0 then (op_zahlavi.dph * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) / (case when  mistni.koef_na_mistni <> 0 then  mistni.koef_na_mistni else 1 end) else 0 end,  2)) dph_dual ,             convert(decimal(18, 2)/*BY*/, round( case when  mistni.koef_na_dual > 0 then (op_zahlavi.cena_celkem * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) *  mistni.koef_na_dual when  mistni.koef_na_mistni > 0 then (op_zahlavi.cena_celkem * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) / (case when  mistni.koef_na_mistni <> 0 then  mistni.koef_na_mistni else 1 end) else 0 end,  2)) cena_celkem_dual ,             convert(decimal(18, 2)/*BY*/, round( case when  mistni.koef_na_dual > 0 then (op_zahlavi.castka_zal * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) *  mistni.koef_na_dual when  mistni.koef_na_mistni > 0 then (op_zahlavi.castka_zal * (case when mistni.xkurz = 1 then op_zahlavi.kurz / op_zahlavi.mnozstvi else op_zahlavi.mnozstvi / op_zahlavi.kurz end)) / (case when  mistni.koef_na_mistni <> 0 then  mistni.koef_na_mistni else 1 end) else 0 end,  2)) castka_zal_dual ,             mistni.id_mistni id_mistni ,             mistni.id_dualni id_dualni ,             dba.op_zahlavi_vykr_skl_fce(op_zahlavi.doklad) vykr_skl ,             isnull((select count(1) from dba.op_zahlavi_ver ver with(index(pk_op_zahlavi_ver)) where ver.doklad = op_zahlavi.doklad), 0) + 1 pocet_ver ,             case when 1 in(select 1 from dba.parcisudaje pu with(index(parcisudaje_typ)) where pu.typ = 'ORDRSP' and pu.id_partnera = op_zahlavi.id_partnera) then 1 else 0 end par_export          ,(select count(op_polozky.user_vyrobeno) from dba.op_polozky op_polozky with(index(pk_op_polozky)) where op_polozky.doklad = op_zahlavi.doklad and op_polozky.user_vyrobeno=1 and left(op_polozky.karta,1)<>'S') vyrobeno  ,(select count(op_polozky.karta) from dba.op_polozky op_polozky with(index(pk_op_polozky)) where op_polozky.doklad = op_zahlavi.doklad and left(op_polozky.karta,1)<>'S') pol_k_vyr  ,(select parcis.nazev from dba.parcis parcis with(index(pk_parcis)) where parcis.id_partnera=op_zahlavi.id_investora) investor_nazev  ,(select count(attach_store.poradi) from dba.attach_store attach_store with(index(pk_attach_store)) where attach_store.pk=op_zahlavi.doklad and attach_store.att_class='TPV') attpocetpdf from dba.op_zahlavi op_zahlavi with(index(op_zahlavi_fr)) , dba.op_rady op_rady with(index(pk_op_rady)) , dba.menycis_mistni mistni with(index(pk_menycis_mistni)) where op_rady.fiskalni_rok = op_zahlavi.fiskalni_rok             and op_rady.denik = op_zahlavi.denik             and op_rady.rada = op_zahlavi.rada             and mistni.fiskalni_rok = op_zahlavi.fiskalni_rok  AND (op_zahlavi.druh = 30 /* sez_podm */) AND ( op_zahlavi.fiskalni_rok=/*apb489*/'24'/*ape489*/ AND (op_zahlavi.doklad + '') <> '' /* blankrec */) AND (((op_zahlavi.storno <> 1 /* storno - nestornované */ )) /* combo5 */ )    ORDER BY op_zahlavi.fiskalni_rok DESC,op_zahlavi.denik DESC,op_zahlavi.rada DESC,op_zahlavi.citac DESC,op_zahlavi.doklad DESC,op_zahlavi.dodano DESC,op_zahlavi.vyrizeno DESC,op_zahlavi.storno DESC OPTION(fast 350) /* seznam op_zahlavi A/O_OBJ/op_zahlavi/200705051639068503094766/10/40/0 */ w_iftseznam\tdwcolumns\tdoklad,fiskalni_rok,denik,rada,aktualizace,druh,typ_obj,nulove_mnozstvi,pravo,citac,objednavka,var_symbol,kod_procesu,dat_por,dat_vyst,dat_pri,dat_dodani,dat_dodani_ods,dat_expedice,dat_odberu_od,dat_odberu_do,datum_obj,smena,dat_vyrizeni,fv_denik,fv_rada,posta_doklad,id_partnera,kod_partnera,ico,zkraceny_nazev,id_par_oso,id_firmy_crm,pril_crm,stat_urceni,id_adresy,id_investora,id_inv_oso,stredisko,typ_zakazky,zakazka,cinnost,dealer,smlouva,polozky_vl,pozadavky,rez_nahr,cena_polozky,celni_rezim,dph_povaha,dan_rezim,stat_dph,dph_polozky,dph_pov_limity,kurzovni_listek,id_meny,mnozstvi,kurz,typ_uhrady,splatnost,ds,penale_kod,penale_proc,penale,skonto,kod_skonta,zpusob_dopravy,kod_dd,kod_dp,kod_pt,misto_dp,cenik,rozpad_ob,cena_bez_dph,dph,cena_celkem,expedovat_z,storno,vykryto,dodano,dodano_predb,vyrizeno,vyrizeno_kl,odeslano,moje_id,dodanych,vyrizenych,dod_or_vyr,vsech,poznamka,kod_t_uvod,t_uvod,kod_t_zaver,t_zaver,kod_t_uvod_op,t_uvod_op,kod_t_zaver_op,t_zaver_op,id_partnera_dop,zkraceny_nazev_dop,kod_partnera_dop,ico_dop,id_adresy_dop,spz,expedice_misto,osoba,opr_prov,id_posty_poz,id_posty,id_posty_dor,id_modulu_gen,agenda_gen,doklad_gen,doklad_obj,doklad_fv_zal,doklad_vl,doklad_prev,doklad_fv,doklad_zak,doklad_kalk,doklad_ramc,id_partnera_ov,doklad_ov,cen_spln,mat_pozadavky,odsouhlaseno,plat_podminky,tech_provedeni,term_spln,vyr_kapacita,potvrzeno,rozvezeno,stav,storno_autor,storno_datum,procento_zal,castka_zal,zal_s_dph,elektroodpad,ramcovy,i_web_id_osoby,stav0_autor,stav1_autor,stav11_autor,stav0_datum,stav1_datum,stav11_datum,import,export,exp_ordrsp_stav_akc,zshop_e_mail,zshop_dod_adresa,zshop_fak_adresa,zshop_komplet,zshop_objednal,zshop_zpusob_odberu,zshop_zpusob_platby,zshop_e_mail_nad,zshop_id_shop,zshop_jazyk,zshop_http_referer,zshop_elp_id,zshop_elp_status,zshop_vs,zshop_uz_id,zshop_uz_name,zshop_uz_country,autor,ts,user_kod_vyr,user_kod_vysobj,user_kod_dodadr,user_obj_nakup,user_obj_vyst,user_dod_adr,user_dat_vyst_zd,user_kodkz,user_vyr_poznamka,user_sleva_odb,user_hmotnost_dkl,user_objem_dkl,user_cena_mat,xattach,op_rady_8848_op_denik_pop,op_rady_8848_op_rada_pop,op_rady_8848_op_denik_nab,op_rady_8848_op_rada_nab,op_rady_8848_op_denik_op,op_rady_8848_op_rada_op,op_rady_8848_op_denik_ov,op_rady_8848_op_rada_ov,op_rady_8848_op_denik_vl,op_rady_8848_op_rada_vl,op_rady_8848_op_denik_prev,op_rady_8848_op_rada_prev,op_rady_8848_denik_posty,op_rady_8848_rada_posty,op_rady_8848_vydej_neods,op_rady_8848_fv_denik_zal,op_rady_8848_fv_rada_zal,op_rady_8848_zal_fa_nast,op_rady_8848_zal_fa_pocet,op_rady_8848_tpv_denik_kalk,op_rady_8848_tpv_rada_kalk,op_rady_8848_v_zak_denik,op_rady_8848_v_zak_rada,op_rady_8848_op_denik_parag,op_rady_8848_op_rada_parag,op_rady_8848_parag_zpusob,opr_imp_ordrsp_dkl_10,opr_imp_ordrsp_dkl_20,cena_bez_dph_mu,dph_mu,cena_celkem_mu,castka_zal_mu,cena_bez_dph_dual,dph_dual,cena_celkem_dual,castka_zal_dual,id_mistni,id_dualni,vykr_skl,pocet_ver,par_export,vyrobeno,pol_k_vyr,investor_nazev,attpocetpdf,xremind w_iftseznam\tdwcolumns_visible\tstav0_autor,xattach_bmp,doklad,potvrzeno,objednavka,user_obj_nakup,odsouhlaseno,vykryto,vykr_skl,dodano,dodano_predb,vyrizeno,vyrizeno_kl,storno,dat_pri,dat_dodani,dat_expedice,zkraceny_nazev,user_kodkz,cena_bez_dph,dph,cena_celkem,castka_zal,id_meny,kod_procesu,dat_vyrizeni,druh,pocet_ver,ramcovy,dat_odberu_od,dat_odberu_do,cenik,posta_doklad,id_partnera,kod_partnera,ico,id_adresy,id_par_oso,id_investora,id_inv_oso,id_firmy_crm,pril_crm,smlouva,zpusob_dopravy,id_partnera_dop,stat_urceni,zkraceny_nazev_dop,ico_dop,kod_partnera_dop,id_adresy_dop,spz,kod_dp,misto_dp,dan_rezim,stredisko,typ_zakazky,zakazka,cinnost,dealer,celni_rezim,kurzovni_listek,mnozstvi,dph_povaha,stat_dph,kurz,typ_uhrady,splatnost,ds,penale,penale_kod,penale_proc,dodanych,vyrizenych,dod_or_vyr,kod_dd,poznamka,kod_pt,osoba,id_modulu_gen,agenda_gen,doklad_gen,doklad_prev,doklad_obj,doklad_zak,doklad_kalk,kod_t_uvod,t_uvod,kod_t_zaver,t_zaver,cen_spln,mat_pozadavky,plat_podminky,tech_provedeni,term_spln,vyr_kapacita,smena,typ_obj,dph_polozky,pozadavky,rez_nahr,cena_polozky,polozky_vl,aktualizace,nulove_mnozstvi,rozpad_ob,elektroodpad,expedice_misto,expedovat_z,id_partnera_ov,opr_prov,dat_por,storno_autor,storno_datum,id_mistni,cena_bez_dph_mu,dph_mu,cena_celkem_mu,castka_zal_mu,id_dualni,cena_bez_dph_dual,dph_dual,cena_celkem_dual,castka_zal_dual,autor,ts,var_symbol,dat_vyst,dat_dodani_ods,datum_obj,dph_pov_limity,skonto,kod_skonta,odeslano,kod_t_uvod_op,t_uvod_op,kod_t_zaver_op,t_zaver_op,id_posty_poz,id_posty,id_posty_dor,doklad_ramc,i_web_id_osoby,stav1_autor,stav11_autor,stav0_datum,stav1_datum,stav11_datum,import,export,exp_ordrsp_stav_akc,zshop_e_mail,zshop_dod_adresa,zshop_fak_adresa,zshop_komplet,zshop_objednal,zshop_zpusob_odberu,zshop_zpusob_platby,zshop_e_mail_nad,zshop_id_shop,zshop_jazyk,zshop_http_referer,zshop_elp_id,zshop_elp_status,zshop_vs,zshop_uz_id,zshop_uz_name,zshop_uz_country,user_kod_vyr,user_kod_vysobj,user_kod_dodadr,user_obj_vyst,user_dod_adr,user_dat_vyst_zd,xremind_bmp,user_vyr_poznamka,user_sleva_odb,investor_nazev,user_hmotnost_dkl,user_objem_dkl,opattpdf,user_cena_mat 0\tstav0_autor\t56 1\txattach_bmp\t18 2\tdoklad\t110 3\tpotvrzeno\t28 4\tobjednavka\t110 5\tuser_obj_nakup\t166 6\todsouhlaseno\t28 7\tvykryto\t28 8\tvykr_skl\t28 9\tdodano\t28 10\tdodano_predb\t31 11\tvyrizeno\t28 12\tvyrizeno_kl\t28 13\tstorno\t28 14\tdat_pri\t69 15\tdat_dodani\t69 16\tdat_expedice\t69 17\tzkraceny_nazev\t161 18\tuser_kodkz\t153 19\tcena_bez_dph\t116 20\tdph\t92 21\tcena_celkem\t99 22\tcastka_zal\t100 23\tid_meny\t46 24\tkod_procesu\t69 25\tdat_vyrizeni\t83 26\tdruh\t69 27\tpocet_ver\t71 28\tramcovy\t57 29\tdat_odberu_od\t69 30\tdat_odberu_do\t69 31\tcenik\t110 32\tposta_doklad\t110 33\tid_partnera\t70 34\tkod_partnera\t77 35\tico\t69 36\tid_adresy\t56 37\tid_par_oso\t156 38\tid_investora\t100 39\tid_inv_oso\t175 40\tid_firmy_crm\t105 41\tpril_crm\t80 42\tsmlouva\t133 43\tzpusob_dopravy\t115 44\tid_partnera_dop\t94 45\tstat_urceni\t132 46\tzkraceny_nazev_dop\t171 47\tico_dop\t100 48\tkod_partnera_dop\t99 49\tid_adresy_dop\t139 50\tspz\t133 51\tkod_dp\t81 52\tmisto_dp\t167 53\tdan_rezim\t170 54\tstredisko\t65 55\ttyp_zakazky\t71 56\tzakazka\t185 57\tcinnost\t85 58\tdealer\t85 59\tcelni_rezim\t222 60\tkurzovni_listek\t87 61\tmnozstvi\t158 62\tdph_povaha\t152 63\tstat_dph\t132 64\tkurz\t101 65\ttyp_uhrady\t49 66\tsplatnost\t81 67\tds\t207 68\tpenale\t69 69\tpenale_kod\t66 70\tpenale_proc\t100 71\tdodanych\t125 72\tvyrizenych\t150 73\tdod_or_vyr\t192 74\tkod_dd\t132 75\tpoznamka\t253 76\tkod_pt\t152 77\tosoba\t69 78\tid_modulu_gen\t82 79\tagenda_gen\t90 80\tdoklad_gen\t146 81\tdoklad_prev\t117 82\tdoklad_obj\t155 83\tdoklad_zak\t105 84\tdoklad_kalk\t156 85\tkod_t_uvod\t140 86\tt_uvod\t257 87\tkod_t_zaver\t158 88\tt_zaver\t257 89\tcen_spln\t121 90\tmat_pozadavky\t131 91\tplat_podminky\t109 92\ttech_provedeni\t124 93\tterm_spln\t140 94\tvyr_kapacita\t101 95\tsmena\t91 96\ttyp_obj\t90 97\tdph_polozky\t120 98\tpozadavky\t66 99\trez_nahr\t99 100\tcena_polozky\t61 101\tpolozky_vl\t72 102\taktualizace\t104 103\tnulove_mnozstvi\t108 104\trozpad_ob\t100 105\telektroodpad\t107 106\texpedice_misto\t114 107\texpedovat_z\t42 108\tid_partnera_ov\t113 109\topr_prov\t92 110\tdat_por\t90 111\tstorno_autor\t70 112\tstorno_datum\t133 113\tid_mistni\t82 114\tcena_bez_dph_mu\t109 115\tdph_mu\t87 116\tcena_celkem_mu\t99 117\tcastka_zal_mu\t104 118\tid_dualni\t82 119\tcena_bez_dph_dual\t109 120\tdph_dual\t87 121\tcena_celkem_dual\t99 122\tcastka_zal_dual\t104 123\tautor\t55 124\tts\t126 125\tvar_symbol\t84 126\tdat_vyst\t97 127\tdat_dodani_ods\t161 128\tdatum_obj\t160 129\tdph_pov_limity\t240 130\tskonto\t46 131\tkod_skonta\t153 132\todeslano\t60 133\tkod_t_uvod_op\t152 134\tt_uvod_op\t454 135\tkod_t_zaver_op\t169 136\tt_zaver_op\t454 137\tid_posty_poz\t150 138\tid_posty\t131 139\tid_posty_dor\t141 140\tdoklad_ramc\t123 141\ti_web_id_osoby\t98 142\tstav1_autor\t56 143\tstav11_autor\t71 144\tstav0_datum\t147 145\tstav1_datum\t147 146\tstav11_datum\t147 147\timport\t92 148\texport\t97 149\texp_ordrsp_stav_akc\t92 150\tzshop_e_mail\t454 151\tzshop_dod_adresa\t85 152\tzshop_fak_adresa\t103 153\tzshop_komplet\t61 154\tzshop_objednal\t454 155\tzshop_zpusob_odberu\t90 156\tzshop_zpusob_platby\t84 157\tzshop_e_mail_nad\t454 158\tzshop_id_shop\t79 159\tzshop_jazyk\t37 160\tzshop_http_referer\t454 161\tzshop_elp_id\t454 162\tzshop_elp_status\t100 163\tzshop_vs\t100 164\tzshop_uz_id\t304 165\tzshop_uz_name\t454 166\tzshop_uz_country\t454 167\tuser_kod_vyr\t123 168\tuser_kod_vysobj\t153 169\tuser_kod_dodadr\t169 170\tuser_obj_vyst\t153 171\tuser_dod_adr\t379 172\tuser_dat_vyst_zd\t161 173\txremind_bmp\t18 174\tuser_vyr_poznamka\t454 175\tuser_sleva_odb\t90 176\tinvestor_nazev\t454 177\tuser_hmotnost_dkl\t161 178\tuser_objem_dkl\t143 179\topattpdf\t53 180\tuser_cena_mat\t127 w_iftseznam\tdwcolumns_invisible\tfiskalni_rok,denik,rada,pravo,citac,fv_denik,fv_rada,id_par_oso_sum,pril_crm_sum,id_adresy_sum,id_inv_oso_sum,mnozstvi_sum,kurz_sum,splatnost_sum,penale_proc_sum,cena_bez_dph_sum,dph_sum,cena_celkem_sum,moje_id,moje_id_sum,dodanych_sum,vyrizenych_sum,dod_or_vyr_sum,vsech,vsech_sum,id_adresy_dop_sum,id_posty_poz_sum,doklad_fv_zal,doklad_vl,doklad_fv,doklad_ov,rozvezeno,stav,procento_zal,procento_zal_sum,castka_zal_sum,zal_s_dph,user_hmotnost_dkl_sum,user_objem_dkl_sum,user_cena_mat_sum,xattach,op_rady_8848_op_denik_pop,op_rady_8848_op_rada_pop,op_rady_8848_op_denik_nab,op_rady_8848_op_rada_nab,op_rady_8848_op_denik_op,op_rady_8848_op_rada_op,op_rady_8848_op_denik_ov,op_rady_8848_op_rada_ov,op_rady_8848_op_denik_vl,op_rady_8848_op_rada_vl,op_rady_8848_op_denik_prev,op_rady_8848_op_rada_prev,op_rady_8848_denik_posty,op_rady_8848_rada_posty,op_rady_8848_vydej_neods,op_rady_8848_fv_denik_zal,op_rady_8848_fv_rada_zal,op_rady_8848_zal_fa_nast,op_rady_8848_zal_fa_pocet,op_rady_8848_tpv_denik_kalk,op_rady_8848_tpv_rada_kalk,op_rady_8848_v_zak_denik,op_rady_8848_v_zak_rada,op_rady_8848_op_denik_parag,op_rady_8848_op_rada_parag,op_rady_8848_parag_zpusob,opr_imp_ordrsp_dkl_10,opr_imp_ordrsp_dkl_20,cena_bez_dph_mu_sum,dph_mu_sum,cena_celkem_mu_sum,castka_zal_mu_sum,cena_bez_dph_dual_sum,dph_dual_sum,cena_celkem_dual_sum,castka_zal_dual_sum,par_export,vyrobeno,vyrobeno_sum,pol_k_vyr,pol_k_vyr_sum,attpocetpdf,attpocetpdf_sum,xremind w_iftseznam\tid_save\to_obj/op_zahlavi w_iftseznam\tfirstuser\t;#SETMENUID=A/O_OBJ/op_zahlavi/200705051639068503094766/10/40/0;    #XSUB=\\AKCE^OBJ; #MNUMAKCE=200705051639068503094766;;#SETMENUID_END;; #WORKSPACE_TITLE_BEGIN;Objednávky přijaté#WORKSPACE_TITLE_END;; #WORKSPACE_MODULE=O_OBJ;; #WORKSPACE_MNID=200705051639068503094766;;;#SETMENUID=O/O_OBJ/10/op_zahlavi//200705141135552301933414/15/40/0;    #ENAB_ADD_IN_VIEW; #HIDEBLANKREC; #STANDARDSORT; #TL_FUNKCE_SEZNAM; #COMBO_ID1=stav; #COLUMN1=-; #POLOZKY1=Nepřístupné\\1\\op_zahlavi.opr_prov = 0^Přístupné\\2\\op_zahlavi.opr_prov = 1^Vyřízeno\\3\\(op_zahlavi.vyrizeno = 1 or op_zahlavi.vyrizeno_kl = 1)^Odsouhlaseno\\4\\op_zahlavi.odsouhlaseno = 1^Nevyřízeno\\5\\(op_zahlavi.vyrizeno = 0 and op_zahlavi.vyrizeno_kl = 0)^Neodsouhlaseno\\6\\op_zahlavi.odsouhlaseno = 0; #POPISBEZ1=Stav; #COMBO_ID2=vykryto; #COLUMN2=; #POLOZKY2=Vůbec\\0\\op_zahlavi.vykryto = 0 and op_zahlavi.vyrizeno <> 1^Nevykryto\\4\\op_zahlavi.vykryto <> 1 and op_zahlavi.vyrizeno <> 1^Vykryto částečně\\2\\op_zahlavi.vykryto = 2 and op_zahlavi.vyrizeno <> 1^Vykryto\\1\\op_zahlavi.vykryto = 1 or op_zahlavi.vyrizeno = 1; #POPISBEZ2=Vykryto; #COMBO_ID3=dodano; #COLUMN3=-; #POLOZKY3=Vůbec\\0\\op_zahlavi.dodano = 0 and op_zahlavi.vyrizeno_kl <> 1^Částečně\\1\\op_zahlavi.dodano = 2 and op_zahlavi.vyrizeno_kl <> 1^Nedodané\\2\\op_zahlavi.dodano in (0, 2) and op_zahlavi.vyrizeno_kl <> 1^Zcela dodané\\3\\op_zahlavi.dodano = 1^Vyřízené ručně\\4\\op_zahlavi.vyrizeno_kl = 1; #POPISBEZ3=Dodáno; #COMBO_ID4=dodano_predb; #COLUMN4=coalesce(op_zahlavi.dodano_predb, 0); #POLOZKY4=Předběžně dodáno NE\\0^Předběžně dodáno ANO\\1^Předběžně dodáno ČÁSTEČNĚ\\2; #POPISBEZ4=Předběžně dodáno; #COMBO_ID5=storno; #COLUMN5=-; #POLOZKY5=Nestornované\\1\\op_zahlavi.storno <> 1^Stornované\\2\\op_zahlavi.storno = 1; #POPISBEZ5=Storno; #DEFAULT5=1; #COMBO_ID6=dopravce; #COLUMN6=-; #POLOZKY6=Bez dopravce\\1\\op_zahlavi.id_partnera_dop = ''^S dopravcem\\2\\op_zahlavi.id_partnera_dop <> ''; #POPISBEZ6=Dopravce; #COMBO_ID7=spz; #COLUMN7=-; #POLOZKY7=Bez SPZ\\1\\op_zahlavi.spz = ''^S SPZ\\2\\op_zahlavi.spz <> ''; #POPISBEZ7=SPZ; #COMBO_ID8=doklad_fv_zal; #COLUMN8=-; #POLOZKY8=Bez zálohové FV\\1\\op_zahlavi.doklad_fv_zal = ''^Se zálohovou FV\\2\\op_zahlavi.doklad_fv_zal <> ''; #POPISBEZ8=Zálohová FV; #COMBO_ID9=ramcovy; #COLUMN9=coalesce(op_zahlavi.ramcovy, 0); #POLOZKY9=Rámcový doklad\\1^Běžný doklad\\0; #POPISBEZ9=Rámcový doklad; #COMBO_ID10=expedovat; #COLUMN10=op_zahlavi.expedovat_z; #POLOZKY10=Expedovat\\1^Neexpedovat\\0; #POPISBEZ10=Expedovat; #COMBO_ID11=id_meny; #COLUMN11=op_zahlavi.id_meny; #POLOZKY11=select mena.id_meny, '', 'op_zahlavi.id_meny = ' + char(39) + mena.id_meny + char(39) from dba.menycis mena with(index(pk_menycis)) where mena.id_meny <> '' order by mena.id_meny; #POPISBEZ11=Měna; #COMBO_BEGIN; #COMBO_ID=export; #COLUMN=coalesce(op_zahlavi.export, 0); #POLOZKY=Ne\\0^Exportovat\\1^Exportováno\\2; #POPISBEZ=Exportovat potvrzení; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=neex_vpr; #COLUMN=-; #POLOZKY=Neexistuje výrobní pŕíkaz\\0\\op_rady.v_zak_denik <> '' and op_rady.v_zak_rada <> '' and op_zahlavi.storno = 0 and op_zahlavi.druh = 30 and ((op_zahlavi.potvrzeno = 1 and coalesce(op_rady.vydej_neods, 0) = 2) or (op_zahlavi.odsouhlaseno = 1 and coalesce(op_rady.vydej_neods, 0) = 0) or coalesce(op_rady.vydej_neods, 0) = 1) and exists(select 1 from dba.op_polozky opp with(index(pk_op_polozky)) where opp.doklad = op_zahlavi.doklad and opp.typ_polozky in (3, 7, 15) and opp.storno = 0 and opp.vyrizeno = 0 and opp.vykryto in (0, 2) and not exists(select 1 from dba.v_opv opv with(index(v_opv_objed)), dba.v_opvz opvz with(index(pk_v_opvz)) where opv.objednavka = opp.doklad and opv.polobj = opp.polozka and opvz.doklad = opv.doklad and opvz.storno = 0))^; #POPISBEZ=Existence výrobního příkazu; #COMBO_VISIBLE=islicmodul('V_ZAK'); #COMBO_END; #COMBO_BEGIN; #COMBO_ID=nedodano_dnes; #COLUMN=-; #POLOZKY=Vůbec, po termínu dodání\\0\\op_zahlavi.dodano = 0 and op_zahlavi.vyrizeno_kl <> 1 and op_zahlavi.dat_dodani < getdate()^Částečně, po termínu dodání\\1\\op_zahlavi.dodano = 2 and op_zahlavi.vyrizeno_kl <> 1 and op_zahlavi.dat_dodani < getdate()^Nedodané, po termínu dodání\\2\\op_zahlavi.dodano in (0, 2) and op_zahlavi.vyrizeno_kl <> 1 and op_zahlavi.dat_dodani < getdate(); #POPISBEZ=Nedodané po termínu dodání; #COMBO_END; #COMBO_BEGIN; #COMBO_ID=nedodano_ods; #COLUMN=-; #POLOZKY=Vůbec, po původním termínu dodání\\0\\op_zahlavi.dodano = 0 and op_zahlavi.vyrizeno_kl <> 1 and coalesce(nullif(op_zahlavi.dat_dodani_ods, convert(#BY(datumy.datum), '1901-01-01')), op_zahlavi.dat_dodani) < getdate()^Částečně, po původním termínu dodání\\1\\op_zahlavi.dodano = 2 and op_zahlavi.vyrizeno_kl <> 1 and coalesce(nullif(op_zahlavi.dat_dodani_ods, convert(#BY(datumy.datum), '1901-01-01')), op_zahlavi.dat_dodani) < getdate()^Nedodané, po původním termínu dodání\\2\\op_zahlavi.dodano in (0, 2) and op_zahlavi.vyrizeno_kl <> 1 and coalesce(nullif(op_zahlavi.dat_dodani_ods, convert(#BY(datumy.datum), '1901-01-01')), op_zahlavi.dat_dodani) < getdate(); #POPISBEZ=Nedodané po původním termínu dodání; #COMBO_END; #NO_DOKLAD_LEGEND; #LEGEND=#DOKL_STORNO:Stornovaný doklad:Fstorno = 1; #LEGEND=#DOKL_UZAV:Vyřízený doklad:Fvyrizeno = 1; #LEGEND=#O_OBJ_VYKR_SKL:Doklad vykrytý skladem:Fvykr_skl = 1; #LEGEND=#DOKL_SCHVAL:Vykrytý doklad:Fvykryto = 1; #LEGEND=#O_OBJ_ODS:Odsouhlasený doklad:Fodsouhlaseno = 1; #LEGEND=#O_OBJ_POT:Potvrzený doklad:Fpotvrzeno = 1; #LEGEND=#O_OBJ_NEPOT:Nepotvrzený doklad:Fpotvrzeno = 0;;#SETMENUID_END;;;#SETMENUID=O/O_OBJ/10/op_zahlavi//202307031504083938379356/15/30/0;#DO_SEZ_SQL; #SEZ_SQL_ADD3000=(select count(op_polozky.user_vyrobeno) from dba.op_polozky op_polozky with(index(pk_op_polozky)) where op_polozky.doklad = op_zahlavi.doklad and op_polozky.user_vyrobeno=1 and left(op_polozky.karta,1)<>'S') AS vyrobeno /*\\:Sop_zahlavi.dodanych:HVyrobeno:NV*/; #SEZ_SQL_ADD3001=(select count(op_polozky.karta) from dba.op_polozky op_polozky with(index(pk_op_polozky)) where op_polozky.doklad = op_zahlavi.doklad and left(op_polozky.karta,1)<>'S') AS pol_k_vyr /*\\:Sop_zahlavi.dodanych:HPoložek k vyrobě:NV*/; #SEZ_SQL_ADD3002=(select parcis.nazev from dba.parcis parcis with(index(pk_parcis)) where parcis.id_partnera=op_zahlavi.id_investora) AS investor_nazev /*\\:Sparcis.nazev:HNázev partnera F*/; #SEZ_SQL_ADD3003=(select count(attach_store.poradi) from dba.attach_store attach_store with(index(pk_attach_store)) where attach_store.pk=op_zahlavi.doklad and attach_store.att_class='TPV') AS attpocetpdf/*\\:Sattach_access.id:HA-pdf:NV*/; #COMPUTEADD3000=opattpdf=bitmap(case(attpocetpdf when 0 then '' else 'path(PathAttachLevelStatus8),color(20),tooltip(PDF příloha OP)')):HA-OP pdf:F:NS; #LEGEND=rgb(30,144,255):Všechny položky vyrobeny:F1:vyrobeno=pol_k_vyr and pol_k_vyr > 0 and op_zahlavi.doklad_vl = '';;#SETMENUID_END;;#ALL_ADD_TYPES=SEZNAM_op_zahlavi,;;#SEZNAM_DOKLAD; #STANDARDSORT;#HIDEBLANKREC;#ENAB_ADD_IN_VIEW;#ENAB_DELETE_IN_VIEW;#ENAB_FAST_PREV_IN_VIEW;#SEZ_SQL_SLOUPCEADD;#SEZ_SQL_COMPUTEADD; w_iftseznam\tmaxrows\t350 w_iftseznam\tstorage\t293 074 w_iftseznam\tsorting w_iftseznam\tadd_sorting\tfiskalni_rok A,denik A,rada A,citac A,doklad A,dodano A,vyrizeno A,storno A, ------------------------------- Window: VolbaSestavy Sestava - Štítky (O_OBJ disabled visible c__w_iftrepmaker) w_ift\tclassname\tw_iftrepmaker w_ift\tclasses\t.object.karatbaseobject.karatobject.karatcontrol.karatwindow.c__w_ift.c__w_filter_parent.c__w_fil_def_parent.c__w_iftrepmaker w_ift\tparametr ID_MENU=MNID/O_OBJ/202306201248564755483132 BUTTON_TITLE=Štítky TYP=SESTAVA CLASS=w_iftrepmaker W_SOURCE=object(c__w_iftseznam AppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.22697.22700) SEZ_SQL_BEGIN SELECT S.poradi AS poradi\\:Sop_polozky.polozka, S.karta AS karta\\:Sop_polozky.karta, S.nazev AS nazev\\:Snomenklatura.nazev, S.user_mnozstvi_vyr AS user_mnozstvi_vyr\\:Sop_polozky.user_mnozstvi_vyr, S.doklad AS doklad\\:Sop_polozky.doklad, S.zkraceny_nazev AS firma\\:Sop_zahlavi.zkraceny_nazev, isnull(S.user_zakvy,'') AS user_zakvy\\:Sop_polozky.user_zakvy, S.user_dat_dodani_zd AS user_dat_dodani_zd\\:Sop_polozky.user_dat_dodani_zd, S.user_obj_nakup AS user_obj_nakup\\:Sop_zahlavi.user_obj_nakup, isnull(S.user_pol_poz,'') AS user_pol_poz\\:Sop_polozky.user_pol_poz, isnull(S.user_vrtani_met,'') AS user_vrtani_met\\:Sop_polozky.user_vrtani_met, S.user_polozka_zd AS user_polozka_zd\\:Sop_polozky.user_polozka_zd, S.user_typ_profil AS user_typ_profil\\:Sop_polozky.user_typ_profil, S.user_profil_zak AS user_profil_zak\\:Sop_polozky.user_profil_zak, S.user_carkod AS user_carkod\\:Sop_polozky.user_carkod, S.user_ean AS user_ean\\:Sop_polozky.user_ean, S.user_delka AS user_delka\\:Sop_polozky.user_delka, S.user_vyska AS user_vyska\\:Sop_polozky.user_vyska, S.user_hloubka AS user_hloubka\\:Sop_polozky.user_hloubka, S.user_kodkz AS user_kodkz\\:Sop_zahlavi.user_kodkz, S.storno AS storno\\:Sop_polozky.storno, S.polozka AS polozka\\:Sop_polozky.polozka, S.user_skup_n_op AS user_skup_n_op\\:Sop_polozky.user_skup_n_op, S.citac_stitku AS citac_stitku, S.ean16 AS ean16 FROM #op_stitky1 S WHERE 1=1 SEZ_SQL_END USER_BEGIN ;#SETMENUID=O/O_OBJ/0/op_zahlavi//202306201248564755483132/20/30/0; #PERCENT_OFF; #NOADDADDMENU; #BUTTON_COLOR=rgb(255,128,128); #SPACEBEFORE; #SPACEAFTER; #DBEXEC_SUBST=#BE_DOKLAD|24OP010100000305; #DBEXECUTE=op_exe_stitky1; #DEFAULT_PROFILE=STITKY;;#SETMENUID_END;;#ISFIRSTROW;;#ISLASTROW;;#ISFROMBUTTON;;#ALL_ADD_TYPES=SESTAVA_,; USER_END GEN_REPORT=stitky_25_100_wh GEN_TAB=cisla GEN_TABFULL=cisla GEN_GROUP1= poradi;poradi;S.poradi GEN_PBL0=O_OBJ GEN_TITLE=Štítky GEN_WHERE=storno=0 GEN_DWDEF1=WHERE_FILTER GEN_DWDEF2=WINDOWID GEN_DWVAL1=1=1 GEN_DWVAL2=4810179 DBCREATE_BEGIN BEGIN CREATE TABLE #op_stitky1_2324279 (poradi smallint/*BY*/, karta #BY(op_polozky.karta), nazev #BY(nomenklatura.nazev), user_mnozstvi_vyr #BY(op_polozky.user_mnozstvi_vyr), doklad #BY(op_polozky.doklad), zkraceny_nazev #BY(op_zahlavi.zkraceny_nazev), user_zakvy #BY(op_polozky.user_zakvy), user_dat_dodani_zd #BY(op_polozky.user_dat_dodani_zd), user_obj_nakup #BY(op_zahlavi.zkraceny_nazev), user_pol_poz #BY(op_polozky.user_pol_poz), user_vrtani_met #BY(op_polozky.user_vrtani_met), user_polozka_zd #BY(op_polozky.user_polozka_zd), user_typ_profil #BY(op_polozky.user_typ_profil), user_profil_zak #BY(op_polozky.user_profil_zak), user_carkod #BY(op_polozky.user_carkod), user_ean #BY(op_polozky.user_ean), user_delka #BY(op_polozky.user_delka), user_vyska #BY(op_polozky.user_vyska), user_hloubka #BY(op_polozky.user_hloubka), user_kodkz #BY(op_zahlavi.user_kodkz), storno #BY(op_polozky.storno), polozka #BY(op_polozky.polozka), user_skup_n_op #BY(op_polozky.user_skup_n_op), dat_dodani #BY(op_zahlavi.dat_dodani), citac_stitku char(3)/*BY*/, ean16 varchar(25)/*BY*/ primary key(poradi)) END DBCREATE_END DBEXECUTE_BEGIN BEGIN DECLARE @citac smallint/*BY*/ DECLARE @karta #BY(op_polozky.karta), @nazev #BY(nomenklatura.nazev), @user_mnozstvi_vyr #BY(op_polozky.user_mnozstvi_vyr), @doklad #BY(op_polozky.doklad), @zkraceny_nazev #BY(op_zahlavi.zkraceny_nazev), @user_zakvy #BY(op_polozky.user_zakvy), @user_dat_dodani_zd #BY(op_polozky.user_dat_dodani_zd), @user_obj_nakup #BY(op_zahlavi.user_obj_nakup), @user_pol_poz #BY(op_polozky.user_pol_poz), @user_vrtani_met #BY(op_polozky.user_vrtani_met), @user_polozka_zd #BY(op_polozky.user_polozka_zd), @user_typ_profil #BY(op_polozky.user_typ_profil), @user_profil_zak #BY(op_polozky.user_profil_zak), @user_carkod #BY(op_polozky.user_carkod), @user_ean #BY(op_polozky.user_ean), @user_delka #BY(op_polozky.user_delka), @user_vyska #BY(op_polozky.user_vyska), @user_hloubka #BY(op_polozky.user_hloubka), @user_kodkz #BY(op_zahlavi.user_kodkz), @storno #BY(op_polozky.storno), @polozka #BY(op_polozky.polozka), @user_skup_n_op #BY(op_polozky.user_skup_n_op), @dat_dodani #BY(op_zahlavi.dat_dodani), @citac_stitku varchar(3)/*BY*/, @pocet_mezer int /*BY*/, @mezery varchar(16)/*BY*/, @ean16 varchar(25)/*BY*/ --declarace kurzoru po položkách Příjemky DECLARE op_pol CURSOR FOR SELECT P.karta, N.nazev,P.user_mnozstvi_vyr,P.doklad,Z.zkraceny_nazev,isnull(P.user_zakvy,''),(case when P.user_dat_dodani_zd<>convert(datetime/*BY*/, '1901-01-01') then P.user_dat_dodani_zd else Z.dat_dodani end),isnull(Z.user_obj_nakup,''),isnull(P.user_pol_poz,''),isnull(P.user_vrtani_met,''), isnull(P.user_polozka_zd,''),isnull(P.user_typ_profil,''),isnull(P.user_profil_zak,''),isnull(P.user_carkod,''),isnull(P.user_ean,''),P.user_delka,P.user_vyska,(P.user_sirka1+P.user_sirka2+P.user_sirka3+P.user_sirka4+P.user_sirka5),isnull(Z.user_kodkz,''),P.storno,P.polozka,P.user_skup_n_op,Z.dat_dodani FROM dba.op_polozky P with(index(pk_op_polozky)), dba.nomenklatura N with(index(nomenklatura_cislo_nomen)), dba.op_zahlavi Z with(index(pk_op_zahlavi)) WHERE P.doklad = '24OP010100000305' AND N.cislo_nomenklatury = P.karta AND Z.doklad = P.doklad --otevření kurzoru po položkách Příjemky OPEN op_pol WHILE 1 = 1 BEGIN FETCH op_pol INTO @karta, @nazev, @user_mnozstvi_vyr,@doklad, @zkraceny_nazev,@user_zakvy,@user_dat_dodani_zd,@user_obj_nakup,@user_pol_poz,@user_vrtani_met, @user_polozka_zd,@user_typ_profil,@user_profil_zak,@user_carkod,@user_ean,@user_delka,@user_vyska,@user_hloubka,@user_kodkz,@storno,@polozka,@user_skup_n_op,@dat_dodani if @@sqlstatus <> 0 BEGIN\tbreak END SELECT @citac = 1 WHILE @citac <= @user_mnozstvi_vyr BEGIN select @citac_stitku =  right('000'+Convert(varchar/*BY*/, @citac),3) select @pocet_mezer = 16- len(@user_ean) select @mezery = REPLICATE(' ', @pocet_mezer) select @ean16 = CONCAT(@user_ean,@mezery,@citac_stitku,'0',@user_carkod) INSERT INTO #op_stitky1_2324279 (poradi, karta, nazev, user_mnozstvi_vyr, doklad, zkraceny_nazev,user_zakvy,user_dat_dodani_zd,user_obj_nakup,user_pol_poz,user_vrtani_met,user_polozka_zd,user_typ_profil,user_profil_zak,user_carkod, user_ean,user_delka,user_vyska,user_hloubka,user_kodkz,storno,polozka,user_skup_n_op,dat_dodani, citac_stitku, ean16) SELECT (SELECT COALESCE(MAX(poradi), 0) + 1 FROM #op_stitky1_2324279 WHERE 1=1), @karta, @nazev, @user_mnozstvi_vyr, @doklad, @zkraceny_nazev,@user_zakvy,@user_dat_dodani_zd,@user_obj_nakup,@user_pol_poz,@user_vrtani_met,@user_polozka_zd,@user_typ_profil,@user_profil_zak,@user_carkod, @user_ean,@user_delka,@user_vyska,@user_hloubka,@user_kodkz,@storno,@polozka,@user_skup_n_op,@dat_dodani, @citac_stitku, @ean16 SELECT @citac = @citac + 1 END END CLOSE op_pol END DBEXECUTE_END DBDROP=DROP TABLE #op_stitky1_2324279 w_ift\tconn\tms_19216810247_karat_termopan 73 w_ift\tf11 w_ift\tRefreshObjects\tPARENT_LIST PARENT_200705141135559525303211 w_ift\tPercentOffDWs\tPARENT_LIST\tdba.op_zahlavi\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.22697.22700.22723 PARENT_200705141135559525303211\tdba.op_polozky\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.22697.22700.preview.200705141135559525303211.dw w_iftrepmaker\tfiltrwhere w_iftrepmaker\tsubstituce\t#WHERE_FILTER|1=1|#WINDOWID|4810179| w_iftrepmaker\trep_substituce\t#NAZEV||#NEW_ROK_SYSTEM|2025|#NEW_PERS_ROK_SYSTEM|2025|#FILTER||#FULLDAY|13:29:18.846 06.05.2024|#FULLDAYCODE|2024-05-06 13:29:18.846|#FULLDAYREPORT|06.05.2024 13:29:18|#PODMINKA| |#PERS_ROK_SYSTEM|2024|#PERS_ROK_SYSTEM_M|2024|#PERS_MES_SYSTEM|3|#PERS_MES_SYSTEM_M|3|#TEXTSORT|Bez řazení|#TEXTLANG|Čeština *|#TODAY|06.05.2024|#REPCODE|o_obj_ru_stitky_25_100_wh_100|#REPNAME|25x100|#REPIDAKCE||#REPAKCE||#ROK_SYSTEM|2024|#DATALANG|CZ|#DOMAIN_.CASTKA17_TYPE|decimal(17,2)|#DOMAIN_.CASTKA17_COLTYPE|decimal(2)|#DOMAIN_.CASTKA17_LENGTH|22|#DOMAIN_.CASTKA17_DWLEN|-1|#DOMAIN_.CASTKA17_FORMAT|###,###,###,###,###.00|#DOMAIN_.CASTKA17_STRFORMAT|###,###,###,###,###.00|#DOMAIN_.CASTKA17_EDIT|EM|#DOMAIN_.CASTKA18_TYPE|decimal(18,2)|#DOMAIN_.CASTKA18_COLTYPE|decimal(2)|#DOMAIN_.CASTKA18_LENGTH|22|#DOMAIN_.CASTKA18_DWLEN|-1|#DOMAIN_.CASTKA18_FORMAT|###,###,###,###,###.00|#DOMAIN_.CASTKA18_STRFORMAT|###,###,###,###,###.00|#DOMAIN_.CASTKA18_EDIT|EM|#DOMAIN_.DEVIZY18_TYPE|decimal(18,2)|#DOMAIN_.DEVIZY18_COLTYPE|decimal(2)|#DOMAIN_.DEVIZY18_LENGTH|22|#DOMAIN_.DEVIZY18_DWLEN|-1|#DOMAIN_.DEVIZY18_FORMAT|###,###,###,###,###.00|#DOMAIN_.DEVIZY18_STRFORMAT|###,###,###,###,###.00|#DOMAIN_.DEVIZY18_EDIT|EM|#DOMAIN_.TEXT_255_TYPE|varchar(255)|#DOMAIN_.TEXT_255_COLTYPE|char(255)|#DOMAIN_.TEXT_255_LENGTH|255|#DOMAIN_.TEXT_255_DWLEN|-1|#DOMAIN_.TEXT_255_FORMAT||#DOMAIN_.TEXT_255_STRFORMAT||#DOMAIN_.TEXT_255_EDIT|PO|#DOMAIN_.TEXT_40_TYPE|varchar(40)|#DOMAIN_.TEXT_40_COLTYPE|char(40)|#DOMAIN_.TEXT_40_LENGTH|40|#DOMAIN_.TEXT_40_DWLEN|-1|#DOMAIN_.TEXT_40_FORMAT||#DOMAIN_.TEXT_40_STRFORMAT||#DOMAIN_.TEXT_40_EDIT|ED|#DOMAIN_.TEXT_80_TYPE|varchar(80)|#DOMAIN_.TEXT_80_COLTYPE|char(80)|#DOMAIN_.TEXT_80_LENGTH|80|#DOMAIN_.TEXT_80_DWLEN|-1|#DOMAIN_.TEXT_80_FORMAT||#DOMAIN_.TEXT_80_STRFORMAT||#DOMAIN_.TEXT_80_EDIT|ED|#DOMAIN_ADMIN_HODNOTA_TYPE|varchar(255)|#DOMAIN_ADMIN_HODNOTA_COLTYPE|char(255)|#DOMAIN_ADMIN_HODNOTA_LENGTH|255|#DOMAIN_ADMIN_HODNOTA_DWLEN|-1|#DOMAIN_ADMIN_HODNOTA_FORMAT||#DOMAIN_ADMIN_HODNOTA_STRFORMAT||#DOMAIN_ADMIN_HODNOTA_EDIT|PO|#DOMAIN_ADMIN_LANG_PHRASE_TYPE|varchar(255)|#DOMAIN_ADMIN_LANG_PHRASE_COLTYPE|char(255)|#DOMAIN_ADMIN_LANG_PHRASE_LENGTH|255|#DOMAIN_ADMIN_LANG_PHRASE_DWLEN|-1|#DOMAIN_ADMIN_LANG_PHRASE_FORMAT||#DOMAIN_ADMIN_LANG_PHRASE_STRFORMAT||#DOMAIN_ADMIN_LANG_PHRASE_EDIT|PO|#DOMAIN_ADMIN_MENU_POPIS_TYPE|varchar(100)|#DOMAIN_ADMIN_MENU_POPIS_COLTYPE|char(100)|#DOMAIN_ADMIN_MENU_POPIS_LENGTH|100|#DOMAIN_ADMIN_MENU_POPIS_DWLEN|-1|#DOMAIN_ADMIN_MENU_POPIS_FORMAT||#DOMAIN_ADMIN_MENU_POPIS_STRFORMAT||#DOMAIN_ADMIN_MENU_POPIS_EDIT|ED|#DOMAIN_ADMIN_SD_LABEL_TYPE|varchar(80)|#DOMAIN_ADMIN_SD_LABEL_COLTYPE|char(80)|#DOMAIN_ADMIN_SD_LABEL_LENGTH|80|#DOMAIN_ADMIN_SD_LABEL_DWLEN|-1|#DOMAIN_ADMIN_SD_LABEL_FORMAT||#DOMAIN_ADMIN_SD_LABEL_STRFORMAT||#DOMAIN_ADMIN_SD_LABEL_EDIT|ED|#DOMAIN_ADR_OBEC_TYPE|varchar(80)|#DOMAIN_ADR_OBEC_COLTYPE|char(80)|#DOMAIN_ADR_OBEC_LENGTH|80|#DOMAIN_ADR_OBEC_DWLEN|-1|#DOMAIN_ADR_OBEC_FORMAT||#DOMAIN_ADR_OBEC_STRFORMAT||#DOMAIN_ADR_OBEC_EDIT|ED|#DOMAIN_ADR_ULICE_TYPE|varchar(80)|#DOMAIN_ADR_ULICE_COLTYPE|char(80)|#DOMAIN_ADR_ULICE_LENGTH|80|#DOMAIN_ADR_ULICE_DWLEN|-1|#DOMAIN_ADR_ULICE_FORMAT||#DOMAIN_ADR_ULICE_STRFORMAT||#DOMAIN_ADR_ULICE_EDIT|ED|#DOMAIN_BANKA_TYPE|varchar(7)|#DOMAIN_BANKA_COLTYPE|char(7)|#DOMAIN_BANKA_LENGTH|7|#DOMAIN_BANKA_DWLEN|-1|#DOMAIN_BANKA_FORMAT||#DOMAIN_BANKA_STRFORMAT||#DOMAIN_BANKA_EDIT|ED|#DOMAIN_CEN_SKUPINA_NOM_TYPE|varchar(12)|#DOMAIN_CEN_SKUPINA_NOM_COLTYPE|char(12)|#DOMAIN_CEN_SKUPINA_NOM_LENGTH|12|#DOMAIN_CEN_SKUPINA_NOM_DWLEN|-1|#DOMAIN_CEN_SKUPINA_NOM_FORMAT||#DOMAIN_CEN_SKUPINA_NOM_STRFORMAT||#DOMAIN_CEN_SKUPINA_NOM_EDIT|ED|#DOMAIN_DKL_POLOZKA_SMALL_TYPE|integer|#DOMAIN_DKL_POLOZKA_SMALL_COLTYPE|long|#DOMAIN_DKL_POLOZKA_SMALL_LENGTH|11|#DOMAIN_DKL_POLOZKA_SMALL_DWLEN|-1|#DOMAIN_DKL_POLOZKA_SMALL_FORMAT|###,###,##0|#DOMAIN_DKL_POLOZKA_SMALL_STRFORMAT|###,###,##0|#DOMAIN_DKL_POLOZKA_SMALL_EDIT|EM|#DOMAIN_DKL_POLOZKA_SMALL0_TYPE|smallint|#DOMAIN_DKL_POLOZKA_SMALL0_COLTYPE|long|#DOMAIN_DKL_POLOZKA_SMALL0_LENGTH|5|#DOMAIN_DKL_POLOZKA_SMALL0_DWLEN|-1|#DOMAIN_DKL_POLOZKA_SMALL0_FORMAT|#,##0|#DOMAIN_DKL_POLOZKA_SMALL0_STRFORMAT|#,##0|#DOMAIN_DKL_POLOZKA_SMALL0_EDIT|EM|#DOMAIN_DKL_TEXT_40_TYPE|varchar(40)|#DOMAIN_DKL_TEXT_40_COLTYPE|char(40)|#DOMAIN_DKL_TEXT_40_LENGTH|40|#DOMAIN_DKL_TEXT_40_DWLEN|-1|#DOMAIN_DKL_TEXT_40_FORMAT||#DOMAIN_DKL_TEXT_40_STRFORMAT||#DOMAIN_DKL_TEXT_40_EDIT|ED|#DOMAIN_DPH_KOD_TYPE|varchar(10)|#DOMAIN_DPH_KOD_COLTYPE|char(10)|#DOMAIN_DPH_KOD_LENGTH|10|#DOMAIN_DPH_KOD_DWLEN|-1|#DOMAIN_DPH_KOD_FORMAT||#DOMAIN_DPH_KOD_STRFORMAT||#DOMAIN_DPH_KOD_EDIT|ED|#DOMAIN_EXIMP_ID_TYPE|varchar(40)|#DOMAIN_EXIMP_ID_COLTYPE|char(40)|#DOMAIN_EXIMP_ID_LENGTH|40|#DOMAIN_EXIMP_ID_DWLEN|-1|#DOMAIN_EXIMP_ID_DAVKY_TYPE|integer|#DOMAIN_EXIMP_ID_DAVKY_COLTYPE|long|#DOMAIN_EXIMP_ID_DAVKY_LENGTH|7|#DOMAIN_EXIMP_ID_DAVKY_DWLEN|-1|#DOMAIN_EXIMP_ID_DAVKY_FORMAT|#######|#DOMAIN_EXIMP_ID_DAVKY_STRFORMAT|#######|#DOMAIN_EXIMP_ID_DAVKY_EDIT|EM|#DOMAIN_EXIMP_ID_FORMAT||#DOMAIN_EXIMP_ID_STRFORMAT||#DOMAIN_EXIMP_ID_EDIT|ED|#DOMAIN_O_OBJ_KOD_TEXTU_TYPE|char(3)|#DOMAIN_O_OBJ_KOD_TEXTU_COLTYPE|char(3)|#DOMAIN_O_OBJ_KOD_TEXTU_LENGTH|3|#DOMAIN_O_OBJ_KOD_TEXTU_DWLEN|-1|#DOMAIN_O_OBJ_KOD_TEXTU_FORMAT||#DOMAIN_O_OBJ_KOD_TEXTU_STRFORMAT||#DOMAIN_O_OBJ_KOD_TEXTU_EDIT|ED|#DOMAIN_O_SKL_IDENTIFIKATOR_TYPE|varchar(20)|#DOMAIN_O_SKL_IDENTIFIKATOR_COLTYPE|char(20)|#DOMAIN_O_SKL_IDENTIFIKATOR_LENGTH|20|#DOMAIN_O_SKL_IDENTIFIKATOR_DWLEN|-1|#DOMAIN_O_SKL_IDENTIFIKATOR_FORMAT||#DOMAIN_O_SKL_IDENTIFIKATOR_STRFORMAT||#DOMAIN_O_SKL_IDENTIFIKATOR_EDIT|ED|#DOMAIN_ODBYT_ATR_HODNOTA_TYPE|varchar(30)|#DOMAIN_ODBYT_ATR_HODNOTA_COLTYPE|char(30)|#DOMAIN_ODBYT_ATR_HODNOTA_LENGTH|30|#DOMAIN_ODBYT_ATR_HODNOTA_DWLEN|-1|#DOMAIN_ODBYT_ATR_HODNOTA_FORMAT||#DOMAIN_ODBYT_ATR_HODNOTA_STRFORMAT||#DOMAIN_ODBYT_ATR_HODNOTA_EDIT|ED|#DOMAIN_ODBYT_ATR_VAR_TYPE|varchar(30)|#DOMAIN_ODBYT_ATR_VAR_COLTYPE|char(30)|#DOMAIN_ODBYT_ATR_VAR_LENGTH|30|#DOMAIN_ODBYT_ATR_VAR_DWLEN|-1|#DOMAIN_ODBYT_ATR_VAR_FORMAT||#DOMAIN_ODBYT_ATR_VAR_STRFORMAT||#DOMAIN_ODBYT_ATR_VAR_EDIT|ED|#DOMAIN_ODBYT_CENA_TYPE|decimal(15,4)|#DOMAIN_ODBYT_CENA_COLTYPE|decimal(4)|#DOMAIN_ODBYT_CENA_LENGTH|19|#DOMAIN_ODBYT_CENA_DWLEN|-1|#DOMAIN_ODBYT_CENA_FORMAT|##,###,###,###.0000|#DOMAIN_ODBYT_CENA_STRFORMAT|##,###,###,###.0000|#DOMAIN_ODBYT_CENA_EDIT|EM|#DOMAIN_ODBYT_DL_TYPE|char(16)|#DOMAIN_ODBYT_DL_COLTYPE|char(16)|#DOMAIN_ODBYT_DL_LENGTH|16|#DOMAIN_ODBYT_DL_DWLEN|-1|#DOMAIN_ODBYT_DL_FORMAT||#DOMAIN_ODBYT_DL_STRFORMAT||#DOMAIN_ODBYT_DL_EDIT|ED|#DOMAIN_ODBYT_EAN_TYPE|varchar(20)|#DOMAIN_ODBYT_EAN_COLTYPE|char(20)|#DOMAIN_ODBYT_EAN_LENGTH|20|#DOMAIN_ODBYT_EAN_DWLEN|-1|#DOMAIN_ODBYT_EAN_FORMAT||#DOMAIN_ODBYT_EAN_STRFORMAT||#DOMAIN_ODBYT_EAN_EDIT|ED|#DOMAIN_ODBYT_JEHO_ID_TYPE|varchar(30)|#DOMAIN_ODBYT_JEHO_ID_COLTYPE|char(30)|#DOMAIN_ODBYT_JEHO_ID_LENGTH|30|#DOMAIN_ODBYT_JEHO_ID_DWLEN|-1|#DOMAIN_ODBYT_JEHO_ID_FORMAT||#DOMAIN_ODBYT_JEHO_ID_STRFORMAT||#DOMAIN_ODBYT_JEHO_ID_EDIT|ED|#DOMAIN_ODBYT_KARTA_TYPE|varchar(20)|#DOMAIN_ODBYT_KARTA_COLTYPE|char(20)|#DOMAIN_ODBYT_KARTA_LENGTH|20|#DOMAIN_ODBYT_KARTA_DWLEN|-1|#DOMAIN_ODBYT_KARTA_FORMAT||#DOMAIN_ODBYT_KARTA_STRFORMAT||#DOMAIN_ODBYT_KARTA_EDIT|ED|#DOMAIN_ODBYT_KOD_TEXTU_TYPE|char(3)|#DOMAIN_ODBYT_KOD_TEXTU_COLTYPE|char(3)|#DOMAIN_ODBYT_KOD_TEXTU_LENGTH|3|#DOMAIN_ODBYT_KOD_TEXTU_DWLEN|-1|#DOMAIN_ODBYT_KOD_TEXTU_FORMAT||#DOMAIN_ODBYT_KOD_TEXTU_STRFORMAT||#DOMAIN_ODBYT_KOD_TEXTU_EDIT|ED|#DOMAIN_ODBYT_MISTO_DOD_TYPE|varchar(200)|#DOMAIN_ODBYT_MISTO_DOD_COLTYPE|char(200)|#DOMAIN_ODBYT_MISTO_DOD_LENGTH|200|#DOMAIN_ODBYT_MISTO_DOD_DWLEN|-1|#DOMAIN_ODBYT_MISTO_DOD_FORMAT||#DOMAIN_ODBYT_MISTO_DOD_STRFORMAT||#DOMAIN_ODBYT_MISTO_DOD_EDIT|ED|#DOMAIN_ODBYT_MNOZSTVI15_TYPE|decimal(15,4)|#DOMAIN_ODBYT_MNOZSTVI15_COLTYPE|decimal(4)|#DOMAIN_ODBYT_MNOZSTVI15_LENGTH|16|#DOMAIN_ODBYT_MNOZSTVI15_DWLEN|-1|#DOMAIN_ODBYT_MNOZSTVI15_FORMAT|###,###,###.0000|#DOMAIN_ODBYT_MNOZSTVI15_STRFORMAT|###,###,###.0000|#DOMAIN_ODBYT_MNOZSTVI15_EDIT|EM|#DOMAIN_ODBYT_NAZEV_NOM_TYPE|varchar(50)|#DOMAIN_ODBYT_NAZEV_NOM_COLTYPE|char(50)|#DOMAIN_ODBYT_NAZEV_NOM_LENGTH|50|#DOMAIN_ODBYT_NAZEV_NOM_DWLEN|-1|#DOMAIN_ODBYT_NAZEV_NOM_FORMAT||#DOMAIN_ODBYT_NAZEV_NOM_STRFORMAT||#DOMAIN_ODBYT_NAZEV_NOM_EDIT|ED|#DOMAIN_ODBYT_OBJEDNAVKA_TYPE|char(100)|#DOMAIN_ODBYT_OBJEDNAVKA_COLTYPE|char(100)|#DOMAIN_ODBYT_OBJEDNAVKA_LENGTH|100|#DOMAIN_ODBYT_OBJEDNAVKA_DWLEN|-1|#DOMAIN_ODBYT_OBJEDNAVKA_FORMAT||#DOMAIN_ODBYT_OBJEDNAVKA_STRFORMAT||#DOMAIN_ODBYT_OBJEDNAVKA_EDIT|ED|#DOMAIN_ODBYT_POCET_PALET_TYPE|decimal(9,2)|#DOMAIN_ODBYT_POCET_PALET_COLTYPE|decimal(2)|#DOMAIN_ODBYT_POCET_PALET_LENGTH|12|#DOMAIN_ODBYT_POCET_PALET_DWLEN|-1|#DOMAIN_ODBYT_POCET_PALET_FORMAT|#,###,###.00|#DOMAIN_ODBYT_POCET_PALET_STRFORMAT|#,###,###.00|#DOMAIN_ODBYT_POCET_PALET_EDIT|EM|#DOMAIN_ODBYT_SKUPINA_NOM_TYPE|varchar(12)|#DOMAIN_ODBYT_SKUPINA_NOM_COLTYPE|char(12)|#DOMAIN_ODBYT_SKUPINA_NOM_LENGTH|12|#DOMAIN_ODBYT_SKUPINA_NOM_DWLEN|-1|#DOMAIN_ODBYT_SKUPINA_NOM_FORMAT||#DOMAIN_ODBYT_SKUPINA_NOM_STRFORMAT||#DOMAIN_ODBYT_SKUPINA_NOM_EDIT|ED|#DOMAIN_ORG_CINNOST_TYPE|varchar(10)|#DOMAIN_ORG_CINNOST_COLTYPE|char(10)|#DOMAIN_ORG_CINNOST_LENGTH|10|#DOMAIN_ORG_CINNOST_DWLEN|-1|#DOMAIN_ORG_CINNOST_FORMAT||#DOMAIN_ORG_CINNOST_STRFORMAT||#DOMAIN_ORG_CINNOST_EDIT|ED|#DOMAIN_ORG_DEALER_TYPE|varchar(10)|#DOMAIN_ORG_DEALER_COLTYPE|char(10)|#DOMAIN_ORG_DEALER_LENGTH|10|#DOMAIN_ORG_DEALER_DWLEN|-1|#DOMAIN_ORG_DEALER_FORMAT||#DOMAIN_ORG_DEALER_STRFORMAT||#DOMAIN_ORG_DEALER_EDIT|ED|#DOMAIN_ORG_EXT_SMLOUVA_TYPE|char(20)|#DOMAIN_ORG_EXT_SMLOUVA_COLTYPE|char(20)|#DOMAIN_ORG_EXT_SMLOUVA_LENGTH|20|#DOMAIN_ORG_EXT_SMLOUVA_DWLEN|-1|#DOMAIN_ORG_EXT_SMLOUVA_FORMAT||#DOMAIN_ORG_EXT_SMLOUVA_STRFORMAT||#DOMAIN_ORG_EXT_SMLOUVA_EDIT|ED|#DOMAIN_ORG_ID_UCTU_TYPE|varchar(6)|#DOMAIN_ORG_ID_UCTU_COLTYPE|char(6)|#DOMAIN_ORG_ID_UCTU_LENGTH|7|#DOMAIN_ORG_ID_UCTU_DWLEN|-1|#DOMAIN_ORG_ID_UCTU_FORMAT|###/###|#DOMAIN_ORG_ID_UCTU_STRFORMAT|@@@/@@@|#DOMAIN_ORG_ID_UCTU_EDIT|EM|#DOMAIN_ORG_NU_MNOZSTVI_TYPE|decimal(10,2)|#DOMAIN_ORG_NU_MNOZSTVI_COLTYPE|decimal(2)|#DOMAIN_ORG_NU_MNOZSTVI_LENGTH|13|#DOMAIN_ORG_NU_MNOZSTVI_DWLEN|-1|#DOMAIN_ORG_NU_MNOZSTVI_FORMAT|##,###,###.00|#DOMAIN_ORG_NU_MNOZSTVI_STRFORMAT|##,###,###.00|#DOMAIN_ORG_NU_MNOZSTVI_EDIT|EM|#DOMAIN_ORG_NU_MNOZSTVI2_TYPE|decimal(18,2)|#DOMAIN_ORG_NU_MNOZSTVI2_COLTYPE|decimal(2)|#DOMAIN_ORG_NU_MNOZSTVI2_LENGTH|22|#DOMAIN_ORG_NU_MNOZSTVI2_DWLEN|-1|#DOMAIN_ORG_NU_MNOZSTVI2_FORMAT|###,###,###,###,###.00|#DOMAIN_ORG_NU_MNOZSTVI2_STRFORMAT|###,###,###,###,###.00|#DOMAIN_ORG_NU_MNOZSTVI2_EDIT|EM|#DOMAIN_ORG_OKRES_TYPE|char(4)|#DOMAIN_ORG_OKRES_COLTYPE|char(4)|#DOMAIN_ORG_OKRES_LENGTH|4|#DOMAIN_ORG_OKRES_DWLEN|-1|#DOMAIN_ORG_OKRES_FORMAT||#DOMAIN_ORG_OKRES_STRFORMAT||#DOMAIN_ORG_OKRES_EDIT|ED|#DOMAIN_ORG_STREDISKO_TYPE|varchar(10)|#DOMAIN_ORG_STREDISKO_COLTYPE|char(10)|#DOMAIN_ORG_STREDISKO_LENGTH|10|#DOMAIN_ORG_STREDISKO_DWLEN|-1|#DOMAIN_ORG_STREDISKO_FORMAT||#DOMAIN_ORG_STREDISKO_STRFORMAT||#DOMAIN_ORG_STREDISKO_EDIT|ED|#DOMAIN_ORG_UCET_TYPE|varchar(6)|#DOMAIN_ORG_UCET_COLTYPE|char(6)|#DOMAIN_ORG_UCET_LENGTH|7|#DOMAIN_ORG_UCET_DWLEN|-1|#DOMAIN_ORG_UCET_FORMAT|###/###|#DOMAIN_ORG_UCET_STRFORMAT|@@@/@@@|#DOMAIN_ORG_UCET_EDIT|EM|#DOMAIN_ORG_UCET2_TYPE|varchar(20)|#DOMAIN_ORG_UCET2_COLTYPE|char(20)|#DOMAIN_ORG_UCET2_LENGTH|20|#DOMAIN_ORG_UCET2_DWLEN|-1|#DOMAIN_ORG_UCET2_FORMAT||#DOMAIN_ORG_UCET2_STRFORMAT||#DOMAIN_ORG_UCET2_EDIT|ED|#DOMAIN_ORG_UCET3_TYPE|varchar(20)|#DOMAIN_ORG_UCET3_COLTYPE|char(20)|#DOMAIN_ORG_UCET3_LENGTH|20|#DOMAIN_ORG_UCET3_DWLEN|-1|#DOMAIN_ORG_UCET3_FORMAT||#DOMAIN_ORG_UCET3_STRFORMAT||#DOMAIN_ORG_UCET3_EDIT|ED|#DOMAIN_ORG_ZAKAZKA_TYPE|varchar(30)|#DOMAIN_ORG_ZAKAZKA_COLTYPE|char(30)|#DOMAIN_ORG_ZAKAZKA_LENGTH|30|#DOMAIN_ORG_ZAKAZKA_DWLEN|-1|#DOMAIN_ORG_ZAKAZKA_FORMAT||#DOMAIN_ORG_ZAKAZKA_STRFORMAT||#DOMAIN_ORG_ZAKAZKA_EDIT|ED|#DOMAIN_PAR_ICO_TYPE|varchar(8)|#DOMAIN_PAR_ICO_COLTYPE|char(8)|#DOMAIN_PAR_ICO_LENGTH|8|#DOMAIN_PAR_ICO_DWLEN|-1|#DOMAIN_PAR_ICO_FORMAT||#DOMAIN_PAR_ICO_STRFORMAT||#DOMAIN_PAR_ICO_EDIT|ED|#DOMAIN_PAR_NAZEV_ZKRAC_TYPE|char(20)|#DOMAIN_PAR_NAZEV_ZKRAC_COLTYPE|char(20)|#DOMAIN_PAR_NAZEV_ZKRAC_LENGTH|20|#DOMAIN_PAR_NAZEV_ZKRAC_DWLEN|-1|#DOMAIN_PAR_NAZEV_ZKRAC_FORMAT||#DOMAIN_PAR_NAZEV_ZKRAC_STRFORMAT||#DOMAIN_PAR_NAZEV_ZKRAC_EDIT|ED|#DOMAIN_PARAM_PARAM_TYPE|varchar(20)|#DOMAIN_PARAM_PARAM_COLTYPE|char(20)|#DOMAIN_PARAM_PARAM_LENGTH|20|#DOMAIN_PARAM_PARAM_DWLEN|-1|#DOMAIN_PARAM_PARAM_FORMAT||#DOMAIN_PARAM_PARAM_STRFORMAT||#DOMAIN_PARAM_PARAM_EDIT|ED|#DOMAIN_PL_PAR_ZNAK_TYPE|varchar(22)|#DOMAIN_PL_PAR_ZNAK_COLTYPE|char(22)|#DOMAIN_PL_PAR_ZNAK_LENGTH|22|#DOMAIN_PL_PAR_ZNAK_DWLEN|-1|#DOMAIN_PL_PAR_ZNAK_FORMAT||#DOMAIN_PL_PAR_ZNAK_STRFORMAT||#DOMAIN_PL_PAR_ZNAK_EDIT|ED|#DOMAIN_UCE_DIM1_TYPE|varchar(20)|#DOMAIN_UCE_DIM1_COLTYPE|char(20)|#DOMAIN_UCE_DIM1_LENGTH|20|#DOMAIN_UCE_DIM1_DWLEN|-1|#DOMAIN_UCE_DIM1_FORMAT||#DOMAIN_UCE_DIM1_STRFORMAT||#DOMAIN_UCE_DIM1_EDIT|ED|#DOMAIN_UCE_DIM10_TYPE|varchar(20)|#DOMAIN_UCE_DIM10_COLTYPE|char(20)|#DOMAIN_UCE_DIM10_LENGTH|20|#DOMAIN_UCE_DIM10_DWLEN|-1|#DOMAIN_UCE_DIM10_FORMAT||#DOMAIN_UCE_DIM10_STRFORMAT||#DOMAIN_UCE_DIM10_EDIT|ED|#DOMAIN_UCE_DIM2_TYPE|varchar(20)|#DOMAIN_UCE_DIM2_COLTYPE|char(20)|#DOMAIN_UCE_DIM2_LENGTH|20|#DOMAIN_UCE_DIM2_DWLEN|-1|#DOMAIN_UCE_DIM2_FORMAT||#DOMAIN_UCE_DIM2_STRFORMAT||#DOMAIN_UCE_DIM2_EDIT|ED|#DOMAIN_UCE_DIM3_TYPE|varchar(20)|#DOMAIN_UCE_DIM3_COLTYPE|char(20)|#DOMAIN_UCE_DIM3_LENGTH|20|#DOMAIN_UCE_DIM3_DWLEN|-1|#DOMAIN_UCE_DIM3_FORMAT||#DOMAIN_UCE_DIM3_STRFORMAT||#DOMAIN_UCE_DIM3_EDIT|ED|#DOMAIN_UCE_DIM4_TYPE|varchar(20)|#DOMAIN_UCE_DIM4_COLTYPE|char(20)|#DOMAIN_UCE_DIM4_LENGTH|20|#DOMAIN_UCE_DIM4_DWLEN|-1|#DOMAIN_UCE_DIM4_FORMAT||#DOMAIN_UCE_DIM4_STRFORMAT||#DOMAIN_UCE_DIM4_EDIT|ED|#DOMAIN_UCE_DIM5_TYPE|varchar(20)|#DOMAIN_UCE_DIM5_COLTYPE|char(20)|#DOMAIN_UCE_DIM5_LENGTH|20|#DOMAIN_UCE_DIM5_DWLEN|-1|#DOMAIN_UCE_DIM5_FORMAT||#DOMAIN_UCE_DIM5_STRFORMAT||#DOMAIN_UCE_DIM5_EDIT|ED|#DOMAIN_UCE_DIM6_TYPE|varchar(20)|#DOMAIN_UCE_DIM6_COLTYPE|char(20)|#DOMAIN_UCE_DIM6_LENGTH|20|#DOMAIN_UCE_DIM6_DWLEN|-1|#DOMAIN_UCE_DIM6_FORMAT||#DOMAIN_UCE_DIM6_STRFORMAT||#DOMAIN_UCE_DIM6_EDIT|ED|#DOMAIN_UCE_DIM7_TYPE|varchar(20)|#DOMAIN_UCE_DIM7_COLTYPE|char(20)|#DOMAIN_UCE_DIM7_LENGTH|20|#DOMAIN_UCE_DIM7_DWLEN|-1|#DOMAIN_UCE_DIM7_FORMAT||#DOMAIN_UCE_DIM7_STRFORMAT||#DOMAIN_UCE_DIM7_EDIT|ED|#DOMAIN_UCE_DIM8_TYPE|varchar(20)|#DOMAIN_UCE_DIM8_COLTYPE|char(20)|#DOMAIN_UCE_DIM8_LENGTH|20|#DOMAIN_UCE_DIM8_DWLEN|-1|#DOMAIN_UCE_DIM8_FORMAT||#DOMAIN_UCE_DIM8_STRFORMAT||#DOMAIN_UCE_DIM8_EDIT|ED|#DOMAIN_UCE_DIM9_TYPE|varchar(20)|#DOMAIN_UCE_DIM9_COLTYPE|char(20)|#DOMAIN_UCE_DIM9_LENGTH|20|#DOMAIN_UCE_DIM9_DWLEN|-1|#DOMAIN_UCE_DIM9_FORMAT||#DOMAIN_UCE_DIM9_STRFORMAT||#DOMAIN_UCE_DIM9_EDIT|ED|#DOMAIN_V_POSTUP_TYPE|char(20)|#DOMAIN_V_POSTUP_COLTYPE|char(20)|#DOMAIN_V_POSTUP_LENGTH|20|#DOMAIN_V_POSTUP_DWLEN|-1|#DOMAIN_V_POSTUP_FORMAT||#DOMAIN_V_POSTUP_STRFORMAT||#DOMAIN_V_POSTUP_EDIT|ED|#DOMAIN_ZDR_PLAN_PARAM_TYPE|varchar(255)|#DOMAIN_ZDR_PLAN_PARAM_COLTYPE|char(255)|#DOMAIN_ZDR_PLAN_PARAM_LENGTH|255|#DOMAIN_ZDR_PLAN_PARAM_DWLEN|-1|#DOMAIN_ZDR_PLAN_PARAM_FORMAT||#DOMAIN_ZDR_PLAN_PARAM_STRFORMAT||#DOMAIN_ZDR_PLAN_PARAM_EDIT|PO|#LANG|CZ|#AKT_OBD_MAJ|2024-01-31|#AKT_OBD_MAJ_2|2024-01-31|#AKT_OBD_MAJ_3|1901-01-01|#AKT_OBD_MAJ_4|1901-01-01|#AKT_OBD_MAJ_5|1901-01-01|#AKT_OBD_MAJ_6|1901-01-01|#AKT_MES_MAJ|202401|#AKT_MES_MAJ_2|202401|#AKT_MES_MAJ_3|      |#AKT_MES_MAJ_4|      |#AKT_MES_MAJ_5|      |#AKT_MES_MAJ_6|      |#SES_MES_MAJ|202401|#SKUPINY||#MES_SYSTEM|3|#MIN_ROK_SYSTEM|2023|#MZDY_ROK_START|2023|#MZDY_MESIC_START|1|#ZACATEK_SYSTEM|01.03.2024|#KONEC_SYSTEM|31.03.2024|#WHERE_FILTER|1=1|#WINDOWID|4810179|#GROUPS||\\OBD_ADMIN|202401|\\OBD_AGENT|202401|\\OBD_ASNET|202401|\\OBD_ATTCH|202401|\\OBD_BANKA|202401|\\OBD_DOCS|202401|\\OBD_DPHCZ|202401|\\OBD_DPHEV|202401|\\OBD_EETCZ|202401|\\OBD_EXIMP|202401|\\OBD_FAKP|202401|\\OBD_FSAL|202401|\\OBD_FV|202401|\\OBD_GANTT|202401|\\OBD_GDPR|202401|\\OBD_INVEN|202401|\\OBD_KARAT|202401|\\OBD_KAZAS|202401|\\OBD_MAJ|202401|\\OBD_MAN|202401|\\OBD_MZDY|202401|\\OBD_ODBYT|202401|\\OBD_ORG|202401|\\OBD_ORGS|202401|\\OBD_O_CEN|202401|\\OBD_O_OBJ|202401|\\OBD_O_SKL|202401|\\OBD_PARAM|202401|\\OBD_PERS|202403|\\OBD_POKL|202401|\\OBD_PUIN|202401|\\OBD_SEKR|202401|\\OBD_TERM|202401|\\OBD_TMPRS|202401|\\OBD_UCE|202401|\\OBD_UCEOO|202401|\\OBD_UCEPS|202400|\\OBD_UCEVN|202401|\\OBD_UK|202401|\\OBD_VYKAZ|202401|\\OBD_V_TER|202401|\\OBD_V_TPV|202401|\\OBD_V_ZAK|202401|\\OBD_V_ZMT|202401|\\OBD_ZDRKO|202401|\\OBD_ZDROJ|202401|\\ODDELOVAC||\\FR_ADMIN|24|\\FR_AGENT|24|\\FR_ASNET|24|\\FR_ATTCH|24|\\FR_ZAH_ADMIN|01.01.2024|\\FR_ZAH_AGENT|01.01.2024|\\FR_ZAH_ASNET|01.01.2024|\\FR_ZAH_ATTCH|01.01.2024|\\FR_ZAH_BANKA|01.01.2024|\\FR_ZAH_DOCS|01.01.2024|\\FR_ZAH_DPHCZ|01.01.2024|\\FR_ZAH_DPHEV|01.01.2024|\\FR_ZAH_EETCZ|01.01.2024|\\FR_ZAH_EXIMP|01.01.2024|\\FR_ZAH_FAKP|01.01.2024|\\FR_ZAH_FSAL|01.01.2024|\\FR_ZAH_FV|01.01.2024|\\FR_ZAH_GANTT|01.01.2024|\\FR_ZAH_GDPR|01.01.2024|\\FR_ZAH_INVEN|01.01.2024|\\FR_ZAH_KARAT|01.01.2024|\\FR_ZAH_KAZAS|01.01.2024|\\FR_ZAH_MAJ|01.01.2024|\\FR_ZAH_MAN|01.01.2024|\\FR_ZAH_MZDY|01.01.2024|\\FR_ZAH_ODBYT|01.01.2024|\\FR_ZAH_ORG|01.01.2024|\\FR_ZAH_ORGS|01.01.2024|\\FR_ZAH_O_CEN|01.01.2024|\\FR_ZAH_O_OBJ|01.01.2024|\\FR_ZAH_O_SKL|01.01.2024|\\FR_ZAH_PARAM|01.01.2024|\\FR_ZAH_PERS|01.01.2024|\\FR_ZAH_POKL|01.01.2024|\\FR_ZAH_PUIN|01.01.2024|\\FR_ZAH_SEKR|01.01.2024|\\FR_ZAH_TERM|01.01.2024|\\FR_ZAH_TMPRS|01.01.2024|\\FR_ZAH_UCE|01.01.2024|\\FR_ZAH_UCEOO|01.01.2024|\\FR_ZAH_UCEPS|01.01.2024|\\FR_ZAH_UCEVN|01.01.2024|\\FR_ZAH_UK|01.01.2024|\\FR_ZAH_VYKAZ|01.01.2024|\\FR_ZAH_V_TER|01.01.2024|\\FR_ZAH_V_TPV|01.01.2024|\\FR_ZAH_V_ZAK|01.01.2024|\\FR_ZAH_V_ZMT|01.01.2024|\\FR_ZAH_ZDRKO|01.01.2024|\\FR_ZAH_ZDROJ|01.01.2024|\\FR_ZDRKO|24|\\FR_ZDROJ|24|\\FR_UK|24|\\FR_UKO_ADMIN|31.12.2024|\\FR_UKO_AGENT|31.12.2024|\\FR_UKO_ASNET|31.12.2024|\\FR_UKO_ATTCH|31.12.2024|\\FR_UKO_BANKA|31.12.2024|\\FR_UKO_DOCS|31.12.2024|\\FR_UKO_DPHCZ|31.12.2024|\\FR_UKO_DPHEV|31.12.2024|\\FR_UKO_EETCZ|31.12.2024|\\FR_UKO_EXIMP|31.12.2024|\\FR_UKO_FAKP|31.12.2024|\\FR_UKO_FSAL|31.12.2024|\\FR_UKO_FV|31.12.2024|\\FR_UKO_GANTT|31.12.2024|\\FR_UKO_GDPR|31.12.2024|\\FR_UKO_INVEN|31.12.2024|\\FR_UKO_KARAT|31.12.2024|\\FR_UKO_KAZAS|31.12.2024|\\FR_UKO_MAJ|31.12.2024|\\FR_UKO_MAN|31.12.2024|\\FR_UKO_MZDY|31.12.2024|\\FR_UKO_ODBYT|31.12.2024|\\FR_UKO_ORG|31.12.2024|\\FR_UKO_ORGS|31.12.2024|\\FR_UKO_O_CEN|31.12.2024|\\FR_UKO_O_OBJ|31.12.2024|\\FR_UKO_O_SKL|31.12.2024|\\FR_UKO_PARAM|31.12.2024|\\FR_UKO_PERS|31.12.2024|\\FR_UKO_POKL|31.12.2024|\\FR_UKO_PUIN|31.12.2024|\\FR_UKO_SEKR|31.12.2024|\\FR_UKO_TERM|31.12.2024|\\FR_UKO_TMPRS|31.12.2024|\\FR_UKO_UCE|31.12.2024|\\FR_UKO_UCEOO|31.12.2024|\\FR_UKO_UCEPS|31.12.2024|\\FR_UKO_UCEVN|31.12.2024|\\FR_UKO_UK|31.12.2024|\\FR_UKO_VYKAZ|31.12.2024|\\FR_UKO_V_TER|31.12.2024|\\FR_UKO_V_TPV|31.12.2024|\\FR_UKO_V_ZAK|31.12.2024|\\FR_UKO_V_ZMT|31.12.2024|\\FR_UKO_ZDRKO|31.12.2024|\\FR_UKO_ZDROJ|31.12.2024|\\FR_UCE|24|\\FR_UCEOO|24|\\FR_UCEPS|24|\\FR_UCEVN|24|\\FR_BANKA|24|\\FR_DOCS|24|\\FR_DPHCZ|24|\\FR_DPHEV|24|\\FR_EETCZ|24|\\FR_EXIMP|24|\\FR_FAKP|24|\\FR_FSAL|24|\\FR_FV|24|\\FR_GANTT|24|\\FR_GDPR|24|\\FR_INVEN|24|\\FR_KARAT|24|\\FR_KAZAS|24|\\FR_MAJ|24|\\FR_MAN|24|\\FR_MZDY|24|\\FR_ODBYT|24|\\FR_ORG|24|\\FR_ORGS|24|\\FR_O_CEN|24|\\FR_O_OBJ|24|\\FR_O_SKL|24|\\FR_PARAM|24|\\FR_PERS|24|\\FR_POKL|24|\\FR_PUIN|24|\\FR_SEKR|24|\\FR_TERM|24|\\FR_TMPRS|24|\\FR_VYKAZ|24|\\FR_V_TER|24|\\FR_V_TPV|24|\\FR_V_ZAK|24|\\FR_V_ZMT|24|\\FRZAH_ADMIN|2024-01-01|\\FRZAH_AGENT|2024-01-01|\\FRZAH_ASNET|2024-01-01|\\FRZAH_ATTCH|2024-01-01|\\FRZAH_BANKA|2024-01-01|\\FRZAH_DOCS|2024-01-01|\\FRZAH_DPHCZ|2024-01-01|\\FRZAH_DPHEV|2024-01-01|\\FRZAH_EETCZ|2024-01-01|\\FRZAH_EXIMP|2024-01-01|\\FRZAH_FAKP|2024-01-01|\\FRZAH_FSAL|2024-01-01|\\FRZAH_FV|2024-01-01|\\FRZAH_GANTT|2024-01-01|\\FRZAH_GDPR|2024-01-01|\\FRZAH_INVEN|2024-01-01|\\FRZAH_KARAT|2024-01-01|\\FRZAH_KAZAS|2024-01-01|\\FRZAH_MAJ|2024-01-01|\\FRZAH_MAN|2024-01-01|\\FRZAH_MZDY|2024-01-01|\\FRZAH_ODBYT|2024-01-01|\\FRZAH_ORG|2024-01-01|\\FRZAH_ORGS|2024-01-01|\\FRZAH_O_CEN|2024-01-01|\\FRZAH_O_OBJ|2024-01-01|\\FRZAH_O_SKL|2024-01-01|\\FRZAH_PARAM|2024-01-01|\\FRZAH_PERS|2024-01-01|\\FRZAH_POKL|2024-01-01|\\FRZAH_PUIN|2024-01-01|\\FRZAH_SEKR|2024-01-01|\\FRZAH_TERM|2024-01-01|\\FRZAH_TMPRS|2024-01-01|\\FRZAH_UCE|2024-01-01|\\FRZAH_UCEOO|2024-01-01|\\FRZAH_UCEPS|2024-01-01|\\FRZAH_UCEVN|2024-01-01|\\FRZAH_UK|2024-01-01|\\FRZAH_VYKAZ|2024-01-01|\\FRZAH_V_TER|2024-01-01|\\FRZAH_V_TPV|2024-01-01|\\FRZAH_V_ZAK|2024-01-01|\\FRZAH_V_ZMT|2024-01-01|\\FRZAH_ZDRKO|2024-01-01|\\FRZAH_ZDROJ|2024-01-01|\\FRUKO_ADMIN|2024-12-31|\\FRUKO_AGENT|2024-12-31|\\FRUKO_ASNET|2024-12-31|\\FRUKO_ATTCH|2024-12-31|\\FRUKO_BANKA|2024-12-31|\\FRUKO_DOCS|2024-12-31|\\FRUKO_DPHCZ|2024-12-31|\\FRUKO_DPHEV|2024-12-31|\\FRUKO_EETCZ|2024-12-31|\\FRUKO_EXIMP|2024-12-31|\\FRUKO_FAKP|2024-12-31|\\FRUKO_FSAL|2024-12-31|\\FRUKO_FV|2024-12-31|\\FRUKO_GANTT|2024-12-31|\\FRUKO_GDPR|2024-12-31|\\FRUKO_INVEN|2024-12-31|\\FRUKO_KARAT|2024-12-31|\\FRUKO_KAZAS|2024-12-31|\\FRUKO_MAJ|2024-12-31|\\FRUKO_MAN|2024-12-31|\\FRUKO_MZDY|2024-12-31|\\FRUKO_ODBYT|2024-12-31|\\FRUKO_ORG|2024-12-31|\\FRUKO_ORGS|2024-12-31|\\FRUKO_O_CEN|2024-12-31|\\FRUKO_O_OBJ|2024-12-31|\\FRUKO_O_SKL|2024-12-31|\\FRUKO_PARAM|2024-12-31|\\FRUKO_PERS|2024-12-31|\\FRUKO_POKL|2024-12-31|\\FRUKO_PUIN|2024-12-31|\\FRUKO_SEKR|2024-12-31|\\FRUKO_TERM|2024-12-31|\\FRUKO_TMPRS|2024-12-31|\\FRUKO_UCE|2024-12-31|\\FRUKO_UCEOO|2024-12-31|\\FRUKO_UCEPS|2024-12-31|\\FRUKO_UCEVN|2024-12-31|\\FRUKO_UK|2024-12-31|\\FRUKO_VYKAZ|2024-12-31|\\FRUKO_V_TER|2024-12-31|\\FRUKO_V_TPV|2024-12-31|\\FRUKO_V_ZAK|2024-12-31|\\FRUKO_V_ZMT|2024-12-31|\\FRUKO_ZDRKO|2024-12-31|\\FRUKO_ZDROJ|2024-12-31|\\FSAL_PAR_IDENT_AVIZA|0|\\FSAL_PAR_IDENT_KOMP|0|\\FSAL_PAR_IDENT_UPOM|0|\\FSAL_PAR_IDENT_UZNA|0|\\FSAL_PAR_IDENT_PEN|0|\\FIRMA|Termopan s.r.o.|\\FIRMA_UDAJE1||\\FIRMA_UDAJE10||\\FIRMA_UDAJE2||\\FIRMA_UDAJE3||\\FIRMA_UDAJE4||\\FIRMA_UDAJE5||\\FIRMA_UDAJE6||\\FIRMA_UDAJE7||\\FIRMA_UDAJE8||\\FIRMA_UDAJE9||\\FIRMA_ULICE|Zahradní 843|\\FIRMA_DIC|CZ60707631|\\FIRMA_DODATEK|s.r.o.|\\FIRMA_JMENO||\\FIRMA_PRIJMENI||\\FIRMA_PSC|588 13|\\FIRMA_OBEC|Polná|\\FIRMA_OKRES|3707|\\FIRMA_STAT|CZ|\\FIRMA_ISO_STAT|CZ|\\FIRMA_IDM|CZK|\\FIRMA_V|Polná|\\FIRMA_FU||\\FIRMA_LANG|CZ|\\FIRMA_CINNOST1|Výroba pryžových a plastových výrobků|\\FIRMA_CINNOST2||\\INV_C_MASKA||\\INV_C_P_MASKA||\\ID_KARTY_NESPEC||\\IDI|01|\\IDU|KSWPVKA|\\IDUN|Václav Kadlec|\\IDSKUP||\\IDMM|CZK|\\IDMENUMOD||\\IDF|1|\\ICO|60707631|\\ISNET|1|\\ISHTML|0|\\UCE_UCET2_USE|'00'|\\UCE_DIM_USE|'0000000000'|\\UCE_DIMCIS_USE|'0000000000'|\\UMISTENI_MASKA||\\USRNAME|Václav Kadlec|\\USER_RIGHTS|#UserModifyRep;#UserModifyWin;#UserModifyWin=2;#PRSL=2;|\\KALKUL_VYCHOZI|'HLA'|\\KARTA_MASKA|XXXXXXXXXXXXXXXXXXXX|\\KARTA_TYP|0|\\KARTA_NULY|0|\\KARAT_VERSION|23.002|\\SKLAD_MASKA||\\SKLAD_TYP|0|\\SKLAD_NULY|0|\\SRVRTYPE|MS|\\SRVRVER|1500424902642220221211332019642022100064020348|\\SRVRNAME|192.168.10.247,1433|\\SRVRDB|KARAT_TERMOPAN|\\SERVER_COMP_NAME|S-KSOCLOUD-56|\\PREFIX_N_D|0|\\DEFA_XPLAN|''|\\DEVSTANDARD|0|\\DEVIMPL|1|\\DEVFIRM|1|\\DEVELOPERMODE|60|\\DBAIDU|DBA|\\DOCDIR|c:\\ProgramData\\KARAT Software\\Karat Server\\Vzor\\|\\DOCUMENTSDIR|C:\\Users\\VACLAVK\\Documents\\|\\DATUM|'2024-05-06'|\\DATUM_NA|2024-05-06|\\DATUM_STR|06.05.2024|\\DATUM_WIN|06.05.2024|\\WEBAPP_USR_ID|1|\\WEBAPP_USR_NAME|''|\\WEBAPP_USR_OSO|''|\\WEBAPP_DOMAIN|''|\\WEBAPP_PAGE|''|\\WINDIR|C:\\Windows\\|\\WRAPPER|Win32NT|\\LITE|0|termopan|termopan|\\LICNUM|1|\\LICREG|2022028_1|\\LIC1ID|TERMOPAN|\\LOCKDIR|C:\\ProgramData\\KARAT Software\\Karat Server\\TERMOPAN\\Temp\\ab12ec20-ebc2-44d2-981e-55211d4adf66\\|\\LOCKDIR_CLI|C:\\Users\\VACLAVK\\AppData\\Local\\KARAT Software\\Karat Client\\Temp\\ab12ec20-ebc2-44d2-981e-55211d4adf66\\|\\MYOSCISLO||\\MN|Kč|\\MODULY|ADMIN,AGENT,ATTCH,BANKA,DPHCZ,DPHEV,EETCZ,EXIMP,FAKP,FSAL,FV,GDPR,INVEN,KARAT,KAZAS,MAJ,MAN,MZDY,ODBYT,ORG,ORGS,O_CEN,O_OBJ,O_SKL,PARAM,PERS,POKL,PUIN,SEKR,TERM,TMPRS,UCE,UCEOO,UCEPS,UCEVN,UK,VYKAZ,V_TER,V_TPV,V_ZAK,V_ZMT,ZDRKO,ZDROJ,|\\MAINCONNECTION|CONN00001|\\MAIN_LANG_PRG|CZ|\\MAIN_LANG_PRG2|CZ|\\MAIN_LANG_DB|CZ|\\HKL|HLA|\\HOMEDIR|C:\\ProgramData\\KARAT Software\\Karat Server\\TERMOPAN\\|\\VZORDIR|c:\\ProgramData\\KARAT Software\\Karat Server\\Vzor\\|\\VZOR_STAT|cz|\\VZOR_PART||\\CLIENTDIR|C:\\Users\\VACLAVK\\AppData\\Local\\KARAT Software\\Karat Client\\Client\\23.2.476.0\\|\\CLIENT_COMP_ID|VKA/console/VKA\\VACLAVK|\\CLIENT_COMP_NAME|VKA|\\CLIENT_COMP_SESSION|Console|\\CA_NAME||\\TEMPDIR|C:\\ProgramData\\KARAT Software\\Karat Server\\TERMOPAN\\Temp\\ab12ec20-ebc2-44d2-981e-55211d4adf66\\|\\TERMINAL_VIEW|0|\\ASNET_VERSION|23.2.476.0|\\ANALYTIK|1|'#WHERE_FILTER'|'1=1'|GRP1|| w_iftrepmaker\tmax_tmptabnum\t0 w_iftrepmaker\tid_save\tcisla REPORT o_obj/stitky_25_100_wh ------------------------------- Window: Tisk Tisk: Štítky ( enabled visible c__w_ifttisk) w_ift\tclassname\tw_ifttisk w_ift\tclasses\t.object.karatbaseobject.karatobject.karatcontrol.karatwindow.c__w_ift.c__w_ifttisk w_ift\tparametr ID_MENU=MNID/O_OBJ/202306201248564755483132 TYP=TISK CLASS=w_ifttisk W_SOURCE=object(c__w_iftrepmaker AppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.22697.22700.23242) USER_BEGIN #EXECUTE_SUBST_BEGIN;#op_stitky1|#op_stitky1_2324279|#op_stitky1_|op_stitky1_2324279_|#op_stitky1_2324279|#op_stitky1_2324279|_#op_stitky1|_op_stitky1_2324279|#EXECUTE_SUBST_END;;#SETMENUID=O/O_OBJ/0/op_zahlavi//202306201248564755483132/20/30/0; #PERCENT_OFF; #NOADDADDMENU; #BUTTON_COLOR=rgb(255,128,128); #SPACEBEFORE; #SPACEAFTER; #DBEXEC_SUBST=#BE_DOKLAD|24OP010100000305; #DBEXECUTE=op_exe_stitky1; #DEFAULT_PROFILE=STITKY;;#SETMENUID_END;;#ISFIRSTROW;;#ISLASTROW;;#ISFROMBUTTON;;#ALL_ADD_TYPES=SESTAVA_,;#LANG_DAT=CZ;#LANG_PRG=CZ;#REPMAKER_SUBST_BEGIN;#NAZEV||#NEW_ROK_SYSTEM|2025|#NEW_PERS_ROK_SYSTEM|2025|#FILTER||#FULLDAY|13:22:52.906 06.05.2024|#FULLDAYCODE|2024-05-06 13:22:52.906|#FULLDAYREPORT|06.05.2024 13:22:52|#PODMINKA| |#PERS_ROK_SYSTEM|2024|#PERS_ROK_SYSTEM_M|2024|#PERS_MES_SYSTEM|3|#PERS_MES_SYSTEM_M|3|#TEXTSORT|Bez řazení|#TEXTLANG|Čeština *|#TODAY|06.05.2024|#REPCODE|o_obj_ru_stitky_25_100_wh_100|#REPNAME|25x100|#REPIDAKCE||#REPAKCE||#ROK_SYSTEM|2024|#DATALANG|CZ|#DOMAIN_.CASTKA17_TYPE|decimal(17,2)|#DOMAIN_.CASTKA17_COLTYPE|decimal(2)|#DOMAIN_.CASTKA17_LENGTH|22|#DOMAIN_.CASTKA17_DWLEN|-1|#DOMAIN_.CASTKA17_FORMAT|###,###,###,###,###.00|#DOMAIN_.CASTKA17_STRFORMAT|###,###,###,###,###.00|#DOMAIN_.CASTKA17_EDIT|EM|#DOMAIN_.CASTKA18_TYPE|decimal(18,2)|#DOMAIN_.CASTKA18_COLTYPE|decimal(2)|#DOMAIN_.CASTKA18_LENGTH|22|#DOMAIN_.CASTKA18_DWLEN|-1|#DOMAIN_.CASTKA18_FORMAT|###,###,###,###,###.00|#DOMAIN_.CASTKA18_STRFORMAT|###,###,###,###,###.00|#DOMAIN_.CASTKA18_EDIT|EM|#DOMAIN_.DEVIZY18_TYPE|decimal(18,2)|#DOMAIN_.DEVIZY18_COLTYPE|decimal(2)|#DOMAIN_.DEVIZY18_LENGTH|22|#DOMAIN_.DEVIZY18_DWLEN|-1|#DOMAIN_.DEVIZY18_FORMAT|###,###,###,###,###.00|#DOMAIN_.DEVIZY18_STRFORMAT|###,###,###,###,###.00|#DOMAIN_.DEVIZY18_EDIT|EM|#DOMAIN_.TEXT_255_TYPE|varchar(255)|#DOMAIN_.TEXT_255_COLTYPE|char(255)|#DOMAIN_.TEXT_255_LENGTH|255|#DOMAIN_.TEXT_255_DWLEN|-1|#DOMAIN_.TEXT_255_FORMAT||#DOMAIN_.TEXT_255_STRFORMAT||#DOMAIN_.TEXT_255_EDIT|PO|#DOMAIN_.TEXT_40_TYPE|varchar(40)|#DOMAIN_.TEXT_40_COLTYPE|char(40)|#DOMAIN_.TEXT_40_LENGTH|40|#DOMAIN_.TEXT_40_DWLEN|-1|#DOMAIN_.TEXT_40_FORMAT||#DOMAIN_.TEXT_40_STRFORMAT||#DOMAIN_.TEXT_40_EDIT|ED|#DOMAIN_.TEXT_80_TYPE|varchar(80)|#DOMAIN_.TEXT_80_COLTYPE|char(80)|#DOMAIN_.TEXT_80_LENGTH|80|#DOMAIN_.TEXT_80_DWLEN|-1|#DOMAIN_.TEXT_80_FORMAT||#DOMAIN_.TEXT_80_STRFORMAT||#DOMAIN_.TEXT_80_EDIT|ED|#DOMAIN_ADMIN_HODNOTA_TYPE|varchar(255)|#DOMAIN_ADMIN_HODNOTA_COLTYPE|char(255)|#DOMAIN_ADMIN_HODNOTA_LENGTH|255|#DOMAIN_ADMIN_HODNOTA_DWLEN|-1|#DOMAIN_ADMIN_HODNOTA_FORMAT||#DOMAIN_ADMIN_HODNOTA_STRFORMAT||#DOMAIN_ADMIN_HODNOTA_EDIT|PO|#DOMAIN_ADMIN_LANG_PHRASE_TYPE|varchar(255)|#DOMAIN_ADMIN_LANG_PHRASE_COLTYPE|char(255)|#DOMAIN_ADMIN_LANG_PHRASE_LENGTH|255|#DOMAIN_ADMIN_LANG_PHRASE_DWLEN|-1|#DOMAIN_ADMIN_LANG_PHRASE_FORMAT||#DOMAIN_ADMIN_LANG_PHRASE_STRFORMAT||#DOMAIN_ADMIN_LANG_PHRASE_EDIT|PO|#DOMAIN_ADMIN_MENU_POPIS_TYPE|varchar(100)|#DOMAIN_ADMIN_MENU_POPIS_COLTYPE|char(100)|#DOMAIN_ADMIN_MENU_POPIS_LENGTH|100|#DOMAIN_ADMIN_MENU_POPIS_DWLEN|-1|#DOMAIN_ADMIN_MENU_POPIS_FORMAT||#DOMAIN_ADMIN_MENU_POPIS_STRFORMAT||#DOMAIN_ADMIN_MENU_POPIS_EDIT|ED|#DOMAIN_ADMIN_SD_LABEL_TYPE|varchar(80)|#DOMAIN_ADMIN_SD_LABEL_COLTYPE|char(80)|#DOMAIN_ADMIN_SD_LABEL_LENGTH|80|#DOMAIN_ADMIN_SD_LABEL_DWLEN|-1|#DOMAIN_ADMIN_SD_LABEL_FORMAT||#DOMAIN_ADMIN_SD_LABEL_STRFORMAT||#DOMAIN_ADMIN_SD_LABEL_EDIT|ED|#DOMAIN_ADR_OBEC_TYPE|varchar(80)|#DOMAIN_ADR_OBEC_COLTYPE|char(80)|#DOMAIN_ADR_OBEC_LENGTH|80|#DOMAIN_ADR_OBEC_DWLEN|-1|#DOMAIN_ADR_OBEC_FORMAT||#DOMAIN_ADR_OBEC_STRFORMAT||#DOMAIN_ADR_OBEC_EDIT|ED|#DOMAIN_ADR_ULICE_TYPE|varchar(80)|#DOMAIN_ADR_ULICE_COLTYPE|char(80)|#DOMAIN_ADR_ULICE_LENGTH|80|#DOMAIN_ADR_ULICE_DWLEN|-1|#DOMAIN_ADR_ULICE_FORMAT||#DOMAIN_ADR_ULICE_STRFORMAT||#DOMAIN_ADR_ULICE_EDIT|ED|#DOMAIN_BANKA_TYPE|varchar(7)|#DOMAIN_BANKA_COLTYPE|char(7)|#DOMAIN_BANKA_LENGTH|7|#DOMAIN_BANKA_DWLEN|-1|#DOMAIN_BANKA_FORMAT||#DOMAIN_BANKA_STRFORMAT||#DOMAIN_BANKA_EDIT|ED|#DOMAIN_CEN_SKUPINA_NOM_TYPE|varchar(12)|#DOMAIN_CEN_SKUPINA_NOM_COLTYPE|char(12)|#DOMAIN_CEN_SKUPINA_NOM_LENGTH|12|#DOMAIN_CEN_SKUPINA_NOM_DWLEN|-1|#DOMAIN_CEN_SKUPINA_NOM_FORMAT||#DOMAIN_CEN_SKUPINA_NOM_STRFORMAT||#DOMAIN_CEN_SKUPINA_NOM_EDIT|ED|#DOMAIN_DKL_POLOZKA_SMALL_TYPE|integer|#DOMAIN_DKL_POLOZKA_SMALL_COLTYPE|long|#DOMAIN_DKL_POLOZKA_SMALL_LENGTH|11|#DOMAIN_DKL_POLOZKA_SMALL_DWLEN|-1|#DOMAIN_DKL_POLOZKA_SMALL_FORMAT|###,###,##0|#DOMAIN_DKL_POLOZKA_SMALL_STRFORMAT|###,###,##0|#DOMAIN_DKL_POLOZKA_SMALL_EDIT|EM|#DOMAIN_DKL_POLOZKA_SMALL0_TYPE|smallint|#DOMAIN_DKL_POLOZKA_SMALL0_COLTYPE|long|#DOMAIN_DKL_POLOZKA_SMALL0_LENGTH|5|#DOMAIN_DKL_POLOZKA_SMALL0_DWLEN|-1|#DOMAIN_DKL_POLOZKA_SMALL0_FORMAT|#,##0|#DOMAIN_DKL_POLOZKA_SMALL0_STRFORMAT|#,##0|#DOMAIN_DKL_POLOZKA_SMALL0_EDIT|EM|#DOMAIN_DKL_TEXT_40_TYPE|varchar(40)|#DOMAIN_DKL_TEXT_40_COLTYPE|char(40)|#DOMAIN_DKL_TEXT_40_LENGTH|40|#DOMAIN_DKL_TEXT_40_DWLEN|-1|#DOMAIN_DKL_TEXT_40_FORMAT||#DOMAIN_DKL_TEXT_40_STRFORMAT||#DOMAIN_DKL_TEXT_40_EDIT|ED|#DOMAIN_DPH_KOD_TYPE|varchar(10)|#DOMAIN_DPH_KOD_COLTYPE|char(10)|#DOMAIN_DPH_KOD_LENGTH|10|#DOMAIN_DPH_KOD_DWLEN|-1|#DOMAIN_DPH_KOD_FORMAT||#DOMAIN_DPH_KOD_STRFORMAT||#DOMAIN_DPH_KOD_EDIT|ED|#DOMAIN_EXIMP_ID_TYPE|varchar(40)|#DOMAIN_EXIMP_ID_COLTYPE|char(40)|#DOMAIN_EXIMP_ID_LENGTH|40|#DOMAIN_EXIMP_ID_DWLEN|-1|#DOMAIN_EXIMP_ID_DAVKY_TYPE|integer|#DOMAIN_EXIMP_ID_DAVKY_COLTYPE|long|#DOMAIN_EXIMP_ID_DAVKY_LENGTH|7|#DOMAIN_EXIMP_ID_DAVKY_DWLEN|-1|#DOMAIN_EXIMP_ID_DAVKY_FORMAT|#######|#DOMAIN_EXIMP_ID_DAVKY_STRFORMAT|#######|#DOMAIN_EXIMP_ID_DAVKY_EDIT|EM|#DOMAIN_EXIMP_ID_FORMAT||#DOMAIN_EXIMP_ID_STRFORMAT||#DOMAIN_EXIMP_ID_EDIT|ED|#DOMAIN_O_OBJ_KOD_TEXTU_TYPE|char(3)|#DOMAIN_O_OBJ_KOD_TEXTU_COLTYPE|char(3)|#DOMAIN_O_OBJ_KOD_TEXTU_LENGTH|3|#DOMAIN_O_OBJ_KOD_TEXTU_DWLEN|-1|#DOMAIN_O_OBJ_KOD_TEXTU_FORMAT||#DOMAIN_O_OBJ_KOD_TEXTU_STRFORMAT||#DOMAIN_O_OBJ_KOD_TEXTU_EDIT|ED|#DOMAIN_O_SKL_IDENTIFIKATOR_TYPE|varchar(20)|#DOMAIN_O_SKL_IDENTIFIKATOR_COLTYPE|char(20)|#DOMAIN_O_SKL_IDENTIFIKATOR_LENGTH|20|#DOMAIN_O_SKL_IDENTIFIKATOR_DWLEN|-1|#DOMAIN_O_SKL_IDENTIFIKATOR_FORMAT||#DOMAIN_O_SKL_IDENTIFIKATOR_STRFORMAT||#DOMAIN_O_SKL_IDENTIFIKATOR_EDIT|ED|#DOMAIN_ODBYT_ATR_HODNOTA_TYPE|varchar(30)|#DOMAIN_ODBYT_ATR_HODNOTA_COLTYPE|char(30)|#DOMAIN_ODBYT_ATR_HODNOTA_LENGTH|30|#DOMAIN_ODBYT_ATR_HODNOTA_DWLEN|-1|#DOMAIN_ODBYT_ATR_HODNOTA_FORMAT||#DOMAIN_ODBYT_ATR_HODNOTA_STRFORMAT||#DOMAIN_ODBYT_ATR_HODNOTA_EDIT|ED|#DOMAIN_ODBYT_ATR_VAR_TYPE|varchar(30)|#DOMAIN_ODBYT_ATR_VAR_COLTYPE|char(30)|#DOMAIN_ODBYT_ATR_VAR_LENGTH|30|#DOMAIN_ODBYT_ATR_VAR_DWLEN|-1|#DOMAIN_ODBYT_ATR_VAR_FORMAT||#DOMAIN_ODBYT_ATR_VAR_STRFORMAT||#DOMAIN_ODBYT_ATR_VAR_EDIT|ED|#DOMAIN_ODBYT_CENA_TYPE|decimal(15,4)|#DOMAIN_ODBYT_CENA_COLTYPE|decimal(4)|#DOMAIN_ODBYT_CENA_LENGTH|19|#DOMAIN_ODBYT_CENA_DWLEN|-1|#DOMAIN_ODBYT_CENA_FORMAT|##,###,###,###.0000|#DOMAIN_ODBYT_CENA_STRFORMAT|##,###,###,###.0000|#DOMAIN_ODBYT_CENA_EDIT|EM|#DOMAIN_ODBYT_DL_TYPE|char(16)|#DOMAIN_ODBYT_DL_COLTYPE|char(16)|#DOMAIN_ODBYT_DL_LENGTH|16|#DOMAIN_ODBYT_DL_DWLEN|-1|#DOMAIN_ODBYT_DL_FORMAT||#DOMAIN_ODBYT_DL_STRFORMAT||#DOMAIN_ODBYT_DL_EDIT|ED|#DOMAIN_ODBYT_EAN_TYPE|varchar(20)|#DOMAIN_ODBYT_EAN_COLTYPE|char(20)|#DOMAIN_ODBYT_EAN_LENGTH|20|#DOMAIN_ODBYT_EAN_DWLEN|-1|#DOMAIN_ODBYT_EAN_FORMAT||#DOMAIN_ODBYT_EAN_STRFORMAT||#DOMAIN_ODBYT_EAN_EDIT|ED|#DOMAIN_ODBYT_JEHO_ID_TYPE|varchar(30)|#DOMAIN_ODBYT_JEHO_ID_COLTYPE|char(30)|#DOMAIN_ODBYT_JEHO_ID_LENGTH|30|#DOMAIN_ODBYT_JEHO_ID_DWLEN|-1|#DOMAIN_ODBYT_JEHO_ID_FORMAT||#DOMAIN_ODBYT_JEHO_ID_STRFORMAT||#DOMAIN_ODBYT_JEHO_ID_EDIT|ED|#DOMAIN_ODBYT_KARTA_TYPE|varchar(20)|#DOMAIN_ODBYT_KARTA_COLTYPE|char(20)|#DOMAIN_ODBYT_KARTA_LENGTH|20|#DOMAIN_ODBYT_KARTA_DWLEN|-1|#DOMAIN_ODBYT_KARTA_FORMAT||#DOMAIN_ODBYT_KARTA_STRFORMAT||#DOMAIN_ODBYT_KARTA_EDIT|ED|#DOMAIN_ODBYT_KOD_TEXTU_TYPE|char(3)|#DOMAIN_ODBYT_KOD_TEXTU_COLTYPE|char(3)|#DOMAIN_ODBYT_KOD_TEXTU_LENGTH|3|#DOMAIN_ODBYT_KOD_TEXTU_DWLEN|-1|#DOMAIN_ODBYT_KOD_TEXTU_FORMAT||#DOMAIN_ODBYT_KOD_TEXTU_STRFORMAT||#DOMAIN_ODBYT_KOD_TEXTU_EDIT|ED|#DOMAIN_ODBYT_MISTO_DOD_TYPE|varchar(200)|#DOMAIN_ODBYT_MISTO_DOD_COLTYPE|char(200)|#DOMAIN_ODBYT_MISTO_DOD_LENGTH|200|#DOMAIN_ODBYT_MISTO_DOD_DWLEN|-1|#DOMAIN_ODBYT_MISTO_DOD_FORMAT||#DOMAIN_ODBYT_MISTO_DOD_STRFORMAT||#DOMAIN_ODBYT_MISTO_DOD_EDIT|ED|#DOMAIN_ODBYT_MNOZSTVI15_TYPE|decimal(15,4)|#DOMAIN_ODBYT_MNOZSTVI15_COLTYPE|decimal(4)|#DOMAIN_ODBYT_MNOZSTVI15_LENGTH|16|#DOMAIN_ODBYT_MNOZSTVI15_DWLEN|-1|#DOMAIN_ODBYT_MNOZSTVI15_FORMAT|###,###,###.0000|#DOMAIN_ODBYT_MNOZSTVI15_STRFORMAT|###,###,###.0000|#DOMAIN_ODBYT_MNOZSTVI15_EDIT|EM|#DOMAIN_ODBYT_NAZEV_NOM_TYPE|varchar(50)|#DOMAIN_ODBYT_NAZEV_NOM_COLTYPE|char(50)|#DOMAIN_ODBYT_NAZEV_NOM_LENGTH|50|#DOMAIN_ODBYT_NAZEV_NOM_DWLEN|-1|#DOMAIN_ODBYT_NAZEV_NOM_FORMAT||#DOMAIN_ODBYT_NAZEV_NOM_STRFORMAT||#DOMAIN_ODBYT_NAZEV_NOM_EDIT|ED|#DOMAIN_ODBYT_OBJEDNAVKA_TYPE|char(100)|#DOMAIN_ODBYT_OBJEDNAVKA_COLTYPE|char(100)|#DOMAIN_ODBYT_OBJEDNAVKA_LENGTH|100|#DOMAIN_ODBYT_OBJEDNAVKA_DWLEN|-1|#DOMAIN_ODBYT_OBJEDNAVKA_FORMAT||#DOMAIN_ODBYT_OBJEDNAVKA_STRFORMAT||#DOMAIN_ODBYT_OBJEDNAVKA_EDIT|ED|#DOMAIN_ODBYT_POCET_PALET_TYPE|decimal(9,2)|#DOMAIN_ODBYT_POCET_PALET_COLTYPE|decimal(2)|#DOMAIN_ODBYT_POCET_PALET_LENGTH|12|#DOMAIN_ODBYT_POCET_PALET_DWLEN|-1|#DOMAIN_ODBYT_POCET_PALET_FORMAT|#,###,###.00|#DOMAIN_ODBYT_POCET_PALET_STRFORMAT|#,###,###.00|#DOMAIN_ODBYT_POCET_PALET_EDIT|EM|#DOMAIN_ODBYT_SKUPINA_NOM_TYPE|varchar(12)|#DOMAIN_ODBYT_SKUPINA_NOM_COLTYPE|char(12)|#DOMAIN_ODBYT_SKUPINA_NOM_LENGTH|12|#DOMAIN_ODBYT_SKUPINA_NOM_DWLEN|-1|#DOMAIN_ODBYT_SKUPINA_NOM_FORMAT||#DOMAIN_ODBYT_SKUPINA_NOM_STRFORMAT||#DOMAIN_ODBYT_SKUPINA_NOM_EDIT|ED|#DOMAIN_ORG_CINNOST_TYPE|varchar(10)|#DOMAIN_ORG_CINNOST_COLTYPE|char(10)|#DOMAIN_ORG_CINNOST_LENGTH|10|#DOMAIN_ORG_CINNOST_DWLEN|-1|#DOMAIN_ORG_CINNOST_FORMAT||#DOMAIN_ORG_CINNOST_STRFORMAT||#DOMAIN_ORG_CINNOST_EDIT|ED|#DOMAIN_ORG_DEALER_TYPE|varchar(10)|#DOMAIN_ORG_DEALER_COLTYPE|char(10)|#DOMAIN_ORG_DEALER_LENGTH|10|#DOMAIN_ORG_DEALER_DWLEN|-1|#DOMAIN_ORG_DEALER_FORMAT||#DOMAIN_ORG_DEALER_STRFORMAT||#DOMAIN_ORG_DEALER_EDIT|ED|#DOMAIN_ORG_EXT_SMLOUVA_TYPE|char(20)|#DOMAIN_ORG_EXT_SMLOUVA_COLTYPE|char(20)|#DOMAIN_ORG_EXT_SMLOUVA_LENGTH|20|#DOMAIN_ORG_EXT_SMLOUVA_DWLEN|-1|#DOMAIN_ORG_EXT_SMLOUVA_FORMAT||#DOMAIN_ORG_EXT_SMLOUVA_STRFORMAT||#DOMAIN_ORG_EXT_SMLOUVA_EDIT|ED|#DOMAIN_ORG_ID_UCTU_TYPE|varchar(6)|#DOMAIN_ORG_ID_UCTU_COLTYPE|char(6)|#DOMAIN_ORG_ID_UCTU_LENGTH|7|#DOMAIN_ORG_ID_UCTU_DWLEN|-1|#DOMAIN_ORG_ID_UCTU_FORMAT|###/###|#DOMAIN_ORG_ID_UCTU_STRFORMAT|@@@/@@@|#DOMAIN_ORG_ID_UCTU_EDIT|EM|#DOMAIN_ORG_NU_MNOZSTVI_TYPE|decimal(10,2)|#DOMAIN_ORG_NU_MNOZSTVI_COLTYPE|decimal(2)|#DOMAIN_ORG_NU_MNOZSTVI_LENGTH|13|#DOMAIN_ORG_NU_MNOZSTVI_DWLEN|-1|#DOMAIN_ORG_NU_MNOZSTVI_FORMAT|##,###,###.00|#DOMAIN_ORG_NU_MNOZSTVI_STRFORMAT|##,###,###.00|#DOMAIN_ORG_NU_MNOZSTVI_EDIT|EM|#DOMAIN_ORG_NU_MNOZSTVI2_TYPE|decimal(18,2)|#DOMAIN_ORG_NU_MNOZSTVI2_COLTYPE|decimal(2)|#DOMAIN_ORG_NU_MNOZSTVI2_LENGTH|22|#DOMAIN_ORG_NU_MNOZSTVI2_DWLEN|-1|#DOMAIN_ORG_NU_MNOZSTVI2_FORMAT|###,###,###,###,###.00|#DOMAIN_ORG_NU_MNOZSTVI2_STRFORMAT|###,###,###,###,###.00|#DOMAIN_ORG_NU_MNOZSTVI2_EDIT|EM|#DOMAIN_ORG_OKRES_TYPE|char(4)|#DOMAIN_ORG_OKRES_COLTYPE|char(4)|#DOMAIN_ORG_OKRES_LENGTH|4|#DOMAIN_ORG_OKRES_DWLEN|-1|#DOMAIN_ORG_OKRES_FORMAT||#DOMAIN_ORG_OKRES_STRFORMAT||#DOMAIN_ORG_OKRES_EDIT|ED|#DOMAIN_ORG_STREDISKO_TYPE|varchar(10)|#DOMAIN_ORG_STREDISKO_COLTYPE|char(10)|#DOMAIN_ORG_STREDISKO_LENGTH|10|#DOMAIN_ORG_STREDISKO_DWLEN|-1|#DOMAIN_ORG_STREDISKO_FORMAT||#DOMAIN_ORG_STREDISKO_STRFORMAT||#DOMAIN_ORG_STREDISKO_EDIT|ED|#DOMAIN_ORG_UCET_TYPE|varchar(6)|#DOMAIN_ORG_UCET_COLTYPE|char(6)|#DOMAIN_ORG_UCET_LENGTH|7|#DOMAIN_ORG_UCET_DWLEN|-1|#DOMAIN_ORG_UCET_FORMAT|###/###|#DOMAIN_ORG_UCET_STRFORMAT|@@@/@@@|#DOMAIN_ORG_UCET_EDIT|EM|#DOMAIN_ORG_UCET2_TYPE|varchar(20)|#DOMAIN_ORG_UCET2_COLTYPE|char(20)|#DOMAIN_ORG_UCET2_LENGTH|20|#DOMAIN_ORG_UCET2_DWLEN|-1|#DOMAIN_ORG_UCET2_FORMAT||#DOMAIN_ORG_UCET2_STRFORMAT||#DOMAIN_ORG_UCET2_EDIT|ED|#DOMAIN_ORG_UCET3_TYPE|varchar(20)|#DOMAIN_ORG_UCET3_COLTYPE|char(20)|#DOMAIN_ORG_UCET3_LENGTH|20|#DOMAIN_ORG_UCET3_DWLEN|-1|#DOMAIN_ORG_UCET3_FORMAT||#DOMAIN_ORG_UCET3_STRFORMAT||#DOMAIN_ORG_UCET3_EDIT|ED|#DOMAIN_ORG_ZAKAZKA_TYPE|varchar(30)|#DOMAIN_ORG_ZAKAZKA_COLTYPE|char(30)|#DOMAIN_ORG_ZAKAZKA_LENGTH|30|#DOMAIN_ORG_ZAKAZKA_DWLEN|-1|#DOMAIN_ORG_ZAKAZKA_FORMAT||#DOMAIN_ORG_ZAKAZKA_STRFORMAT||#DOMAIN_ORG_ZAKAZKA_EDIT|ED|#DOMAIN_PAR_ICO_TYPE|varchar(8)|#DOMAIN_PAR_ICO_COLTYPE|char(8)|#DOMAIN_PAR_ICO_LENGTH|8|#DOMAIN_PAR_ICO_DWLEN|-1|#DOMAIN_PAR_ICO_FORMAT||#DOMAIN_PAR_ICO_STRFORMAT||#DOMAIN_PAR_ICO_EDIT|ED|#DOMAIN_PAR_NAZEV_ZKRAC_TYPE|char(20)|#DOMAIN_PAR_NAZEV_ZKRAC_COLTYPE|char(20)|#DOMAIN_PAR_NAZEV_ZKRAC_LENGTH|20|#DOMAIN_PAR_NAZEV_ZKRAC_DWLEN|-1|#DOMAIN_PAR_NAZEV_ZKRAC_FORMAT||#DOMAIN_PAR_NAZEV_ZKRAC_STRFORMAT||#DOMAIN_PAR_NAZEV_ZKRAC_EDIT|ED|#DOMAIN_PARAM_PARAM_TYPE|varchar(20)|#DOMAIN_PARAM_PARAM_COLTYPE|char(20)|#DOMAIN_PARAM_PARAM_LENGTH|20|#DOMAIN_PARAM_PARAM_DWLEN|-1|#DOMAIN_PARAM_PARAM_FORMAT||#DOMAIN_PARAM_PARAM_STRFORMAT||#DOMAIN_PARAM_PARAM_EDIT|ED|#DOMAIN_PL_PAR_ZNAK_TYPE|varchar(22)|#DOMAIN_PL_PAR_ZNAK_COLTYPE|char(22)|#DOMAIN_PL_PAR_ZNAK_LENGTH|22|#DOMAIN_PL_PAR_ZNAK_DWLEN|-1|#DOMAIN_PL_PAR_ZNAK_FORMAT||#DOMAIN_PL_PAR_ZNAK_STRFORMAT||#DOMAIN_PL_PAR_ZNAK_EDIT|ED|#DOMAIN_UCE_DIM1_TYPE|varchar(20)|#DOMAIN_UCE_DIM1_COLTYPE|char(20)|#DOMAIN_UCE_DIM1_LENGTH|20|#DOMAIN_UCE_DIM1_DWLEN|-1|#DOMAIN_UCE_DIM1_FORMAT||#DOMAIN_UCE_DIM1_STRFORMAT||#DOMAIN_UCE_DIM1_EDIT|ED|#DOMAIN_UCE_DIM10_TYPE|varchar(20)|#DOMAIN_UCE_DIM10_COLTYPE|char(20)|#DOMAIN_UCE_DIM10_LENGTH|20|#DOMAIN_UCE_DIM10_DWLEN|-1|#DOMAIN_UCE_DIM10_FORMAT||#DOMAIN_UCE_DIM10_STRFORMAT||#DOMAIN_UCE_DIM10_EDIT|ED|#DOMAIN_UCE_DIM2_TYPE|varchar(20)|#DOMAIN_UCE_DIM2_COLTYPE|char(20)|#DOMAIN_UCE_DIM2_LENGTH|20|#DOMAIN_UCE_DIM2_DWLEN|-1|#DOMAIN_UCE_DIM2_FORMAT||#DOMAIN_UCE_DIM2_STRFORMAT||#DOMAIN_UCE_DIM2_EDIT|ED|#DOMAIN_UCE_DIM3_TYPE|varchar(20)|#DOMAIN_UCE_DIM3_COLTYPE|char(20)|#DOMAIN_UCE_DIM3_LENGTH|20|#DOMAIN_UCE_DIM3_DWLEN|-1|#DOMAIN_UCE_DIM3_FORMAT||#DOMAIN_UCE_DIM3_STRFORMAT||#DOMAIN_UCE_DIM3_EDIT|ED|#DOMAIN_UCE_DIM4_TYPE|varchar(20)|#DOMAIN_UCE_DIM4_COLTYPE|char(20)|#DOMAIN_UCE_DIM4_LENGTH|20|#DOMAIN_UCE_DIM4_DWLEN|-1|#DOMAIN_UCE_DIM4_FORMAT||#DOMAIN_UCE_DIM4_STRFORMAT||#DOMAIN_UCE_DIM4_EDIT|ED|#DOMAIN_UCE_DIM5_TYPE|varchar(20)|#DOMAIN_UCE_DIM5_COLTYPE|char(20)|#DOMAIN_UCE_DIM5_LENGTH|20|#DOMAIN_UCE_DIM5_DWLEN|-1|#DOMAIN_UCE_DIM5_FORMAT||#DOMAIN_UCE_DIM5_STRFORMAT||#DOMAIN_UCE_DIM5_EDIT|ED|#DOMAIN_UCE_DIM6_TYPE|varchar(20)|#DOMAIN_UCE_DIM6_COLTYPE|char(20)|#DOMAIN_UCE_DIM6_LENGTH|20|#DOMAIN_UCE_DIM6_DWLEN|-1|#DOMAIN_UCE_DIM6_FORMAT||#DOMAIN_UCE_DIM6_STRFORMAT||#DOMAIN_UCE_DIM6_EDIT|ED|#DOMAIN_UCE_DIM7_TYPE|varchar(20)|#DOMAIN_UCE_DIM7_COLTYPE|char(20)|#DOMAIN_UCE_DIM7_LENGTH|20|#DOMAIN_UCE_DIM7_DWLEN|-1|#DOMAIN_UCE_DIM7_FORMAT||#DOMAIN_UCE_DIM7_STRFORMAT||#DOMAIN_UCE_DIM7_EDIT|ED|#DOMAIN_UCE_DIM8_TYPE|varchar(20)|#DOMAIN_UCE_DIM8_COLTYPE|char(20)|#DOMAIN_UCE_DIM8_LENGTH|20|#DOMAIN_UCE_DIM8_DWLEN|-1|#DOMAIN_UCE_DIM8_FORMAT||#DOMAIN_UCE_DIM8_STRFORMAT||#DOMAIN_UCE_DIM8_EDIT|ED|#DOMAIN_UCE_DIM9_TYPE|varchar(20)|#DOMAIN_UCE_DIM9_COLTYPE|char(20)|#DOMAIN_UCE_DIM9_LENGTH|20|#DOMAIN_UCE_DIM9_DWLEN|-1|#DOMAIN_UCE_DIM9_FORMAT||#DOMAIN_UCE_DIM9_STRFORMAT||#DOMAIN_UCE_DIM9_EDIT|ED|#DOMAIN_V_POSTUP_TYPE|char(20)|#DOMAIN_V_POSTUP_COLTYPE|char(20)|#DOMAIN_V_POSTUP_LENGTH|20|#DOMAIN_V_POSTUP_DWLEN|-1|#DOMAIN_V_POSTUP_FORMAT||#DOMAIN_V_POSTUP_STRFORMAT||#DOMAIN_V_POSTUP_EDIT|ED|#DOMAIN_ZDR_PLAN_PARAM_TYPE|varchar(255)|#DOMAIN_ZDR_PLAN_PARAM_COLTYPE|char(255)|#DOMAIN_ZDR_PLAN_PARAM_LENGTH|255|#DOMAIN_ZDR_PLAN_PARAM_DWLEN|-1|#DOMAIN_ZDR_PLAN_PARAM_FORMAT||#DOMAIN_ZDR_PLAN_PARAM_STRFORMAT||#DOMAIN_ZDR_PLAN_PARAM_EDIT|PO|#LANG|CZ|#AKT_OBD_MAJ|2024-01-31|#AKT_OBD_MAJ_2|2024-01-31|#AKT_OBD_MAJ_3|1901-01-01|#AKT_OBD_MAJ_4|1901-01-01|#AKT_OBD_MAJ_5|1901-01-01|#AKT_OBD_MAJ_6|1901-01-01|#AKT_MES_MAJ|202401|#AKT_MES_MAJ_2|202401|#AKT_MES_MAJ_3|      |#AKT_MES_MAJ_4|      |#AKT_MES_MAJ_5|      |#AKT_MES_MAJ_6|      |#SES_MES_MAJ|202401|#SKUPINY||#MES_SYSTEM|3|#MIN_ROK_SYSTEM|2023|#MZDY_ROK_START|2023|#MZDY_MESIC_START|1|#ZACATEK_SYSTEM|01.03.2024|#KONEC_SYSTEM|31.03.2024|#WHERE_FILTER|1=1|#WINDOWID|4810179|#GROUPS||\\OBD_ADMIN|202401|\\OBD_AGENT|202401|\\OBD_ASNET|202401|\\OBD_ATTCH|202401|\\OBD_BANKA|202401|\\OBD_DOCS|202401|\\OBD_DPHCZ|202401|\\OBD_DPHEV|202401|\\OBD_EETCZ|202401|\\OBD_EXIMP|202401|\\OBD_FAKP|202401|\\OBD_FSAL|202401|\\OBD_FV|202401|\\OBD_GANTT|202401|\\OBD_GDPR|202401|\\OBD_INVEN|202401|\\OBD_KARAT|202401|\\OBD_KAZAS|202401|\\OBD_MAJ|202401|\\OBD_MAN|202401|\\OBD_MZDY|202401|\\OBD_ODBYT|202401|\\OBD_ORG|202401|\\OBD_ORGS|202401|\\OBD_O_CEN|202401|\\OBD_O_OBJ|202401|\\OBD_O_SKL|202401|\\OBD_PARAM|202401|\\OBD_PERS|202403|\\OBD_POKL|202401|\\OBD_PUIN|202401|\\OBD_SEKR|202401|\\OBD_TERM|202401|\\OBD_TMPRS|202401|\\OBD_UCE|202401|\\OBD_UCEOO|202401|\\OBD_UCEPS|202400|\\OBD_UCEVN|202401|\\OBD_UK|202401|\\OBD_VYKAZ|202401|\\OBD_V_TER|202401|\\OBD_V_TPV|202401|\\OBD_V_ZAK|202401|\\OBD_V_ZMT|202401|\\OBD_ZDRKO|202401|\\OBD_ZDROJ|202401|\\ODDELOVAC||\\FR_ADMIN|24|\\FR_AGENT|24|\\FR_ASNET|24|\\FR_ATTCH|24|\\FR_ZAH_ADMIN|01.01.2024|\\FR_ZAH_AGENT|01.01.2024|\\FR_ZAH_ASNET|01.01.2024|\\FR_ZAH_ATTCH|01.01.2024|\\FR_ZAH_BANKA|01.01.2024|\\FR_ZAH_DOCS|01.01.2024|\\FR_ZAH_DPHCZ|01.01.2024|\\FR_ZAH_DPHEV|01.01.2024|\\FR_ZAH_EETCZ|01.01.2024|\\FR_ZAH_EXIMP|01.01.2024|\\FR_ZAH_FAKP|01.01.2024|\\FR_ZAH_FSAL|01.01.2024|\\FR_ZAH_FV|01.01.2024|\\FR_ZAH_GANTT|01.01.2024|\\FR_ZAH_GDPR|01.01.2024|\\FR_ZAH_INVEN|01.01.2024|\\FR_ZAH_KARAT|01.01.2024|\\FR_ZAH_KAZAS|01.01.2024|\\FR_ZAH_MAJ|01.01.2024|\\FR_ZAH_MAN|01.01.2024|\\FR_ZAH_MZDY|01.01.2024|\\FR_ZAH_ODBYT|01.01.2024|\\FR_ZAH_ORG|01.01.2024|\\FR_ZAH_ORGS|01.01.2024|\\FR_ZAH_O_CEN|01.01.2024|\\FR_ZAH_O_OBJ|01.01.2024|\\FR_ZAH_O_SKL|01.01.2024|\\FR_ZAH_PARAM|01.01.2024|\\FR_ZAH_PERS|01.01.2024|\\FR_ZAH_POKL|01.01.2024|\\FR_ZAH_PUIN|01.01.2024|\\FR_ZAH_SEKR|01.01.2024|\\FR_ZAH_TERM|01.01.2024|\\FR_ZAH_TMPRS|01.01.2024|\\FR_ZAH_UCE|01.01.2024|\\FR_ZAH_UCEOO|01.01.2024|\\FR_ZAH_UCEPS|01.01.2024|\\FR_ZAH_UCEVN|01.01.2024|\\FR_ZAH_UK|01.01.2024|\\FR_ZAH_VYKAZ|01.01.2024|\\FR_ZAH_V_TER|01.01.2024|\\FR_ZAH_V_TPV|01.01.2024|\\FR_ZAH_V_ZAK|01.01.2024|\\FR_ZAH_V_ZMT|01.01.2024|\\FR_ZAH_ZDRKO|01.01.2024|\\FR_ZAH_ZDROJ|01.01.2024|\\FR_ZDRKO|24|\\FR_ZDROJ|24|\\FR_UK|24|\\FR_UKO_ADMIN|31.12.2024|\\FR_UKO_AGENT|31.12.2024|\\FR_UKO_ASNET|31.12.2024|\\FR_UKO_ATTCH|31.12.2024|\\FR_UKO_BANKA|31.12.2024|\\FR_UKO_DOCS|31.12.2024|\\FR_UKO_DPHCZ|31.12.2024|\\FR_UKO_DPHEV|31.12.2024|\\FR_UKO_EETCZ|31.12.2024|\\FR_UKO_EXIMP|31.12.2024|\\FR_UKO_FAKP|31.12.2024|\\FR_UKO_FSAL|31.12.2024|\\FR_UKO_FV|31.12.2024|\\FR_UKO_GANTT|31.12.2024|\\FR_UKO_GDPR|31.12.2024|\\FR_UKO_INVEN|31.12.2024|\\FR_UKO_KARAT|31.12.2024|\\FR_UKO_KAZAS|31.12.2024|\\FR_UKO_MAJ|31.12.2024|\\FR_UKO_MAN|31.12.2024|\\FR_UKO_MZDY|31.12.2024|\\FR_UKO_ODBYT|31.12.2024|\\FR_UKO_ORG|31.12.2024|\\FR_UKO_ORGS|31.12.2024|\\FR_UKO_O_CEN|31.12.2024|\\FR_UKO_O_OBJ|31.12.2024|\\FR_UKO_O_SKL|31.12.2024|\\FR_UKO_PARAM|31.12.2024|\\FR_UKO_PERS|31.12.2024|\\FR_UKO_POKL|31.12.2024|\\FR_UKO_PUIN|31.12.2024|\\FR_UKO_SEKR|31.12.2024|\\FR_UKO_TERM|31.12.2024|\\FR_UKO_TMPRS|31.12.2024|\\FR_UKO_UCE|31.12.2024|\\FR_UKO_UCEOO|31.12.2024|\\FR_UKO_UCEPS|31.12.2024|\\FR_UKO_UCEVN|31.12.2024|\\FR_UKO_UK|31.12.2024|\\FR_UKO_VYKAZ|31.12.2024|\\FR_UKO_V_TER|31.12.2024|\\FR_UKO_V_TPV|31.12.2024|\\FR_UKO_V_ZAK|31.12.2024|\\FR_UKO_V_ZMT|31.12.2024|\\FR_UKO_ZDRKO|31.12.2024|\\FR_UKO_ZDROJ|31.12.2024|\\FR_UCE|24|\\FR_UCEOO|24|\\FR_UCEPS|24|\\FR_UCEVN|24|\\FR_BANKA|24|\\FR_DOCS|24|\\FR_DPHCZ|24|\\FR_DPHEV|24|\\FR_EETCZ|24|\\FR_EXIMP|24|\\FR_FAKP|24|\\FR_FSAL|24|\\FR_FV|24|\\FR_GANTT|24|\\FR_GDPR|24|\\FR_INVEN|24|\\FR_KARAT|24|\\FR_KAZAS|24|\\FR_MAJ|24|\\FR_MAN|24|\\FR_MZDY|24|\\FR_ODBYT|24|\\FR_ORG|24|\\FR_ORGS|24|\\FR_O_CEN|24|\\FR_O_OBJ|24|\\FR_O_SKL|24|\\FR_PARAM|24|\\FR_PERS|24|\\FR_POKL|24|\\FR_PUIN|24|\\FR_SEKR|24|\\FR_TERM|24|\\FR_TMPRS|24|\\FR_VYKAZ|24|\\FR_V_TER|24|\\FR_V_TPV|24|\\FR_V_ZAK|24|\\FR_V_ZMT|24|\\FRZAH_ADMIN|2024-01-01|\\FRZAH_AGENT|2024-01-01|\\FRZAH_ASNET|2024-01-01|\\FRZAH_ATTCH|2024-01-01|\\FRZAH_BANKA|2024-01-01|\\FRZAH_DOCS|2024-01-01|\\FRZAH_DPHCZ|2024-01-01|\\FRZAH_DPHEV|2024-01-01|\\FRZAH_EETCZ|2024-01-01|\\FRZAH_EXIMP|2024-01-01|\\FRZAH_FAKP|2024-01-01|\\FRZAH_FSAL|2024-01-01|\\FRZAH_FV|2024-01-01|\\FRZAH_GANTT|2024-01-01|\\FRZAH_GDPR|2024-01-01|\\FRZAH_INVEN|2024-01-01|\\FRZAH_KARAT|2024-01-01|\\FRZAH_KAZAS|2024-01-01|\\FRZAH_MAJ|2024-01-01|\\FRZAH_MAN|2024-01-01|\\FRZAH_MZDY|2024-01-01|\\FRZAH_ODBYT|2024-01-01|\\FRZAH_ORG|2024-01-01|\\FRZAH_ORGS|2024-01-01|\\FRZAH_O_CEN|2024-01-01|\\FRZAH_O_OBJ|2024-01-01|\\FRZAH_O_SKL|2024-01-01|\\FRZAH_PARAM|2024-01-01|\\FRZAH_PERS|2024-01-01|\\FRZAH_POKL|2024-01-01|\\FRZAH_PUIN|2024-01-01|\\FRZAH_SEKR|2024-01-01|\\FRZAH_TERM|2024-01-01|\\FRZAH_TMPRS|2024-01-01|\\FRZAH_UCE|2024-01-01|\\FRZAH_UCEOO|2024-01-01|\\FRZAH_UCEPS|2024-01-01|\\FRZAH_UCEVN|2024-01-01|\\FRZAH_UK|2024-01-01|\\FRZAH_VYKAZ|2024-01-01|\\FRZAH_V_TER|2024-01-01|\\FRZAH_V_TPV|2024-01-01|\\FRZAH_V_ZAK|2024-01-01|\\FRZAH_V_ZMT|2024-01-01|\\FRZAH_ZDRKO|2024-01-01|\\FRZAH_ZDROJ|2024-01-01|\\FRUKO_ADMIN|2024-12-31|\\FRUKO_AGENT|2024-12-31|\\FRUKO_ASNET|2024-12-31|\\FRUKO_ATTCH|2024-12-31|\\FRUKO_BANKA|2024-12-31|\\FRUKO_DOCS|2024-12-31|\\FRUKO_DPHCZ|2024-12-31|\\FRUKO_DPHEV|2024-12-31|\\FRUKO_EETCZ|2024-12-31|\\FRUKO_EXIMP|2024-12-31|\\FRUKO_FAKP|2024-12-31|\\FRUKO_FSAL|2024-12-31|\\FRUKO_FV|2024-12-31|\\FRUKO_GANTT|2024-12-31|\\FRUKO_GDPR|2024-12-31|\\FRUKO_INVEN|2024-12-31|\\FRUKO_KARAT|2024-12-31|\\FRUKO_KAZAS|2024-12-31|\\FRUKO_MAJ|2024-12-31|\\FRUKO_MAN|2024-12-31|\\FRUKO_MZDY|2024-12-31|\\FRUKO_ODBYT|2024-12-31|\\FRUKO_ORG|2024-12-31|\\FRUKO_ORGS|2024-12-31|\\FRUKO_O_CEN|2024-12-31|\\FRUKO_O_OBJ|2024-12-31|\\FRUKO_O_SKL|2024-12-31|\\FRUKO_PARAM|2024-12-31|\\FRUKO_PERS|2024-12-31|\\FRUKO_POKL|2024-12-31|\\FRUKO_PUIN|2024-12-31|\\FRUKO_SEKR|2024-12-31|\\FRUKO_TERM|2024-12-31|\\FRUKO_TMPRS|2024-12-31|\\FRUKO_UCE|2024-12-31|\\FRUKO_UCEOO|2024-12-31|\\FRUKO_UCEPS|2024-12-31|\\FRUKO_UCEVN|2024-12-31|\\FRUKO_UK|2024-12-31|\\FRUKO_VYKAZ|2024-12-31|\\FRUKO_V_TER|2024-12-31|\\FRUKO_V_TPV|2024-12-31|\\FRUKO_V_ZAK|2024-12-31|\\FRUKO_V_ZMT|2024-12-31|\\FRUKO_ZDRKO|2024-12-31|\\FRUKO_ZDROJ|2024-12-31|\\FSAL_PAR_IDENT_AVIZA|0|\\FSAL_PAR_IDENT_KOMP|0|\\FSAL_PAR_IDENT_UPOM|0|\\FSAL_PAR_IDENT_UZNA|0|\\FSAL_PAR_IDENT_PEN|0|\\FIRMA|Termopan s.r.o.|\\FIRMA_UDAJE1||\\FIRMA_UDAJE10||\\FIRMA_UDAJE2||\\FIRMA_UDAJE3||\\FIRMA_UDAJE4||\\FIRMA_UDAJE5||\\FIRMA_UDAJE6||\\FIRMA_UDAJE7||\\FIRMA_UDAJE8||\\FIRMA_UDAJE9||\\FIRMA_ULICE|Zahradní 843|\\FIRMA_DIC|CZ60707631|\\FIRMA_DODATEK|s.r.o.|\\FIRMA_JMENO||\\FIRMA_PRIJMENI||\\FIRMA_PSC|588 13|\\FIRMA_OBEC|Polná|\\FIRMA_OKRES|3707|\\FIRMA_STAT|CZ|\\FIRMA_ISO_STAT|CZ|\\FIRMA_IDM|CZK|\\FIRMA_V|Polná|\\FIRMA_FU||\\FIRMA_LANG|CZ|\\FIRMA_CINNOST1|Výroba pryžových a plastových výrobků|\\FIRMA_CINNOST2||\\INV_C_MASKA||\\INV_C_P_MASKA||\\ID_KARTY_NESPEC||\\IDI|01|\\IDU|KSWPVKA|\\IDUN|Václav Kadlec|\\IDSKUP||\\IDMM|CZK|\\IDMENUMOD||\\IDF|1|\\ICO|60707631|\\ISNET|1|\\ISHTML|0|\\UCE_UCET2_USE|'00'|\\UCE_DIM_USE|'0000000000'|\\UCE_DIMCIS_USE|'0000000000'|\\UMISTENI_MASKA||\\USRNAME|Václav Kadlec|\\USER_RIGHTS|#UserModifyRep;#UserModifyWin;#UserModifyWin=2;#PRSL=2;|\\KALKUL_VYCHOZI|'HLA'|\\KARTA_MASKA|XXXXXXXXXXXXXXXXXXXX|\\KARTA_TYP|0|\\KARTA_NULY|0|\\KARAT_VERSION|23.002|\\SKLAD_MASKA||\\SKLAD_TYP|0|\\SKLAD_NULY|0|\\SRVRTYPE|MS|\\SRVRVER|1500424902642220221211332019642022100064020348|\\SRVRNAME|192.168.10.247,1433|\\SRVRDB|KARAT_TERMOPAN|\\SERVER_COMP_NAME|S-KSOCLOUD-56|\\PREFIX_N_D|0|\\DEFA_XPLAN|''|\\DEVSTANDARD|0|\\DEVIMPL|1|\\DEVFIRM|1|\\DEVELOPERMODE|60|\\DBAIDU|DBA|\\DOCDIR|c:\\ProgramData\\KARAT Software\\Karat Server\\Vzor\\|\\DOCUMENTSDIR|C:\\Users\\VACLAVK\\Documents\\|\\DATUM|'2024-05-06'|\\DATUM_NA|2024-05-06|\\DATUM_STR|06.05.2024|\\DATUM_WIN|06.05.2024|\\WEBAPP_USR_ID|1|\\WEBAPP_USR_NAME|''|\\WEBAPP_USR_OSO|''|\\WEBAPP_DOMAIN|''|\\WEBAPP_PAGE|''|\\WINDIR|C:\\Windows\\|\\WRAPPER|Win32NT|\\LITE|0|termopan|termopan|\\LICNUM|1|\\LICREG|2022028_1|\\LIC1ID|TERMOPAN|\\LOCKDIR|C:\\ProgramData\\KARAT Software\\Karat Server\\TERMOPAN\\Temp\\ab12ec20-ebc2-44d2-981e-55211d4adf66\\|\\LOCKDIR_CLI|C:\\Users\\VACLAVK\\AppData\\Local\\KARAT Software\\Karat Client\\Temp\\ab12ec20-ebc2-44d2-981e-55211d4adf66\\|\\MYOSCISLO||\\MN|Kč|\\MODULY|ADMIN,AGENT,ATTCH,BANKA,DPHCZ,DPHEV,EETCZ,EXIMP,FAKP,FSAL,FV,GDPR,INVEN,KARAT,KAZAS,MAJ,MAN,MZDY,ODBYT,ORG,ORGS,O_CEN,O_OBJ,O_SKL,PARAM,PERS,POKL,PUIN,SEKR,TERM,TMPRS,UCE,UCEOO,UCEPS,UCEVN,UK,VYKAZ,V_TER,V_TPV,V_ZAK,V_ZMT,ZDRKO,ZDROJ,|\\MAINCONNECTION|CONN00001|\\MAIN_LANG_PRG|CZ|\\MAIN_LANG_PRG2|CZ|\\MAIN_LANG_DB|CZ|\\HKL|HLA|\\HOMEDIR|C:\\ProgramData\\KARAT Software\\Karat Server\\TERMOPAN\\|\\VZORDIR|c:\\ProgramData\\KARAT Software\\Karat Server\\Vzor\\|\\VZOR_STAT|cz|\\VZOR_PART||\\CLIENTDIR|C:\\Users\\VACLAVK\\AppData\\Local\\KARAT Software\\Karat Client\\Client\\23.2.476.0\\|\\CLIENT_COMP_ID|VKA/console/VKA\\VACLAVK|\\CLIENT_COMP_NAME|VKA|\\CLIENT_COMP_SESSION|Console|\\CA_NAME||\\TEMPDIR|C:\\ProgramData\\KARAT Software\\Karat Server\\TERMOPAN\\Temp\\ab12ec20-ebc2-44d2-981e-55211d4adf66\\|\\TERMINAL_VIEW|0|\\ASNET_VERSION|23.2.476.0|\\ANALYTIK|1|'#WHERE_FILTER'|'1=1'|GRP1||#REPMAKER_SUBST_END;;#ALL_ADD_TYPES=; USER_END TISK_TITLE=Štítky TISK_RETRIEVE=TRUE TISK_COMMENT1=100 25x100 DBCREATE_BEGIN BEGIN CREATE TABLE #op_stitky1_2324279 (poradi smallint/*BY*/, karta #BY(op_polozky.karta), nazev #BY(nomenklatura.nazev), user_mnozstvi_vyr #BY(op_polozky.user_mnozstvi_vyr), doklad #BY(op_polozky.doklad), zkraceny_nazev #BY(op_zahlavi.zkraceny_nazev), user_zakvy #BY(op_polozky.user_zakvy), user_dat_dodani_zd #BY(op_polozky.user_dat_dodani_zd), user_obj_nakup #BY(op_zahlavi.zkraceny_nazev), user_pol_poz #BY(op_polozky.user_pol_poz), user_vrtani_met #BY(op_polozky.user_vrtani_met), user_polozka_zd #BY(op_polozky.user_polozka_zd), user_typ_profil #BY(op_polozky.user_typ_profil), user_profil_zak #BY(op_polozky.user_profil_zak), user_carkod #BY(op_polozky.user_carkod), user_ean #BY(op_polozky.user_ean), user_delka #BY(op_polozky.user_delka), user_vyska #BY(op_polozky.user_vyska), user_hloubka #BY(op_polozky.user_hloubka), user_kodkz #BY(op_zahlavi.user_kodkz), storno #BY(op_polozky.storno), polozka #BY(op_polozky.polozka), user_skup_n_op #BY(op_polozky.user_skup_n_op), dat_dodani #BY(op_zahlavi.dat_dodani), citac_stitku char(3)/*BY*/, ean16 varchar(25)/*BY*/ primary key(poradi)) END DBCREATE_END DBEXECUTE_BEGIN BEGIN DECLARE @citac smallint/*BY*/ DECLARE @karta #BY(op_polozky.karta), @nazev #BY(nomenklatura.nazev), @user_mnozstvi_vyr #BY(op_polozky.user_mnozstvi_vyr), @doklad #BY(op_polozky.doklad), @zkraceny_nazev #BY(op_zahlavi.zkraceny_nazev), @user_zakvy #BY(op_polozky.user_zakvy), @user_dat_dodani_zd #BY(op_polozky.user_dat_dodani_zd), @user_obj_nakup #BY(op_zahlavi.user_obj_nakup), @user_pol_poz #BY(op_polozky.user_pol_poz), @user_vrtani_met #BY(op_polozky.user_vrtani_met), @user_polozka_zd #BY(op_polozky.user_polozka_zd), @user_typ_profil #BY(op_polozky.user_typ_profil), @user_profil_zak #BY(op_polozky.user_profil_zak), @user_carkod #BY(op_polozky.user_carkod), @user_ean #BY(op_polozky.user_ean), @user_delka #BY(op_polozky.user_delka), @user_vyska #BY(op_polozky.user_vyska), @user_hloubka #BY(op_polozky.user_hloubka), @user_kodkz #BY(op_zahlavi.user_kodkz), @storno #BY(op_polozky.storno), @polozka #BY(op_polozky.polozka), @user_skup_n_op #BY(op_polozky.user_skup_n_op), @dat_dodani #BY(op_zahlavi.dat_dodani), @citac_stitku varchar(3)/*BY*/, @pocet_mezer int /*BY*/, @mezery varchar(16)/*BY*/, @ean16 varchar(25)/*BY*/ --declarace kurzoru po položkách Příjemky DECLARE op_pol CURSOR FOR SELECT P.karta, N.nazev,P.user_mnozstvi_vyr,P.doklad,Z.zkraceny_nazev,isnull(P.user_zakvy,''),(case when P.user_dat_dodani_zd<>convert(datetime/*BY*/, '1901-01-01') then P.user_dat_dodani_zd else Z.dat_dodani end),isnull(Z.user_obj_nakup,''),isnull(P.user_pol_poz,''),isnull(P.user_vrtani_met,''), isnull(P.user_polozka_zd,''),isnull(P.user_typ_profil,''),isnull(P.user_profil_zak,''),isnull(P.user_carkod,''),isnull(P.user_ean,''),P.user_delka,P.user_vyska,(P.user_sirka1+P.user_sirka2+P.user_sirka3+P.user_sirka4+P.user_sirka5),isnull(Z.user_kodkz,''),P.storno,P.polozka,P.user_skup_n_op,Z.dat_dodani FROM dba.op_polozky P with(index(pk_op_polozky)), dba.nomenklatura N with(index(nomenklatura_cislo_nomen)), dba.op_zahlavi Z with(index(pk_op_zahlavi)) WHERE P.doklad = '24OP010100000305' AND N.cislo_nomenklatury = P.karta AND Z.doklad = P.doklad --otevření kurzoru po položkách Příjemky OPEN op_pol WHILE 1 = 1 BEGIN FETCH op_pol INTO @karta, @nazev, @user_mnozstvi_vyr,@doklad, @zkraceny_nazev,@user_zakvy,@user_dat_dodani_zd,@user_obj_nakup,@user_pol_poz,@user_vrtani_met, @user_polozka_zd,@user_typ_profil,@user_profil_zak,@user_carkod,@user_ean,@user_delka,@user_vyska,@user_hloubka,@user_kodkz,@storno,@polozka,@user_skup_n_op,@dat_dodani if @@sqlstatus <> 0 BEGIN\tbreak END SELECT @citac = 1 WHILE @citac <= @user_mnozstvi_vyr BEGIN select @citac_stitku =  right('000'+Convert(varchar/*BY*/, @citac),3) select @pocet_mezer = 16- len(@user_ean) select @mezery = REPLICATE(' ', @pocet_mezer) select @ean16 = CONCAT(@user_ean,@mezery,@citac_stitku,'0',@user_carkod) INSERT INTO #op_stitky1_2324279 (poradi, karta, nazev, user_mnozstvi_vyr, doklad, zkraceny_nazev,user_zakvy,user_dat_dodani_zd,user_obj_nakup,user_pol_poz,user_vrtani_met,user_polozka_zd,user_typ_profil,user_profil_zak,user_carkod, user_ean,user_delka,user_vyska,user_hloubka,user_kodkz,storno,polozka,user_skup_n_op,dat_dodani, citac_stitku, ean16) SELECT (SELECT COALESCE(MAX(poradi), 0) + 1 FROM #op_stitky1_2324279 WHERE 1=1), @karta, @nazev, @user_mnozstvi_vyr, @doklad, @zkraceny_nazev,@user_zakvy,@user_dat_dodani_zd,@user_obj_nakup,@user_pol_poz,@user_vrtani_met,@user_polozka_zd,@user_typ_profil,@user_profil_zak,@user_carkod, @user_ean,@user_delka,@user_vyska,@user_hloubka,@user_kodkz,@storno,@polozka,@user_skup_n_op,@dat_dodani, @citac_stitku, @ean16 SELECT @citac = @citac + 1 END END CLOSE op_pol END DBEXECUTE_END DBDROP=DROP TABLE #op_stitky1_2324279 DBSUBST=#WHERE_FILTER|1=1|#WINDOWID|4810179| w_ift\tconn\tms_19216810247_karat_termopan 73 w_ift\tRefreshObjects\tPARENT_PARENT_LIST PARENT_PARENT_200705141135559525303211 w_ift\tPercentOffDWs\tPARENT_PARENT_LIST\tdba.op_zahlavi\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.22697.22700.22723 PARENT_PARENT_200705141135559525303211\tdba.op_polozky\tAppServer.ab12ec20-ebc2-44d2-981e-55211d4adf66.main.22697.22700.preview.200705141135559525303211.dw w_ifttisk\texecute_subst\t#op_stitky1|#op_stitky1_2324279|#op_stitky1_|op_stitky1_2324279_|#op_stitky1_2324279|#op_stitky1_2324279|_#op_stitky1|_op_stitky1_2324279| w_ifttisk\tSortByServer w_ifttisk\tSortByGroup w_ifttisk\tSortByUser w_ifttisk\t/Select\tSELECT S.poradi poradi, S.karta karta, S.nazev nazev, S.user_mnozstvi_vyr user_mnozstvi_vyr, S.doklad doklad, S.zkraceny_nazev firma, isnull(S.user_zakvy,'') user_zakvy, S.user_dat_dodani_zd user_dat_dodani_zd, S.user_obj_nakup user_obj_nakup, isnull(S.user_pol_poz,'') user_pol_poz, isnull(S.user_vrtani_met,'') user_vrtani_met, S.user_polozka_zd user_polozka_zd, S.user_typ_profil user_typ_profil, S.user_profil_zak user_profil_zak, S.user_carkod user_carkod, S.user_ean user_ean, S.user_delka user_delka, S.user_vyska user_vyska, S.user_hloubka user_hloubka, S.user_kodkz user_kodkz, S.storno storno, S.polozka polozka, S.user_skup_n_op user_skup_n_op, S.citac_stitku citac_stitku, S.ean16 ean16 FROM #op_stitky1_2324279 S WHERE (((S.storno)=0)) AND 1=1  ORDER BY user_skup_n_op,polozka w_ifttisk\tLastRetrieveError w_ifttisk\tRowCount\t1 w_ifttisk\tDwCommTag\t#PRSL=30; ------------------------------- [VERZE] ADMIN=23.002.555 AGENT=23.002.455 ASNET=23.002.476 ATTCH=23.002.565 BANKA=23.002.600 DOCS=23.002.305 DPHCZ=23.002.560 DPHEV=23.002.455 EETCZ=23.002.000 EXIMP=23.002.255 FAKP=23.002.655 FSAL=23.002.605 FV=23.002.655 GANTT=23.002.560 GDPR=23.002.555 INVEN=23.002.550 KARAT=23.002.505 KAZAS=23.002.555 MAJ=23.002.605 MAN=23.002.105 MZDY=23.002.835 O_CEN=23.002.610 O_OBJ=23.002.615 O_SKL=23.002.665 ODBYT=23.002.625 ORG=23.002.620 ORGS=23.002.565 PARAM=23.002.610 PERS=23.002.570 POKL=23.002.605 PUIN=23.002.555 SEKR=23.002.355 TERM=23.002.505 UCE=23.002.355 UCEOO=23.002.155 UCEPS=23.002.555 UCEVN=23.002.555 UK=23.002.155 V_TER=23.002.665 V_TPV=23.002.565 V_ZAK=23.002.575 V_ZMT=23.002.555 VYKAZ=23.002.355 ZDRKO=23.002.570 ZDROJ=23.002.655 TMPRS=23.002.000 [STAT_CZ] ADMIN=23.002.000 FSAL=23.002.505 GDPR=23.002.000 MAJ=23.002.000 MAN=23.002.000 O_CEN=23.002.000 O_OBJ=23.002.000 O_SKL=23.002.605 ORG=23.002.000 SEKR=23.002.000 VYKAZ=23.002.000 ZDROJ=23.002.000 KARAT=23.002.000 AGENT=23.002.000 ATTCH=23.002.000 BANKA=23.002.000 DPHCZ=23.002.000 DPHEV=23.002.000 EETCZ=23.002.000 EXIMP=23.002.000 FAKP=23.002.000 FV=23.002.000 INVEN=23.002.000 KAZAS=23.002.000 MZDY=23.002.000 ODBYT=23.002.000 ORGS=23.002.000 PARAM=23.002.000 PERS=23.002.000 POKL=23.002.000 PUIN=23.002.000 TERM=23.002.000 UCE=23.002.000 UCEOO=23.002.000 UCEPS=23.002.000 UCEVN=23.002.000 UK=23.002.000 V_TER=23.002.000 V_TPV=23.002.000 V_ZAK=23.002.000 V_ZMT=23.002.000 ZDRKO=23.002.000 ASNET=23.002.000 DOCS=23.002.000 GANTT=23.002.000 TMPRS=23.002.000 [STAT_SK] ADMIN=23.002.000 BANKA=23.002.000 DPHEV=23.002.000 FAKP=23.002.055 FSAL=23.002.055 FV=23.002.205 GDPR=23.002.000 INVEN=23.002.000 KARAT=23.002.000 MAJ=23.002.005 MAN=23.002.000 O_CEN=23.002.000 O_OBJ=23.002.000 O_SKL=23.002.000 ODBYT=23.002.055 ORG=23.002.155 POKL=23.002.205 SEKR=23.002.355 UCEPS=23.002.000 VYKAZ=23.002.000 ZDROJ=23.002.000 [FIRM__ALL] ORG=23.002.000 KARAT=23.002.000 ADMIN=23.002.000 AGENT=23.002.000 ATTCH=23.002.000 BANKA=23.002.000 DPHCZ=23.002.000 DPHEV=23.002.000 EETCZ=23.002.000 EXIMP=23.002.000 FAKP=23.002.000 FSAL=23.002.000 FV=23.002.000 GDPR=23.002.000 INVEN=23.002.000 KAZAS=23.002.000 MAJ=23.002.000 MAN=23.002.000 MZDY=23.002.000 O_CEN=23.002.000 O_OBJ=23.002.000 O_SKL=23.002.000 ODBYT=23.002.000 ORGS=23.002.000 PARAM=23.002.000 PERS=23.002.000 POKL=23.002.000 PUIN=23.002.000 SEKR=23.002.000 TERM=23.002.000 UCE=23.002.000 UCEOO=23.002.000 UCEPS=23.002.000 UCEVN=23.002.000 UK=23.002.000 V_TER=23.002.000 V_TPV=23.002.000 V_ZAK=23.002.000 V_ZMT=23.002.000 VYKAZ=23.002.000 ZDRKO=23.002.000 ZDROJ=23.002.000 ASNET=23.002.000 DOCS=23.002.000 GANTT=23.002.000 TMPRS=23.002.000 [FIRM_TERMOPAN] TMPRS=23.002.000 KARAT=23.002.000 ADMIN=23.002.000 AGENT=23.002.000 ATTCH=23.002.000 BANKA=23.002.000 DPHCZ=23.002.000 DPHEV=23.002.000 EETCZ=23.002.000 EXIMP=23.002.000 FAKP=23.002.000 FSAL=23.002.000 FV=23.002.000 GDPR=23.002.000 INVEN=23.002.000 KAZAS=23.002.000 MAJ=23.002.000 MAN=23.002.000 MZDY=23.002.000 O_CEN=23.002.000 O_OBJ=23.002.000 O_SKL=23.002.000 ODBYT=23.002.000 ORG=23.002.000 ORGS=23.002.000 PARAM=23.002.000 PERS=23.002.000 POKL=23.002.000 PUIN=23.002.000 SEKR=23.002.000 TERM=23.002.000 UCE=23.002.000 UCEOO=23.002.000 UCEPS=23.002.000 UCEVN=23.002.000 UK=23.002.000 V_TER=23.002.000 V_TPV=23.002.000 V_ZAK=23.002.000 V_ZMT=23.002.000 VYKAZ=23.002.000 ZDRKO=23.002.000 ZDROJ=23.002.000 ASNET=23.002.000 DOCS=23.002.000 GANTT=23.002.000 [FIRM_TERMOPAN_TEST] -------------------------------"
    },
    {
      "creator": "Lukáš Trunečka",
      "comment": "long_text_example.txt Toto ;-) Jinak ano, asi by neměl být problém to omezit na nějaký rozumný počet znaků, ale nerad bych na něj narážel při běžných situacích. Má to být takový počet, který je běžným psaním textu člověkem těžko dosažitelný, ale ošetřuje to, že někdo něco vloží z clipboardu. Ale taky zároveň je potřeba mít ošetřené to, že když už se někomu podaří tam něco omylem z clipboardu vloží, tak že to může vrátit zpět, což ta moje situace byla taková, že běžný uživatel byl v pasti.... musel jsem přes F12 jít a odebrat vnitřní elementy z editable divu. Pravděpodobně to po tom Ctrl+Z bylo v nějakém marném zacyklení, protože to přes F12 nešlo ani pausnout, abych se podíval v čem se to zacyklilo."
    },
    {
      "creator": "Daniel Dzuro",
      "comment": "Nerozumiem co si skusal: - do komentara si vlozil text ktory ma, ak som to dobre vybral cez 25k riadkov (neviem preco do komentara - asi aby sa mi horsie pracovalo :) ) - prilozil si textak, ktory ma 450 riadkov Ani jeden sa nezda byt velkostou ten ktory ti sposobil problem. Tych 450 vlozenie, ctrl+a a del mi nesposobil problem, tych 25k riadkov kopirovat a skusat nebudem.. :) Prosim posli mi v txt ten kod ktory ti sposobil problem - 5500 riadkovy"
    },
    {
      "creator": "Lukáš Trunečka",
      "comment": "Ano, moc se omlouvám, ujelo mi to, omylem jsem do komentáře vložil text z clipboardu a omylem zmáčkl Odeslat komentář. Fakt jsem \"nechtěl\", ale systém mi to umožnil a já to prostě zmáčkl a ono to prošlo..... ;-) ... jj, přilohu jsem dal špatně jiný text.... posílám správný long_text_example2.txt"
    },
    {
      "creator": "Lukáš Trunečka",
      "comment": "Jo a ano, nevím jak jsem původně přišel na těch 5500 řádků, možná jsem se blbě koukl na pozici v textu.... ale mělo to být cca 17 tis. řádků - tedy tu se upřímně omlouvám za mistifikaci. Jinak ano, nebuď srab :-) a do clipboardu ten 1M textu vezmi... my s tím celkem běžně pracujeme a snadno se to stane ;-)"
    },
    {
      "creator": "Daniel Dzuro",
      "comment": "Lukas, je to v poriadku ze zoberies takyto obsah textu do clipboardu, ale je nezmysel toto davat do komentarov. Vzhladom na to, ze vidim ze ti preslo aj 25k riadkov co je ak som dobre pozeral cez 1 mil znakov, tak to asi nema zmysel takto skusat. Evidentne nie je problem vo velkosti textu a co v tom texte bolo, ktory si pastol a ja neviem ako prist na to, co to sposobilo. Bolo by dobre aby si sem dal teda len ten text, ktory evidentne zhodil komunikaciu.."
    },
    {
      "creator": "Lukáš Trunečka",
      "comment": "Tedy ještě jednou, zcela vážně a polopatě. Máme dva scénáře: 1) Uživatel má z předchozí práce v clipboardu 1M text a v domění, že před tím zkopíroval jiný text, vloží to do pole s komentářem. To se úplně klidně může stát a úplně klidně tam může mít třeba 100MB. Aplikace má mít toto ošetřené buď tak, že před paste kontroluje kolik dat se bude vkládat, nějak to omezuje a nedovolí to. Pokud to nejde takto ošetřit, je potřeba dát uživateli možnost se takového textu zbavit z textového pole, což nelze. Text, který to způsobil jsem přiložil v textovém souboru v ##11 2) Kdokoli, klidně i ze škodolibosti, blbosti může udělat to, co jsem schválně demonstroval a tedy pokud to textové pole umožňuje, tak vloží extrémně velký text. Systém musí být proti tomu odolný a ošetřovat to jak na úrovni toho, že nedovolí, aby přes textové pole takový text prošel, což ale nezamezuje tomu, aby text i tak serveru odeslal větší a tím pádem to má být ošetřeno i na úrovni funkčnosti, která ta data zpracovává/vkládá do DB."
    },
    {
      "creator": "Lukáš Trunečka",
      "comment": "... uznávám a omlouvám se, že jsem byl v prvních příspěvcích trošku škodolibý."
    },
    {
      "creator": "Daniel Dzuro",
      "comment": "- ak ti to robi dobre, kludne pokracuj v skodoradosti :) tak nejak som si na to zvykol - suhlasim - kontrola pri vlozeni na obsah - idealne na velkost aj pocet znakov - skusal som tych 1mil znakov, problem s vlozenim nebol, s oznaceniom takisto nie, ale pri mazani uz stranka neodpovedala.. takze obmedzime velkost co ja viem na 30000 znakov - osobne by som dal este menej - nema zmysel robit tak obrovsky komentar na 8x A4. Dal by som este menej a s hlaskou ze to je prilis velke, nech si to daju ako dokument do priloh. Tak to navrhnem aj na porade.."
    },
    {
      "creator": "Lukáš Trunečka",
      "comment": "Ano, zaseknutí při pokusu o smazání je onen problém ;-) S tím omezením na počet... jen opatrně s tím, aby to nezapočítávalo i objem dat z vložených obrázků do příspěvku. Díky ;-)"
    },
    {
      "creator": "Daniel Dzuro",
      "comment": "Ano, jasne idealne je aby sme vedeli kde je text a kde su nahlady obrazkov - ak to dokazeme tak potom vieme separatne definovat limit pre znaky a separatne pre nahlady, u ktorych ale pocitam ze to je par kB. Uvidime potom, co detekujeme, co z toho textu sposobilo ten pad.."
    },
    {
      "creator": "Pavel Drtil",
      "comment": "Čau, pěkně si povídáte, ale chtěl jsem přispět spíše statistickou informací o délce příspěvku. první sloupec je zaokrouhlená délka na desítkový řád, druhý sloupec počet Pro fajnšmekry v přirozené logaritmické škále to vypadá takto: Nebo jednodušeji, co chci říct, je to, že nad 30 000 znaků je dnes téměř 8 tisíc komentářů: Při limitu 64 KB by to bylo 2 tisíce komentářů: Takže spíše tak limit kolem 100 000 znaků s jedním tisícem komentářů vypadá reálněji: Pro úplnost 200 000 znaků: (A myslím si, že už i v tom jsou započteny zmenšené náhledy obrázků, protože tam vidím src=\"data:... a neumím je jednoduše z výpočtu vyloučit.) Toto je top 10: https://app.aliteo.com/task/a05fd29btg0amp/ https://app.aliteo.com/task/a04uko1nhg0i61/ https://app.aliteo.com/task/a05c1kmbk005fc/ https://app.aliteo.com/task/a05p684sf00kur/ https://app.aliteo.com/task/a0524sad9018to/ https://app.aliteo.com/task/a0524sad9018to/ https://app.aliteo.com/task/a04rre21sg02hg/ https://app.aliteo.com/task/a04p0g1nn018qm/ https://app.aliteo.com/task/a04p0g1nn018qm/ https://app.aliteo.com/task/a05tu5aii02pd0/"
    },
    {
      "creator": "Pavel Drtil",
      "comment": "Koukal jsem a ono stačí nějakých 20 obrázků a je to dlouhé: comment2.txt comment.txt a většina \"textu\" z toho komentáře tvoří nějaký ten Base64 mišmaš z náhledů: Pokud bys chtěl, tak asi můžu napsat složitější dotaz a odfiltrovat obrázky ven."
    },
    {
      "creator": "Pavel Drtil",
      "comment": "Tak nedalo mi to, i server se u toho zapotil na 45 minut a top 20 komentářů jen podle textu bez img: Top ten odkazy: https://app.aliteo.com/task/a0415nl5vg08tg/ https://app.aliteo.com/task/a03qd3enng0gth/ https://app.aliteo.com/task/a043ht12e0145a/ https://app.aliteo.com/task/a03talgep0183d/ https://app.aliteo.com/task/a029568cc01c9v/ https://app.aliteo.com/task/a03u11n3qg1019/ https://app.aliteo.com/task/a03u0pshbg1019/ https://app.aliteo.com/task/a03t4ikb300eg3/ https://app.aliteo.com/task/a02956aji011ig/ https://app.aliteo.com/task/a03t4ikdmg0eg3/ Takže jen texty bez obrázků jsou většinou dlouhá chybová hlášení, většinou z update databáze. Často je tam takto vkládá přímo klient. Asi je to zamrzí, když to nepůjde, ale donutí je to dát do přílohy. Bez obrázků by těch 30 tisíc znaků (nebo spíše až 2x víc) mělo cca vyhovět. S náhledy řekněme těch 100 tisíc znaků (nebo spíše až 2x víc) by mělo také cca vyhovět. V principu jste tedy měli oba pravdu a sry, pokud jsem se nevhodně vmísil. Pokud jsem pomohl, tak se rádo stalo."
    },
    {
      "creator": "Lukáš Trunečka",
      "comment": ":-D .... fakta jsou potřeba ;-)"
    },
    {
      "creator": "Daniel Dzuro",
      "comment": "dik, avsak nie som ani v jednej ulohe sledujuci, takze neotvorim nic.. trochu prilejem do ohna, chcete mi povedat ze sa Vam takto dobre pracuje? ze analyzujete chybu v komentari ALITEO . Nekopirujete si to niekam, kde mozete lepsie hladat resp, kde Vam iny nastroj farebne zafarbi syntax a podobne ? Za mna to nie je ok, ja by som tak pracovat nechcel... kam tym mierim je to, ci by sme nemal zapracovat na postupe aby to tam tak zakaznik nedaval, nech to da tak ako to my potrebujeme - obmedzenim velkosti ich k tomu tak trochu aj donutime.. videl by som priestor viac v tom aby ste vy potom ten kod otvorili v toole kde chcete rychlejsie"
    },
    {
      "creator": "Lukáš Trunečka",
      "comment": "Dal jsem tě zde do sledujících #108320 patche (KA:108247) No, máš určitě pravdu, že by bylo fajn různé logy, kousky kódů, hlášky apod. dávat do příloh.... jenže to by pak muselo fungovat fulltextové vyhledávání i v těch přílohách, což asi nejde a bojím se, že ani nepůjde. V takovém případě jsem šťastný za to, když to kdokoli hodí do příspěvku, protože pak snadno vyhledám, že se daná věc už někdy někde řešila..... Jinak případy zadané přímo z Karatu dávají do přílohy soubor Status. txt, který přikládá souhrn a případně i obsah hlášky a už teď nás dost mrzí to, že v tom nejde hledat. Dokonce bychom očekávali, že v dnešní době AI už se bude uvažovat i o realizaci možnosti vyhledávat i text nad obrázkovými přílohami.... Tím chci říct Dane, že může být i hůř a ty nároky budou naopak větší."
    },
    {
      "creator": "Pavel Drtil",
      "comment": "To nemáte nějaký servisní přístup, kde uvidíte vše? Na těch případech je prostě velký text (většinou nějaký SQL kód). Na práci to není dobré. Na druhou stranu, na toho uživatele už tak vyskočila brutální chyba a je naštvaný a přidat mu k tomu to, že mu řekneme, že mu s tím ani nepůjde založit případ, to nedopadne dobře. V lepším případě jen napíše \"nějaká chyba\" a bude z toho detektivka. Tedy pokud nemáte v plánu dotaz jako: \"Text vložený přes Ctrl+V do komentáře je příliš dlouhý, mám jej uložit jako přílohu a sem dát jen odkaz? Ano/Ne\" Jinak dnes to často končí tím, že se to do něčeho kopíruje, ale to i proto, aby mi to našlo chyby. Varianta B je, že člověk dá Ctrl+F a studuje ten vadný kousek i takto v komentáři. Většinou v jednom případu není víc než jeden takový dlouhý, takže na konec nebo začátek není problém skočit. Vytahovat ten text z přílohy totiž taky není zrovna zábava a často se přílohy přehlíží (jsou někde mimo)."
    },
    {
      "creator": "Daniel Dzuro",
      "comment": "@ Lukáš Trunečka (lukas.trunecka@karatsoftware.cz) - ano, aj to sa da osetrit - chce to len proces ktore bude dodrziavat - ostatne ak chces mat nejakui bazu znalosti, potom je dobre udrzaivat nejaky postup pri rieseni pripadu. Z toho mi vyplyva, ze ak by som som aj nasiel problem, v ktorom viem ze tento kus kodu je podstatny, nevidim problem v tom, aby sa na zaver púre ucely zberu knowledge vytiahol vysek kodu, ktory bol problem a mavime sa o tisickach a nie o milionoch znakov - suhlasim ze zahrnut AI je fajn a planujeme to v roznych podobach - ale ako iste viete pracujete aktualne s toolom za par euro a to ti proste nevyjde ak ta bude AI stat radovo viac - ano aj na to su odpovede - priplatit sa funkcionalitu, zvysit cenu tarifu atd - ale asi to ma svoj cas. Ver ze ja som posledny kto by brzdil AI, OCR a podobne feature v ALITEO @ Pavel Drtil (pavel.drtil@karatsoftware.cz) - pokial je to mozne, podme standardnou cestou a teda ja nie som supervizor v  spolocnosti KARAT, takze bohuzial nevidim vsetko - nepoznam vsetky cesty ako sa zakladaju tickety do ALITEO - ale naposledy ked som sa ponukol ze podme sa pozriet na proces bolo mi naznacene: \"vsechno vime, co nam uz jen ty chces nabidnout\". Takze od tohto upustam. - ako by to bolo mozne a ako potencialna varianta vlozenie txt a pridat ako prilohu - preco nie.. mozme prebrat - co sa tyka poslednej odrazky mne to pride spravne to studovat inde - preto vzdy budem za variantu podporit proces toho ako v tom najlepsie pracovat, ak znasilnovat funkcie nastroja, ktory na to nie je stavany aby sa priblizil tomu profi nastroju, Pozeral som na ten pripad ktory mi LTR spristupnil - v komentari je to preto lebo je to prenesene z popisu - takze to tam uzivatel sam nevlozil je to znasilnena funkcia - v prilohach je subor realne s tou hlaskou - takze tam proste je a nemusel by vznikat v komentaroch - co tak zamysliet sa nad tym, ci by nebolo mozne urobit funkcionalitu, ktora by dokazala na klik v ALITEO otvorit danu prilohu v nadefinovanom programe"
    },
    {
      "creator": "Pavel Drtil",
      "comment": "Myslím si, že jsem tady v případu nebyl nijak ošklivý, proto mě celkem uráží jakože citace \"vsechno vime, co nam uz jen ty chces nabidnout\". Jsem si naprosto jistý, že jsem nepsal slovensky bez diakritiky a i významově jsi pokroutil to, co jsem psal v úplně jiném případu. Navíc se tu v případu bavíme o tom, že ty případy zadávají klienti, takže třeba v kontextu #108320 patche (KA:108247) by si o pořizování případů povídat měla nějaká Marie Kotková z Charmontu, která přístup do ALITEO jistě má. Proč je z toho vždy nějaké brutální hádání se. Jsem tady v případu věnoval nemalý čas, abych získal nějakou statistiku velikosti komentářů, protože jsem chtěl pomoct. Neřekl jsem jediného křivého slova, či ironie, nebo sarkasmu. Dokonce jsem i psal, že bych to od nějaké velikosti zařezal, aby ty extrémní komentáře ani nevznikaly, takže jsme navíc ve shodě. Mám za to nějaké citace, které jsem ani neřekl."
    },
    {
      "creator": "Pavel Drtil",
      "comment": "Ne vážně, koukám tady a v ##21 ještě píšu \" V principu jste tedy měli oba pravdu a sry, pokud jsem se nevhodně vmísil. Pokud jsem pomohl, tak se rádo stalo.\" Kde jsem jakože šlápnul na to kuří oko? To jako tím dotazem \"To nemáte nějaký servisní přístup, kde uvidíte vše?\" - to mi přišlo na mysl, když jsem četl \"nie som ani v jednej ulohe sledujuci, takze neotvorim nic..\", že bych nějaký takový prostě čekal, výrobce obvykle toto má a nemyslel jsem to nijak špatně, spíše, že by bylo dobré to mít. Chtěl jsem se za něco špatného omluvit, ale opravdu to nevidím. Lukášovi asi dlužím zbytek informací k tomu druhému případu, když už to tu s ním řešíme. Chtěl jsem změnu v řazení komentářů, kde jsem chtěl při řazení od posledního ty bez komentáře na začátku. Logika toho je ta, že případ bez komentářů je nový, starý případ už nějaké komentáře má, že ty bez pro práci potřebuji nahoře, když mi přiskočí na dno, tak je nevidím. Byla dlouhá diskuze Dan říkal, že by ty bez komentáře chtěl vždy dole, při řazení vzestupně i sestupně, protože zrovna takto to implementoval Excel při řazení. Samozřejmě existuje mrtě jiných implementací a mohl jsem se hádat, ale za předpokladu, že tedy Dan říká, že už dnes je to blbě a já jsem to chtěl jen z jeho pohledu jinak blbě, ale pro mě dobře, technicky to bylo o trapné změně jedné konstanty, tak přesto to neprošlo. V okamžiku, kdy už mi bylo řečeno, že si mám trhnout, že na mě nezáleží a počká se, až s tím přijde skutečný klient (toto jsem úmyslně přehnal, ale snad si rozumíme, co říkám), tak mi bylo nabídnuto, že místo toho, abych si popovídal o tom, že mám pracovat nějak jinak. Abych nám ušetřil čas, tak jsem nabídl, že to oželím a to byla ta jakože citovaná jakože arogantní urážka, kdy jsem nejchytřejší. Asi bych k tomu dodal, že po těch hodinách hádání se v kruhu jsem na to opravdu neměl sil. Navíc najít cestu, jak s ALITEO pracovat, mi trvalo hodně dlouho a odhadoval jsem, že jiná cesta bude znamenat, že se uklikám k smrti (třeba přidávání značek), nebo nebudu mít právo (třeba používání nějakých sekcí nebo něčeho), že si ještě vyslechnu, jak to Allan s Lubou blbě naimplementovali, znásilnili a kde co, že se to má reimplementovat a to se stejně nestane, nebo to vyřeší něco, co přijde za pár let. Pak jsme si stejně volali, protože jsem nedal radostné hodnocení se zamítnutým námětem na triviální změnu, která nebyla proti ničemu, a kde se ve výsledku v případu neudělalo vlastně vůbec nic. Navíc si to prostě vyřeším za sebe tak, že při předání na mě triggerem založím první komentář, který přijde synchronizací, což jsem to takto znásilňovat nechtěl, ale potřebuji to nějak používat a toto řešení jsem znal, tak i proto jsem ten ústní rozhovor písemně odmítl. Z pohledu Dana to mohlo vypadat jinak a myslel jsem si, že jsme si to vyříkali, ale asi ne. (Lukáši chraň tě Bůh tady vytáhnout nultý komentář, nebo řazení za poslední aktivitu. Fakt na to nemám náladu a jen bychom spadli do toho stejného.) Takže se omlouvám i za to, co jsem neudělal a neřekl. Odeberu se ze sledujících a pokud mám o tom ještě něco vědět, tak jiným kanálem, nebo mě zpět zmiňte."
    },
    {
      "creator": "Lukáš Trunečka",
      "comment": "Pokud bych se vrátil zpět k tématu, tak jsi Dane zamlčel to hlavní - ty dlouhé a \"nesmyslné\" texty jsou v komentáři i proto, aby byly vyhledatelé, protože v přílohách je nic nenajde. A tohle žádný proces a metodika nespraví. Těch případů se valí opravdu hodně od zákazníků a není možné každý jednotlivý případ honit po zákazníkovi způsobem, že se mu bude neustále vracet dokud nesplní všechny metodické pokyny k správnému zadání případů. A odbavující člověk bude buzerovaný za to, že nechal něco v komentáři, nerozpadl to do příloh, nevypreparoval co měl (on to v tu dobu ani nemusí vědět, co v tom logu bylo hodnotného), navíc kdybych z toho  chtěl nějaký souhrn, AI mi ho může dát apod..... udělejte fulltext nad přílohami a není se o čem bavit. Víš, Dane... je pravda, že jsme trošku unavení z té vaší permanentní odmítavosti nás slyšet. Máme zde s konstruktivními připomínkami k Aliteu brutální procento neúspěchu a už to lidi deptá, uchylujeme se k sarkazmu a škodolibosti apod....  Máte na všechno nějakou výmluvu, možná by bylo lepší, aby jste se do těch diskuzí ani nepouštěli, pokud už dopředu víte, že výsledek zaříznete třeba proto, že jen nestíháte, nebo máte prostě instrukce to co nejvíc posílat k šípku. Pamatuji si, jak když jsem před cca 14 lety nastoupil do Karatu, jak mě Allan na každé poradě drbal za to, abych neměl výmluvy proč něco nejde a místo toho hledal způsob, jak to udělat... Byla to dobrá myšlenka, kterou jsem si vzal k srdci, ale všímám si poslední dobou jak brutálně se tohle otočilo jak u Allana, tak i u vás :-( Tento případ považuji primárně za reklamaci celkem fatálního problému. Ale po tém minulém poslání k šípku s řazením pouze za komentář, což je to samé, s čím jste vypakovali i Pavla, to považuji stále za něco, kvůli čemu jsem minimálně na dobu neurčitou zlomil hůl nad tím  se o něco snažit :-( Konec diskuze.... prosím, opravte chybu."
    },
    {
      "creator": "Daniel Dzuro",
      "comment": "@ Pavel Drtil (pavel.drtil@karatsoftware.cz) - umysel bol parafraza - nieco  ako si napisal ty v komentari ##28 \"mi bylo řečeno, že si mám trhnout, že na mě nezáleží\" -   nikdy som ti nic take nepovedal, takze urazeny by som tu mohol byt ja. Pouzivas to bezne, nasim smerom ked Ti nevyhovieme a pri tom som zivote som nikomu nepovedal ze si ma trhnut alebo ze na nom nezalezi. Ty si to vysvetlil v zatvorkach za tym, ze to prehanas a ja som to dal do uvodzoviek - ale myslim ze to vsetci pochopili ako to bolo myslene - preco je z toho hadanie sa? - mozno preto , ze ked je vysledkom nesuhlas s Vasim riesenim urazite sa a je to. A ked som sa niekolko krat ponukol ze chcem pomoct inak, tak ine riesenie neberiete, tak sa mi uz nechce ked dostanem zakazdym po rypaku. - za to ze si tomu venoval cas ti patri velka vdaka - aj napriek tomu si myslim ze mat komentar na viac ako 2x A4 je blbost - opat sme pri tom, ze argument ako sa to robi teraz je pre vas nepriestrielny a zmeny nie su vitane.. pochopil som Ad radenie komentarov - no a zevraj ja to prekrucam co si povedal - fakt som povedal, ze sme to dali preto tak lebo to tak robi excel? nepovedal a neurobili sme to preto... iba som poskytol argument v podobe excelu, ktory hodnoty ktore nema k dispozicii radi nakoniec. Za mna je to takisto aj tu... Ak je hodnota null, teda ziadna, preco by som ju mal zohladnovat pri radeni - nie je to ani 1901 ani 9999. To ze si v tom nasiel logiku pre teba vhodnu je v poriadku, ale preco to prezentujes ako vseobecnu pravdu a vsetkych ktory to takto neberu vnimas ako nelogicky rozmyslajucich neviem - zasa nespokojnost s riesenim aj ked som priznal ze rozumiem tvoju problemu a chcel som ti pomoct ho vyriesit - na to si mi napisal co si napisal (mimochodom zapracujeme funkciu do pohladu \"neexistuje komentar\") - splni to ciel - jeden pohlad na nove a bez pohladu so standardnym radenim - lenze Vam uz aj jeden klik naviac vadi - opat nepacilo sa ti riesenie lebo to nebolo to tvoje - radenie za poslednu zmenu som chcel - ale bol to technicky problem, kvoli pravam na vsetky aktivity ktore vznikaju @ Lukáš Trunečka (lukas.trunecka@karatsoftware.cz) - ved som to pisal v komentari ##26 ze ano, pridat AI a vyhladavanie v prilohach by sme chceli ale neda sa to hned - neda sa to len tak spravit - potom hned za tym pride ze vyhladavanie trva prilis dlho - na druhu stranu aj to je nejaka praca s AI - nie len tam nasypat text a potom cakat - ak jej das hodnotne informacie a bez balastu bude vyhladavat lepsie, kvalitnejsie a rychlejsie - to je to stale dookola, ako som pisal aj Pavlovi, mate problem a zaroven aj riesenie - ak sa neurobi presne to co vy navrhujete je to obrovsky problem ( a je jedno co je za tym, proste sa Vam nevyhovelo a pisete take hluposti - ze nam niekto povedal nech to posielame ku dnu a podobne. Dokonca ked Vam povie ze neskor, ze je to v plane vyvoja, tak ani to neberiete - co by mala byt dobra sprava ze to spravime len neskor. Proste bud \"hned a tak ako sme povedali\" alebo nic. Jednoducho treba respektovat rozhodnutia druhej strany, tak ako ini musia respektovat tie Vase o tom co rozhodujete vy, tak by ste vy mali respektovat tie nase. Ak je to take na hrane, ze nie a nie pochopit, spravte si zoznam a potom to preberieme osobne . A vidite zasa mam tendenciu veci urovnavat, napravat, snazit sa vyjst v ustrety, aby ked sa nieco neda,. aby ste dostali relevantne informacie ale neviem ci to bude pochopene alebo si niekto len povie, kasleme my na teba, neurobil si co sme chceli. Suhlasim koniec diskusie... chybu ma na stole Dusan, snad sa mu podari najst cast kodu ktory sposobuje problem. @ Lukáš Trunečka (lukas.trunecka@karatsoftware.cz) chces to nechat otvorene?"
    },
    {
      "creator": "Lukáš Trunečka",
      "comment": "Můžeme uzavřít.... díky ;-)"
    },
    {
      "creator": "Pavel Drtil",
      "comment": "Už jsem ani odpověď neočekával a vůbec nic to nezměnilo / nepřineslo. Má smysl se o tom nějak dál bavit? Mně to nevadí, ať si to už řadí klidně dál tím nepoužitelným způsobem, který je správný. Já už jsem si přidal trigger, který mi vygeneruje privátní komentář, když je na mě případ předán a nemá komentář (možná ještě změním podmínku, že pokud komentáře neobsahují zadání). Jen až pak budeš povídat něco o znásilněném ALITEO, tak si na to vzpomeň, jak takové věci asi vznikají. Se s dovolením opět odpojím."
    }
  ]
}